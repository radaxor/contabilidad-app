/*! For license information please see main.22bad72d.js.LICENSE.txt */
(()=>{"use strict";var e={579:(e,t,n)=>{e.exports=n(1153)},1153:(e,t,n)=>{var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},2284:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2730:(e,t,n)=>{var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(eU){var t=eU.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(tU){var r=tU}Reflect.construct(e,[],t)}else{try{t.call()}catch(tU){r=tU}e.call(t.prototype)}else{try{throw Error()}catch(tU){r=tU}e()}}catch(tU){if(tU&&r&&"string"===typeof tU.stack){for(var i=tU.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case T:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return V(e(t))}catch(eU){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(cU){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]})});var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function ke(e){if(e=wi(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),xe(e.stateNode,e.type,t))}}function Te(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ee(){if(_e){var e=_e,t=Se;if(Se=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ae(e,t){return e(t)}function Ne(){}var Ie=!1;function Ce(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ae(e,t,n)}finally{Ie=!1,(null!==_e||null!==Se)&&(Ne(),Ee())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Le=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Le=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch($B){Le=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(oU){this.onError(oU)}}var Re=!1,Me=null,Fe=!1,je=null,Be={onError:function(e){Re=!0,Me=e}};function Ue(e,t,n,r,i,s,a,o,l){Re=!1,Me=null,Oe.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(s(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ot|0)|0},at=Math.log,ot=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ut(o):0!==(s&=a)&&(r=ut(s))}else 0!==(a=n&~i)?r=ut(a):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,kt,Tt=!1,Et=[],At=null,Nt=null,It=null,Ct=new Map,Pt=new Map,Lt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Rt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void kt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ye=r,n.target.dispatchEvent(r),ye=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Tt=!1,null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==It&&Ft(It)&&(It=null),Ct.forEach(jt),Pt.forEach(jt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Ut(At,e),null!==Nt&&Ut(Nt,e),null!==It&&Ut(It,e),Ct.forEach(t),Pt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Lt.shift()}var Vt=w.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var i=bt,s=Vt.transition;Vt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Vt.transition=s}}function Ht(e,t,n,r){var i=bt,s=Vt.transition;Vt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Vt.transition=s}}function Gt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Rt(At,e,t,n,r,i),!0;case"dragenter":return Nt=Rt(Nt,e,t,n,r,i),!0;case"mouseover":return It=Rt(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ct.set(s,Rt(Ct.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Rt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(bn),wn=sn(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return kn}var En=F({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(En),Nn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Cn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Pn),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Mn,jn=u&&(!Rn||Mn&&8<Mn&&11>=Mn),Bn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Yn=null;function Xn(e){Br(e,0)}function $n(e){if(K(xi(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Zn;if(u){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}Zn=er}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Kn&&(Kn.detachEvent("onpropertychange",rr),Yn=Kn=null)}function rr(e){if("value"===e.propertyName&&$n(Yn)){var t=[];Gn(t,Yn,e,we(e)),Ce(Xn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Yn=n,(Kn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(iU){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=hr(n,s);var a=hr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,vr=null,br=null,yr=null,wr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==vr||vr!==Y(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Kr(br,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},kr={},Tr={};function Er(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return kr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Ar=Er("animationend"),Nr=Er("animationiteration"),Ir=Er("animationstart"),Cr=Er("transitionend"),Pr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),l(t,[e])}for(var Or=0;Or<Lr.length;Or++){var Rr=Lr[Or];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Ar,"onAnimationEnd"),Dr(Nr,"onAnimationIteration"),Dr(Ir,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Ue.apply(this,arguments),Re){if(!Re)throw Error(s(198));var u=Me;Re=!1,Me=null,Fe||(Fe=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;jr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;jr(i,o,c),s=l}}}if(Fe)throw e=je,Fe=!1,je=null,e}function Ur(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Fr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ce(function(){var r=s,i=we(n),a=[];e:{var o=Pr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Ar:case Nr:case Ir:l=vn;break;case Cr:l=Cn;break;case"scroll":l=dn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Gr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:xi(l),f=null==c?o:xi(c),(o=new u(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=d;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)d=Yr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Yr(u),d=Yr(d)}u=null}else u=null;null!==l&&Xr(a,o,l,u,!1),null!==c&&null!==h&&Xr(a,h,c,u,!0)}if("select"===(l=(o=r?xi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(Hn(o))if(Qn)g=or;else{g=sr;var v=ir}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?xi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(vr=v,br=r,yr=null);break;case"focusout":yr=br=vr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,xr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,i)}var b;if(Rn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else qn?zn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==y?"onCompositionEnd"===y&&qn&&(b=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,qn=!0)),0<(v=Kr(r,y)).length&&(y=new wn(y,e,null,n,i),a.push({event:y,listeners:v}),b?y.data=b:null!==(b=Vn(n))&&(y.data=b))),(b=Fn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Rn&&zn(e,t)?(e=en(),Qt=Jt=$t=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=b))}Br(a,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pe(n,s))&&a.unshift(Gr(n,l,o)):i||null!=(l=Pe(n,s))&&a.push(Gr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Jr,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(s(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,si="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(li)}:ii;function li(e){setTimeout(function(){throw e})}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,mi="__reactContainer$"+di,gi="__reactEvents$"+di,vi="__reactListeners$"+di,bi="__reactHandles$"+di;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hi(e);null!==e;){if(n=e[fi])return n;e=hi(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[fi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[pi]||null}var Si=[],ki=-1;function Ti(e){return{current:e}}function Ei(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function Ai(e,t){ki++,Si[ki]=e.current,e.current=t}var Ni={},Ii=Ti(Ni),Ci=Ti(!1),Pi=Ni;function Li(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ci),Ei(Ii)}function Ri(e,t,n){if(Ii.current!==Ni)throw Error(s(168));Ai(Ii,t),Ai(Ci,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Pi=Ii.current,Ai(Ii,e),Ai(Ci,Ci.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ci),Ei(Ii),Ai(Ii,e)):Ei(Ci),Ai(Ci,n)}var Bi=null,Ui=!1,zi=!1;function Vi(e){null===Bi?Bi=[e]:Bi.push(e)}function qi(){if(!zi&&null!==Bi){zi=!0;var e=0,t=bt;try{var n=Bi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,Ui=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ge(Qe,qi),i}finally{bt=t,zi=!1}}return null}var Wi=[],Hi=0,Gi=null,Ki=0,Yi=[],Xi=0,$i=null,Ji=1,Qi="";function Zi(e,t){Wi[Hi++]=Ki,Wi[Hi++]=Gi,Gi=e,Ki=t}function es(e,t,n){Yi[Xi++]=Ji,Yi[Xi++]=Qi,Yi[Xi++]=$i,$i=e;var r=Ji;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var s=32-st(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-st(t)+i|n<<i|r,Qi=s+e}else Ji=1<<s|n<<i|r,Qi=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Gi;)Gi=Wi[--Hi],Wi[Hi]=null,Ki=Wi[--Hi],Wi[Hi]=null;for(;e===$i;)$i=Yi[--Xi],Yi[Xi]=null,Qi=Yi[--Xi],Yi[Xi]=null,Ji=Yi[--Xi],Yi[Xi]=null}var rs=null,is=null,ss=!1,as=null;function os(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Ji,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=ui(n.nextSibling);var r=rs;t&&ls(e,t)?os(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!ss)return hs(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=is)){if(cs(e))throw fs(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ui(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=ui(e.nextSibling)}function ps(){is=rs=null,ss=!1}function ms(e){null===as?as=[e]:as.push(e)}var gs=w.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===L&&ys(s)===t.type)?((r=i(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case _:return(t=Bc(t,e.mode,n)).return=e,t;case L:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Mc(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case L:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:h(e,t,n,r,null);bs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return h(t,e=e.get(n)||null,r,i,null);bs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,o[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===o.length)return n(i,h),ss&&Zi(i,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return ss&&Zi(i,m),c}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),ss&&Zi(i,m),c}function g(i,o,l,c){var u=R(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=f(i,m,b.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(i,m),o=a(y,o,g),null===h?u=y:h.sibling=y,h=y,m=v}if(b.done)return n(i,m),ss&&Zi(i,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=d(i,b.value,c))&&(o=a(b,o,g),null===h?u=b:h.sibling=b,h=b);return ss&&Zi(i,g),u}for(m=r(i,m);!b.done;g++,b=l.next())null!==(b=p(m,i,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),o=a(b,o,g),null===h?u=b:h.sibling=b,h=b);return e&&m.forEach(function(e){return t(i,e)}),ss&&Zi(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=vs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((s=Mc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=vs(r,s,a),l.return=r,r=l)}return o(r);case _:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Bc(a,r.mode,l)).return=r,r=s}return o(r);case L:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(R(a))return g(r,s,a,l);bs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=jc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var xs=ws(!0),_s=ws(!1),Ss=Ti(null),ks=null,Ts=null,Es=null;function As(){Es=Ts=ks=null}function Ns(e){var t=Ss.current;Ei(Ss),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t){ks=e,Es=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===ks)throw Error(s(308));Ts=e,ks.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Ls=null;function Ds(e){null===Ls?Ls=[e]:Ls.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Fs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function js(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=h}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Gs=Ti(Hs),Ks=Ti(Hs),Ys=Ti(Hs);function Xs(e){if(e===Hs)throw Error(s(174));return e}function $s(e,t){switch(Ai(Ys,t),Ai(Ks,e),Ai(Gs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Gs),Ai(Gs,t)}function Js(){Ei(Gs),Ei(Ks),Ei(Ys)}function Qs(e){Xs(Ys.current);var t=Xs(Gs.current),n=le(t,e.type);t!==n&&(Ai(Ks,e),Ai(Gs,n))}function Zs(e){Ks.current===e&&(Ei(Gs),Ei(Ks))}var ea=Ti(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=w.ReactCurrentDispatcher,sa=w.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,ha=!1,da=0,fa=0;function pa(){throw Error(s(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:eo,e=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(s(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=to,e=n(r,i)}while(ha)}if(ia.current=Qa,t=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,t)throw Error(s(300));return e}function va(){var e=0!==da;return da=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=e:ca=ca.next=e,ca}function ya(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?oa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(s(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,oa.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,lr(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,oa.lanes|=a,Fl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);lr(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function ka(e,t){var n=oa,r=ya(),i=t(),a=!lr(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,Ma(Aa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Pa(9,Ea.bind(null,n,r,i,t),void 0,null),null===Cl)throw Error(s(349));0!==(30&aa)||Ta(n,t,i)}return i}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&Ia(e)}function Aa(e,t,n){return n(function(){Na(t)&&Ia(e)})}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(iU){return!0}}function Ia(e){var t=Rs(e,1);null!==t&&rc(t,e,1,-1)}function Ca(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,oa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function La(){return ya().memoizedState}function Da(e,t,n,r){var i=ba();oa.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Pa(t,n,s,r))}oa.flags|=e,i.memoizedState=Pa(1|t,n,s,r)}function Ra(e,t){return Da(8390656,8,e,t)}function Ma(e,t){return Oa(2048,8,e,t)}function Fa(e,t){return Oa(4,2,e,t)}function ja(e,t){return Oa(4,4,e,t)}function Ba(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Ba.bind(null,t,e),n)}function za(){}function Va(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(lr(n,t)||(n=pt(),oa.lanes|=n,Fl|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Ga(){return ya().memoizedState}function Ka(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))$a(t,n);else if(null!==(n=Os(e,t,n,r))){rc(n,e,r,tc()),Ja(n,t,r)}}function Ya(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))$a(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,lr(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(tU){}null!==(n=Os(e,t,i,r))&&(rc(n,e,r,i=tc()),Ja(n,t,r))}}function Xa(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function $a(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Qa={readContext:Ps,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Ps,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Ca,useDebugValue:za,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Ca(!1),t=e[0];return e=Ha.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oa,i=ba();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Cl)throw Error(s(349));0!==(30&aa)||Ta(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ra(Aa.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Cl.identifierPrefix;if(ss){var n=Qi;t=":"+t+"R"+(n=(Ji&~(1<<32-st(Ji)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:Va,useContext:Ps,useEffect:Ma,useImperativeHandle:Ua,useInsertionEffect:Fa,useLayoutEffect:ja,useMemo:qa,useReducer:xa,useRef:La,useState:function(){return xa(wa)},useDebugValue:za,useDeferredValue:function(e){return Wa(ya(),la.memoizedState,e)},useTransition:function(){return[xa(wa)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:Ga,unstable_isNewReconciler:!1},to={readContext:Ps,useCallback:Va,useContext:Ps,useEffect:Ma,useImperativeHandle:Ua,useInsertionEffect:Fa,useLayoutEffect:ja,useMemo:qa,useReducer:_a,useRef:La,useState:function(){return _a(wa)},useDebugValue:za,useDeferredValue:function(e){var t=ya();return null===la?t.memoizedState=e:Wa(t,la.memoizedState,e)},useTransition:function(){return[_a(wa)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:Ga,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Bs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(rc(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Bs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(rc(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Bs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(rc(t,e,r,n),zs(t,e,r))}};function so(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function ao(e,t,n){var r=!1,i=Ni,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Di(t)?Pi:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Li(e,i):Ni),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Di(t)?Pi:Ii.current,i.context=Li(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&io.enqueueReplaceState(i,i.state,null),qs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(rU){i="\nError generating stack: "+rU.message+"\n"+rU.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(eU){setTimeout(function(){throw eU})}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),ho(0,t)},n}function mo(e,t,n){(n=Bs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=w.ReactCurrentOwner,wo=!1;function xo(e,t,n,r){t.child=null===e?_s(t,null,n,r):xs(t,e.child,n,r)}function _o(e,t,n,r,i){n=n.render;var s=t.ref;return Cs(t,i),r=ga(e,t,n,r,s,i),n=va(),null===e||wo?(ss&&n&&ts(t),t.flags|=1,xo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function So(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return Ao(e,t,n,r,i)}function To(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ai(Ol,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ai(Ol,Dl),Dl|=r;return xo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,n,r,i){var s=Di(n)?Pi:Ii.current;return s=Li(t,s),Cs(t,i),n=ga(e,t,n,r,s,i),r=va(),null===e||wo?(ss&&r&&ts(t),t.flags|=1,xo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function No(e,t,n,r,i){if(Di(n)){var s=!0;Fi(t)}else s=!1;if(Cs(t,i),null===t.stateNode)Wo(e,t),ao(t,n,r),lo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Li(t,c=Di(n)?Pi:Ii.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,a,r,c),Ms=!1;var d=t.memoizedState;a.state=d,qs(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ci.current||Ms?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Ms||so(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,js(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Li(t,l=Di(n)?Pi:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&oo(t,a,r,l),Ms=!1,d=t.memoizedState,a.state=d,qs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ci.current||Ms?("function"===typeof f&&(ro(t,n,f,r),p=t.memoizedState),(c=Ms||so(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,s,i)}function Io(e,t,n,r,i,s){Eo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&ji(t,n,!1),Ho(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,o,s)):xo(e,t,o,s),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),$s(e,t.containerInfo)}function Po(e,t,n,r,i){return ps(),ms(i),t.flags|=256,xo(e,t,n,r),t.child}var Lo,Do,Oo,Ro,Mo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function jo(e,t,n){var r,i=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ai(ea,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,i,0,null),e=Mc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Mo,e):Bo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(a=Mc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xs(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=uo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Cl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Rs(e,i),rc(r,e,i,-1))}return gc(),Uo(e,t,o,r=uo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,is=ui(i.nextSibling),rs=t,ss=!0,as=null,null!==e&&(Yi[Xi++]=Ji,Yi[Xi++]=Qi,Yi[Xi++]=$i,Ji=e.id,Qi=e.overflow,$i=t),t=Bo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Oc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return e=(o=e.child).sibling,i=Oc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bo(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&ms(r),xs(t,e.child,null,n),(e=Bo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Vo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vo(t,!0,n,null,s);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Di(t.type)&&Oi(),Ko(t),null;case 3:return r=t.stateNode,Js(),Ei(Ci),Ei(Ii),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==as&&(oc(as),as=null))),Do(e,t),Ko(t),null;case 5:Zs(t);var i=Xs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Xs(Gs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[pi]=r,Lo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=X(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&y(e,a,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ys.current),Xs(Gs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ei(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[fi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==as&&(oc(as),as=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Js(),Do(e,t),null===e&&qr(t.stateNode.containerInfo),Ko(t),null;case 10:return Ns(t.type._context),Ko(t),null;case 19:if(Ei(ea),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Go(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Go(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>ql&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ss)return Ko(t),null}else 2*$e()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=ea.current,Ai(ea,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xo(e,t){switch(ns(t),t.tag){case 1:return Di(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ei(Ci),Ei(Ii),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ei(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ea),null;case 4:return Js(),null;case 10:return Ns(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Lo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Oo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xs(Gs.current);var s,a=null;switch(n){case"input":i=X(e,i),r=X(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var $o=!1,Jo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(iU){Tc(e,t,iU)}else n.current=null}function tl(e,t,n){try{n()}catch(iU){Tc(e,t,iU)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[gi],delete t[vi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(nU){}switch(n.tag){case 5:Jo||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),zt(e)):ci(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Jo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(nU){Tc(n,t,nU)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,fl(e,t,n),Jo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(a,o,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(tU){Tc(i,t,tU)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),bl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(Fz){Tc(e,e.return,Fz)}try{rl(5,e,e.return)}catch(Fz){Tc(e,e.return,Fz)}}break;case 1:gl(t,e),bl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),bl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(Fz){Tc(e,e.return,Fz)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?ue(i,d):"children"===h?he(i,d):y(i,h,d,u)}switch(l){case"input":Q(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(Fz){Tc(e,e.return,Fz)}}break;case 6:if(gl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(Fz){Tc(e,e.return,Fz)}}break;case 3:if(gl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(Fz){Tc(e,e.return,Fz)}break;case 4:default:gl(t,e),bl(e);break;case 13:gl(t,e),bl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=$e())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||h,gl(t,e),Jo=u):gl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Zo=e,h=e.child;null!==h;){for(d=Zo=h;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(Fz){Tc(r,n,Fz)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Zo=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(Fz){Tc(e,e.return,Fz)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(Fz){Tc(e,e.return,Fz)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),bl(e),4&r&&ml(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(On){Tc(e,e.return,On)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zo=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||$o;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=$o;var c=Jo;if($o=a,(Jo=l)&&!c)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Zo=l):Sl(i);for(;null!==s;)Zo=s,wl(s,t,n),s=s.sibling;Zo=i,$o=o,Jo=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):xl(e)}}function xl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ws(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&sl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function _l(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Sl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(On){Tc(t,n,On)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(On){Tc(t,i,On)}}var s=t.return;try{sl(t)}catch(On){Tc(t,s,On)}break;case 5:var a=t.return;try{sl(t)}catch(On){Tc(t,a,On)}}}catch(On){Tc(t,t.return,On)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var kl,Tl=Math.ceil,El=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,Nl=w.ReactCurrentBatchConfig,Il=0,Cl=null,Pl=null,Ll=0,Dl=0,Ol=Ti(0),Rl=0,Ml=null,Fl=0,jl=0,Bl=0,Ul=null,zl=null,Vl=0,ql=1/0,Wl=null,Hl=!1,Gl=null,Kl=null,Yl=!1,Xl=null,$l=0,Jl=0,Ql=null,Zl=-1,ec=0;function tc(){return 0!==(6&Il)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Ll?Ll&-Ll:null!==gs.transition?(0===ec&&(ec=pt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Ql=null,Error(s(185));gt(e,n,r),0!==(2&Il)&&e===Cl||(e===Cl&&(0===(2&Il)&&(jl|=n),4===Rl&&lc(e,Ll)),ic(e,r),1===n&&0===Il&&0===(1&t.mode)&&(ql=$e()+500,Ui&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-st(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=dt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Cl?Ll:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),oi(function(){0===(6&Il)&&qi()}),n=null;else{switch(yt(r)){case 1:n=Qe;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Cc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cl?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Il;Il|=2;var a=mc();for(Cl===e&&Ll===t||(Wl=null,ql=$e()+500,fc(e,t));;)try{yc();break}catch(nU){pc(e,nU)}As(),El.current=a,Il=i,null!==Pl?t=0:(Cl=null,Ll=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,$e()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(a=ft(e))&&(r=a,t=ac(e,a))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,zl,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Vl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(_c.bind(null,e,zl,Wl),t);break}_c(e,zl,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ii(_c.bind(null,e,zl,Wl),r);break}_c(e,zl,Wl);break;default:throw Error(s(329))}}}return ic(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=zl,zl=n,null!==t&&oc(t)),e}function oc(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Bl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Il))throw Error(s(327));Sc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zl,Wl),ic(e,$e()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(ql=$e()+500,Ui&&qi())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&Il)&&Sc();var t=Il;Il|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(Il=t))&&qi()}}function dc(){Dl=Ol.current,Ei(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,si(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Js(),Ei(Ci),Ei(Ii),ra();break;case 5:Zs(r);break;case 4:Js();break;case 13:case 19:Ei(ea);break;case 10:Ns(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Cl=e,Pl=e=Oc(e.current,null),Ll=Dl=t,Rl=0,Ml=null,Bl=jl=Fl=0,zl=Ul=null,null!==Ls){for(t=0;t<Ls.length;t++)if(null!==(r=(n=Ls[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ls=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(As(),ia.current=Qa,ua){for(var r=oa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=oa=null,ha=!1,da=0,Al.current=null,null===n||null===n.return){Rl=1,Ml=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=vo(o);if(null!==p){p.flags&=-257,bo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var v=vo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),bo(v,o,l,0,t),ms(co(c,l));break e}}a=c=co(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,po(0,c,t));break e;case 1:l=c;var b=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Kl||!Kl.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function mc(){var e=El.current;return El.current=Qa,null===e?Qa:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Cl||0===(268435455&Fl)&&0===(268435455&jl)||lc(Cl,Ll)}function vc(e,t){var n=Il;Il|=2;var r=mc();for(Cl===e&&Ll===t||(Wl=null,fc(e,t));;)try{bc();break}catch(i){pc(e,i)}if(As(),Il=n,El.current=r,null!==Pl)throw Error(s(261));return Cl=null,Ll=0,Rl}function bc(){for(;null!==Pl;)wc(Pl)}function yc(){for(;null!==Pl&&!Ye();)wc(Pl)}function wc(e){var t=kl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?xc(e):Pl=t,Al.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Dl)))return void(Pl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Rl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Rl&&(Rl=5)}function _c(e,t,n){var r=bt,i=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Xl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Cl&&(Pl=Cl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Cc(et,function(){return Sc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Nl.transition,Nl.transition=null;var o=bt;bt=1;var l=Il;Il|=4,Al.current=null,function(e,t){if(ti=qt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Zt){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},qt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(Zt){Tc(t,t.return,Zt)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),vl(n,e),mr(ni),qt=!!ti,ni=ti=null,e.current=n,yl(n,e,i),Xe(),Il=l,bt=o,Nl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,$l=i),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&$l)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Ql?Jl++:(Jl=0,Ql=e):Jl=0,qi()}(e,t,n,r)}finally{Nl.transition=i,bt=r}return null}function Sc(){if(null!==Xl){var e=yt($l),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,$l=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var h=Zo;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zo=d;else for(;null!==Zo;){var f=(h=Zo).sibling,p=h.return;if(al(h),h===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Zo=b;break e}Zo=a.return}}var y=e.current;for(Zo=y;null!==Zo;){var w=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Zo=w;else e:for(o=y;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Tc(l,l.return,_)}if(l===o){Zo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Zo=x;break e}Zo=l.return}}if(Il=i,qi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(_){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function kc(e,t,n){e=Us(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Us(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(Ll&n)===n&&(4===Rl||3===Rl&&(130023424&Ll)===Ll&&500>$e()-Vl?fc(e,0):Bl|=n),ic(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tc();null!==(e=Rs(e,t))&&(gt(e,t,n),ic(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ac(e,n)}function Cc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Mc(n.children,i,a,t);case k:o=8,i|=8;break;case T:return(e=Lc(12,n,t,2|i)).elementType=T,e.lanes=a,e;case I:return(e=Lc(13,n,t,i)).elementType=I,e.lanes=a,e;case C:return(e=Lc(19,n,t,i)).elementType=C,e.lanes=a,e;case D:return Fc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case A:o=9;break e;case N:o=11;break e;case P:o=14;break e;case L:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Lc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Lc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Lc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(s),e}function Vc(e){if(!e)return Ni;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Mi(e,n,t)}return t}function qc(e,t,n,r,i,s,a,o,l){return(e=zc(n,r,!0,e,0,s,0,o,l)).context=Vc(null),n=e.current,(s=Bs(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,gt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),a=nc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(rc(e,i,a,s),zs(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Co(t),ps();break;case 5:Qs(t);break;case 1:Di(t.type)&&Fi(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?jo(e,t,n):(Ai(ea,1&ea.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ai(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n)}return Ho(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,ss&&0!==(1048576&t.flags)&&es(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var i=Li(t,Ii.current);Cs(t,n),i=ga(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(a=!0,Fi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fs(t),i.updater=io,t.stateNode=i,i._reactInternals=t,lo(t,r,e,n),t=Io(null,t,r,!0,a,n)):(t.tag=0,ss&&a&&ts(t),xo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(r),e=no(r,e),i){case 0:t=Ao(null,t,r,e,n);break e;case 1:t=No(null,t,r,e,n);break e;case 11:t=_o(null,t,r,e,n);break e;case 14:t=So(null,t,r,no(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:no(r,i),n);case 1:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:no(r,i),n);case 3:e:{if(Co(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,js(e,t),qs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=Po(e,t,r,n,i=co(Error(s(424)),t));break e}for(is=ui(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,as=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ho(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Qs(t),null===e&&us(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ri(r,i)?o=null:null!==a&&ri(r,a)&&(t.flags|=32),Eo(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return jo(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xs(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:no(r,i),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ai(Ss,r._currentValue),r._currentValue=o,null!==a)if(lr(a.value,o)){if(a.children===i.children&&!Ci.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Bs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Is(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cs(t,n),r=r(i=Ps(i)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return i=no(r=t.type,t.pendingProps),So(e,t,r,i=no(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:no(r,i),Wo(e,t),t.tag=1,Di(r)?(e=!0,Fi(t)):e=!1,Cs(t,n),ao(t,r,i),lo(t,r,i,n),Io(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return To(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[mi]=a.current,qr(8===e.nodeType?e.parentNode:e),hc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[mi]=l.current,qr(8===e.nodeType?e.parentNode:e),hc(function(){Wc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(a)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc(function(){Wc(null,e,null,null)}),t[mi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,$e()),0===(6&Il)&&(ql=$e()+500,qi()))}break;case 13:hc(function(){var t=Rs(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Kc(e,1)}},xt=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Rs(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},St=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),Q(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[wi,xi,_i,Te,Ee,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(ru),it=iu}catch($B){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,a,o),e[mi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=y.prototype=new b;w.constructor=y,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+N(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+N(o=e[c],c);l+=I(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,u=s+N(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},D={transition:null},O={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=y,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4980:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(2284);function i(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5043:(e,t,n)=>{e.exports=n(4202)},7234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(_);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,b(E),E=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,T=null,E=-1,A=5,N=-1;function I(){return!(t.unstable_now()-N<A)}function C(){if(null!==T){var e=t.unstable_now();N=e;var n=!0;try{n=T(!0,e)}finally{n?S():(k=!1,T=null)}}else k=!1}if("function"===typeof y)S=function(){y(C)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=C,S=function(){L.postMessage(null)}}else S=function(){v(C,0)};function D(e){T=e,k||(k=!0,S())}function O(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(E),E=-1):g=!0,O(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8853:(e,t,n)=>{e.exports=n(7234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{239:"dae43974",455:"087d3f71",977:"d3347171"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="contabilidad-app:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/contabilidad-app/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,[a,o,l]=r,c=0;if(a.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkcontabilidad_app=self.webpackChunkcontabilidad_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{FirebaseError:()=>O,SDK_VERSION:()=>mt,_DEFAULT_ENTRY_NAME:()=>Je,_addComponent:()=>nt,_addOrOverwriteComponent:()=>rt,_apps:()=>Ze,_clearComponents:()=>ut,_components:()=>tt,_getProvider:()=>st,_isFirebaseApp:()=>ot,_isFirebaseServerApp:()=>ct,_isFirebaseServerAppSettings:()=>lt,_registerComponent:()=>it,_removeServiceInstance:()=>at,_serverApps:()=>et,deleteApp:()=>wt,getApp:()=>bt,getApps:()=>yt,initializeApp:()=>gt,initializeServerApp:()=>vt,onLog:()=>_t,registerVersion:()=>xt,setLogLevel:()=>St});var i=n(5043),s=n(4391),a=n(4980);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new h;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d=function(e){return function(e){const t=c(e);return u.encodeByteArray(t,!0)}(e).replace(/\./g,"")},f=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&m(n)&&(e[n]=p(e[n],t[n]));return e}function m(e){return"__proto__"!==e}function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const v=()=>{try{return g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/contabilidad-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDiI5kjSiaCnJiegGkhGKYnVLY1tgfdlkk",REACT_APP_FIREBASE_APP_ID:"1:182572888659:web:e5f8366b0003a6a87bcca6",REACT_APP_FIREBASE_AUTH_DOMAIN:"contabilidad-app-4cd29.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"182572888659",REACT_APP_FIREBASE_PROJECT_ID:"contabilidad-app-4cd29",REACT_APP_FIREBASE_STORAGE_BUCKET:"contabilidad-app-4cd29.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&f(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},b=()=>{var e;return null===(e=v())||void 0===e?void 0:e.config};class y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function w(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function x(e){return(await fetch(e,{credentials:"include"})).ok}const _={};let S=!1;function k(e,t){if("undefined"===typeof window||"undefined"===typeof document||!w(window.location.host)||_[e]===t||_[e]||S)return;function n(e){return"__firebase__banner__".concat(e)}_[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(_))_[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{S=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function E(){var e;const t=null===(e=v())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function A(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function N(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function I(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function C(){const e=T();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function P(){return!E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){return!E()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function D(){try{return"object"===typeof indexedDB}catch(e){return!1}}class O extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,O.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(M,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new O(n,s,t)}}const M=/\{\$([^}]+)}/g;function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(B(n)&&B(s)){if(!j(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function B(e){return null!==e&&"object"===typeof e}function U(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function z(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function V(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function q(e,t){const n=new W(e,t);return n.subscribe.bind(n)}class W{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H(){}function G(e){return e&&e._delegate?e._delegate:e}class K{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Y="[DEFAULT]";class X{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new y;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Y})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Y?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.component?this.component.multipleInstances?e:Y:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new X(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Q=[];var Z;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Z||(Z={}));const ee={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},te=Z.INFO,ne={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},re=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ne[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ie{constructor(e){this.name=e,this._logLevel=te,this._logHandler=re,this._userLogHandler=null,Q.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...t),this._logHandler(this,Z.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...t),this._logHandler(this,Z.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.INFO,...t),this._logHandler(this,Z.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.WARN,...t),this._logHandler(this,Z.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...t),this._logHandler(this,Z.ERROR,...t)}}let se,ae;const oe=new WeakMap,le=new WeakMap,ce=new WeakMap,ue=new WeakMap,he=new WeakMap;let de={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return le.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return me(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function fe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ge(this),n),me(oe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return me(e.apply(ge(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ge(this),t,...r);return ce.set(s,t.sort?t.sort():[t]),me(s)}}function pe(e){return"function"===typeof e?fe(e):(e instanceof IDBTransaction&&function(e){if(le.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});le.set(e,t)}(e),t=e,(se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,de):e);var t}function me(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(me(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&oe.set(t,e)}).catch(()=>{}),he.set(t,e),t}(e);if(ue.has(e))return ue.get(e);const t=pe(e);return t!==e&&(ue.set(e,t),he.set(t,e)),t}const ge=e=>he.get(e);const ve=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],ye=new Map;function we(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ye.get(t))return ye.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=be.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ve.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return ye.set(t,s),s}!function(e){de=e(de)}(e=>l(l({},e),{},{get:(t,n,r)=>we(t,n)||e.get(t,n,r),has:(t,n)=>!!we(t,n)||e.has(t,n)}));class xe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const _e="@firebase/app",Se="0.14.4",ke=new ie("@firebase/app"),Te="@firebase/app-compat",Ee="@firebase/analytics-compat",Ae="@firebase/analytics",Ne="@firebase/app-check-compat",Ie="@firebase/app-check",Ce="@firebase/auth",Pe="@firebase/auth-compat",Le="@firebase/database",De="@firebase/data-connect",Oe="@firebase/database-compat",Re="@firebase/functions",Me="@firebase/functions-compat",Fe="@firebase/installations",je="@firebase/installations-compat",Be="@firebase/messaging",Ue="@firebase/messaging-compat",ze="@firebase/performance",Ve="@firebase/performance-compat",qe="@firebase/remote-config",We="@firebase/remote-config-compat",He="@firebase/storage",Ge="@firebase/storage-compat",Ke="@firebase/firestore",Ye="@firebase/ai",Xe="@firebase/firestore-compat",$e="firebase",Je="[DEFAULT]",Qe={[_e]:"fire-core",[Te]:"fire-core-compat",[Ae]:"fire-analytics",[Ee]:"fire-analytics-compat",[Ie]:"fire-app-check",[Ne]:"fire-app-check-compat",[Ce]:"fire-auth",[Pe]:"fire-auth-compat",[Le]:"fire-rtdb",[De]:"fire-data-connect",[Oe]:"fire-rtdb-compat",[Re]:"fire-fn",[Me]:"fire-fn-compat",[Fe]:"fire-iid",[je]:"fire-iid-compat",[Be]:"fire-fcm",[Ue]:"fire-fcm-compat",[ze]:"fire-perf",[Ve]:"fire-perf-compat",[qe]:"fire-rc",[We]:"fire-rc-compat",[He]:"fire-gcs",[Ge]:"fire-gcs-compat",[Ke]:"fire-fst",[Xe]:"fire-fst-compat",[Ye]:"fire-vertex","fire-js":"fire-js",[$e]:"fire-js-all"},Ze=new Map,et=new Map,tt=new Map;function nt(e,t){try{e.container.addComponent(t)}catch(n){ke.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function rt(e,t){e.container.addOrOverwriteComponent(t)}function it(e){const t=e.name;if(tt.has(t))return ke.debug("There were multiple attempts to register component ".concat(t,".")),!1;tt.set(t,e);for(const n of Ze.values())nt(n,e);for(const n of et.values())nt(n,e);return!0}function st(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function at(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Je;st(e,t).clearInstance(n)}function ot(e){return void 0!==e.options}function lt(e){return!ot(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}function ct(e){return null!==e&&void 0!==e&&void 0!==e.settings}function ut(){tt.clear()}const ht=new R("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class dt{constructor(e,t,n){this._isDeleted=!1,this._options=l({},e),this._config=l({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new K("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ht.create("app-deleted",{appName:this._name})}}function ft(e,t){const n=f(e.split(".")[1]);if(null===n)return void console.error("FirebaseServerApp ".concat(t," is invalid: second part could not be parsed."));if(void 0===JSON.parse(n).exp)return void console.error("FirebaseServerApp ".concat(t," is invalid: expiration claim could not be parsed"));1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error("FirebaseServerApp ".concat(t," is invalid: the token has expired."))}class pt extends dt{constructor(e,t,n,r){const i=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=l({automaticDataCollectionEnabled:i},t),this._serverConfig.authIdToken&&ft(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&ft(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,xt(_e,Se,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){wt(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ht.create("server-app-deleted")}}const mt="12.4.0";function gt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=l({name:Je,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw ht.create("bad-app-name",{appName:String(i)});if(n||(n=b()),!n)throw ht.create("no-options");const s=Ze.get(i);if(s){if(j(n,s.options)&&j(r,s.config))return s;throw ht.create("duplicate-app",{appName:i})}const a=new J(i);for(const l of tt.values())a.addComponent(l);const o=new dt(n,r,a);return Ze.set(i,o),o}function vt(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(("undefined"!==typeof window||A())&&!A())throw ht.create("invalid-server-app-environment");let r=n||{};if(e&&(ot(e)?t=e.options:lt(e)?r=e:t=e),void 0===r.automaticDataCollectionEnabled&&(r.automaticDataCollectionEnabled=!0),t||(t=b()),!t)throw ht.create("no-options");const i=l(l({},r),t);void 0!==i.releaseOnDeref&&delete i.releaseOnDeref;if(void 0!==r.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw ht.create("finalization-registry-not-supported",{});const s=""+(e=>[...e].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0))(JSON.stringify(i)),a=et.get(s);if(a)return a.incRefCount(r.releaseOnDeref),a;const o=new J(s);for(const l of tt.values())o.addComponent(l);const c=new pt(t,r,s,o);return et.set(s,c),c}function bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;const t=Ze.get(e);if(!t&&e===Je&&b())return gt();if(!t)throw ht.create("no-app",{appName:e});return t}function yt(){return Array.from(Ze.values())}async function wt(e){let t=!1;const n=e.name;if(Ze.has(n))t=!0,Ze.delete(n);else if(et.has(n)){e.decRefCount()<=0&&(et.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function xt(e,t,n){var r;let i=null!==(r=Qe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ke.warn(e.join(" "))}it(new K("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}function _t(e,t){if(null!==e&&"function"!==typeof e)throw ht.create("invalid-log-argument");!function(e,t){for(const n of Q){let r=null;t&&t.level&&(r=ee[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];const o=s.map(e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Z[n].toLowerCase(),message:o,args:s,type:t.name})}}}(e,t)}function St(e){var t;t=e,Q.forEach(e=>{e.setLogLevel(t)})}const kt="firebase-heartbeat-store";let Tt=null;function Et(){return Tt||(Tt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=me(a);return r&&a.addEventListener("upgradeneeded",e=>{r(me(a.result),e.oldVersion,e.newVersion,me(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(kt)}catch(n){console.warn(n)}}}).catch(e=>{throw ht.create("idb-open",{originalErrorMessage:e.message})})),Tt}async function At(e,t){try{const n=(await Et()).transaction(kt,"readwrite"),r=n.objectStore(kt);await r.put(t,Nt(e)),await n.done}catch(n){if(n instanceof O)ke.warn(n.message);else{const e=ht.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ke.warn(e.message)}}}function Nt(e){return"".concat(e.name,"!").concat(e.options.appId)}class It{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ct();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ke.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ct(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Lt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Lt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=d(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ke.warn(t),""}}}function Ct(){return(new Date).toISOString().substring(0,10)}class Pt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!D()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Et()).transaction(kt),n=await t.objectStore(kt).get(Nt(e));return await t.done,n}catch(t){if(t instanceof O)ke.warn(t.message);else{const e=ht.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ke.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return At(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return At(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Lt(e){return d(JSON.stringify({version:2,heartbeats:e})).length}var Dt;Dt="",it(new K("platform-logger",e=>new xe(e),"PRIVATE")),it(new K("heartbeat",e=>new It(e),"PRIVATE")),xt(_e,Se,Dt),xt(_e,Se,"esm2020"),xt("fire-js","");class Ot{constructor(e,t){this._delegate=e,this.firebase=t,nt(e,new K("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),wt(this._delegate)))}_getService(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){nt(this._delegate,e)}_addOrOverwriteComponent(e){rt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Rt=new R("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Mt=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=gt(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(F(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:xt,setLogLevel:St,onLog:_t,apps:null,SDK_VERSION:mt,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(it(t)&&"PUBLIC"===t.type){const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Rt.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&p(a,t.serviceProps),n[s]=a,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!F(t,e=e||Je))throw Rt.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(Ot);return t.INTERNAL=l(l({},t.INTERNAL),{},{createFirebaseNamespace:e,extendNamespace:function(e){p(t,e)},createSubscribe:q,ErrorFactory:R,deepExtend:p}),t}(),Ft=new ie("@firebase/app-compat");try{const e=g();if(void 0!==e.firebase){Ft.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Ft.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(D$){}const jt=Mt;!function(e){xt("@firebase/app-compat","0.5.4",e)}();jt.registerVersion("firebase","12.4.0","app-compat");var Bt,Ut,zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return d(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=v(n),r=v(r);var i=b(n,1),s=b(r,1);for(r=b(r,2),n=b(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=b(r,1),n=b(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=a(n)).j(t);h(c)||c.l(e)>0;)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function b(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),a=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=s*o,p(n,2*i+2*t),n[2*i+2*t+1]+=r*o,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Ut=Vt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+s),n);s<8?(s=a(Math.pow(n,s)),i=i.j(s).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},Bt=Vt.Integer=r}).apply("undefined"!==typeof zt?zt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var qt,Wt,Ht,Gt,Kt,Yt,Xt,$t,Jt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Qt={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Jt&&Jt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let b,y=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);b=()=>{e.then(_)}};function _(){for(var e;e=m();){try{e.h.call(e.g)}catch(eU){p(eU)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}y=!1}function S(){this.u=this.u,this.C=this.C}function k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(eU){}return e}();function E(e){return/^[\s\xa0]*$/.test(e)}function A(e,t){k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(A,k),A.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&A.Z.h.call(this)},A.prototype.h=function(){A.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N="closure_listenable_"+(1e6*Math.random()|0),I=0;function C(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function L(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){this.src=e,this.g={},this.h=0}function F(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function j(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}M.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=j(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new C(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),U={};function z(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=$(n),e&&e[N]?e.J(t,n,a(r)?!!r.capture:!!r,i):V(e,t,n,!1,r,i)}function V(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=Y(e);if(l||(e[B]=l=new M(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)T||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=$(n),e&&e[N]?e.K(t,n,a(r)?!!r.capture:!!r,i):V(e,t,n,!0,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=$(n),e&&e[N]?(e=e.i,(s=String(t).toString())in e.g&&((n=j(t=e.g[s],n,r,i))>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=j(t,n,r,i)),(n=e>-1?t[e]:null)&&H(n))}function H(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[N])F(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(F(n,e),0==n.h&&(n.src=null,t[B]=null)):P(e)}}}function G(e){return e in U?U[e]:U[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new A(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&H(e),e=n.call(r,t)}return e}function Y(e){return(e=e[B])instanceof M?e:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function $(e){return"function"===typeof e?e:(e[X]||(e[X]=function(t){return e.handleEvent(t)}),e[X])}function J(){S.call(this),this.i=new M(this),this.M=this,this.G=null}function Q(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new k(t,e);else if(t instanceof k)t.target=t.target||e;else{var i=t;R(t=new k(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&F(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,S),J.prototype[N]=!0,J.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)P(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var re=[];function ie(e){L(e.g,function(e,t){this.g.hasOwnProperty(t)&&H(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,ae=s.JSON.parse,oe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){k.call(this,"d")}function de(){k.call(this,"c")}u(he,k),u(de,k);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){k.call(this,fe.Ia,e)}function ve(e){const t=me();Q(t,new ge(t))}function be(e,t){k.call(this,fe.STAT_EVENT,e),this.stat=t}function ye(e){const t=me();Q(t,new be(t,e))}function we(e,t){k.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function _e(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(rU){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,k),fe.STAT_EVENT="statevent",u(be,k),fe.Ja="timingevent",u(we,k),_e.prototype.ua=function(){this.g=!1},_e.prototype.info=function(){};var ke,Te={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ee={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ae(){}function Ne(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ce(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}u(Ae,le),Ae.prototype.g=function(){return new XMLHttpRequest},ke=new Ae;var Le={},De={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,Re(e,null)}function Re(e,t){e.F=Date.now(),je(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),yt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Pe,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Me(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Fe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function je(e){e.T=Date.now()+e.H,Be(e,e.H)}function Be(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ue(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||dn(e.j,e)}function Ve(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ye(n.h,e)))if(!e.L&&Ye(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(oU){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),Zt(n)}ln(n),ye(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else pn(n,11)}else if((e.L||n.g==e)&&hn(n),!E(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Xe(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=gn(r,r.L?r.ba:null,r.W),a.L){$e(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Ue(o),je(o)),r.g=a}else on(r);n.i.length>0&&nn(n)}else"stop"!=l[0]&&"close"!=l[0]||pn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?pn(n,7):Vt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve()}catch(oU){}}Ce.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==jt(e)?t.j():this.Y(e)},Ce.prototype.Y=function(e){try{if(e==this.g)e:{const l=jt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Bt(this.g)))){this.K||4!=l||7==c||ve(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Me(e))return e.g.la();const t=Bt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==jt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Ve(e),ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,ye(12),Ve(this),ze(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Fe(this,n),t==De){4==l&&(this.m=4,ye(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Le){this.m=4,ye(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),qe(this,t)}if(Me(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,ye(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),cn(o),o.P=!0,ye(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Ve(this),ze(this)}else Se(this.i,this.l,n,null),qe(this,n);4==l&&Ve(this),this.o&&!this.K&&(4==l?dn(this.j,this):(this.o=!1,je(this)))}else(function(e){const t={};e=(e.g&&jt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(E(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,ye(12)):(this.m=0,ye(13)),Ve(this),ze(this)}}}catch(On){}},Ce.prototype.cancel=function(){this.K=!0,Ve(this)},Ce.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),ye(17)),Ve(this),this.m=2,ze(this)):Be(this,this.T-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function He(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Xe(e,t){e.g?e.g.add(t):e.h=t}function $e(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}He.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Qe))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),yt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,dt)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Ne(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?ht:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function bt(e,t){mt(e);let n=[];if("string"===typeof t)vt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function yt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),d(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _t(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(rU){}}function St(){this.g=new oe}function kt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Tt(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Et(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function At(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return L(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ct(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&Ne(n):it(e,t,n))}function Pt(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,vt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=bt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ne(n);n=bt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ne(n[t])),e.push(r)}}return this.i=e.join("&")},u(kt,le),kt.prototype.g=function(){return new Tt(this.i,this.h)},u(Tt,J),(e=Tt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,At(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Et(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?At(this):Nt(this),3==this.readyState&&Et(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,At(this))},e.Na=function(e){this.g&&(this.response=e,At(this))},e.ga=function(){this.g&&At(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Tt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Pt,J);var Lt=/^https?$/i,Dt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Rt(e),Ft(e)}function Rt(e){e.A||(e.A=!0,Q(e,"complete"),Q(e,"error"))}function Mt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==jt(e))setTimeout(e.Ca.bind(e),0);else if(Q(e,"readystatechange"),4==jt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Qe)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Lt.test(t?t.toLowerCase():"")}n=r}if(n)Q(e,"complete"),Q(e,"success");else{e.o=6;try{var a=jt(e)>2?e.g.statusText:""}catch(aU){a=""}e.l=a+" ["+e.ca()+"]",Rt(e)}}finally{Ft(e)}}}function Ft(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const n=e.g;e.g=null,t||Q(e,"ready");try{n.onreadystatechange=null}catch(iU){}}}function jt(e){return e.g?e.g.readyState:0}function Bt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(cU){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new _e,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new He(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Vt(e){if(tn(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),sn(e,n),(t=new Ce(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(iU){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),je(t)}mn(e)}function Zt(e){e.g&&(cn(e),e.g.cancel(),e.g=null)}function tn(e){Zt(e),e.v&&(s.clearTimeout(e.v),e.v=null),hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function nn(e){if(!Ge(e.h)&&!e.m){e.m=!0;var t=e.Ea;b||x(),y||(b(),y=!0),w.add(t,e),e.D=0}}function rn(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),sn(e,r),e.u&&e.o&&Ct(r,e.u,e.o),n=new Ce(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=an(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Xe(e.h,n),Oe(n,r,t)}function sn(e,t){e.H&&L(e.H,function(e,n){it(t,n,e)}),e.l&&L({},function(e,n){it(t,n,e)})}function an(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(en){throw e.push(s+"type="+encodeURIComponent("_badmap")),en}}catch(en){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function on(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;b||x(),y||(b(),y=!0),w.add(t,e),e.A=0}}function ln(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),fn(e,e.A)),e.A++,!0)}function cn(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function un(e){e.g=new Ce(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),sn(e,t),e.u&&e.o&&Ct(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,Re(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function dn(e,t){var n=null;if(e.g==t){hn(e),cn(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.G,$e(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;Q(r=me(),new we(r,n)),nn(e)}else on(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),fn(e,e.D)),e.D++,!0))}(e,t)||2==r&&ln(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:pn(e,5);break;case 4:pn(e,10);break;case 3:pn(e,6);break;default:pn(e,2)}}function fn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function pn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new _e;if(s.Image){const r=new Image;r.onload=c(_t,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(_t,n,"TestLoadImage: error",!1,t,r),r.onabort=c(_t,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(_t,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new _e;const n=new AbortController,r=setTimeout(()=>{n.abort(),_t(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?_t(0,0,!0,t):_t(0,0,!1,t)}).catch(()=>{clearTimeout(r),_t(0,0,!1,t)})}(r.toString(),n)}else ye(2);e.I=0,e.l&&e.l.pa(t),mn(e),tn(e)}function mn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function gn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),sn(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Pt(new kt({ab:n})):new Pt(e.ma)).Fa(e.L),t}function bn(){}function yn(){}function wn(e,t){J.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!E(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Sn(this)}function xn(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _n(){de.call(this),this.status=1}function Sn(e){this.g=e}(e=Pt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ke.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(rU){return void Ot(this,rU)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(rU){Ot(this,rU)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Q(this,"complete"),Q(this,"abort"),Ft(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ft(this,!0)),Pt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Mt(this):this.Xa())},e.Xa=function(){Mt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return jt(this)>2?this.g.status:-1}catch($B){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch($B){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){ye(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=gn(this,null,this.W),nn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ce(this,this.j,e);let s=this.o;if(this.U&&(s?(s=D(s),R(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=an(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),sn(this,n),s&&(this.R?t="headers="+Ne(It(s))+"&"+t:this.u&&Ct(n,this.u,s)),Xe(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?rn(this,e):0==this.i.length||Ge(this.h)||rn(this))},e.Da=function(){if(this.v=null,un(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ye(10),Zt(this),un(this))},e.Va=function(){null!=this.C&&(this.C=null,Zt(this),ln(this),ye(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},yn.prototype.g=function(e,t){return new wn(e,t)},u(wn,J),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Vt(this.g)},wn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.I&&nn(t)},wn.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,wn.Z.N.call(this)},u(xn,he),u(_n,de),u(Sn,bn),Sn.prototype.ra=function(){Q(this.g,"a")},Sn.prototype.qa=function(e){Q(this.g,new xn(e))},Sn.prototype.pa=function(e){Q(this.g,new _n)},Sn.prototype.oa=function(){Q(this.g,"b")},yn.prototype.createWebChannel=yn.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,$t=Qt.createWebChannelTransport=function(){return new yn},Xt=Qt.getStatEventTarget=function(){return me()},Yt=Qt.Event=fe,Kt=Qt.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,Gt=Qt.ErrorCode=Te,Ee.COMPLETE="complete",Ht=Qt.EventType=Ee,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,Wt=Qt.WebChannel=ce,Qt.FetchXmlHttpFactory=kt,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,qt=Qt.XhrIo=Pt}).apply("undefined"!==typeof Jt?Jt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Zt="@firebase/firestore",en="4.9.2";class tn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");let nn="12.3.0";const rn=new ie("@firebase/firestore");function sn(){return rn.logLevel}function an(e){if(rn.logLevel<=Z.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(cn);rn.debug("Firestore (".concat(nn,"): ").concat(e),...i)}}function on(e){if(rn.logLevel<=Z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(cn);rn.error("Firestore (".concat(nn,"): ").concat(e),...i)}}function ln(e){if(rn.logLevel<=Z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(cn);rn.warn("Firestore (".concat(nn,"): ").concat(e),...i)}}function cn(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Fz){return e}}function un(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,hn(e,r,n)}function hn(e,t,n){let r="FIRESTORE (".concat(nn,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw on(r),new Error(r)}function dn(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||hn(t,i,r)}function fn(e,t){return e}const pn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mn extends O{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class gn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class bn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tn.UNAUTHENTICATED))}shutdown(){}}class yn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wn{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dn(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gn,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{an("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(an("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gn)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(an("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(dn("string"==typeof t.accessToken,31837,{l:t}),new vn(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dn(null===e||"string"==typeof e,2055,{h:e}),new tn(e)}}class xn{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _n{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new xn(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kn{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dn(void 0===this.o,3512);const n=e=>{null!=e.error&&an("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,an("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{an("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):an("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sn(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(dn("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Sn(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Tn(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class En{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Tn(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function An(e,t){return e<t?-1:e>t?1:0}function Nn(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Pn(n)===Pn(i)?An(n,i):Pn(n)?1:-1}return An(e.length,t.length)}const In=55296,Cn=57343;function Pn(e){const t=e.charCodeAt(0);return t>=In&&t<=Cn}function Ln(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Dn(e){return e+"\0"}const On="__name__";class Rn{constructor(e,t,n){void 0===t?t=0:t>e.length&&un(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&un(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Rn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Rn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return An(e.length,t.length)}static compareSegments(e,t){const n=Rn.isNumericId(e),r=Rn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Rn.extractNumericId(e).compare(Rn.extractNumericId(t)):Nn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bt.fromString(e.substring(4,e.length-2))}}class Mn extends Rn{construct(e,t,n){return new Mn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new mn(pn.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Mn(e)}static emptyPath(){return new Mn([])}}const Fn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends Rn{construct(e,t,n){return new jn(e,t,n)}static isValidIdentifier(e){return Fn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===On}static keyField(){return new jn([On])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new mn(pn.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new mn(pn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new mn(pn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new mn(pn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}class Bn{constructor(e){this.path=e}static fromPath(e){return new Bn(Mn.fromString(e))}static fromName(e){return new Bn(Mn.fromString(e).popFirst(5))}static empty(){return new Bn(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Bn(new Mn(e.slice()))}}function Un(e,t,n){if(!n)throw new mn(pn.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zn(e,t,n,r){if(!0===t&&!0===r)throw new mn(pn.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Vn(e){if(!Bn.isDocumentKey(e))throw new mn(pn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function qn(e){if(Bn.isDocumentKey(e))throw new mn(pn.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Hn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":un(12329,{type:typeof e})}function Gn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mn(pn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hn(e);throw new mn(pn.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Kn(e,t){if(t<=0)throw new mn(pn.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function Yn(e,t){const n={typeString:e};return t&&(n.value=t),n}function Xn(e,t){if(!Wn(e))throw new mn(pn.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new mn(pn.INVALID_ARGUMENT,n);return!0}const $n=-62135596800,Jn=1e6;class Qn{static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Jn);return new Qn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new mn(pn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new mn(pn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$n)throw new mn(pn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new mn(pn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jn}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xn(e,Qn._jsonSchema))return new Qn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$n;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qn._jsonSchemaVersion="firestore/timestamp/1.0",Qn._jsonSchema={type:Yn("string",Qn._jsonSchemaVersion),seconds:Yn("number"),nanoseconds:Yn("number")};class Zn{static fromTimestamp(e){return new Zn(e)}static min(){return new Zn(new Qn(0,0))}static max(){return new Zn(new Qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const er=-1;class tr{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function nr(e){return e.fields.find(e=>2===e.kind)}function rr(e){return e.fields.filter(e=>2!==e.kind)}tr.UNKNOWN_ID=-1;class ir{constructor(e,t){this.fieldPath=e,this.kind=t}}class sr{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sr(0,lr.min())}}function ar(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zn.fromTimestamp(1e9===r?new Qn(n+1,0):new Qn(n,r));return new lr(i,Bn.empty(),t)}function or(e){return new lr(e.readTime,e.key,er)}class lr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new lr(Zn.min(),Bn.empty(),er)}static max(){return new lr(Zn.max(),Bn.empty(),er)}}function cr(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Bn.comparator(e.documentKey,t.documentKey),0!==n?n:An(e.largestBatchId,t.largestBatchId))}const ur="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function dr(e){if(e.code!==pn.FAILED_PRECONDITION||e.message!==ur)throw e;an("LocalStore","Unexpectedly lost primary lease")}class fr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&un(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fr((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fr?t:fr.resolve(t)}catch(e){return fr.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fr.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fr.reject(t)}static resolve(e){return new fr((t,n)=>{t(e)})}static reject(e){return new fr((t,n)=>{n(e)})}static waitFor(e){return new fr((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=fr.resolve(!1);for(const n of e)t=t.next(e=>e?fr.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new fr((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new fr((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}const pr="SimpleDb";class mr{static open(e,t,n,r){try{return new mr(t,e.transaction(r,n))}catch(e){throw new yr(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new gn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new yr(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=kr(t.target.error);this.S.reject(new yr(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(an(pr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xr(t)}}class gr{static delete(e){return an(pr,"Removing database:",e),_r(g().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!D())return!1;if(gr.F())return!0;const e=T(),t=gr.M(e),n=0<t&&t<10,r=vr(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,12.2===gr.M(T())&&on("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(an(pr,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new yr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new mn(pn.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new mn(pn.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new yr(e,r))},r.onupgradeneeded=e=>{an(pr,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next(()=>{an(pr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.L(e);const t=mr.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next(e=>(t.C(),e)).catch(e=>(t.abort(e),fr.reject(e))).toPromise();return s.catch(()=>{}),await t.D,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(an(pr,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function vr(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class br{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return _r(this.U.delete())}}class yr extends mn{constructor(e,t){super(pn.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function wr(e){return"IndexedDbTransactionError"===e.name}class xr{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(an(pr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(an(pr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_r(n)}add(e){return an(pr,"ADD",this.store.name,e,e),_r(this.store.add(e))}get(e){return _r(this.store.get(e)).next(t=>(void 0===t&&(t=null),an(pr,"GET",this.store.name,e,t),t))}delete(e){return an(pr,"DELETE",this.store.name,e),_r(this.store.delete(e))}count(){return an(pr,"COUNT",this.store.name),_r(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new fr((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.H(e,(e,n)=>{t.push(n)}).next(()=>t)}}Y(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new fr((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Z(e,t){an(pr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,(e,t,n)=>n.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}te(e){const t=this.cursor({});return new fr((n,r)=>{t.onerror=e=>{const t=kr(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}H(e,t){const n=[];return new fr((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new br(i),a=t(i.primaryKey,i.value,s);if(a instanceof fr){const e=a.catch(e=>(s.done(),fr.reject(e)));n.push(e)}s.isDone?r():null===s.G?i.continue():i.continue(s.G)}}).next(()=>fr.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _r(e){return new fr((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=kr(e.target.error);n(t)}})}let Sr=!1;function kr(e){const t=gr.M(T());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new mn("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Sr||(Sr=!0,setTimeout(()=>{throw e},0)),e}}return e}const Tr="IndexBackfiller";class Er{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}re(e){an(Tr,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.ne.ie();an(Tr,"Documents written: ".concat(e))}catch(e){wr(e)?an(Tr,"Ignoring IndexedDB error during index backfill: ",e):await dr(e)}await this.re(6e4)})}}class Ar{constructor(e,t){this.localStore=e,this.persistence=t}async ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let r=t,i=!0;return fr.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return an(Tr,"Processing collection: ".concat(t)),this.oe(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this._e(r,n)).next(n=>(an(Tr,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}_e(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=or(t);cr(r,n)>0&&(n=r)}),new lr(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Nr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nr.ce=-1;const Ir=-1;function Cr(e){return null==e}function Pr(e){return 0===e&&1/e==-1/0}function Lr(e){return"number"==typeof e&&Number.isInteger(e)&&!Pr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Dr="\x01";function Or(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Mr(t)),t=Rr(e.get(n),t);return Mr(t)}function Rr(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Dr:n+="\x01\x11";break;default:n+=t}}return n}function Mr(e){return e+Dr+"\x01"}function Fr(e){const t=e.length;if(dn(t>=2,64408,{path:e}),2===t)return dn(e.charAt(0)===Dr&&"\x01"===e.charAt(1),56145,{path:e}),Mn.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf(Dr,s);switch((t<0||t>n)&&un(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:un(61167,{path:e})}s=t+2}return new Mn(r)}const jr="remoteDocuments",Br="owner",Ur="owner",zr="mutationQueues",Vr="mutations",qr="batchId",Wr="userMutationsIndex",Hr=["userId","batchId"];function Gr(e,t){return[e,Or(t)]}function Kr(e,t,n){return[e,Or(t),n]}const Yr={},Xr="documentMutations",$r="remoteDocumentsV14",Jr=["prefixPath","collectionGroup","readTime","documentId"],Qr="documentKeyIndex",Zr=["prefixPath","collectionGroup","documentId"],ei="collectionGroupIndex",ti=["collectionGroup","readTime","prefixPath","documentId"],ni="remoteDocumentGlobal",ri="remoteDocumentGlobalKey",ii="targets",si="queryTargetsIndex",ai=["canonicalId","targetId"],oi="targetDocuments",li=["targetId","path"],ci="documentTargetsIndex",ui=["path","targetId"],hi="targetGlobalKey",di="targetGlobal",fi="collectionParents",pi=["collectionId","parent"],mi="clientMetadata",gi="bundles",vi="namedQueries",bi="indexConfiguration",yi="collectionGroupIndex",wi="indexState",xi=["indexId","uid"],_i="sequenceNumberIndex",Si=["uid","sequenceNumber"],ki="indexEntries",Ti=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ei="documentKeyIndex",Ai=["indexId","uid","orderedDocumentKey"],Ni="documentOverlays",Ii=["userId","collectionPath","documentId"],Ci="collectionPathOverlayIndex",Pi=["userId","collectionPath","largestBatchId"],Li="collectionGroupOverlayIndex",Di=["userId","collectionGroup","largestBatchId"],Oi="globals",Ri=[zr,Vr,Xr,jr,ii,Br,di,oi,mi,ni,fi,gi,vi],Mi=[...Ri,Ni],Fi=[zr,Vr,Xr,$r,ii,Br,di,oi,mi,ni,fi,gi,vi,Ni],ji=Fi,Bi=[...ji,bi,wi,ki],Ui=Bi,zi=[...Bi,Oi],Vi=zi;class qi extends hr{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Wi(e,t){const n=fn(e);return gr.O(n.le,t)}function Hi(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gi(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ki(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Yi{constructor(e,t){this.comparator=e,this.root=t||$i.EMPTY}insert(e,t){return new Yi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$i.BLACK,null,null))}remove(e){return new Yi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xi(this.root,e,this.comparator,!0)}}class Xi{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $i{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:$i.RED,this.left=null!=r?r:$i.EMPTY,this.right=null!=i?i:$i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new $i(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return $i.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw un(43730,{key:this.key,value:this.value});if(this.right.isRed())throw un(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw un(27949);return e+(this.isRed()?0:1)}}$i.EMPTY=null,$i.RED=!0,$i.BLACK=!1,$i.EMPTY=new class{constructor(){this.size=0}get key(){throw un(57766)}get value(){throw un(16141)}get color(){throw un(16727)}get left(){throw un(29726)}get right(){throw un(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new $i(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ji{constructor(e){this.comparator=e,this.data=new Yi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qi(this.data.getIterator())}getIteratorFrom(e){return new Qi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ji))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ji(this.comparator);return t.data=e,t}}class Qi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zi(e){return e.hasNext()?e.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new es([])}unionWith(e){let t=new Ji(jn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ln(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ts extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ns{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ts("Invalid base64 string: "+e):e}}(e);return new ns(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ns(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ns.EMPTY_BYTE_STRING=new ns("");const rs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(e){if(dn(!!e,39018),"string"==typeof e){let t=0;const n=rs.exec(e);if(dn(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ss(e.seconds),nanos:ss(e.nanos)}}function ss(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function as(e){return"string"==typeof e?ns.fromBase64String(e):ns.fromUint8Array(e)}const os="server_timestamp",ls="__type__",cs="__previous_value__",us="__local_write_time__";function hs(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ls])||void 0===t?void 0:t.stringValue)===os}function ds(e){const t=e.mapValue.fields[cs];return hs(t)?ds(t):t}function fs(e){const t=is(e.mapValue.fields[us].timestampValue);return new Qn(t.seconds,t.nanos)}class ps{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const ms="(default)";class gs{constructor(e,t){this.projectId=e,this.database=t||ms}static empty(){return new gs("","")}get isDefaultDatabase(){return this.database===ms}isEqual(e){return e instanceof gs&&e.projectId===this.projectId&&e.database===this.database}}const vs="__type__",bs="__max__",ys={mapValue:{fields:{__type__:{stringValue:bs}}}},ws="__vector__",xs="value",_s={nullValue:"NULL_VALUE"};function Ss(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hs(e)?4:Us(e)?9007199254740991:js(e)?10:11:un(28295,{value:e})}function ks(e,t){if(e===t)return!0;const n=Ss(e);if(n!==Ss(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fs(e).isEqual(fs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=is(e.timestampValue),r=is(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return as(e.bytesValue).isEqual(as(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ss(e.geoPointValue.latitude)===ss(t.geoPointValue.latitude)&&ss(e.geoPointValue.longitude)===ss(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ss(e.integerValue)===ss(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ss(e.doubleValue),r=ss(t.doubleValue);return n===r?Pr(n)===Pr(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ln(e.arrayValue.values||[],t.arrayValue.values||[],ks);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Hi(n)!==Hi(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ks(n[i],r[i])))return!1;return!0}(e,t);default:return un(52216,{left:e})}}function Ts(e,t){return void 0!==(e.values||[]).find(e=>ks(e,t))}function Es(e,t){if(e===t)return 0;const n=Ss(e),r=Ss(t);if(n!==r)return An(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return An(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ss(e.integerValue||e.doubleValue),r=ss(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return As(e.timestampValue,t.timestampValue);case 4:return As(fs(e),fs(t));case 5:return Nn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=as(e),r=as(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=An(n[i],r[i]);if(0!==e)return e}return An(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=An(ss(e.latitude),ss(t.latitude));return 0!==n?n:An(ss(e.longitude),ss(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ns(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const a=e.fields||{},o=t.fields||{},l=null===(n=a[xs])||void 0===n?void 0:n.arrayValue,c=null===(r=o[xs])||void 0===r?void 0:r.arrayValue,u=An((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ns(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ys.mapValue&&t===ys.mapValue)return 0;if(e===ys.mapValue)return 1;if(t===ys.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Nn(r[a],s[a]);if(0!==e)return e;const t=Es(n[r[a]],i[s[a]]);if(0!==t)return t}return An(r.length,s.length)}(e.mapValue,t.mapValue);default:throw un(23264,{he:n})}}function As(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return An(e,t);const n=is(e),r=is(t),i=An(n.seconds,r.seconds);return 0!==i?i:An(n.nanos,r.nanos)}function Ns(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Es(n[i],r[i]);if(e)return e}return An(n.length,r.length)}function Is(e){return Cs(e)}function Cs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=is(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return as(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Bn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Cs(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Cs(e.fields[i]));return n+"}"}(e.mapValue):un(61005,{value:e})}function Ps(e){switch(Ss(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ds(e);return t?16+Ps(t):16;case 5:return 2*e.stringValue.length;case 6:return as(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Ps(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Gi(e.fields,(e,n)=>{t+=e.length+Ps(n)}),t}(e.mapValue);default:throw un(13486,{value:e})}}function Ls(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ds(e){return!!e&&"integerValue"in e}function Os(e){return!!e&&"arrayValue"in e}function Rs(e){return!!e&&"nullValue"in e}function Ms(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fs(e){return!!e&&"mapValue"in e}function js(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[vs])||void 0===t?void 0:t.stringValue)===ws}function Bs(e){if(e.geoPointValue)return{geoPointValue:l({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:l({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gi(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Bs(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bs(e.arrayValue.values[n]);return t}return l({},e)}function Us(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===bs}const zs={mapValue:{fields:{[vs]:{stringValue:ws},[xs]:{arrayValue:{}}}}};function Vs(e){return"nullValue"in e?_s:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ls(gs.empty(),Bn.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?js(e)?zs:{mapValue:{}}:un(35942,{value:e})}function qs(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ls(gs.empty(),Bn.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?zs:"mapValue"in e?js(e)?{mapValue:{}}:ys:un(61959,{value:e})}function Ws(e,t){const n=Es(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Hs(e,t){const n=Es(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Fs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bs(t)}setAll(e){let t=jn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Bs(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Fs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Fs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Gi(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Gs(Bs(this.value))}}function Ks(e){const t=[];return Gi(e.fields,(e,n)=>{const r=new jn([e]);if(Fs(n)){const e=Ks(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new es(t)}class Ys{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Ys(e,0,Zn.min(),Zn.min(),Zn.min(),Gs.empty(),0)}static newFoundDocument(e,t,n,r){return new Ys(e,1,t,Zn.min(),n,r,0)}static newNoDocument(e,t){return new Ys(e,2,t,Zn.min(),Zn.min(),Gs.empty(),0)}static newUnknownDocument(e,t){return new Ys(e,3,t,Zn.min(),Zn.min(),Gs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ys&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ys(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Xs{constructor(e,t){this.position=e,this.inclusive=t}}function $s(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Bn.comparator(Bn.fromName(a.referenceValue),n.key):Es(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Js(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ks(e.position[n],t.position[n]))return!1;return!0}class Qs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Zs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ea{}class ta extends ea{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ha(e,t,n):"array-contains"===t?new ma(e,n):"in"===t?new ga(e,n):"not-in"===t?new va(e,n):"array-contains-any"===t?new ba(e,n):new ta(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new da(e,n):new fa(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Es(t,this.value)):null!==t&&Ss(this.value)===Ss(t)&&this.matchesComparison(Es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return un(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class na extends ea{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new na(e,t)}matches(e){return ra(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ra(e){return"and"===e.op}function ia(e){return"or"===e.op}function sa(e){return aa(e)&&ra(e)}function aa(e){for(const t of e.filters)if(t instanceof na)return!1;return!0}function oa(e){if(e instanceof ta)return e.field.canonicalString()+e.op.toString()+Is(e.value);if(sa(e))return e.filters.map(e=>oa(e)).join(",");{const t=e.filters.map(e=>oa(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function la(e,t){return e instanceof ta?function(e,t){return t instanceof ta&&e.op===t.op&&e.field.isEqual(t.field)&&ks(e.value,t.value)}(e,t):e instanceof na?function(e,t){return t instanceof na&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&la(n,t.filters[r]),!0)}(e,t):void un(19439)}function ca(e,t){const n=e.filters.concat(t);return na.create(n,e.op)}function ua(e){return e instanceof ta?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Is(e.value))}(e):e instanceof na?function(e){return e.op.toString()+" {"+e.getFilters().map(ua).join(" ,")+"}"}(e):"Filter"}class ha extends ta{constructor(e,t,n){super(e,t,n),this.key=Bn.fromName(n.referenceValue)}matches(e){const t=Bn.comparator(e.key,this.key);return this.matchesComparison(t)}}class da extends ta{constructor(e,t){super(e,"in",t),this.keys=pa("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fa extends ta{constructor(e,t){super(e,"not-in",t),this.keys=pa("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pa(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Bn.fromName(e.referenceValue))}class ma extends ta{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Os(t)&&Ts(t.arrayValue,this.value)}}class ga extends ta{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ts(this.value.arrayValue,t)}}class va extends ta{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ts(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ts(this.value.arrayValue,t)}}class ba extends ta{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Os(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ts(this.value.arrayValue,e))}}class ya{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function wa(e){return new ya(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function xa(e){const t=fn(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>oa(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Cr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Is(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Is(e)).join(",")),t.Te=e}return t.Te}function _a(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Zs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!la(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Js(e.startAt,t.startAt)&&Js(e.endAt,t.endAt)}function Sa(e){return Bn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ka(e,t){return e.filters.filter(e=>e instanceof ta&&e.field.isEqual(t))}function Ta(e,t,n){let r=_s,i=!0;for(const s of ka(e,t)){let e=_s,t=!0;switch(s.op){case"<":case"<=":e=Vs(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=_s}Ws({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ws({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Ea(e,t,n){let r=ys,i=!0;for(const s of ka(e,t)){let e=ys,t=!0;switch(s.op){case">=":case">":e=qs(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=ys}Hs({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Hs({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Aa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Na(e,t,n,r,i,s,a,o){return new Aa(e,t,n,r,i,s,a,o)}function Ia(e){return new Aa(e)}function Ca(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Pa(e){return null!==e.collectionGroup}function La(e){const t=fn(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ji(jn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Qs(r,n))}),e.has(jn.keyField().canonicalString())||t.Ie.push(new Qs(jn.keyField(),n))}return t.Ie}function Da(e){const t=fn(e);return t.Ee||(t.Ee=Oa(t,La(e))),t.Ee}function Oa(e,t){if("F"===e.limitType)return wa(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Qs(e.field,t)});const n=e.endAt?new Xs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Xs(e.startAt.position,e.startAt.inclusive):null;return wa(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ra(e,t){const n=e.filters.concat([t]);return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ma(e,t,n){return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Fa(e,t){return _a(Da(e),Da(t))&&e.limitType===t.limitType}function ja(e){return"".concat(xa(Da(e)),"|lt:").concat(e.limitType)}function Ba(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ua(e)).join(", "),"]")),Cr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Is(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Is(e)).join(",")),"Target(".concat(t,")")}(Da(e)),"; limitType=").concat(e.limitType,")")}function Ua(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Bn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of La(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=$s(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,La(e),t))&&!(e.endAt&&!function(e,t,n){const r=$s(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,La(e),t))}(e,t)}function za(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Va(e){return(t,n)=>{let r=!1;for(const i of La(e)){const e=qa(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function qa(e,t,n){const r=e.field.isKeyField()?Bn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Es(r,i):un(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return un(19790,{direction:e.dir})}}class Wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ki(this.inner)}size(){return this.innerSize}}const Ha=new Yi(Bn.comparator);function Ga(){return Ha}const Ka=new Yi(Bn.comparator);function Ya(){let e=Ka;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Xa(e){let t=Ka;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function $a(){return Qa()}function Ja(){return Qa()}function Qa(){return new Wa(e=>e.toString(),(e,t)=>e.isEqual(t))}const Za=new Yi(Bn.comparator),eo=new Ji(Bn.comparator);function to(){let e=eo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const no=new Ji(An);function ro(){return no}function io(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pr(t)?"-0":t}}function so(e){return{integerValue:""+e}}function ao(e,t){return Lr(t)?so(t):io(e,t)}class oo{constructor(){this._=void 0}}function lo(e,t,n){return e instanceof ho?function(e,t){const n={fields:{[ls]:{stringValue:os},[us]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&hs(t)&&(t=ds(t)),t&&(n.fields[cs]=t),{mapValue:n}}(n,t):e instanceof fo?po(e,t):e instanceof mo?go(e,t):function(e,t){const n=uo(e,t),r=bo(n)+bo(e.Ae);return Ds(n)&&Ds(e.Ae)?so(r):io(e.serializer,r)}(e,t)}function co(e,t,n){return e instanceof fo?po(e,t):e instanceof mo?go(e,t):n}function uo(e,t){return e instanceof vo?function(e){return Ds(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ho extends oo{}class fo extends oo{constructor(e){super(),this.elements=e}}function po(e,t){const n=yo(t);for(const r of e.elements)n.some(e=>ks(e,r))||n.push(r);return{arrayValue:{values:n}}}class mo extends oo{constructor(e){super(),this.elements=e}}function go(e,t){let n=yo(t);for(const r of e.elements)n=n.filter(e=>!ks(e,r));return{arrayValue:{values:n}}}class vo extends oo{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bo(e){return ss(e.integerValue||e.doubleValue)}function yo(e){return Os(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class wo{constructor(e,t){this.field=e,this.transform=t}}class xo{constructor(e,t){this.version=e,this.transformResults=t}}class _o{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _o}static exists(e){return new _o(void 0,e)}static updateTime(e){return new _o(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function So(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ko{}function To(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ro(e.key,_o.none()):new Co(e.key,e.data,_o.none());{const n=e.data,r=Gs.empty();let i=new Ji(jn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Po(e.key,r,new es(i.toArray()),_o.none())}}function Eo(e,t,n){e instanceof Co?function(e,t,n){const r=e.value.clone(),i=Do(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Po?function(e,t,n){if(!So(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Do(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ao(e,t,n,r){return e instanceof Co?function(e,t,n,r){if(!So(e.precondition,t))return n;const i=e.value.clone(),s=Oo(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Po?function(e,t,n,r){if(!So(e.precondition,t))return n;const i=Oo(e.fieldTransforms,r,t),s=t.data;return s.setAll(Lo(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return So(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function No(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=uo(r.transform,e||null);null!=i&&(null===n&&(n=Gs.empty()),n.set(r.field,i))}return n||null}function Io(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ln(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fo&&t instanceof fo||e instanceof mo&&t instanceof mo?Ln(e.elements,t.elements,ks):e instanceof vo&&t instanceof vo?ks(e.Ae,t.Ae):e instanceof ho&&t instanceof ho}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Co extends ko{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Po extends ko{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lo(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Do(e,t,n){const r=new Map;dn(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,co(a,o,n[i]))}return r}function Oo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,lo(e,s,t))}return r}class Ro extends ko{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mo extends ko{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fo{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Eo(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ao(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ao(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ja();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=To(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Zn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),to())}isEqual(e){return this.batchId===e.batchId&&Ln(this.mutations,e.mutations,(e,t)=>Io(e,t))&&Ln(this.baseMutations,e.baseMutations,(e,t)=>Io(e,t))}}class jo{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){dn(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Za;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new jo(e,t,n,r)}}class Bo{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Uo{constructor(e,t){this.count=e,this.unchangedNames=t}}var zo,Vo;function qo(e){switch(e){case pn.OK:return un(64938);case pn.CANCELLED:case pn.UNKNOWN:case pn.DEADLINE_EXCEEDED:case pn.RESOURCE_EXHAUSTED:case pn.INTERNAL:case pn.UNAVAILABLE:case pn.UNAUTHENTICATED:return!1;case pn.INVALID_ARGUMENT:case pn.NOT_FOUND:case pn.ALREADY_EXISTS:case pn.PERMISSION_DENIED:case pn.FAILED_PRECONDITION:case pn.ABORTED:case pn.OUT_OF_RANGE:case pn.UNIMPLEMENTED:case pn.DATA_LOSS:return!0;default:return un(15467,{code:e})}}function Wo(e){if(void 0===e)return on("GRPC error has no .code"),pn.UNKNOWN;switch(e){case zo.OK:return pn.OK;case zo.CANCELLED:return pn.CANCELLED;case zo.UNKNOWN:return pn.UNKNOWN;case zo.DEADLINE_EXCEEDED:return pn.DEADLINE_EXCEEDED;case zo.RESOURCE_EXHAUSTED:return pn.RESOURCE_EXHAUSTED;case zo.INTERNAL:return pn.INTERNAL;case zo.UNAVAILABLE:return pn.UNAVAILABLE;case zo.UNAUTHENTICATED:return pn.UNAUTHENTICATED;case zo.INVALID_ARGUMENT:return pn.INVALID_ARGUMENT;case zo.NOT_FOUND:return pn.NOT_FOUND;case zo.ALREADY_EXISTS:return pn.ALREADY_EXISTS;case zo.PERMISSION_DENIED:return pn.PERMISSION_DENIED;case zo.FAILED_PRECONDITION:return pn.FAILED_PRECONDITION;case zo.ABORTED:return pn.ABORTED;case zo.OUT_OF_RANGE:return pn.OUT_OF_RANGE;case zo.UNIMPLEMENTED:return pn.UNIMPLEMENTED;case zo.DATA_LOSS:return pn.DATA_LOSS;default:return un(39323,{code:e})}}(Vo=zo||(zo={}))[Vo.OK=0]="OK",Vo[Vo.CANCELLED=1]="CANCELLED",Vo[Vo.UNKNOWN=2]="UNKNOWN",Vo[Vo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vo[Vo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vo[Vo.NOT_FOUND=5]="NOT_FOUND",Vo[Vo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vo[Vo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vo[Vo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vo[Vo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vo[Vo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vo[Vo.ABORTED=10]="ABORTED",Vo[Vo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vo[Vo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vo[Vo.INTERNAL=13]="INTERNAL",Vo[Vo.UNAVAILABLE=14]="UNAVAILABLE",Vo[Vo.DATA_LOSS=15]="DATA_LOSS";let Ho=null;function Go(){return new TextEncoder}const Ko=new Bt([4294967295,4294967295],0);function Yo(e){const t=Go().encode(e),n=new Ut;return n.update(t),new Uint8Array(n.digest())}function Xo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Bt([n,r],0),new Bt([i,s],0)]}class $o{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Jo("Invalid padding: ".concat(t));if(n<0)throw new Jo("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Jo("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Jo("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Bt.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Bt.fromNumber(n)));return 1===r.compare(Ko)&&(r=new Bt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Yo(e),[n,r]=Xo(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new $o(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Yo(e),[n,r]=Xo(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qo{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Zo.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Qo(Zn.min(),r,new Yi(An),Ga(),to())}}class Zo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Zo(n,t,to(),to(),to())}}class el{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class tl{constructor(e,t){this.targetId=e,this.Ce=t}}class nl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ns.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class rl{constructor(){this.ve=0,this.Fe=al(),this.Me=ns.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=to(),t=to(),n=to();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:un(38017,{changeType:i})}}),new Zo(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=al()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class il{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ga(),this.Je=sl(),this.He=sl(),this.Ye=new Yi(An)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:un(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Sa(s))if(0===n){const e=new Bn(s.path);this.et(t,e,Ys.newNoDocument(e,Zn.min()))}else dn(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Ho)||void 0===i||i.lt(function(e,t,n,r,i,s,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===h||void 0===h||null===(o=h.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=as(n).toUint8Array()}catch(e){if(e instanceof ts)return ln("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new $o(s,r,i)}catch(e){return ln(e instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Sa(i.target)){const t=new Bn(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Ys.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=to();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Qo(e,t,this.Ye,this.je,n);return this.je=Ga(),this.Je=sl(),this.He=sl(),this.Ye=new Yi(An),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new rl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ji(An),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ji(An),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||an("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rl),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function sl(){return new Yi(Bn.comparator)}function al(){return new Yi(Bn.comparator)}const ol={asc:"ASCENDING",desc:"DESCENDING"},ll={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cl={and:"AND",or:"OR"};class ul{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hl(e,t){return e.useProto3Json||Cr(t)?t:{value:t}}function dl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function pl(e,t){return dl(e,t.toTimestamp())}function ml(e){return dn(!!e,49232),Zn.fromTimestamp(function(e){const t=is(e);return new Qn(t.seconds,t.nanos)}(e))}function gl(e,t){return vl(e,t).canonicalString()}function vl(e,t){const n=function(e){return new Mn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function bl(e){const t=Mn.fromString(e);return dn(Ul(t),10190,{key:t.toString()}),t}function yl(e,t){return gl(e.databaseId,t.path)}function wl(e,t){const n=bl(t);if(n.get(1)!==e.databaseId.projectId)throw new mn(pn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mn(pn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bn(kl(n))}function xl(e,t){return gl(e.databaseId,t)}function _l(e){const t=bl(e);return 4===t.length?Mn.emptyPath():kl(t)}function Sl(e){return new Mn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kl(e){return dn(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Tl(e,t,n){return{name:yl(e,t),fields:n.value.mapValue.fields}}function El(e,t,n){const r=wl(e,t.name),i=ml(t.updateTime),s=t.createTime?ml(t.createTime):Zn.min(),a=new Gs({mapValue:{fields:t.fields}}),o=Ys.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Al(e,t){let n;if(t instanceof Co)n={update:Tl(e,t.key,t.value)};else if(t instanceof Ro)n={delete:yl(e,t.key)};else if(t instanceof Po)n={update:Tl(e,t.key,t.data),updateMask:Bl(t.fieldMask)};else{if(!(t instanceof Mo))return un(16599,{Vt:t.type});n={verify:yl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ho)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof vo)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw un(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:pl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:un(27497)}(e,t.precondition)),n}function Nl(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?_o.updateTime(ml(e.updateTime)):void 0!==e.exists?_o.exists(e.exists):_o.none()}(t.currentDocument):_o.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)dn("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new ho;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new fo(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new mo(e)}else"increment"in t?n=new vo(e,t.increment):un(16584,{proto:t});const r=jn.fromServerFormat(t.fieldPath);return new wo(r,n)}(e,t)):[];if(t.update){t.update.name;const i=wl(e,t.update.name),s=new Gs({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new es(t.map(e=>jn.fromServerFormat(e)))}(t.updateMask);return new Po(i,s,e,n,r)}return new Co(i,s,n,r)}if(t.delete){const r=wl(e,t.delete);return new Ro(r,n)}if(t.verify){const r=wl(e,t.verify);return new Mo(r,n)}return un(1463,{proto:t})}function Il(e,t){return{documents:[xl(e,t.path)]}}function Cl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xl(e,i);const s=function(e){if(0!==e.length)return jl(na.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ml(e.field),direction:Dl(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=hl(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Pl(e){let t=_l(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){dn(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ll(e);return t instanceof na&&sa(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Qs(Fl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Cr(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Xs(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Xs(n,t)}(n.endAt)),Na(t,i,a,s,o,"F",l,c)}function Ll(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fl(e.unaryFilter.field);return ta.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fl(e.unaryFilter.field);return ta.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fl(e.unaryFilter.field);return ta.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fl(e.unaryFilter.field);return ta.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return un(61313);default:return un(60726)}}(e):void 0!==e.fieldFilter?function(e){return ta.create(Fl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return un(58110);default:return un(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return na.create(e.compositeFilter.filters.map(e=>Ll(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return un(1026)}}(e.compositeFilter.op))}(e):un(30097,{filter:e})}function Dl(e){return ol[e]}function Ol(e){return ll[e]}function Rl(e){return cl[e]}function Ml(e){return{fieldPath:e.canonicalString()}}function Fl(e){return jn.fromServerFormat(e.fieldPath)}function jl(e){return e instanceof ta?function(e){if("=="===e.op){if(Ms(e.value))return{unaryFilter:{field:Ml(e.field),op:"IS_NAN"}};if(Rs(e.value))return{unaryFilter:{field:Ml(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ms(e.value))return{unaryFilter:{field:Ml(e.field),op:"IS_NOT_NAN"}};if(Rs(e.value))return{unaryFilter:{field:Ml(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(e.field),op:Ol(e.op),value:e.value}}}(e):e instanceof na?function(e){const t=e.getFilters().map(e=>jl(e));return 1===t.length?t[0]:{compositeFilter:{op:Rl(e.op),filters:t}}}(e):un(54877,{filter:e})}function Bl(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ul(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class zl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zn.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zn.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ns.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new zl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Vl{constructor(e){this.yt=e}}function ql(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wl(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:yl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:dl(e,t.version.toTimestamp()),createTime:dl(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Hl(t.version)};else{if(!t.isUnknownDocument())return un(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:Hl(t.version)}}return r}function Wl(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Hl(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Gl(e){const t=new Qn(e.seconds,e.nanoseconds);return Zn.fromTimestamp(t)}function Kl(e,t){const n=(t.baseMutations||[]).map(t=>Nl(e.yt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(t=>Nl(e.yt,t)),i=Qn.fromMillis(t.localWriteTimeMs);return new Fo(t.batchId,i,n,r)}function Yl(e){const t=Gl(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Gl(e.lastLimboFreeSnapshotVersion):Zn.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return dn(1===t,1966,{count:t}),Da(Ia(_l(e.documents[0])))}(e.query):function(e){return Da(Pl(e))}(e.query),new zl(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ns.fromBase64String(e.resumeToken))}function Xl(e,t){const n=Hl(t.snapshotVersion),r=Hl(t.lastLimboFreeSnapshotVersion);let i;i=Sa(t.target)?Il(e.yt,t.target):Cl(e.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:xa(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $l(e){const t=Pl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ma(t,t.limit,"L"):t}function Jl(e,t){return new Bo(t.largestBatchId,Nl(e.yt,t.overlayMutation))}function Ql(e,t){const n=t.path.lastSegment();return[e,Or(t.path.popLast()),n]}function Zl(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Hl(r.readTime),documentKey:Or(r.documentKey.path),largestBatchId:r.largestBatchId}}class ec{getBundleMetadata(e,t){return tc(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:Gl(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return tc(e).put(function(e){return{bundleId:e.id,createTime:Hl(ml(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return nc(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:$l(e.bundledQuery),readTime:Gl(e.readTime)}}(e)})}saveNamedQuery(e,t){return nc(e).put(function(e){return{name:e.name,readTime:Hl(ml(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function tc(e){return Wi(e,gi)}function nc(e){return Wi(e,vi)}class rc{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new rc(e,n)}getOverlay(e,t){return ic(e).get(Ql(this.userId,t)).next(e=>e?Jl(this.serializer,e):null)}getOverlays(e,t){const n=$a();return fr.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new Bo(t,i);r.push(this.St(e,s))}),fr.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(Or(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(ic(e).Z(Ci,r))}),fr.waitFor(i)}getOverlaysForCollection(e,t,n){const r=$a(),i=Or(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ic(e).J(Ci,s).next(e=>{for(const t of e){const e=Jl(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=$a();let s;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ic(e).ee({index:Li,range:a},(e,t,n)=>{const a=Jl(this.serializer,t);i.size()<r||a.largestBatchId===s?(i.set(a.getKey(),a),s=a.largestBatchId):n.done()}).next(()=>i)}St(e,t){return ic(e).put(function(e,t,n){const[r,i,s]=Ql(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Al(e.yt,n.mutation)}}(this.serializer,this.userId,t))}}function ic(e){return Wi(e,Ni)}class sc{bt(e){return Wi(e,Oi)}getSessionToken(e){return this.bt(e).get("sessionToken").next(e=>{const t=null===e||void 0===e?void 0:e.value;return t?ns.fromUint8Array(t):ns.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ac{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ss(e.integerValue));else if("doubleValue"in e){const n=ss(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Pr(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=is(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(as(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Us(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):js(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):un(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=xs,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(ss(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Bn.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ac.Kt=new ac;const oc=255;function lc(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function cc(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=lc(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class uc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{const e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){const t=this.en(e),n=cc(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),n=cc(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(oc),this.sn(255)}_n(){this.an(oc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Gt(e){const t=255&e;0===t?(this.sn(0),this.sn(255)):t===oc?(this.sn(oc),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;0===t?(this.an(0),this.an(255)):t===oc?(this.an(oc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class hc{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class dc{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class fc{constructor(){this.cn=new uc,this.ln=new hc(this.cn),this.hn=new dc(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return 0===e?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class pc{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new pc(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:vc(this.En),directionalValue:vc(this.dn),orderedDocumentKey:vc(t),documentKey:n.path.toArray()}}Vn(e,t,n){const r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function mc(e,t){let n=e.Tn-t.Tn;return 0!==n?n:(n=gc(e.En,t.En),0!==n?n:(n=gc(e.dn,t.dn),0!==n?n:Bn.comparator(e.In,t.In)))}function gc(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function vc(e){return L()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function bc(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class yc{constructor(e){this.mn=new Ji((e,t)=>jn.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(dn(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=nr(e);if(void 0!==t&&!this.wn(t))return!1;const n=rr(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.wn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.mn.size>0){const e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.Sn(e,t)||!this.bn(this.fn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.fn.length||!this.bn(this.fn[s++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ji(jn.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ir(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ir(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ir(n.field,"asc"===n.dir?0:1)));return new tr(tr.UNKNOWN_ID,this.collectionId,t,sr.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function wc(e){if(dn(e instanceof ta||e instanceof na,20012),e instanceof ta){if(e instanceof ga){var t;const n=(null===(t=e.value.arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(t=>ta.create(e.field,"==",t)))||[];return na.create(n,"or")}return e}const n=e.filters.map(e=>wc(e));return na.create(n,e.op)}function xc(e){if(0===e.getFilters().length)return[];const t=Tc(wc(e));return dn(kc(t),7391),_c(t)||Sc(t)?[t]:t.getFilters()}function _c(e){return e instanceof ta}function Sc(e){return e instanceof na&&sa(e)}function kc(e){return _c(e)||Sc(e)||function(e){if(e instanceof na&&ia(e)){for(const t of e.getFilters())if(!_c(t)&&!Sc(t))return!1;return!0}return!1}(e)}function Tc(e){if(dn(e instanceof ta||e instanceof na,34018),e instanceof ta)return e;if(1===e.filters.length)return Tc(e.filters[0]);const t=e.filters.map(e=>Tc(e));let n=na.create(t,e.op);return n=Nc(n),kc(n)?n:(dn(n instanceof na,64498),dn(ra(n),40251),dn(n.filters.length>1,57927),n.filters.reduce((e,t)=>Ec(e,t)))}function Ec(e,t){let n;return dn(e instanceof ta||e instanceof na,38388),dn(t instanceof ta||t instanceof na,25473),n=e instanceof ta?t instanceof ta?function(e,t){return na.create([e,t],"and")}(e,t):Ac(e,t):t instanceof ta?Ac(t,e):function(e,t){if(dn(e.filters.length>0&&t.filters.length>0,48005),ra(e)&&ra(t))return ca(e,t.getFilters());const n=ia(e)?e:t,r=ia(e)?t:e,i=n.filters.map(e=>Ec(e,r));return na.create(i,"or")}(e,t),Nc(n)}function Ac(e,t){if(ra(t))return ca(t,e.getFilters());{const n=t.filters.map(t=>Ec(e,t));return na.create(n,"or")}}function Nc(e){if(dn(e instanceof ta||e instanceof na,11850),e instanceof ta)return e;const t=e.getFilters();if(1===t.length)return Nc(t[0]);if(aa(e))return e;const n=t.map(e=>Nc(e)),r=[];return n.forEach(t=>{t instanceof ta?r.push(t):t instanceof na&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:na.create(r,e.op)}class Ic{constructor(){this.Cn=new Cc}addToCollectionParentIndex(e,t){return this.Cn.add(t),fr.resolve()}getCollectionParents(e,t){return fr.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fr.resolve()}deleteFieldIndex(e,t){return fr.resolve()}deleteAllFieldIndexes(e){return fr.resolve()}createTargetIndexes(e,t){return fr.resolve()}getDocumentsMatchingTarget(e,t){return fr.resolve(null)}getIndexType(e,t){return fr.resolve(0)}getFieldIndexes(e,t){return fr.resolve([])}getNextCollectionGroupToUpdate(e){return fr.resolve(null)}getMinOffset(e,t){return fr.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,t){return fr.resolve(lr.min())}updateCollectionGroup(e,t,n){return fr.resolve()}updateIndexEntries(e,t){return fr.resolve()}}class Cc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ji(Mn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ji(Mn.comparator)).toArray()}}const Pc="IndexedDbIndexManager",Lc=new Uint8Array(0);class Dc{constructor(e,t){this.databaseId=t,this.vn=new Cc,this.Fn=new Wa(e=>xa(e),(e,t)=>_a(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:n,parent:Or(r)};return Oc(e).put(i)}return fr.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Dn(t),""],!1,!0);return Oc(e).J(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Fr(r.parent))}return n})}addFieldIndex(e,t){const n=Mc(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Fc(e);return i.next(e=>{n.put(Zl(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=Mc(e),r=Fc(e),i=Rc(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Mc(e),n=Rc(e),r=Fc(e);return t.Z().next(()=>n.Z()).next(()=>r.Z())}createTargetIndexes(e,t){return fr.forEach(this.Mn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new yc(t).Dn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=Rc(e);let r=!0;const i=new Map;return fr.forEach(this.Mn(t),t=>this.xn(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=to();const r=[];return fr.forEach(i,(i,s)=>{an(Pc,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(i)," to execute ").concat(xa(t)));const a=function(e,t){const n=nr(t);if(void 0===n)return null;for(const r of ka(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),o=function(e,t){const n=new Map;for(const r of rr(t))for(const t of ka(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of rr(t)){const t=0===i.kind?Ta(e,i.fieldPath,e.startAt):Ea(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Xs(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of rr(t)){const t=0===i.kind?Ea(e,i.fieldPath,e.endAt):Ta(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Xs(n,r)}(s,i),u=this.On(i,s,l),h=this.On(i,s,c),d=this.Nn(i,s,o),f=this.Bn(i.indexId,a,u,l.inclusive,h,c.inclusive,d);return fr.forEach(f,i=>n.Y(i,t.limit).next(t=>{t.forEach(t=>{const n=Bn.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return fr.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(t=0===e.filters.length?[e]:xc(na.create(e.filters,"and")).map(t=>wa(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,n,r,i,s,a){const o=(null!=t?t.length:1)*Math.max(n.length,i.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.Ln(t[u/l]):Lc,h=this.kn(e,o,n[u%l],r),d=this.qn(e,o,i[u%l],s),f=a.map(t=>this.kn(e,o,t,!0));c.push(...this.createRange(h,d,f))}return c}kn(e,t,n,r){const i=new pc(e,Bn.empty(),t,n);return r?i:i.An()}qn(e,t,n,r){const i=new pc(e,Bn.empty(),t,n);return r?i.An():i}xn(e,t){const n=new yc(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Mn(t);return fr.forEach(r,t=>this.xn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Ji(jn.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}Qn(e,t){const n=new fc;for(const r of rr(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Pn(r.kind);ac.Kt.Dt(e,i)}return n.un()}Ln(e){const t=new fc;return ac.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new fc;return ac.Kt.Dt(Ls(this.databaseId,t),n.Pn(function(e){const t=rr(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(null===n)return[];let r=[];r.push(new fc);let i=0;for(const s of rr(e)){const e=n[i++];for(const n of r)if(this.Un(t,s.fieldPath)&&Os(e))r=this.Kn(r,s,e);else{const t=n.Pn(s.kind);ac.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new fc;n.seed(e.un()),ac.Kt.Dt(s,n.Pn(t.kind)),i.push(n)}return i}Un(e,t){return!!e.filters.find(e=>e instanceof ta&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Mc(e),r=Fc(e);return(t?n.J(yi,IDBKeyRange.bound(t,t)):n.J()).next(e=>{const t=[];return fr.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new sr(t.sequenceNumber,new lr(Gl(t.readTime),new Bn(Fr(t.documentKey)),t.largestBatchId)):sr.empty(),r=e.fields.map(e=>{let[t,n]=e;return new ir(jn.fromServerFormat(t),n)});return new tr(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:An(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=Mc(e),i=Fc(e);return this.Gn(e).next(e=>r.J(yi,IDBKeyRange.bound(t,t)).next(t=>fr.forEach(t,t=>i.put(Zl(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return fr.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?fr.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),fr.forEach(i,n=>this.zn(e,t,n).next(t=>{const i=this.jn(r,n);return t.isEqual(i)?fr.resolve():this.Jn(e,r,n,t,i)}))))})}Hn(e,t,n,r){return Rc(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return Rc(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const r=Rc(e);let i=new Ji(mc);return r.ee({index:Ei,range:IDBKeyRange.only([n.indexId,this.uid,vc(this.$n(n,t))])},(e,r)=>{i=i.add(new pc(n.indexId,t,bc(r.arrayValue),bc(r.directionalValue)))}).next(()=>i)}jn(e,t){let n=new Ji(mc);const r=this.Qn(t,e);if(null==r)return n;const i=nr(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Os(s))for(const i of s.arrayValue.values||[])n=n.add(new pc(t.indexId,e.key,this.Ln(i),r))}else n=n.add(new pc(t.indexId,e.key,Lc,r));return n}Jn(e,t,n,r,i){an(Pc,"Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),a=t.getIterator();let o=Zi(s),l=Zi(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=Zi(a)):t?(i(o),o=Zi(s)):(o=Zi(s),l=Zi(a))}}(r,i,mc,r=>{s.push(this.Hn(e,t,n,r))},r=>{s.push(this.Yn(e,t,n,r))}),fr.waitFor(s)}Gn(e){let t=1;return Fc(e).ee({index:_i,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>mc(e,t)).filter((e,t,n)=>!t||0!==mc(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=mc(s,e),i=mc(s,t);if(0===n)r[0]=e.An();else if(n>0&&i<0)r.push(s),r.push(s.An());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Zn(r[s],r[s+1]))return[];const e=r[s].Vn(this.uid,Lc,Bn.empty()),t=r[s+1].Vn(this.uid,Lc,Bn.empty());i.push(IDBKeyRange.bound(e,t))}return i}Zn(e,t){return mc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jc)}getMinOffset(e,t){return fr.mapArray(this.Mn(t),t=>this.xn(e,t).next(e=>e||un(44426))).next(jc)}}function Oc(e){return Wi(e,fi)}function Rc(e){return Wi(e,ki)}function Mc(e){return Wi(e,bi)}function Fc(e){return Wi(e,wi)}function jc(e){dn(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;cr(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new lr(t.readTime,t.documentKey,n)}const Bc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uc=41943040;class zc{static withCacheSize(e){return new zc(e,zc.DEFAULT_COLLECTION_PERCENTILE,zc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function Vc(e,t,n){const r=e.store(Vr),i=e.store(Xr),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.ee({range:a},(e,t,n)=>(o++,n.delete()));s.push(l.next(()=>{dn(1===o,47070,{batchId:n.batchId})}));const c=[];for(const u of n.mutations){const e=Kr(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return fr.waitFor(s).next(()=>c)}function qc(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw un(14731);t=e.noDocument}return JSON.stringify(t).length}zc.DEFAULT_COLLECTION_PERCENTILE=10,zc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zc.DEFAULT=new zc(Uc,zc.DEFAULT_COLLECTION_PERCENTILE,zc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zc.DISABLED=new zc(-1,0,0);class Wc{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(e,t,n,r){dn(""!==e.uid,64387);const i=e.isAuthenticated()?e.uid:"";return new Wc(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gc(e).ee({index:Wr,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Kc(e),s=Gc(e);return s.add({}).next(a=>{dn("number"==typeof a,49019);const o=new Fo(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>Al(e.yt,t)),i=n.mutations.map(t=>Al(e.yt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,o),c=[];let u=new Ji((e,t)=>An(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Kr(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Yr))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Xn[a]=o.keys()}),fr.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return Gc(e).get(t).next(e=>e?(dn(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),Kl(this.serializer,e)):null)}er(e,t){return this.Xn[t]?fr.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Xn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Gc(e).ee({index:Wr,range:r},(e,t,r)=>{t.userId===this.userId&&(dn(t.batchId>=n,47524,{tr:n}),i=Kl(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Ir;return Gc(e).ee({index:Wr,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ir],[this.userId,Number.POSITIVE_INFINITY]);return Gc(e).J(Wr,t).next(e=>e.map(e=>Kl(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Gr(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Kc(e).ee({range:r},(n,r,s)=>{const[a,o,l]=n,c=Fr(o);if(a===this.userId&&t.path.isEqual(c))return Gc(e).get(l).next(e=>{if(!e)throw un(61480,{nr:n,batchId:l});dn(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(Kl(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ji(An);const r=[];return t.forEach(t=>{const i=Gr(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=Kc(e).ee({range:s},(e,r,i)=>{const[s,a,o]=e,l=Fr(a);s===this.userId&&t.path.isEqual(l)?n=n.add(o):i.done()});r.push(a)}),fr.waitFor(r).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Gr(this.userId,n),s=IDBKeyRange.lowerBound(i);let a=new Ji(An);return Kc(e).ee({range:s},(e,t,i)=>{const[s,o,l]=e,c=Fr(o);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):i.done()}).next(()=>this.rr(e,a))}rr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(Gc(e).get(t).next(e=>{if(null===e)throw un(35274,{batchId:t});dn(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(Kl(this.serializer,e))}))}),fr.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Vc(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),fr.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fr.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Kc(e).ee({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Fr(e[1]);r.push(t)}else n.done()}).next(()=>{dn(0===r.length,56720,{sr:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return Hc(e,this.userId,t)}_r(e){return Yc(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Ir,lastStreamToken:""})}}function Hc(e,t,n){const r=Gr(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Kc(e).ee({range:s,X:!0},(e,n,r)=>{const[s,o,l]=e;s===t&&o===i&&(a=!0),r.done()}).next(()=>a)}function Gc(e){return Wi(e,Vr)}function Kc(e){return Wi(e,Xr)}function Yc(e){return Wi(e,zr)}class Xc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xc(0)}static cr(){return new Xc(-1)}}class $c{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const n=new Xc(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(e=>Zn.fromTimestamp(new Qn(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.lr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Jc(e).delete(t.targetId)).next(()=>this.lr(e)).next(t=>(dn(t.targetCount>0,8065),t.targetCount-=1,this.hr(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Jc(e).ee((s,a)=>{const o=Yl(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,i.push(this.removeTargetData(e,o)))}).next(()=>fr.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Jc(e).ee((e,n)=>{const r=Yl(n);t(r)})}lr(e){return Qc(e).get(hi).next(e=>(dn(null!==e,2888),e))}hr(e,t){return Qc(e).put(hi,t)}Pr(e,t){return Jc(e).put(Xl(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=xa(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Jc(e).ee({range:r,index:si},(e,n,r)=>{const s=Yl(n);_a(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=Zc(e);return t.forEach(t=>{const s=Or(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),fr.waitFor(r)}removeMatchingKeys(e,t,n){const r=Zc(e);return fr.forEach(t,t=>{const i=Or(t.path);return fr.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Zc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zc(e);let i=to();return r.ee({range:n,X:!0},(e,t,n)=>{const r=Fr(e[1]),s=new Bn(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Or(t.path),r=IDBKeyRange.bound([n],[Dn(n)],!1,!0);let i=0;return Zc(e).ee({index:ci,X:!0,range:r},(e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())}).next(()=>i>0)}At(e,t){return Jc(e).get(t).next(e=>e?Yl(e):null)}}function Jc(e){return Wi(e,ii)}function Qc(e){return Wi(e,di)}function Zc(e){return Wi(e,oi)}const eu="LruGarbageCollector",tu=1048576;function nu(e,t){let[n,r]=e,[i,s]=t;const a=An(n,i);return 0===a?An(r,s):a}class ru{constructor(e){this.Ir=e,this.buffer=new Ji(nu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();nu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){an(eu,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){wr(e)?an(eu,"Ignoring IndexedDB error during garbage collection: ",e):await dr(e)}await this.Vr(3e5)})}}class su{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return fr.resolve(Nr.ce);const n=new ru(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(an("LruGarbageCollector","Garbage collection skipped; disabled"),fr.resolve(Bc)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(an("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Bc):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(an("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),sn()<=Z.DEBUG&&an("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),fr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function au(e,t){return new su(e,t)}class ou{constructor(e,t){this.db=e,this.garbageCollector=au(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(e,n)=>t(n))}addReference(e,t,n){return lu(e,n)}removeReference(e,t,n){return lu(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return lu(e,t)}br(e,t){return function(e,t){let n=!1;return Yc(e).te(r=>Hc(e,r,t).next(e=>(e&&(n=!0),fr.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(s,a)=>{if(a<=t){const t=this.br(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,Zn.min()),Zc(e).delete(function(e){return[0,Or(e.path)]}(s))))});r.push(t)}}).next(()=>fr.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return lu(e,t)}Sr(e,t){const n=Zc(e);let r,i=Nr.ce;return n.ee({index:ci},(e,n)=>{let[s,a]=e,{path:o,sequenceNumber:l}=n;0===s?(i!==Nr.ce&&t(new Bn(Fr(r)),i),i=l,r=o):i=Nr.ce}).next(()=>{i!==Nr.ce&&t(new Bn(Fr(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lu(e,t){return Zc(e).put(function(e,t){return{targetId:0,path:Or(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class cu{constructor(){this.changes=new Wa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ys.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?fr.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uu{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return pu(e).put(n)}removeEntry(e,t,n){return pu(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Wl(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Dr(e,n)))}getEntry(e,t){let n=Ys.newInvalidDocument(t);return pu(e).ee({index:Qr,range:IDBKeyRange.only(mu(t))},(e,r)=>{n=this.Cr(t,r)}).next(()=>n)}vr(e,t){let n={size:0,document:Ys.newInvalidDocument(t)};return pu(e).ee({index:Qr,range:IDBKeyRange.only(mu(t))},(e,r)=>{n={document:this.Cr(t,r),size:qc(r)}}).next(()=>n)}getEntries(e,t){let n=Ga();return this.Fr(e,t,(e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)}).next(()=>n)}Mr(e,t){let n=Ga(),r=new Yi(Bn.comparator);return this.Fr(e,t,(e,t)=>{const i=this.Cr(e,t);n=n.insert(e,i),r=r.insert(e,qc(t))}).next(()=>({documents:n,Or:r}))}Fr(e,t,n){if(t.isEmpty())return fr.resolve();let r=new Ji(vu);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(mu(r.first()),mu(r.last())),s=r.getIterator();let a=s.getNext();return pu(e).ee({index:Qr,range:i},(e,t,r)=>{const i=Bn.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&vu(a,i)<0;)n(a,null),a=s.getNext();a&&a.isEqual(i)&&(n(a,t),a=s.hasNext()?s.getNext():null),a?r.j(mu(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Wl(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pu(e).J(IDBKeyRange.bound(a,o,!0)).next(e=>{null===i||void 0===i||i.incrementDocumentReadCount(e.length);let n=Ga();for(const i of e){const e=this.Cr(Bn.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Ua(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=Ga();const s=gu(t,n),a=gu(t,lr.max());return pu(e).ee({index:ei,range:IDBKeyRange.bound(s,a,!0)},(e,t,n)=>{const s=this.Cr(Bn.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new du(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return fu(e).get(ri).next(e=>(dn(!!e,20021),e))}Dr(e,t){return fu(e).put(ri,t)}Cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=El(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Bn.fromSegments(t.noDocument.path),r=Gl(t.noDocument.readTime);n=Ys.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return un(56709);{const e=Bn.fromSegments(t.unknownDocument.path),r=Gl(t.unknownDocument.version);n=Ys.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Qn(e[0],e[1]);return Zn.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Zn.min()))return e}return Ys.newInvalidDocument(e)}}function hu(e){return new uu(e)}class du extends cu{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Wa(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Ji((e,t)=>An(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const a=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,a.readTime)),s.isValidDocument()){const o=ql(this.Nr.serializer,s);r=r.add(i.path.popLast());const l=qc(o);n+=l-a.size,t.push(this.Nr.addEntry(e,i,o))}else if(n-=a.size,this.trackRemovals){const n=ql(this.Nr.serializer,s.convertToNoDocument(Zn.min()));t.push(this.Nr.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Nr.updateMetadata(e,n)),fr.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(e=>{let{documents:t,Or:n}=e;return n.forEach((e,n)=>{this.Br.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function fu(e){return Wi(e,ni)}function pu(e){return Wi(e,$r)}function mu(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gu(e,t){const n=t.documentKey.path.toArray();return[e,Wl(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vu(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=An(n[s],r[s]),i)return i;return i=An(n.length,r.length),i||(i=An(n[n.length-2],r[r.length-2]),i||An(n[n.length-1],r[r.length-1]))}class bu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ao(n.mutation,e,es.empty(),Qn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,to()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:to();const r=$a();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ya();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=$a();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,to()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ga();const s=Qa(),a=Qa();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Po)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Ao(a.mutation,t,a.mutation.getFieldMask(),Qn.now())):s.set(t.key,es.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new bu(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Qa();let r=new Yi((e,t)=>e-t),i=to();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||es.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||to()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Ja();l.forEach(e=>{if(!i.has(e)){const r=To(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return fr.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Bn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pa(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):fr.resolve($a());let a=er,o=i;return s.next(t=>fr.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?fr.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,to())).next(e=>({batchId:a,changes:Xa(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Bn(t)).next(e=>{let t=Ya();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ya();return this.indexManager.getCollectionParents(e,i).next(a=>fr.forEach(a,a=>{const o=function(e,t){return new Aa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ys.newInvalidDocument(r)))});let n=Ya();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Ao(s.mutation,r,es.empty(),Qn.now()),Ua(t,r)&&(n=n.insert(e,r))}),n})}}class wu{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fr.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ml(e.createTime)}}(t)),fr.resolve()}getNamedQuery(e,t){return fr.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:$l(e.bundledQuery),readTime:ml(e.readTime)}}(t)),fr.resolve()}}class xu{constructor(){this.overlays=new Yi(Bn.comparator),this.qr=new Map}getOverlay(e,t){return fr.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$a();return fr.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),fr.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),fr.resolve()}getOverlaysForCollection(e,t,n){const r=$a(),i=t.length+1,s=new Bn(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return fr.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Yi((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$a(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=$a(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return fr.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Bo(t,n));let i=this.qr.get(t);void 0===i&&(i=to(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class _u{constructor(){this.sessionToken=ns.EMPTY_BYTE_STRING}getSessionToken(e){return fr.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fr.resolve()}}class Su{constructor(){this.Qr=new Ji(ku.$r),this.Ur=new Ji(ku.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ku(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new ku(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Bn(new Mn([])),n=new ku(t,e),r=new ku(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Bn(new Mn([])),n=new ku(t,e),r=new ku(t,e+1);let i=to();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ku(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ku{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Bn.comparator(e.key,t.key)||An(e.Yr,t.Yr)}static Kr(e,t){return An(e.Yr,t.Yr)||Bn.comparator(e.key,t.key)}}class Tu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ji(ku.$r)}checkEmpty(e){return fr.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Fo(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new ku(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return fr.resolve(s)}lookupMutationBatch(e,t){return fr.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return fr.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return fr.resolve(0===this.mutationQueue.length?Ir:this.tr-1)}getAllMutationBatches(e){return fr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ku(t,0),r=new ku(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),fr.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ji(An);return t.forEach(e=>{const t=new ku(e,0),r=new ku(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),fr.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Bn.isDocumentKey(i)||(i=i.child(""));const s=new ku(new Bn(i),0);let a=new Ji(An);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),fr.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){dn(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return fr.forEach(t.mutations,r=>{const i=new ku(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new ku(t,0),r=this.Zr.firstAfterOrEqual(n);return fr.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fr.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Eu{constructor(e){this.ri=e,this.docs=new Yi(Bn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return fr.resolve(n?n.document.mutableCopy():Ys.newInvalidDocument(t))}getEntries(e,t){let n=Ga();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ys.newInvalidDocument(e))}),fr.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ga();const s=t.path,a=new Bn(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||cr(or(a),n)<=0||(r.has(a.key)||Ua(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return fr.resolve(i)}getAllFromCollectionGroup(e,t,n,r){un(9500)}ii(e,t){return fr.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Au(this)}getSize(e){return fr.resolve(this.size)}}class Au extends cu{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),fr.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Nu{constructor(e){this.persistence=e,this.si=new Wa(e=>xa(e),_a),this.lastRemoteSnapshotVersion=Zn.min(),this.highestTargetId=0,this.oi=0,this._i=new Su,this.targetCount=0,this.ai=Xc.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),fr.resolve()}getLastRemoteSnapshotVersion(e){return fr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fr.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fr.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),fr.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Xc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fr.resolve()}updateTargetData(e,t){return this.Pr(t),fr.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fr.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),fr.waitFor(i).next(()=>r)}getTargetCount(e){return fr.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return fr.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),fr.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),fr.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fr.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return fr.resolve(n)}containsKey(e,t){return fr.resolve(this._i.containsKey(t))}}class Iu{constructor(e,t){this.ui={},this.overlays={},this.ci=new Nr(0),this.li=!1,this.li=!0,this.hi=new _u,this.referenceDelegate=e(this),this.Pi=new Nu(this),this.indexManager=new Ic,this.remoteDocumentCache=function(e){return new Eu(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Vl(t),this.Ii=new wu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Tu(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){an("MemoryPersistence","Starting transaction:",e);const r=new Cu(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return fr.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Cu extends hr{constructor(e){super(),this.currentSequenceNumber=e}}class Pu{constructor(e){this.persistence=e,this.Ri=new Su,this.Vi=null}static mi(e){return new Pu(e)}get fi(){if(this.Vi)return this.Vi;throw un(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),fr.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),fr.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fr.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fr.forEach(this.fi,n=>{const r=Bn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Zn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return fr.or([()=>fr.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Lu{constructor(e,t){this.persistence=e,this.pi=new Wa(e=>Or(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=au(this,t)}static mi(e,t){return new Lu(e,t)}Ei(){}di(e){return fr.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return fr.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?fr.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Zn.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fr.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),fr.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),fr.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fr.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ps(e.data.value)),t}br(e,t,n){return fr.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return fr.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Du{constructor(e){this.serializer=e}k(e,t,n,r){const i=new mr("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Br)}(e),function(e){e.createObjectStore(zr,{keyPath:"userId"});e.createObjectStore(Vr,{keyPath:qr,autoIncrement:!0}).createIndex(Wr,Hr,{unique:!0}),e.createObjectStore(Xr)}(e),Ou(e),function(e){e.createObjectStore(jr)}(e));let s=fr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(oi),e.deleteObjectStore(ii),e.deleteObjectStore(di)}(e),Ou(e)),s=s.next(()=>function(e){const t=e.store(di),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zn.min().toTimestamp(),targetCount:0};return t.put(hi,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(Vr).J().next(n=>{e.deleteObjectStore(Vr),e.createObjectStore(Vr,{keyPath:qr,autoIncrement:!0}).createIndex(Wr,Hr,{unique:!0});const r=t.store(Vr),i=n.map(e=>r.put(e));return fr.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(mi,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.yi(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(ni)}(e),this.wi(i)))),n<7&&r>=7&&(s=s.next(()=>this.Si(i))),n<8&&r>=8&&(s=s.next(()=>this.bi(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Di(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(gi,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(vi,{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore(Ni,{keyPath:Ii});t.createIndex(Ci,Pi,{unique:!1}),t.createIndex(Li,Di,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore($r,{keyPath:Jr});t.createIndex(Qr,Zr),t.createIndex(ei,ti)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(jr))),n<14&&r>=14&&(s=s.next(()=>this.Fi(e,i))),n<15&&r>=15&&(s=s.next(()=>function(e){e.createObjectStore(bi,{keyPath:"indexId",autoIncrement:!0}).createIndex(yi,"collectionGroup",{unique:!1});e.createObjectStore(wi,{keyPath:xi}).createIndex(_i,Si,{unique:!1});e.createObjectStore(ki,{keyPath:Ti}).createIndex(Ei,Ai,{unique:!1})}(e))),n<16&&r>=16&&(s=s.next(()=>{t.objectStore(wi).clear()}).next(()=>{t.objectStore(ki).clear()})),n<17&&r>=17&&(s=s.next(()=>{!function(e){e.createObjectStore(Oi,{keyPath:"name"})}(e)})),n<18&&r>=18&&L()&&(s=s.next(()=>{t.objectStore(wi).clear()}).next(()=>{t.objectStore(ki).clear()})),s}wi(e){let t=0;return e.store(jr).ee((e,n)=>{t+=qc(n)}).next(()=>{const n={byteSize:t};return e.store(ni).put(ri,n)})}yi(e){const t=e.store(zr),n=e.store(Vr);return t.J().next(t=>fr.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,Ir],[t.userId,t.lastAcknowledgedBatchId]);return n.J(Wr,r).next(n=>fr.forEach(n,n=>{dn(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=Kl(this.serializer,n);return Vc(e,t.userId,r).next(()=>{})}))}))}Si(e){const t=e.store(oi),n=e.store(jr);return e.store(di).get(hi).next(e=>{const r=[];return n.ee((n,i)=>{const s=new Mn(n),a=function(e){return[0,Or(e)]}(s);r.push(t.get(a).next(n=>n?fr.resolve():(n=>t.put({targetId:0,path:Or(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>fr.waitFor(r))})}bi(e,t){e.createObjectStore(fi,{keyPath:pi});const n=t.store(fi),r=new Cc,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Or(r)})}};return t.store(jr).ee({X:!0},(e,t)=>{const n=new Mn(e);return i(n.popLast())}).next(()=>t.store(Xr).ee({X:!0},(e,t)=>{let[n,r,s]=e;const a=Fr(r);return i(a.popLast())}))}Di(e){const t=e.store(ii);return t.ee((e,n)=>{const r=Yl(n),i=Xl(this.serializer,r);return t.put(i)})}Ci(e,t){const n=t.store(jr),r=[];return n.ee((e,n)=>{const i=t.store($r),s=function(e){return e.document?new Bn(Mn.fromString(e.document.name).popFirst(5)):e.noDocument?Bn.fromSegments(e.noDocument.path):e.unknownDocument?Bn.fromSegments(e.unknownDocument.path):un(36783)}(n).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>fr.waitFor(r))}Fi(e,t){const n=t.store(Vr),r=hu(this.serializer),i=new Iu(Pu.mi,this.serializer.yt);return n.J().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:to();Kl(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),fr.forEach(n,(e,n)=>{const s=new tn(n),a=rc.wt(this.serializer,s),o=i.getIndexManager(s),l=Wc.wt(s,this.serializer,o,i.referenceDelegate);return new yu(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new qi(t,Nr.ce),e).next()})})}}function Ou(e){e.createObjectStore(oi,{keyPath:li}).createIndex(ci,ui,{unique:!0}),e.createObjectStore(ii,{keyPath:"targetId"}).createIndex(si,ai,{unique:!0}),e.createObjectStore(di)}const Ru="IndexedDbPersistence",Mu=18e5,Fu=5e3,ju="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bu="main";class Uu{constructor(e,t,n,r,i,s,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=i,this.window=s,this.document=a,this.xi=l,this.Oi=c,this.Ni=u,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=e=>Promise.resolve(),!Uu.v())throw new mn(pn.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ou(this,r),this.$i=t+Bu,this.serializer=new Vl(o),this.Ui=new gr(this.$i,this.Ni,new Du(this.serializer)),this.hi=new sc,this.Pi=new $c(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hu(this.serializer),this.Ii=new ec,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===c&&on(Ru,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new mn(pn.FAILED_PRECONDITION,ju);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Nr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(wr(e))return an(Ru,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return an(Ru,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return zu(e).get(Ur).next(e=>fr.resolve(this.es(e)))}ts(e){return Vu(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Mu)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Wi(e,mi);return t.J().next(e=>{const n=this.ss(e,Mu),r=e.filter(e=>-1===n.indexOf(e));return fr.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?fr.resolve(!0):zu(e).get(Ur).next(t=>{if(null!==t&&this.rs(t.leaseTimestampMs,Fu)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new mn(pn.FAILED_PRECONDITION,ju);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vu(e).J().next(e=>void 0===this.ss(e,Fu).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&an(Ru,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Br,mi],e=>{const t=new qi(e,Nr.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Vu(e).J().next(e=>this.ss(e,Mu).map(e=>e.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Wc.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dc(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return rc.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){an(Ru,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 18===e?Vi:17===e?zi:16===e?Ui:15===e?Bi:14===e?ji:13===e?Fi:12===e?Mi:11===e?Ri:void un(60245)}(this.Ni);let s;return this.Ui.runTransaction(e,r,i,r=>(s=new qi(r,this.ci?this.ci.next():Nr.ce),"readwrite-primary"===t?this.Hi(s).next(e=>!!e||this.Yi(s)).next(t=>{if(!t)throw on("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new mn(pn.FAILED_PRECONDITION,ur);return n(s)}).next(e=>this.Xi(s).next(()=>e)):this.Is(s).next(()=>n(s)))).then(e=>(s.raiseOnCommittedEvent(),e))}Is(e){return zu(e).get(Ur).next(e=>{if(null!==e&&this.rs(e.leaseTimestampMs,Fu)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new mn(pn.FAILED_PRECONDITION,ju)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zu(e).put(Ur,t)}static v(){return gr.v()}Zi(e){const t=zu(e);return t.get(Ur).next(e=>this.es(e)?(an(Ru,"Releasing primary lease."),t.delete(Ur)):fr.resolve())}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(on("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground="visible"===this.document.visibilityState)}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;P()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{var t;const n=null!==(null===(t=this.Ki)||void 0===t?void 0:t.getItem(this._s(e)));return an(Ru,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return on(Ru,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){on("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch(e){}}_s(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function zu(e){return Wi(e,Br)}function Vu(e){return Wi(e,mi)}function qu(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Wu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=to(),r=to();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Wu(e,t.fromCache,n,r)}}class Hu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gu{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=P()?8:vr(T())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Hu;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(sn()<=Z.DEBUG&&an("QueryEngine","SDK will not create cache indexes for query:",Ba(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fr.resolve()):(sn()<=Z.DEBUG&&an("QueryEngine","Query:",Ba(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(sn()<=Z.DEBUG&&an("QueryEngine","The SDK decides to create cache indexes for query:",Ba(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Da(t))):fr.resolve())}ys(e,t){if(Ca(t))return fr.resolve(null);let n=Da(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ma(t,null,"F"),n=Da(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=to(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Ma(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Ca(t)||r.isEqual(Zn.min())?fr.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?fr.resolve(null):(sn()<=Z.DEBUG&&an("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ba(t)),this.vs(e,s,t,ar(r,er)).next(e=>e))})}Ds(e,t){let n=new Ji(Va(e));return t.forEach((t,r)=>{Ua(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return sn()<=Z.DEBUG&&an("QueryEngine","Using full collection scan to execute query:",Ba(t)),this.ps.getDocumentsMatchingQuery(e,t,lr.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ku="LocalStore";class Yu{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Yi(An),this.xs=new Wa(e=>xa(e),_a),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Xu(e,t,n,r){return new Yu(e,t,n,r)}async function $u(e,t){const n=fn(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=to();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ju(e){const t=fn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Qu(e,t,n){let r=to(),i=to();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ga();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Zn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):an(Ku,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Zu(e,t){const n=fn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ir),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function eh(e,t){const n=fn(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,fr.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new zl(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function th(e,t,n){const r=fn(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!wr(e))throw e;an(Ku,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function nh(e,t,n){const r=fn(e);let i=Zn.min(),s=to();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=fn(e),i=r.xs.get(n);return void 0!==i?fr.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Da(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Zn.min(),n?s:to())).next(e=>(sh(r,za(t),e),{documents:e,Qs:s})))}function rh(e,t){const n=fn(e),r=fn(n.Pi),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.At(e,t).next(e=>e?e.target:null))}function ih(e,t){const n=fn(e),r=n.Os.get(t)||Zn.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Ns.getAllFromCollectionGroup(e,t,ar(r,er),Number.MAX_SAFE_INTEGER)).then(e=>(sh(n,t,e),e))}function sh(e,t,n){let r=e.Os.get(t)||Zn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}async function ah(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:to();const r=await eh(e,Da($l(t.bundledQuery))),i=fn(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=ml(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(e,t);const a=r.withResumeToken(ns.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(e,a).next(()=>i.Pi.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.Pi.addMatchingKeys(e,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(e,t))})}const oh="firestore_clients";function lh(e,t){return"".concat(oh,"_").concat(e,"_").concat(t)}const ch="firestore_mutations";function uh(e,t,n){let r="".concat(ch,"_").concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}const hh="firestore_targets";function dh(e,t){return"".concat(hh,"_").concat(e,"_").concat(t)}const fh="SharedClientState";class ph{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ws(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new mn(r.error.code,r.error.message))),s?new ph(e,t,r.state,i):(on(fh,"Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mh{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new mn(n.error.code,n.error.message))),i?new mh(e,n.state,r):(on(fh,"Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ro();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Lr(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new gh(e,i):(on(fh,"Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class vh{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vh(t.clientId,t.onlineState):(on(fh,"Failed to parse online state: ".concat(e)),null)}}class bh{constructor(){this.activeTargetIds=ro()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yh{constructor(e,t,n,r,i){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Yi(An),this.started=!1,this.Xs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=lh(this.persistenceKey,this.Js),this.no=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new bh),this.ro=new RegExp("^".concat(oh,"_").concat(s,"_([^_]*)$")),this.io=new RegExp("^".concat(ch,"_").concat(s,"_(\\d+)(?:_(.*))?$")),this.so=new RegExp("^".concat(hh,"_").concat(s,"_(\\d+)$")),this.oo=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._o=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const n of e){if(n===this.Js)continue;const e=this.getItem(lh(this.persistenceKey,n));if(e){const t=gh.Ws(n,e);t&&(this.Zs=this.Zs.insert(t.clientId,t))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const e=this.uo(t);e&&this.co(e)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(dh(this.persistenceKey,e));if(t){const r=mh.Ws(e,t);r&&(n=r.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dh(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Po(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return an(fh,"READ",e,t),t}setItem(e,t){an(fh,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){an(fh,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(an(fh,"EVENT",t.key,t.newValue),t.key===this.eo)return void on("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.ro.test(t.key)){if(null==t.newValue){const e=this.Ro(t.key);return this.Vo(e,null)}{const e=this.mo(t.key,t.newValue);if(e)return this.Vo(e.clientId,e)}}else if(this.io.test(t.key)){if(null!==t.newValue){const e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(this.so.test(t.key)){if(null!==t.newValue){const e=this.yo(t.key,t.newValue);if(e)return this.wo(e)}}else if(t.key===this.oo){if(null!==t.newValue){const e=this.uo(t.newValue);if(e)return this.co(e)}}else if(t.key===this.no){const e=function(e){let t=Nr.ce;if(null!=e)try{const n=JSON.parse(e);dn("number"==typeof n,30636,{So:e}),t=n}catch(e){on(fh,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Nr.ce&&this.sequenceNumberHandler(e)}else if(t.key===this._o){const e=this.bo(t.newValue);await Promise.all(e.map(e=>this.syncEngine.Do(e)))}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){const r=new ph(this.currentUser,e,t,n),i=uh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){const t=uh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){const r=dh(this.persistenceKey,e),i=new mh(e,t,n);this.setItem(r,i.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const n=this.Ro(e);return gh.Ws(n,t)}fo(e,t){const n=this.io.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ph.Ws(new tn(i),r,t)}yo(e,t){const n=this.so.exec(e),r=Number(n[1]);return mh.Ws(r,t)}uo(e){return vh.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);an(fh,"Ignoring mutation for non-active user ".concat(e.user.uid))}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const n=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(n),s=[],a=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.Fo(s,a).then(()=>{this.Zs=n})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=ro();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class wh{constructor(){this.Mo=new bh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xh{Oo(e){}shutdown(){}}const _h="ConnectivityMonitor";class Sh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){an(_h,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){an(_h,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let kh=null;function Th(){return null===kh?kh=268435456+Math.round(2147483648*Math.random()):kh++,"0x"+kh.toString(16)}const Eh="RestConnection",Ah={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nh{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===ms?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Th(),a=this.zo(e,t.toUriEncodedString());an(Eh,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),c=w(l);return this.Jo(e,a,o,n,c).then(t=>(an(Eh,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw ln(Eh,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+nn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Ah[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Ih{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ch="WebChannelConnection";class Ph extends Nh{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Th();return new Promise((i,a)=>{const o=new qt;o.setWithCredentials(!0),o.listenOnce(Ht.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Gt.NO_ERROR:const n=o.getResponseJson();an(Ch,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Gt.TIMEOUT:an(Ch,"RPC '".concat(e,"' ").concat(s," timed out")),a(new mn(pn.DEADLINE_EXCEEDED,"Request time out"));break;case Gt.HTTP_ERROR:const r=o.getStatus();if(an(Ch,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(pn).indexOf(t)>=0?t:pn.UNKNOWN}(n.status);a(new mn(e,n.message))}else a(new mn(pn.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new mn(pn.UNAVAILABLE,"Connection failed."));break;default:un(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{an(Ch,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);an(Ch,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Th(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$t(),a=Xt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");an(Ch,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let h=!1,d=!1;const f=new Ih({Yo:t=>{d?an(Ch,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(an(Ch,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),an(Ch,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Wt.EventType.OPEN,()=>{d||(an(Ch,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Wt.EventType.CLOSE,()=>{d||(d=!0,an(Ch,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Wt.EventType.ERROR,t=>{d||(d=!0,ln(Ch,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new mn(pn.UNAVAILABLE,"The operation could not be completed")))}),p(u,Wt.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];dn(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){an(Ch,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=zo[e];if(void 0!==t)return Wo(t)}(t),i=a.message;void 0===n&&(n=pn.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.a_(new mn(n,i)),u.close()}else an(Ch,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(a,Yt.STAT_EVENT,t=>{t.stat===Kt.PROXY?an(Ch,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Kt.NOPROXY&&an(Ch,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Lh(){return"undefined"!=typeof window?window:null}function Dh(){return"undefined"!=typeof document?document:null}function Oh(e){return new ul(e,!0)}class Rh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&an("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Mh="PersistentStream";class Fh{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rh(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===pn.RESOURCE_EXHAUSTED?(on(t.toString()),on("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===pn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new mn(pn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return an(Mh,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(an(Mh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jh extends Fh{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:un(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(dn(void 0===t||"string"==typeof t,58123),ns.fromBase64String(t||"")):(dn(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ns.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?pn.UNKNOWN:Wo(e.code);return new mn(t,e.message||"")}(a);n=new nl(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=wl(e,r.document.name),s=ml(r.document.updateTime),a=r.document.createTime?ml(r.document.createTime):Zn.min(),o=new Gs({mapValue:{fields:r.document.fields}}),l=Ys.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new el(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=wl(e,r.document),s=r.readTime?ml(r.readTime):Zn.min(),a=Ys.newNoDocument(i,s),o=r.removedTargetIds||[];n=new el([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=wl(e,r.document),s=r.removedTargetIds||[];n=new el([],s,i,null)}else{if(!("filter"in t))return un(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Uo(r,i),a=e.targetId;n=new tl(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zn.min():t.readTime?ml(t.readTime):Zn.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Sl(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Sa(r)?{documents:Il(e,r)}:{query:Cl(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=fl(e,t.resumeToken);const r=hl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zn.min())>0){n.readTime=dl(e,t.snapshotVersion.toTimestamp());const r=hl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return un(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Sl(this.serializer),t.removeTarget=e,this.q_(t)}}class Bh extends Fh{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dn(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){dn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(dn(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ml(e.updateTime):ml(t);return n.isEqual(Zn.min())&&(n=ml(t)),new xo(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ml(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Sl(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Al(this.serializer,e))};this.q_(t)}}class Uh{}class zh extends Uh{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new mn(pn.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,vl(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===pn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new mn(pn.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,vl(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===pn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new mn(pn.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Vh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(on(t),this.aa=!1):an("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const qh="RemoteStore";class Wh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Zh(this)&&(an(qh,"Restarting streams for network reachability change."),await async function(e){const t=fn(e);t.Ea.add(4),await Gh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Hh(t)}(this))})}),this.Ra=new Vh(n,r)}}async function Hh(e){if(Zh(e))for(const t of e.da)await t(!0)}async function Gh(e){for(const t of e.da)await t(!1)}function Kh(e,t){const n=fn(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Qh(n)?Jh(n):bd(n).O_()&&Xh(n,t))}function Yh(e,t){const n=fn(e),r=bd(n);n.Ia.delete(t),r.O_()&&$h(n,t),0===n.Ia.size&&(r.O_()?r.L_():Zh(n)&&n.Ra.set("Unknown"))}function Xh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}bd(e).Y_(t)}function $h(e,t){e.Va.Ue(t),bd(e).Z_(t)}function Jh(e){e.Va=new il({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),bd(e).start(),e.Ra.ua()}function Qh(e){return Zh(e)&&!bd(e).x_()&&e.Ia.size>0}function Zh(e){return 0===fn(e).Ea.size}function ed(e){e.Va=void 0}async function td(e){e.Ra.set("Online")}async function nd(e){e.Ia.forEach((t,n)=>{Xh(e,t)})}async function rd(e,t){ed(e),Qh(e)?(e.Ra.ha(t),Jh(e)):e.Ra.set("Unknown")}async function id(e,t,n){if(e.Ra.set("Online"),t instanceof nl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){an(qh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await sd(e,n)}else if(t instanceof el?e.Va.Ze(t):t instanceof tl?e.Va.st(t):e.Va.tt(t),!n.isEqual(Zn.min()))try{const t=await Ju(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ns.EMPTY_BYTE_STRING,r.snapshotVersion)),$h(e,t);const i=new zl(r.target,t,n,r.sequenceNumber);Xh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){an(qh,"Failed to raise snapshot:",t),await sd(e,t)}}async function sd(e,t,n){if(!wr(t))throw t;e.Ea.add(1),await Gh(e),e.Ra.set("Offline"),n||(n=()=>Ju(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{an(qh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Hh(e)})}function ad(e,t){return t().catch(n=>sd(e,n,t))}async function od(e){const t=fn(e),n=yd(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ir;for(;ld(t);)try{const e=await Zu(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,cd(t,e)}catch(e){await sd(t,e)}ud(t)&&hd(t)}function ld(e){return Zh(e)&&e.Ta.length<10}function cd(e,t){e.Ta.push(t);const n=yd(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ud(e){return Zh(e)&&!yd(e).x_()&&e.Ta.length>0}function hd(e){yd(e).start()}async function dd(e){yd(e).ra()}async function fd(e){const t=yd(e);for(const n of e.Ta)t.ea(n.mutations)}async function pd(e,t,n){const r=e.Ta.shift(),i=jo.from(r,t,n);await ad(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await od(e)}async function md(e,t){t&&yd(e).X_&&await async function(e,t){if(function(e){return qo(e)&&e!==pn.ABORTED}(t.code)){const n=e.Ta.shift();yd(e).B_(),await ad(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await od(e)}}(e,t),ud(e)&&hd(e)}async function gd(e,t){const n=fn(e);n.asyncQueue.verifyOperationInProgress(),an(qh,"RemoteStore received new credentials");const r=Zh(n);n.Ea.add(3),await Gh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Hh(n)}async function vd(e,t){const n=fn(e);t?(n.Ea.delete(2),await Hh(n)):t||(n.Ea.add(2),await Gh(n),n.Ra.set("Unknown"))}function bd(e){return e.ma||(e.ma=function(e,t,n){const r=fn(e);return r.sa(),new jh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:td.bind(null,e),t_:nd.bind(null,e),r_:rd.bind(null,e),H_:id.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Qh(e)?Jh(e):e.Ra.set("Unknown")):(await e.ma.stop(),ed(e))})),e.ma}function yd(e){return e.fa||(e.fa=function(e,t,n){const r=fn(e);return r.sa(),new Bh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:dd.bind(null,e),r_:md.bind(null,e),ta:fd.bind(null,e),na:pd.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await od(e)):(await e.fa.stop(),e.Ta.length>0&&(an(qh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class wd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new wd(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mn(pn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xd(e,t){if(on("AsyncQueue","".concat(t,": ").concat(e)),wr(e))return new mn(pn.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class _d{static emptySet(e){return new _d(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Bn.comparator(t.key,n.key):(e,t)=>Bn.comparator(e.key,t.key),this.keyedMap=Ya(),this.sortedSet=new Yi(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _d))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new _d;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Sd{constructor(){this.ga=new Yi(Bn.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):un(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class kd{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new kd(e,t,_d.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Td{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ed{constructor(){this.queries=Ad(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=fn(e),r=n.queries;n.queries=Ad(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new mn(pn.ABORTED,"Firestore shutting down"))}}function Ad(){return new Wa(e=>ja(e),Fa)}async function Nd(e,t){const n=fn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Td,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=xd(e,"Initialization of query '".concat(Ba(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Ld(n)}async function Id(e,t){const n=fn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Cd(e,t){const n=fn(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Ld(n)}function Pd(e,t,n){const r=fn(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function Ld(e){e.Ca.forEach(e=>{e.next()})}var Dd,Od;(Od=Dd||(Dd={})).Ma="default",Od.Cache="cache";class Rd{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new kd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dd.Cache}}class Md{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class Fd{constructor(e){this.serializer=e}$s(e){return wl(this.serializer,e)}Us(e){return e.metadata.exists?El(this.serializer,e.document,!1):Ys.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return ml(e)}}class jd{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=Bd(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const n=Mn.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,l({},this.progress)):null}za(e){const t=new Map,n=new Fd(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.$s(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||to()).add(e);t.set(n,r)}}return t}async ja(e){const t=await async function(e,t,n,r){const i=fn(e);let s=to(),a=Ga();for(const c of n){const e=t.$s(c.metadata.name);c.document&&(s=s.add(e));const n=t.Us(c);n.setReadTime(t.Ks(c.metadata.readTime)),a=a.insert(e,n)}const o=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await eh(i,function(e){return Da(Ia(Mn.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>Qu(e,o,a).next(t=>(o.apply(e),t)).next(t=>i.Pi.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.Pi.addMatchingKeys(e,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.ks,t.qs)).next(()=>t.ks)))}(e,new Fd(this.serializer),this.Wa,this.Ua.id),n=this.za(this.documents);for(const r of this.Ka)await ah(e,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function Bd(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Ud{constructor(e){this.key=e}}class zd{constructor(e){this.key=e}}class Vd{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=to(),this.mutatedKeys=to(),this.eu=Va(e),this.tu=new _d(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Sd,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ua(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return un(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new kd(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=to(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new zd(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Ud(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=to();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return kd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const qd="SyncEngine";class Wd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Hd{constructor(e){this.key=e,this.hu=!1}}class Gd{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Wa(e=>ja(e),Fa),this.Iu=new Map,this.Eu=new Set,this.du=new Yi(Bn.comparator),this.Au=new Map,this.Ru=new Su,this.Vu={},this.mu=new Map,this.fu=Xc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Kd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Sf(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Xd(r,t,n,!0),i}async function Yd(e,t){const n=Sf(e);await Xd(n,t,!0,!1)}async function Xd(e,t,n,r){const i=await eh(e.localStore,Da(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await $d(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Kh(e.remoteStore,i),o}async function $d(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await nh(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return cf(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await nh(e.localStore,t,!0),a=new Vd(t,s.Qs),o=a.ru(s.documents),l=Zo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);cf(e,n,c.au);const u=new Wd(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Jd(e,t,n){const r=fn(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Fa(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await th(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yh(r.remoteStore,i.targetId),of(r,i.targetId)}).catch(dr)):(of(r,i.targetId),await th(r.localStore,i.targetId,!0))}async function Qd(e,t){const n=fn(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yh(n.remoteStore,r.targetId))}async function Zd(e,t){const n=fn(e);try{const e=await function(e,t){const n=fn(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(ns.EMPTY_BYTE_STRING,Zn.min()).withLastLimboFreeSnapshotVersion(Zn.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=Ga(),l=to();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Qu(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Zn.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return fr.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(dn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?dn(r.hu,14607):e.removedDocuments.size>0&&(dn(r.hu,42227),r.hu=!1))}),await df(n,e,t)}catch(e){await dr(e)}}function ef(e,t,n){const r=fn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=fn(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Ld(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function tf(e,t,n){const r=fn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Yi(Bn.comparator);e=e.insert(s,Ys.newNoDocument(s,Zn.min()));const n=to().add(s),i=new Qo(Zn.min(),new Map,new Yi(An),e,n);await Zd(r,i),r.du=r.du.remove(s),r.Au.delete(t),hf(r)}else await th(r.localStore,t,!1).then(()=>of(r,t,n)).catch(dr)}async function nf(e,t){const n=fn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=fn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=fr.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);dn(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=to();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);af(n,r,null),sf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await df(n,e)}catch(e){await dr(e)}}async function rf(e,t,n){const r=fn(e);try{const e=await function(e,t){const n=fn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(dn(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);af(r,t,n),sf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await df(r,e)}catch(n){await dr(n)}}function sf(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function af(e,t,n){const r=fn(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function of(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||lf(e,t)})}function lf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Yh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),hf(e))}function cf(e,t,n){for(const r of n)r instanceof Ud?(e.Ru.addReference(r.key,t),uf(e,r)):r instanceof zd?(an(qd,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||lf(e,r.key)):un(19791,{wu:r})}function uf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(an(qd,"New document in limbo: "+n),e.Eu.add(r),hf(e))}function hf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Bn(Mn.fromString(t)),r=e.fu.next();e.Au.set(r,new Hd(n)),e.du=e.du.insert(n,r),Kh(e.remoteStore,new zl(Da(Ia(n.path)),r,"TargetPurposeLimboResolution",Nr.ce))}}async function df(e,t,n){const r=fn(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Wu.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=fn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>fr.forEach(t,t=>fr.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>fr.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!wr(e))throw e;an(Ku,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function ff(e,t){const n=fn(e);if(!n.currentUser.isEqual(t)){an(qd,"User change. New user:",t.toKey());const e=await $u(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new mn(pn.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await df(n,e.Ls)}}function pf(e,t){const n=fn(e),r=n.Au.get(t);if(r&&r.hu)return to().add(r.key);{let e=to();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function mf(e,t){const n=fn(e),r=await nh(n.localStore,t.query,!0),i=t.view.cu(r);return n.isPrimaryClient&&cf(n,t.targetId,i.au),i}async function gf(e,t){const n=fn(e);return ih(n.localStore,t).then(e=>df(n,e))}async function vf(e,t,n,r){const i=fn(e),s=await function(e,t){const n=fn(e),r=fn(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.er(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):fr.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await od(i.remoteStore):"acknowledged"===n||"rejected"===n?(af(i,t,r||null),sf(i,t),function(e,t){fn(fn(e).mutationQueue).ir(t)}(i.localStore,t)):un(6720,"Unknown batchState",{Su:n}),await df(i,s)):an(qd,"Cannot apply mutation batch with id: "+t)}async function bf(e,t,n){const r=fn(e),i=[],s=[];for(const a of t){let e;const t=r.Iu.get(a);if(t&&0!==t.length){e=await eh(r.localStore,Da(t[0]));for(const e of t){const t=r.Tu.get(e),n=await mf(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await rh(r.localStore,a);e=await eh(r.localStore,t),await $d(r,yf(t),a,!1,e.resumeToken)}i.push(e)}return r.Pu.H_(s),i}function yf(e){return Na(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function wf(e){return function(e){return fn(fn(e).persistence).Ts()}(fn(e).localStore)}async function xf(e,t,n,r){const i=fn(e);if(i.gu)return void an(qd,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await ih(i.localStore,za(s[0])),r=Qo.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ns.EMPTY_BYTE_STRING);await df(i,e,r);break}case"rejected":await th(i.localStore,t,!0),of(i,t,r);break;default:un(64155,n)}}async function _f(e,t,n){const r=Sf(e);if(r.gu){for(const e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){an(qd,"Adding an already active target "+e);continue}const t=await rh(r.localStore,e),n=await eh(r.localStore,t);await $d(r,yf(t),n.targetId,!1,n.resumeToken),Kh(r.remoteStore,n)}for(const e of n)r.Iu.has(e)&&await th(r.localStore,e,!1).then(()=>{Yh(r.remoteStore,e),of(r,e)}).catch(dr)}}function Sf(e){const t=fn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tf.bind(null,t),t.Pu.H_=Cd.bind(null,t.eventManager),t.Pu.yu=Pd.bind(null,t.eventManager),t}function kf(e){const t=fn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rf.bind(null,t),t}class Tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Xu(this.persistence,new Gu,e.initialUser,this.serializer)}Cu(e){return new Iu(Pu.mi,this.serializer)}Du(e){return new wh}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tf.provider={build:()=>new Tf};class Ef extends Tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dn(this.persistence.referenceDelegate instanceof Lu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new iu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?zc.withCacheSize(this.cacheSizeBytes):zc.DEFAULT;return new Iu(e=>Lu.mi(e,t),this.serializer)}}class Af extends Tf{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await kf(this.xu.syncEngine),await od(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Xu(this.persistence,new Gu,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new iu(n,e.asyncQueue,t)}Mu(e,t){const n=new Ar(t,this.persistence);return new Er(e.asyncQueue,n)}Cu(e){const t=qu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?zc.withCacheSize(this.cacheSizeBytes):zc.DEFAULT;return new Uu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Lh(),Dh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new wh}}class Nf extends Af{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof yh&&(this.sharedClientState.syncEngine={Co:vf.bind(null,t),vo:xf.bind(null,t),Fo:_f.bind(null,t),Ts:wf.bind(null,t),Do:gf.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async e=>{await async function(e,t){const n=fn(e);if(Sf(n),kf(n),!0===t&&!0!==n.gu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await bf(n,e.toArray());n.gu=!0,await vd(n.remoteStore,!0);for(const r of t)Kh(n.remoteStore,r)}else if(!1===t&&!1!==n.gu){const e=[];let t=Promise.resolve();n.Iu.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(of(n,i),th(n.localStore,i,!0))),Yh(n.remoteStore,i)}),await t,await bf(n,e),function(e){const t=fn(e);t.Au.forEach((e,n)=>{Yh(t.remoteStore,n)}),t.Ru.Jr(),t.Au=new Map,t.du=new Yi(Bn.comparator)}(n),n.gu=!1,await vd(n.remoteStore,!1)}}(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Du(e){const t=Lh();if(!yh.v(t))throw new mn(pn.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=qu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class If{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ef(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ff.bind(null,this.syncEngine),await vd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ed}createDatastore(e){const t=Oh(e.databaseInfo.databaseId),n=function(e){return new Ph(e)}(e.databaseInfo);return function(e,t,n,r){return new zh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Wh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>ef(this.syncEngine,e,0),Sh.v()?new Sh:new xh)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Gd(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=fn(e);an(qh,"RemoteStore shutting down."),t.Ea.add(5),await Gh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function Cf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}If.provider={build:()=>new If};class Pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):on("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Lf{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new gn,this.buffer=new Uint8Array,this.Lu=new TextDecoder("utf-8"),this.ku().then(e=>{e&&e.$a()?this.metadata.resolve(e.Qa.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null===e||void 0===e?void 0:e.Qa))))},e=>this.metadata.reject(e))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(null===e)return null;const t=this.Lu.decode(e),n=Number(t);isNaN(n)&&this.Qu("length string (".concat(t,") is not valid number"));const r=await this.$u(n);return new Md(JSON.parse(r),e.length+n)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(0===this.buffer.length)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Df{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new mn(pn.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=fn(e),r={documents:t.map(e=>yl(n.serializer,e))},i=await n.Ho("BatchGetDocuments",n.serializer.databaseId,Mn.emptyPath(),r,t.length),s=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){dn(!!t.found,43571),t.found.name,t.found.updateTime;const n=wl(e,t.found.name),r=ml(t.found.updateTime),i=t.found.createTime?ml(t.found.createTime):Zn.min(),s=new Gs({mapValue:{fields:t.found.fields}});return Ys.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){dn(!!t.missing,3894),dn(!!t.readTime,22933);const n=wl(e,t.missing),r=ml(t.readTime);return Ys.newNoDocument(n,r)}(e,t):un(7234,{result:t})}(n.serializer,e);s.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=s.get(e.toString());dn(!!t,55234,{key:e}),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ro(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=Bn.fromPath(t);this.mutations.push(new Mo(n,this.precondition(n)))}),await async function(e,t){const n=fn(e),r={writes:t.map(e=>Al(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,Mn.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw un(50498,{Gu:e.constructor.name});t=Zn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new mn(pn.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zn.min())?_o.exists(!1):_o.updateTime(t):_o.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zn.min()))throw new mn(pn.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _o.updateTime(t)}return _o.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Of{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.zu=n.maxAttempts,this.M_=new Rh(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Df(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!Cr(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!qo(t)}return!1}}const Rf="FirestoreClient";class Mf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=tn.UNAUTHENTICATED,this.clientId=En.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{an(Rf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(an(Rf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Fz){const n=xd(Fz,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ff(e,t){e.asyncQueue.verifyOperationInProgress(),an(Rf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await $u(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function jf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Bf(e);an(Rf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>gd(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>gd(t.remoteStore,n)),e._onlineComponents=t}async function Bf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){an(Rf,"Using user provided OfflineComponentProvider");try{await Ff(e,e._uninitializedComponentsProvider._offline)}catch(Fz){const n=Fz;if(!function(e){return"FirebaseError"===e.name?e.code===pn.FAILED_PRECONDITION||e.code===pn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ln("Error using user provided cache. Falling back to memory cache: "+n),await Ff(e,new Tf)}}else an(Rf,"Using default OfflineComponentProvider"),await Ff(e,new Ef(void 0));return e._offlineComponents}async function Uf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(an(Rf,"Using user provided OnlineComponentProvider"),await jf(e,e._uninitializedComponentsProvider._online)):(an(Rf,"Using default OnlineComponentProvider"),await jf(e,new If))),e._onlineComponents}function zf(e){return Bf(e).then(e=>e.persistence)}function Vf(e){return Bf(e).then(e=>e.localStore)}function qf(e){return Uf(e).then(e=>e.remoteStore)}function Wf(e){return Uf(e).then(e=>e.syncEngine)}function Hf(e){return Uf(e).then(e=>e.datastore)}async function Gf(e){const t=await Uf(e),n=t.eventManager;return n.onListen=Kd.bind(null,t.syncEngine),n.onUnlisten=Jd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Yd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Qd.bind(null,t.syncEngine),n}function Kf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new gn;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Pf({next:o=>{s.Nu(),t.enqueueAndForget(()=>Id(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new mn(pn.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new mn(pn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Rd(Ia(n.path),s,{includeMetadataChanges:!0,qa:!0});return Nd(e,a)}(await Gf(e),e.asyncQueue,t,n,r)),r.promise}function Yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new gn;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Pf({next:n=>{s.Nu(),t.enqueueAndForget(()=>Id(e,a)),n.fromCache&&"server"===r.source?i.reject(new mn(pn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Rd(n,s,{includeMetadataChanges:!0,qa:!0});return Nd(e,a)}(await Gf(e),e.asyncQueue,t,n,r)),r.promise}function Xf(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Go().encode(e):e,function(e,t){return new Lf(e,t)}(function(e,t){if(e instanceof Uint8Array)return Cf(e,t);if(e instanceof ArrayBuffer)return Cf(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Oh(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=fn(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=fn(e),r=ml(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ii.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Bd(r));const i=new jd(r,t.serializer);let s=await t.bu();for(;s;){const e=await i.Ga(s);e&&n._updateProgress(e),s=await t.bu()}const a=await i.ja(e.localStore);return await df(e,a.Ha,void 0),await function(e,t){const n=fn(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ii.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(a.progress),Promise.resolve(a.Ja)}catch(e){return ln(qd,"Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await Wf(e),i,r)})}function $f(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Jf=new Map,Qf="firestore.googleapis.com",Zf=!0;class ep{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new mn(pn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qf,this.ssl=Zf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Zf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Uc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<tu)throw new mn(pn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zn("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$f(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new mn(pn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new mn(pn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new mn(pn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ep({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mn(pn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new mn(pn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ep(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new bn;switch(e.type){case"firstParty":return new _n(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new mn(pn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Jf.get(e);t&&(an("ComponentProvider","Removing Datastore"),Jf.delete(e),t.terminate())}(this),Promise.resolve()}}function np(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Gn(e,tp);const i=w(t),s=e._getSettings(),a=l(l({},s),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);i&&(x("https://".concat(o)),k("Firestore",!0)),s.host!==Qf&&s.host!==o&&ln("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=l(l({},s),{},{host:o,ssl:i,emulatorOptions:r});if(!j(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=tn.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=l({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new mn(pn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new tn(i)}e._authCredentials=new yn(new vn(t,n))}}class rp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new rp(this.firestore,e,this._query)}}class ip{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ip(this.firestore,e,this._key)}toJSON(){return{type:ip._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Xn(t,ip._jsonSchema))return new ip(e,n||null,new Bn(Mn.fromString(t.referencePath)))}}ip._jsonSchemaVersion="firestore/documentReference/1.0",ip._jsonSchema={type:Yn("string",ip._jsonSchemaVersion),referencePath:Yn("string")};class sp extends rp{constructor(e,t,n){super(e,t,Ia(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ip(this.firestore,null,new Bn(e))}withConverter(e){return new sp(this.firestore,e,this._path)}}function ap(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=G(e),Un("collection","path",t),e instanceof tp){const n=Mn.fromString(t,...r);return qn(n),new sp(e,null,n)}{if(!(e instanceof ip||e instanceof sp))throw new mn(pn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Mn.fromString(t,...r));return qn(n),new sp(e.firestore,null,n)}}function op(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=G(e),1===arguments.length&&(t=En.newId()),Un("doc","path",t),e instanceof tp){const n=Mn.fromString(t,...r);return Vn(n),new ip(e,null,new Bn(n))}{if(!(e instanceof ip||e instanceof sp))throw new mn(pn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Mn.fromString(t,...r));return Vn(n),new ip(e.firestore,e instanceof sp?e.converter:null,new Bn(n))}}function lp(e,t){return e=G(e),t=G(t),(e instanceof ip||e instanceof sp)&&(t instanceof ip||t instanceof sp)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cp(e,t){return e=G(e),t=G(t),e instanceof rp&&t instanceof rp&&e.firestore===t.firestore&&Fa(e._query,t._query)&&e.converter===t.converter}const up="AsyncQueue";class hp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rh(this,"async_queue_retry"),this._c=()=>{const e=Dh();e&&an(up,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Dh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Dh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new gn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wr(e))throw e;an(up,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,on("INTERNAL UNHANDLED ERROR: ",dp(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=wd.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&un(47125,{Pc:dp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function dp(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function fp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class pp{constructor(){this._progressObserver={},this._taskCompletionResolver=new gn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mp extends tp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new hp,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hp(e),this._firestoreClient=void 0,await e}}}function gp(e){if(e._terminated)throw new mn(pn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||vp(e),e._firestoreClient}function vp(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ps(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,$f(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Mf(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function bp(e,t,n){if((e=Gn(e,mp))._firestoreClient||e._terminated)throw new mn(pn.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new mn(pn.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},vp(e)}function yp(e){return function(e){const t=new gn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=fn(e);Zh(n.remoteStore)||an(qd,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=fn(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(e===Ir)return void t.resolve();const r=n.mu.get(e)||[];r.push(t),n.mu.set(e,r)}catch(e){const n=xd(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Wf(e),t)),t.promise}(gp(e=Gn(e,mp)))}function wp(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await zf(e),n=await qf(e);return t.setNetworkEnabled(!0),function(e){const t=fn(e);return t.Ea.delete(0),Hh(t)}(n)})}(gp(e=Gn(e,mp)))}function xp(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await zf(e),n=await qf(e);return t.setNetworkEnabled(!1),async function(e){const t=fn(e);t.Ea.add(0),await Gh(t),t.Ra.set("Offline")}(n)})}(gp(e=Gn(e,mp)))}function _p(e,t){const n=gp(e=Gn(e,mp)),r=new pp;return Xf(n,e._databaseId,t,r),r}function Sp(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=fn(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ii.getNamedQuery(e,t))}(await Vf(e),t))}(gp(e=Gn(e,mp)),t).then(t=>t?new rp(e,null,t.query):null)}class kp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kp(ns.fromBase64String(e))}catch(e){throw new mn(pn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new kp(ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kp._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xn(e,kp._jsonSchema))return kp.fromBase64String(e.bytes)}}kp._jsonSchemaVersion="firestore/bytes/1.0",kp._jsonSchema={type:Yn("string",kp._jsonSchemaVersion),bytes:Yn("string")};class Tp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new mn(pn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ep{constructor(e){this._methodName=e}}class Ap{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new mn(pn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new mn(pn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ap._jsonSchemaVersion}}static fromJSON(e){if(Xn(e,Ap._jsonSchema))return new Ap(e.latitude,e.longitude)}}Ap._jsonSchemaVersion="firestore/geoPoint/1.0",Ap._jsonSchema={type:Yn("string",Ap._jsonSchemaVersion),latitude:Yn("number"),longitude:Yn("number")};class Np{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Np._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xn(e,Np._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Np(e.vectorValues);throw new mn(pn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Np._jsonSchemaVersion="firestore/vectorValue/1.0",Np._jsonSchema={type:Yn("string",Np._jsonSchemaVersion),vectorValues:Yn("object")};const Ip=/^__.*__$/;class Cp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Po(e,this.data,this.fieldMask,t,this.fieldTransforms):new Co(e,this.data,t,this.fieldTransforms)}}class Pp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Po(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw un(40011,{Ac:e})}}class Dp{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dp(l(l({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Lp(this.Ac)&&Ip.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Op{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Oh(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Dp({Ac:e,methodName:t,Dc:n,path:jn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rp(e){const t=e._freezeSettings(),n=Oh(e._databaseId);return new Op(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Mp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Xp("Data must be an object, but it was:",a,r);const o=Kp(r,a);let l,c;if(s.merge)l=new es(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=$p(t,r,n);if(!a.contains(i))throw new mn(pn.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));em(e,i)||e.push(i)}l=new es(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Cp(new Gs(o),l,c)}class Fp extends Ep{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fp}}function jp(e,t,n){return new Dp({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Bp extends Ep{_toFieldTransform(e){return new wo(e.path,new ho)}isEqual(e){return e instanceof Bp}}class Up extends Ep{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=jp(this,e,!0),n=this.vc.map(e=>Gp(e,t)),r=new fo(n);return new wo(e.path,r)}isEqual(e){return e instanceof Up&&j(this.vc,e.vc)}}class zp extends Ep{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=jp(this,e,!0),n=this.vc.map(e=>Gp(e,t)),r=new mo(n);return new wo(e.path,r)}isEqual(e){return e instanceof zp&&j(this.vc,e.vc)}}class Vp extends Ep{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new vo(e.serializer,ao(e.serializer,this.Fc));return new wo(e.path,t)}isEqual(e){return e instanceof Vp&&this.Fc===e.Fc}}function qp(e,t,n,r){const i=e.Cc(1,t,n);Xp("Data must be an object, but it was:",i,r);const s=[],a=Gs.empty();Gi(r,(e,r)=>{const o=Qp(t,e,n);r=G(r);const l=i.yc(o);if(r instanceof Fp)s.push(o);else{const e=Gp(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new es(s);return new Pp(a,o,i.fieldTransforms)}function Wp(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[$p(t,r,n)],l=[i];if(s.length%2!=0)throw new mn(pn.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)o.push($p(t,s[d])),l.push(s[d+1]);const c=[],u=Gs.empty();for(let d=o.length-1;d>=0;--d)if(!em(c,o[d])){const e=o[d];let t=l[d];t=G(t);const n=a.yc(e);if(t instanceof Fp)c.push(e);else{const r=Gp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new es(c);return new Pp(u,h,a.fieldTransforms)}function Hp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Gp(n,e.Cc(r?4:3,t))}function Gp(e,t){if(Yp(e=G(e)))return Xp("Unsupported field value:",t,e),Kp(e,t);if(e instanceof Ep)return function(e,t){if(!Lp(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Gp(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=G(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ao(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Qn.fromDate(e);return{timestampValue:dl(t.serializer,n)}}if(e instanceof Qn){const n=new Qn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:dl(t.serializer,n)}}if(e instanceof Ap)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kp)return{bytesValue:fl(t.serializer,e._byteString)};if(e instanceof ip){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:gl(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Np)return function(e,t){return{mapValue:{fields:{[vs]:{stringValue:ws},[xs]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return io(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Hn(e)))}(e,t)}function Kp(e,t){const n={};return Ki(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gi(e,(e,r)=>{const i=Gp(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Yp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qn||e instanceof Ap||e instanceof kp||e instanceof ip||e instanceof Ep||e instanceof Np)}function Xp(e,t,n){if(!Yp(n)||!Wn(n)){const r=Hn(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function $p(e,t,n){if((t=G(t))instanceof Tp)return t._internalPath;if("string"==typeof t)return Qp(e,t);throw Zp("Field path arguments must be of type string or ",e,!1,void 0,n)}const Jp=new RegExp("[~\\*/\\[\\]]");function Qp(e,t,n){if(t.search(Jp)>=0)throw Zp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Tp(...t.split("."))._internalPath}catch(r){throw Zp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Zp(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new mn(pn.INVALID_ARGUMENT,o+e+l)}function em(e,t){return e.some(e=>e.isEqual(t))}class tm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ip(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nm extends tm{data(){return super.data()}}function rm(e,t){return"string"==typeof t?Qp(e,t):t instanceof Tp?t._internalPath:t._delegate._internalPath}function im(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new mn(pn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sm{}class am extends sm{}function om(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof sm&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof cm).length,n=e.filter(e=>e instanceof lm).length;if(t>1||t>0&&n>0)throw new mn(pn.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class lm extends am{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new lm(e,t,n)}_apply(e){const t=this._parse(e);return vm(e._query,t),new rp(e.firestore,e.converter,Ra(e._query,t))}_parse(e){const t=Rp(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new mn(pn.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){gm(a,s);const t=[];for(const n of a)t.push(mm(r,e,n));o={arrayValue:{values:t}}}else o=mm(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||gm(a,s),o=Hp(n,t,a,"in"===s||"not-in"===s);return ta.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class cm extends sm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:na.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)vm(n,i),n=Ra(n,i)}(e._query,t),new rp(e.firestore,e.converter,Ra(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class um extends am{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new um(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new mn(pn.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new mn(pn.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qs(t,n)}(e._query,this._field,this._direction);return new rp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Aa(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class hm extends am{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new hm(e,t,n)}_apply(e){return new rp(e.firestore,e.converter,Ma(e._query,this._limit,this._limitType))}}class dm extends am{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new dm(e,t,n)}_apply(e){const t=pm(e,this.type,this._docOrFields,this._inclusive);return new rp(e.firestore,e.converter,function(e,t){return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class fm extends am{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new fm(e,t,n)}_apply(e){const t=pm(e,this.type,this._docOrFields,this._inclusive);return new rp(e.firestore,e.converter,function(e,t){return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function pm(e,t,n,r){if(n[0]=G(n[0]),n[0]instanceof tm)return function(e,t,n,r,i){if(!r)throw new mn(pn.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const a of La(e))if(a.field.isKeyField())s.push(Ls(t,r.key));else{const e=r.data.field(a.field);if(hs(e))throw new mn(pn.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new mn(pn.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Xs(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Rp(e.firestore);return function(e,t,n,r,i,s){const a=e.explicitOrderBy;if(i.length>a.length)throw new mn(pn.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const o=[];for(let l=0;l<i.length;l++){const s=i[l];if(a[l].field.isKeyField()){if("string"!=typeof s)throw new mn(pn.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Pa(e)&&-1!==s.indexOf("/"))throw new mn(pn.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Mn.fromString(s));if(!Bn.isDocumentKey(n))throw new mn(pn.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Bn(n);o.push(Ls(t,i))}else{const e=Hp(n,r,s);o.push(e)}}return new Xs(o,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function mm(e,t,n){if("string"==typeof(n=G(n))){if(""===n)throw new mn(pn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pa(t)&&-1!==n.indexOf("/"))throw new mn(pn.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Mn.fromString(n));if(!Bn.isDocumentKey(r))throw new mn(pn.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ls(e,new Bn(r))}if(n instanceof ip)return Ls(e,n._key);throw new mn(pn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Hn(n),"."))}function gm(e,t){if(!Array.isArray(e)||0===e.length)throw new mn(pn.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function vm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new mn(pn.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new mn(pn.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class bm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ss(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw un(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Gi(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[xs].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>ss(e.doubleValue));return new Np(n)}convertGeoPoint(e){return new Ap(ss(e.latitude),ss(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ds(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fs(e));default:return null}}convertTimestamp(e){const t=is(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Mn.fromString(e);dn(Ul(n),9688,{name:e});const r=new gs(n.get(1),n.get(3)),i=new Bn(n.popFirst(5));return r.isEqual(t)||on("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ym(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class wm extends bm{constructor(e){super(),this.firestore=e}convertBytes(e){return new kp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ip(this.firestore,null,t)}}class xm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _m extends tm{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Sm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(rm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new mn(pn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_m._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}_m._jsonSchemaVersion="firestore/documentSnapshot/1.0",_m._jsonSchema={type:Yn("string",_m._jsonSchemaVersion),bundleSource:Yn("string","DocumentSnapshot"),bundleName:Yn("string"),bundle:Yn("string")};class Sm extends _m{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class km{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new xm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Sm(this._firestore,this._userDataWriter,n.key,n,new xm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mn(pn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Sm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new xm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Sm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Tm(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new mn(pn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=km._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=En.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Tm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return un(61501,{type:e})}}function Em(e,t){return e instanceof _m&&t instanceof _m?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof km&&t instanceof km&&e._firestore===t._firestore&&cp(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}km._jsonSchemaVersion="firestore/querySnapshot/1.0",km._jsonSchema={type:Yn("string",km._jsonSchemaVersion),bundleSource:Yn("string","QuerySnapshot"),bundleName:Yn("string"),bundle:Yn("string")};class Am extends bm{constructor(e){super(),this.firestore=e}convertBytes(e){return new kp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ip(this.firestore,null,t)}}function Nm(e){e=Gn(e,ip);const t=Gn(e.firestore,mp),n=gp(t),r=new Am(t);return function(e,t){const n=new gn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=fn(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new mn(pn.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=xd(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Vf(e),t,n)),n.promise}(n,e._key).then(n=>new _m(t,r,e._key,n,new xm(null!==n&&n.hasLocalMutations,!0),e.converter))}function Im(e){e=Gn(e,rp);const t=Gn(e.firestore,mp),n=gp(t),r=new Am(t);return function(e,t){const n=new gn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await nh(e,t,!0),i=new Vd(t,r.Qs),s=i.ru(r.documents),a=i.applyChanges(s,!1);n.resolve(a.snapshot)}catch(e){const r=xd(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Vf(e),t,n)),n.promise}(n,e._query).then(n=>new km(t,r,e,n))}function Cm(e,t,n){e=Gn(e,ip);const r=Gn(e.firestore,mp),i=ym(e.converter,t,n);return Om(r,[Mp(Rp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,_o.none())])}function Pm(e,t,n){e=Gn(e,ip);const r=Gn(e.firestore,mp),i=Rp(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=G(t))||t instanceof Tp?Wp(i,"updateDoc",e._key,t,n,o):qp(i,"updateDoc",e._key,t),Om(r,[s.toMutation(e._key,_o.exists(!0))])}function Lm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=G(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||fp(n[s])||(i=n[s++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(fp(n[s])){var o,l,c;const e=n[s];n[s]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,h,d;if(e instanceof ip)h=Gn(e.firestore,mp),d=Ia(e._key.path),u={next:t=>{n[s]&&n[s](Rm(h,e,t))},error:n[s+1],complete:n[s+2]};else{const t=Gn(e,rp);h=Gn(t.firestore,mp),d=t._query;const r=new Am(h);u={next:e=>{n[s]&&n[s](new km(h,r,t,e))},error:n[s+1],complete:n[s+2]},im(e._query)}return function(e,t,n,r){const i=new Pf(r),s=new Rd(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Nd(await Gf(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Id(await Gf(e),s))}}(gp(h),d,a,u)}function Dm(e,t){return function(e,t){const n=new Pf(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){fn(e).Ca.add(t),t.next()}(await Gf(e),n)),()=>{n.Nu(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){fn(e).Ca.delete(t)}(await Gf(e),n))}}(gp(e=Gn(e,mp)),fp(t)?t:{next:t})}function Om(e,t){return function(e,t){const n=new gn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=kf(e);try{const e=await function(e,t){const n=fn(e),r=Qn.now(),i=t.reduce((e,t)=>e.add(t.key),to());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Ga(),l=to();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=No(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Po(e.key,t,Ks(t.value.mapValue),_o.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Xa(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Yi(An)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await df(r,e.changes),await od(r.remoteStore)}catch(e){const t=xd(e,"Failed to persist write");n.reject(t)}}(await Wf(e),t,n)),n.promise}(gp(e),t)}function Rm(e,t,n){const r=n.docs.get(t._key),i=new Am(e);return new _m(e,i,t._key,r,new xm(n.hasPendingWrites,n.fromCache),t.converter)}const Mm={maxAttempts:5};class Fm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rp(e)}set(e,t,n){this._verifyNotCommitted();const r=jm(e,this._firestore),i=ym(r.converter,t,n),s=Mp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,_o.none())),this}update(e,t,n){this._verifyNotCommitted();const r=jm(e,this._firestore);let i;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return i="string"==typeof(t=G(t))||t instanceof Tp?Wp(this._dataReader,"WriteBatch.update",r._key,t,n,a):qp(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,_o.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jm(e,this._firestore);return this._mutations=this._mutations.concat(new Ro(t._key,_o.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new mn(pn.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jm(e,t){if((e=G(e)).firestore!==t)throw new mn(pn.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Bm{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rp(e)}get(e){const t=jm(e,this._firestore),n=new wm(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return un(24041);const r=e[0];if(r.isFoundDocument())return new tm(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new tm(this._firestore,n,t._key,null,t.converter);throw un(18433,{doc:r})})}set(e,t,n){const r=jm(e,this._firestore),i=ym(r.converter,t,n),s=Mp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=jm(e,this._firestore);let i;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return i="string"==typeof(t=G(t))||t instanceof Tp?Wp(this._dataReader,"Transaction.update",r._key,t,n,a):qp(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=jm(e,this._firestore);return this._transaction.delete(t._key),this}}class Um extends Bm{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jm(e,this._firestore),n=new Am(this._firestore);return super.get(e).then(e=>new _m(this._firestore,n,t._key,e._document,new xm(!1,!1),t.converter))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){nn=e}(mt),it(new K("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new mp(new wn(e.getProvider("auth-internal")),new kn(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new mn(pn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gs(e.options.projectId,t)}(s,r),s);return i=l({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),xt(Zt,en,e),xt(Zt,en,"esm2020")}();function zm(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new mn("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Vm(){if("undefined"===typeof Uint8Array)throw new mn("unimplemented","Uint8Arrays are not available in this environment.")}function qm(){if("undefined"==typeof atob)throw new mn("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Wm{constructor(e){this._delegate=e}static fromBase64String(e){return qm(),new Wm(kp.fromBase64String(e))}static fromUint8Array(e){return Vm(),new Wm(kp.fromUint8Array(e))}toBase64(){return qm(),this._delegate.toBase64()}toUint8Array(){return Vm(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Hm(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Gm{enableIndexedDbPersistence(e,t){return function(e,t){ln("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return bp(e,If.provider,{build:e=>new Af(e,n.cacheSizeBytes,null===t||void 0===t?void 0:t.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return async function(e){ln("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();bp(e,If.provider,{build:e=>new Nf(e,t.cacheSizeBytes)})}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new mn(pn.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new gn;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!gr.v())return Promise.resolve();const t=e+Bu;await gr.delete(t)}(qu(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}(e._delegate)}}class Km{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof gs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ln("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=l(l({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};np(this._delegate,e,t,n)}enableNetwork(){return wp(this._delegate)}disableNetwork(){return xp(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,zn("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return yp(this._delegate)}onSnapshotsInSync(e){return Dm(this._delegate,e)}get app(){if(!this._appCompat)throw new mn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new og(this,ap(this._delegate,e))}catch(t){throw Zm(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qm(this,op(this._delegate,e))}catch(t){throw Zm(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ig(this,function(e,t){if(e=Gn(e,tp),Un("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new mn(pn.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new rp(e,null,function(e){return new Aa(Mn.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Zm(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Gn(e,mp);const r=l(l({},Mm),n);return function(e){if(e.maxAttempts<1)throw new mn(pn.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new gn;return e.asyncQueue.enqueueAndForget(async()=>{const i=await Hf(e);new Of(e.asyncQueue,i,n,t,r).ju()}),r.promise}(gp(e),n=>t(new Um(e,n)),r)}(this._delegate,t=>e(new Xm(this,t)))}batch(){return gp(this._delegate),new $m(new Fm(this._delegate,e=>Om(this._delegate,e)))}loadBundle(e){return _p(this._delegate,e)}namedQuery(e){return Sp(this._delegate,e).then(e=>e?new ig(this,e):null)}}class Ym extends bm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wm(new kp(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qm.forKey(t,this.firestore,null)}}class Xm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ym(e)}get(e){const t=lg(e);return this._delegate.get(t).then(e=>new ng(this._firestore,new _m(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=lg(e);return n?(zm("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const a=lg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,n,...i),this}delete(e){const t=lg(e);return this._delegate.delete(t),this}}class $m{constructor(e){this._delegate=e}set(e,t,n){const r=lg(e);return n?(zm("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const a=lg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,n,...i),this}delete(e){const t=lg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jm{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Sm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rg(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Jm.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Jm(e,new Ym(e),t),r.set(t,i)),i}}Jm.INSTANCES=new WeakMap;class Qm{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ym(e)}static forPath(e,t,n){if(e.length%2!==0)throw new mn("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Qm(t,new ip(t._delegate,n,new Bn(e)))}static forKey(e,t,n){return new Qm(t,new ip(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new og(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new og(this.firestore,ap(this._delegate,e))}catch(t){throw Zm(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=G(e))instanceof ip&&lp(this._delegate,e)}set(e,t){t=zm("DocumentReference.set",t);try{return t?Cm(this._delegate,e,t):Cm(this._delegate,e)}catch(n){throw Zm(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Pm(this._delegate,e):Pm(this._delegate,e,t,...r)}catch(s){throw Zm(s,"updateDoc()","DocumentReference.update()")}}delete(){return Om(Gn((e=this._delegate).firestore,mp),[new Ro(e._key,_o.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=eg(t),i=tg(t,e=>new ng(this.firestore,new _m(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return Lm(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Nm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Gn(e,ip);const t=Gn(e.firestore,mp);return Kf(gp(t),e._key,{source:"server"}).then(n=>Rm(t,e,n))}(this._delegate):function(e){e=Gn(e,ip);const t=Gn(e.firestore,mp);return Kf(gp(t),e._key).then(n=>Rm(t,e,n))}(this._delegate),t.then(e=>new ng(this.firestore,new _m(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new Qm(this.firestore,e?this._delegate.withConverter(Jm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Zm(e,t,n){return e.message=e.message.replace(t,n),e}function eg(e){for(const t of e)if("object"===typeof t&&!Hm(t))return t;return{}}function tg(e,t){var n,r;let i;return i=Hm(e[0])?e[0]:Hm(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ng{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qm(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Em(this._delegate,e._delegate)}}class rg extends ng{data(e){const t=this._delegate.data(e);return this._delegate._converter||(n="Document in a QueryDocumentSnapshot should exist",void 0!==t||un(57014,n)),t;var n}}class ig{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ym(e)}where(e,t,n){try{return new ig(this.firestore,om(this._delegate,function(e,t,n){const r=t,i=rm("where",e);return lm._create(i,r,n)}(e,t,n)))}catch(r){throw Zm(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ig(this.firestore,om(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=rm("orderBy",e);return um._create(n,t)}(e,t)))}catch(n){throw Zm(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ig(this.firestore,om(this._delegate,(Kn("limit",t=e),hm._create("limit",t,"F"))))}catch(t){throw Zm(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new ig(this.firestore,om(this._delegate,(Kn("limitToLast",t=e),hm._create("limitToLast",t,"L"))))}catch(t){throw Zm(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new ig(this.firestore,om(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return dm._create("startAt",t,!0)}(...arguments)))}catch(e){throw Zm(e,"startAt()","Query.startAt()")}}startAfter(){try{return new ig(this.firestore,om(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return dm._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Zm(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new ig(this.firestore,om(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fm._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Zm(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new ig(this.firestore,om(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fm._create("endAt",t,!0)}(...arguments)))}catch(e){throw Zm(e,"endAt()","Query.endAt()")}}isEqual(e){return cp(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Im(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Gn(e,rp);const t=Gn(e.firestore,mp),n=gp(t),r=new Am(t);return Yf(n,e._query,{source:"server"}).then(n=>new km(t,r,e,n))}(this._delegate):function(e){e=Gn(e,rp);const t=Gn(e.firestore,mp),n=gp(t),r=new Am(t);return im(e._query),Yf(n,e._query).then(n=>new km(t,r,e,n))}(this._delegate),t.then(e=>new ag(this.firestore,new km(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=eg(t),i=tg(t,e=>new ag(this.firestore,new km(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return Lm(this._delegate,r,i)}withConverter(e){return new ig(this.firestore,e?this._delegate.withConverter(Jm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class sg{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ag{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ig(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new sg(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new rg(this._firestore,n))})}isEqual(e){return Em(this._delegate,e._delegate)}}class og extends ig{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qm(this.firestore,e):null}doc(e){try{return new Qm(this.firestore,void 0===e?op(this._delegate):op(this._delegate,e))}catch(t){throw Zm(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Gn(e.firestore,mp),r=op(e),i=ym(e.converter,t);return Om(n,[Mp(Rp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,_o.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new Qm(this.firestore,e))}isEqual(e){return lp(this._delegate,e._delegate)}withConverter(e){return new og(this.firestore,e?this._delegate.withConverter(Jm.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function lg(e){return Gn(e,ip)}class cg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Tp(...t)}static documentId(){return new cg(jn.keyField().canonicalString())}isEqual(e){return(e=G(e))instanceof Tp&&this._delegate._internalPath.isEqual(e._internalPath)}}class ug{static serverTimestamp(){const e=new Bp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new ug(e)}static delete(){const e=new Fp("deleteField");return e._methodName="FieldValue.delete",new ug(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Up("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new ug(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zp("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new ug(e)}static increment(e){const t=new Vp("increment",e);return t._methodName="FieldValue.increment",new ug(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const hg={Firestore:Km,GeoPoint:Ap,Timestamp:Qn,Blob:Wm,Transaction:Xm,WriteBatch:$m,DocumentReference:Qm,DocumentSnapshot:ng,Query:ig,QueryDocumentSnapshot:rg,QuerySnapshot:ag,CollectionReference:og,FieldPath:cg,FieldValue:ug,setLogLevel:function(e){var t;t=e,rn.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var dg;function fg(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(function(e,t){e.INTERNAL.registerComponent(new K("firestore-compat",e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)},"PUBLIC").setServiceProps(l({},hg)))})(dg=jt,(e,t)=>new Km(e,t,new Gm)),dg.registerVersion("@firebase/firestore-compat","0.4.2");const pg=["providerId"],mg=["uid","auth","stsTokenManager"],gg=["providerId","signInMethod"],vg="facebook.com",bg="github.com",yg="google.com",wg="password",xg="twitter.com",_g="EMAIL_SIGNIN",Sg="PASSWORD_RESET",kg="RECOVER_EMAIL",Tg="REVERT_SECOND_FACTOR_ADDITION",Eg="VERIFY_AND_CHANGE_EMAIL",Ag="VERIFY_EMAIL";function Ng(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ig=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},Cg=Ng,Pg=new R("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Lg=new ie("@firebase/auth");function Dg(e){if(Lg.logLevel<=Z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lg.error("Auth (".concat(mt,"): ").concat(e),...n)}}function Og(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Bg(e,...n)}function Rg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Bg(e,...n)}function Mg(e,t,n){const r=l(l({},Cg()),{},{[t]:n});return new R("auth","Firebase",r).create(t,{appName:e.name})}function Fg(e){return Mg(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jg(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Og(e,"argument-error"),Mg(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Bg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Pg.create(e,...n)}function Ug(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Bg(t,...r)}}function zg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Dg(t),new Error(t)}function Vg(e,t){e||zg(t)}function qg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Wg(){return"http:"===Hg()||"https:"===Hg()}function Hg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Gg{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vg(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())||I()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Wg()||N()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Kg(e,t){Vg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Yg{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void zg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void zg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void zg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},$g=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jg=new Gg(3e4,6e4);function Qg(e,t){return e.tenantId&&!t.tenantId?l(l({},t),{},{tenantId:e.tenantId}):t}async function Zg(e,t,n,r){return ev(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=U(l({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const c=l({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&w(e.emulatorConfig.host)&&(c.credentials="include"),Yg.fetch()(await nv(e,e.config.apiHost,n,a),c)})}async function ev(e,t,n){e._canInitEmulator=!1;const r=l(l({},Xg),t);try{const t=new iv(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw sv(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw sv(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw sv(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw sv(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Mg(e,o,a);Og(e,o)}}catch(i){if(i instanceof O)throw i;Og(e,"network-request-failed",{message:String(i)})}}async function tv(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Zg(e,t,n,r,i);return"mfaPendingCredential"in s&&Og(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function nv(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?Kg(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if($g.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function rv(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iv{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Rg(this.auth,"network-request-failed")),Jg.get())})}}function sv(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Rg(e,t,r);return i.customData._tokenResponse=n,i}function av(e){return void 0!==e&&void 0!==e.getResponse}function ov(e){return void 0!==e&&void 0!==e.enterprise}class lv{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rv(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cv(e,t){return Zg(e,"GET","/v2/recaptchaConfig",Qg(e,t))}async function uv(e,t){return Zg(e,"POST","/v1/accounts:lookup",t)}function hv(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function dv(e){return 1e3*Number(e)}function fv(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Dg("JWT malformed, contained fewer than 3 sections"),null;try{const e=f(n);return e?JSON.parse(e):(Dg("Failed to decode base64 JWT payload"),null)}catch(i){return Dg("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function pv(e){const t=fv(e);return Ug(t,"internal-error"),Ug("undefined"!==typeof t.exp,"internal-error"),Ug("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function mv(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof O&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class gv{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class vv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hv(this.lastLoginAt),this.creationTime=hv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bv(e){var t;const n=e.auth,r=await e.getIdToken(),i=await mv(e,uv(n,{idToken:r}));Ug(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?yv(s.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new vv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function yv(e){return e.map(e=>{let{providerId:t}=e,n=fg(e,pg);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class wv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ug(e.idToken,"internal-error"),Ug("undefined"!==typeof e.idToken,"internal-error"),Ug("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ug(0!==e.length,"internal-error");const t=pv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ug(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ev(e,{},async()=>{const n=U({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await nv(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&w(e.emulatorConfig.host)&&(o.credentials="include"),Yg.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new wv;return n&&(Ug("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ug("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ug("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wv,this.toJSON())}_performRefresh(){return zg("not implemented")}}function xv(e,t){Ug("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class _v{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=fg(e,mg);this.providerId="firebase",this.proactiveRefresh=new gv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await mv(this,this.stsTokenManager.getToken(this.auth,e));return Ug(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=G(e),r=await n.getIdToken(t),i=fv(r);Ug(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:hv(dv(i.auth_time)),issuedAtTime:hv(dv(i.iat)),expirationTime:hv(dv(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=G(e);await bv(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ug(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>l({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _v(l(l({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ug(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ct(this.auth.app))return Promise.reject(Fg(this.auth));const e=await this.getIdToken();return await mv(this,async function(e,t){return Zg(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return l(l({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>l({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,c,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,b=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:w,isAnonymous:x,providerData:_,stsTokenManager:S}=t;Ug(y&&S,e,"internal-error");const k=wv.fromJSON(this.name,S);Ug("string"===typeof y,e,"internal-error"),xv(h,e.name),xv(d,e.name),Ug("boolean"===typeof w,e,"internal-error"),Ug("boolean"===typeof x,e,"internal-error"),xv(f,e.name),xv(p,e.name),xv(m,e.name),xv(g,e.name),xv(v,e.name),xv(b,e.name);const T=new _v({uid:y,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:k,createdAt:v,lastLoginAt:b});return _&&Array.isArray(_)&&(T.providerData=_.map(e=>l({},e))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new wv;r.updateFromServerResponse(t);const i=new _v({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await bv(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ug(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?yv(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new wv;a.updateFromIdToken(n);const o=new _v({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new vv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const Sv=new Map;function kv(e){Vg(e instanceof Function,"Expected a class definition");let t=Sv.get(e);return t?(Vg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Sv.set(e,t),t)}class Tv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Tv.type="NONE";const Ev=Tv;function Av(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Nv{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Av(this.userKey,r.apiKey,i),this.fullPersistenceKey=Av("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await uv(this.auth,{idToken:e}).catch(()=>{});return t?_v._fromGetAccountInfoResponse(this.auth,t,e):null}return _v._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Nv(kv(Ev),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||kv(Ev);const s=Av(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const r=await uv(e,{idToken:t}).catch(()=>{});if(!r)break;n=await _v._fromGetAccountInfoResponse(e,r,t)}else n=_v._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(D$){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new Nv(i,e,n)):new Nv(i,e,n)}}function Iv(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Dv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Cv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Rv(t))return"Blackberry";if(Mv(t))return"Webos";if(Pv(t))return"Safari";if((t.includes("chrome/")||Lv(t))&&!t.includes("edge/"))return"Chrome";if(Ov(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Cv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/firefox\//i.test(e)}function Pv(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/crios\//i.test(e)}function Dv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iemobile/i.test(e)}function Ov(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/android/i.test(e)}function Rv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/blackberry/i.test(e)}function Mv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/webos/i.test(e)}function Fv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function jv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return Fv(e)||Ov(e)||Mv(e)||Rv(e)||/windows phone/i.test(e)||Dv(e)}function Bv(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Iv(T());break;case"Worker":t="".concat(Iv(T()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(mt,"/").concat(r)}class Uv{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(vU){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class zv{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Vv{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wv(this),this.idTokenSubscription=new Wv(this),this.beforeStateQueue=new Uv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kv(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Nv.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await uv(this,{idToken:e}),n=await _v._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ct(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(s=n)||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ug(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bv(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ct(this.app))return Promise.reject(Fg(this));const t=e?G(e):null;return t&&Ug(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ug(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ct(this.app)?Promise.reject(Fg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ct(this.app)?Promise.reject(Fg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kv(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Zg(e,"GET","/v2/passwordPolicy",Qg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new zv(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new R("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Zg(e,"POST","/v2/accounts:revokeToken",Qg(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kv(e)||this._popupRedirectResolver;Ug(t,this,"argument-error"),this.redirectPersistenceManager=await Nv.create(this,[kv(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ug(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ug(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Lg.logLevel<=Z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lg.warn("Auth (".concat(mt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function qv(e){return G(e)}class Wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=q(e=>this.observer=e)}get next(){return Ug(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gv(e){return Hv.loadJS(e)}function Kv(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const Yv=1e12;class Xv{constructor(e){this.auth=e,this.counter=Yv,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Qv(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Yv;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Yv;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Yv;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class $v{constructor(){this.enterprise=new Jv}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Jv{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Qv{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Ug(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zv="NO_RECAPTCHA";class eb{constructor(e){this.type="recaptcha-enterprise",this.auth=qv(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ov(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Zv)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new $v).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{cv(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new lv(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&ov(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Hv.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Gv(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function tb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new eb(e);let a;if(i)a=Zv;else try{a=await s.verify(n)}catch(c){a=await s.verify(n,!0)}const o=l({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function nb(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await tb(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await tb(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await tb(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await tb(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await tb(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function rb(e){const t=qv(e),n=await cv(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new lv(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new eb(t).verify()}}function ib(e,t,n){const r=qv(e);Ug(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=sb(t),{host:a,port:o}=function(e){const t=sb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ab(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ab(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(s,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Ug(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ug(j(c,r.config.emulator)&&j(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,w(a)?(x("".concat(s,"//").concat(a).concat(l)),k("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function sb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ab(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ob{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zg("not implemented")}_getIdTokenResponse(e){return zg("not implemented")}_linkToIdToken(e,t){return zg("not implemented")}_getReauthenticationResolver(e){return zg("not implemented")}}async function lb(e,t){return Zg(e,"POST","/v1/accounts:resetPassword",Qg(e,t))}async function cb(e,t){return Zg(e,"POST","/v1/accounts:signUp",t)}async function ub(e,t){return tv(e,"POST","/v1/accounts:signInWithPassword",Qg(e,t))}async function hb(e,t){return Zg(e,"POST","/v1/accounts:sendOobCode",Qg(e,t))}async function db(e,t){return hb(e,t)}async function fb(e,t){return hb(e,t)}class pb extends ob{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new pb(e,t,"password")}static _fromEmailAndCode(e,t){return new pb(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return nb(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ub,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return tv(e,"POST","/v1/accounts:signInWithEmailLink",Qg(e,t))}(e,{email:this._email,oobCode:this._password});default:Og(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return nb(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cb,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return tv(e,"POST","/v1/accounts:signInWithEmailLink",Qg(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Og(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mb(e,t){return tv(e,"POST","/v1/accounts:signInWithIdp",Qg(e,t))}class gb extends ob{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gb(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Og("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=fg(t,gg);if(!n||!r)return null;const s=new gb(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return mb(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mb(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mb(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=U(t)}return e}}async function vb(e,t){return Zg(e,"POST","/v1/accounts:sendVerificationCode",Qg(e,t))}const bb={USER_NOT_FOUND:"user-not-found"};class yb extends ob{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new yb({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new yb({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return tv(e,"POST","/v1/accounts:signInWithPhoneNumber",Qg(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await tv(e,"POST","/v1/accounts:signInWithPhoneNumber",Qg(e,t));if(n.temporaryProof)throw sv(e,"account-exists-with-different-credential",n);return n}(e,l({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return tv(e,"POST","/v1/accounts:signInWithPhoneNumber",Qg(e,l(l({},t),{},{operation:"REAUTH"})),bb)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new yb({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class wb{constructor(e){var t,n,r,i,s,a;const o=z(V(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Ug(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=z(V(e)).link,n=t?z(V(t)).deep_link_id:null,r=z(V(e)).deep_link_id;return(r?z(V(r)).link:null)||r||n||t||e}(e);try{return new wb(t)}catch(n){return null}}}class xb{constructor(){this.providerId=xb.PROVIDER_ID}static credential(e,t){return pb._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=wb.parseLink(t);return Ug(n,"argument-error"),pb._fromEmailAndCode(e,n.code,n.tenantId)}}xb.PROVIDER_ID="password",xb.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _b{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sb extends _b{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class kb extends Sb{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Ug("providerId"in t&&"signInMethod"in t,"argument-error"),gb._fromParams(t)}credential(e){return this._credential(l(l({},e),{},{nonce:e.rawNonce}))}_credential(e){return Ug(e.idToken||e.accessToken,"argument-error"),gb._fromParams(l(l({},e),{},{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return kb.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return kb.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new kb(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(l){return null}}}class Tb extends Sb{constructor(){super("facebook.com")}static credential(e){return gb._fromParams({providerId:Tb.PROVIDER_ID,signInMethod:Tb.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tb.credentialFromTaggedObject(e)}static credentialFromError(e){return Tb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Tb.credential(t.oauthAccessToken)}catch(n){return null}}}Tb.FACEBOOK_SIGN_IN_METHOD="facebook.com",Tb.PROVIDER_ID="facebook.com";class Eb extends Sb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gb._fromParams({providerId:Eb.PROVIDER_ID,signInMethod:Eb.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Eb.credentialFromTaggedObject(e)}static credentialFromError(e){return Eb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Eb.credential(n,r)}catch(i){return null}}}Eb.GOOGLE_SIGN_IN_METHOD="google.com",Eb.PROVIDER_ID="google.com";class Ab extends Sb{constructor(){super("github.com")}static credential(e){return gb._fromParams({providerId:Ab.PROVIDER_ID,signInMethod:Ab.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ab.credentialFromTaggedObject(e)}static credentialFromError(e){return Ab.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ab.credential(t.oauthAccessToken)}catch(n){return null}}}Ab.GITHUB_SIGN_IN_METHOD="github.com",Ab.PROVIDER_ID="github.com";class Nb extends ob{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return mb(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mb(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mb(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Nb(n,i):null}static _create(e,t){return new Nb(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ib extends _b{constructor(e){Ug(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Ib.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ib.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Nb.fromJSON(e);return Ug(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Nb._create(r,n)}catch(i){return null}}}class Cb extends Sb{constructor(){super("twitter.com")}static credential(e,t){return gb._fromParams({providerId:Cb.PROVIDER_ID,signInMethod:Cb.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cb.credentialFromTaggedObject(e)}static credentialFromError(e){return Cb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Cb.credential(n,r)}catch(i){return null}}}async function Pb(e,t){return tv(e,"POST","/v1/accounts:signUp",Qg(e,t))}Cb.TWITTER_SIGN_IN_METHOD="twitter.com",Cb.PROVIDER_ID="twitter.com";class Lb{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await _v._fromIdTokenResponse(e,n,r),s=Db(n);return new Lb({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Db(n);return new Lb({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Db(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ob extends O{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ob.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ob(e,t,n,r)}}function Rb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ob._fromErrorAndOperation(e,n,t,r);throw n})}function Mb(e){return new Set(e.map(e=>{let{providerId:t}=e;return t}).filter(e=>!!e))}async function Fb(e,t){const n=G(e);await Bb(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Zg(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Mb(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function jb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await mv(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Lb._forOperation(e,"link",r)}async function Bb(e,t,n){await bv(t);const r=!1===e?"provider-already-linked":"no-such-provider";Ug(Mb(t.providerData).has(n)===e,t.auth,r)}async function Ub(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ct(r.app))return Promise.reject(Fg(r));const i="reauthenticate";try{const s=await mv(e,Rb(r,i,t,e),n);Ug(s.idToken,r,"internal-error");const a=fv(s.idToken);Ug(a,r,"internal-error");const{sub:o}=a;return Ug(e.uid===o,r,"user-mismatch"),Lb._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Og(r,"user-mismatch"),s}}async function zb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ct(e.app))return Promise.reject(Fg(e));const r="signIn",i=await Rb(e,r,t),s=await Lb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Vb(e,t){return zb(qv(e),t)}async function qb(e,t){const n=G(e);return await Bb(!1,n,t.providerId),jb(n,t)}async function Wb(e,t){return Ub(G(e),t)}async function Hb(e,t){if(ct(e.app))return Promise.reject(Fg(e));const n=qv(e),r=await async function(e,t){return tv(e,"POST","/v1/accounts:signInWithCustomToken",Qg(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Lb._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Gb{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Kb._fromServerResponse(e,t):"totpInfo"in t?Yb._fromServerResponse(e,t):Og(e,"internal-error")}}class Kb extends Gb{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Kb(t)}}class Yb extends Gb{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Yb(t)}}function Xb(e,t,n){var r;Ug((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ug("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Ug("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ug(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ug(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function $b(e){const t=qv(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Jb(e,t){await async function(e,t){return Zg(e,"POST","/v1/accounts:update",Qg(e,t))}(G(e),{oobCode:t})}async function Qb(e,t){const n=G(e),r=await lb(n,{oobCode:t}),i=r.requestType;switch(Ug(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ug(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ug(r.mfaInfo,n,"internal-error");default:Ug(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Gb._fromServerResponse(qv(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Zb(e,t){const n={identifier:t,continueUri:Wg()?qg():"http://localhost"},{signinMethods:r}=await async function(e,t){return Zg(e,"POST","/v1/accounts:createAuthUri",Qg(e,t))}(G(e),n);return r||[]}async function ey(e,t){const n=G(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Xb(n.auth,r,t);const{email:i}=await async function(e,t){return hb(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ty(e,t,n){const r=G(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Xb(r.auth,i,n);const{email:s}=await async function(e,t){return hb(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function ny(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=G(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await mv(i,async function(e,t){return Zg(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}async function ry(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await mv(e,async function(e,t){return Zg(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class iy{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class sy extends iy{constructor(e,t,n,r){super(e,t,n),this.username=r}}class ay extends iy{constructor(e,t){super(e,"facebook.com",t)}}class oy extends sy{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class ly extends iy{constructor(e,t){super(e,"google.com",t)}}class cy extends sy{constructor(e,t,n){super(e,"twitter.com",t,n)}}function uy(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){if(!e)return null;const{providerId:t}=e,n=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},r=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!t&&null!==e&&void 0!==e&&e.idToken){var i;const t=null===(i=fv(e.idToken))||void 0===i||null===(i=i.firebase)||void 0===i?void 0:i.sign_in_provider;if(t)return new iy(r,"anonymous"!==t&&"custom"!==t?t:null)}if(!t)return null;switch(t){case"facebook.com":return new ay(r,n);case"github.com":return new oy(r,n);case"google.com":return new ly(r,n);case"twitter.com":return new cy(r,n,e.screenName||null);case"custom":case"anonymous":return new iy(r,null);default:return new iy(r,t,n)}}(n)}class hy{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new hy("enroll",e,t)}static _fromMfaPendingCredential(e){return new hy("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){if(null!==e&&void 0!==e&&e.multiFactorSession){var t,n;if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return hy._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(n=e.multiFactorSession)&&void 0!==n&&n.idToken)return hy._fromIdtoken(e.multiFactorSession.idToken)}return null}}class dy{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=qv(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>Gb._fromServerResponse(n,e));Ug(r.mfaPendingCredential,n,"internal-error");const s=hy._fromMfaPendingCredential(r.mfaPendingCredential);return new dy(s,i,async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const a=l(l({},r),{},{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Lb._fromIdTokenResponse(n,t.operationType,a);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Ug(t.user,n,"internal-error"),Lb._forOperation(t.user,t.operationType,a);default:Og(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function fy(e,t){return Zg(e,"POST","/v2/accounts/mfaEnrollment:start",Qg(e,t))}class py{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Gb._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new py(e)}async getSession(){return hy._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await mv(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await mv(this.user,function(e,t){return Zg(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Qg(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(e=>{let{uid:n}=e;return n!==t}),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const my=new WeakMap;const gy="__sak";class vy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gy,"1"),this.storage.removeItem(gy),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class by extends vy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);C()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}by.type="LOCAL";const yy=by;function wy(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function xy(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class _y{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=xy(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return wy(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=xy(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=xy(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=wy(n);const i=setInterval(()=>{const e=wy(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}_y.type="COOKIE";class Sy extends vy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Sy.type="SESSION";const ky=Sy;class Ty{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ty(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ty.receivers=[];class Ay{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Ey("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Ny(){return window}function Iy(){return"undefined"!==typeof Ny().WorkerGlobalScope&&"function"===typeof Ny().importScripts}const Cy="firebaseLocalStorageDb",Py="firebaseLocalStorage",Ly="fbase_key";class Dy{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Oy(e,t){return e.transaction([Py],t?"readwrite":"readonly").objectStore(Py)}function Ry(){const e=indexedDB.open(Cy,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Py,{keyPath:Ly})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Py)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Cy);return new Dy(e).toPromise()}(),t(await Ry()))})})}async function My(e,t,n){const r=Oy(e,!0).put({[Ly]:t,value:n});return new Dy(r).toPromise()}function Fy(e,t){const n=Oy(e,!0).delete(t);return new Dy(n).toPromise()}class jy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ry()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Iy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ty._getInstance(Iy()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Ay(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ry();return await My(e,gy,"1"),await Fy(e,gy),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>My(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Oy(e,!1).get(t),r=await new Dy(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Fy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Oy(e,!1).getAll();return new Dy(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}jy.type="LOCAL";const By=jy;function Uy(e,t){return Zg(e,"POST","/v2/accounts/mfaSignIn:start",Qg(e,t))}const zy=Kv("rcb"),Vy=new Gg(3e4,6e4);class qy{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=Ny().grecaptcha)||void 0===e||!e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ug(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&av(Ny().grecaptcha)?Promise.resolve(Ny().grecaptcha):new Promise((n,r)=>{const i=Ny().setTimeout(()=>{r(Rg(e,"network-request-failed"))},Vy.get());Ny()[zy]=()=>{Ny().clearTimeout(i),delete Ny()[zy];const s=Ny().grecaptcha;if(!s||!av(s))return void r(Rg(e,"internal-error"));const a=s.render;s.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Gv("".concat(Hv.recaptchaV2Script,"?").concat(U({onload:zy,render:"explicit",hl:t}))).catch(()=>{clearTimeout(i),r(Rg(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=Ny().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wy{async load(e){return new Xv(e)}clearedOneInstance(){}}const Hy="recaptcha",Gy={theme:"light",type:"image"};class Ky{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l({},Gy);this.parameters=n,this.type=Hy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qv(e),this.isInvisible="invisible"===this.parameters.size,Ug("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Ug(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wy:new qy,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ug(!this.parameters.sitekey,this.auth,"argument-error"),Ug(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ug("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=Ny()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Ug(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ug(Wg()&&!Iy(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Zg(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Ug(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ug(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yy{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=yb._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Xy(e,t,n){if(!e._getRecaptchaConfig())try{await rb(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ug("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=nb(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Zv){Ug((null===n||void 0===n?void 0:n.type)===Hy,e,"argument-error");return fy(e,await $y(e,t,n))}return fy(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Ug("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ug(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=nb(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Zv){Ug((null===n||void 0===n?void 0:n.type)===Hy,e,"argument-error");return Uy(e,await $y(e,t,n))}return Uy(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=nb(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Zv){Ug((null===n||void 0===n?void 0:n.type)===Hy,e,"argument-error");return vb(e,await $y(e,t,n))}return vb(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function $y(e,t,n){Ug(n.type===Hy,e,"argument-error");const r=await n.verify();Ug("string"===typeof r,e,"argument-error");const i=l({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Jy{constructor(e){this.providerId=Jy.PROVIDER_ID,this.auth=qv(e)}verifyPhoneNumber(e,t){return Xy(this.auth,e,G(t))}static credential(e,t){return yb._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Jy.credentialFromTaggedObject(t)}static credentialFromError(e){return Jy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?yb._fromTokenResponse(n,r):null}}function Qy(e,t){return t?kv(t):(Ug(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jy.PROVIDER_ID="phone",Jy.PHONE_SIGN_IN_METHOD="phone";class Zy extends ob{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mb(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mb(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mb(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ew(e){return zb(e.auth,new Zy(e),e.bypassAuthState)}function tw(e){const{auth:t,user:n}=e;return Ug(n,t,"internal-error"),Ub(n,new Zy(e),e.bypassAuthState)}async function nw(e){const{auth:t,user:n}=e;return Ug(n,t,"internal-error"),jb(n,new Zy(e),e.bypassAuthState)}class rw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ew;case"linkViaPopup":case"linkViaRedirect":return nw;case"reauthViaPopup":case"reauthViaRedirect":return tw;default:Og(this.auth,"internal-error")}}resolve(e){Vg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iw=new Gg(2e3,1e4);class sw extends rw{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,sw.currentPopupAction&&sw.currentPopupAction.cancel(),sw.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ug(e,this.auth,"internal-error"),e}async onExecution(){Vg(1===this.filter.length,"Popup operations only handle one event");const e=Ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Rg(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Rg(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sw.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rg(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,iw.get())};e()}}sw.currentPopupAction=null;const aw=new Map;class ow extends rw{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=aw.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=hw(t),r=uw(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}aw.set(this.auth._key(),e)}return this.bypassAuthState||aw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function lw(e,t){return uw(e)._set(hw(t),"true")}function cw(e,t){aw.set(e._key(),t)}function uw(e){return kv(e._redirectPersistence)}function hw(e){return Av("pendingRedirect",e.config.apiKey,e.name)}function dw(e,t,n){return async function(e,t,n){if(ct(e.app))return Promise.reject(Fg(e));const r=qv(e);jg(e,t,_b),await r._initializationPromise;const i=Qy(r,n);return await lw(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function fw(e,t,n){return async function(e,t,n){const r=G(e);if(jg(r.auth,t,_b),ct(r.auth.app))return Promise.reject(Fg(r.auth));await r.auth._initializationPromise;const i=Qy(r.auth,n);await lw(i,r.auth);const s=await gw(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function pw(e,t,n){return async function(e,t,n){const r=G(e);jg(r.auth,t,_b),await r.auth._initializationPromise;const i=Qy(r.auth,n);await Bb(!1,r,t.providerId),await lw(i,r.auth);const s=await gw(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function mw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ct(e.app))return Promise.reject(Fg(e));const r=qv(e),i=Qy(r,t),s=new ow(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}async function gw(e){const t=Ey("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class vw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yw(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!yw(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Rg(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bw(e))}saveEventToCache(e){this.cachedEventUids.add(bw(e)),this.lastProcessedEventTime=Date.now()}}function bw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function yw(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ww(e){return Zg(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const xw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_w=/^https?/;function Sw(e){const t=qg(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!_w.test(n))return!1;if(xw.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const kw=new Gg(3e4,6e4);function Tw(){const e=Ny().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ew(e){return new Promise((t,n)=>{var r,i;function s(){Tw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Tw(),n(Rg(e,"network-request-failed"))},timeout:kw.get()})}if(null!==(r=Ny().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Ny().gapi)||void 0===i||!i.load){const t=Kv("iframefcb");return Ny()[t]=()=>{gapi.load?s():n(Rg(e,"network-request-failed"))},Gv("".concat(Hv.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Aw=null,e})}let Aw=null;const Nw=new Gg(5e3,15e3),Iw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pw(e){const t=e.config;Ug(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Kg(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:mt},i=Cw.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(U(r).slice(1))}async function Lw(e){const t=await function(e){return Aw=Aw||Ew(e),Aw}(e),n=Ny().gapi;return Ug(n,e,"internal-error"),t.open({where:document.body,url:Pw(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Iw,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Rg(e,"network-request-failed"),s=Ny().setTimeout(()=>{r(i)},Nw.get());function a(){Ny().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Dw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ow{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Rw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=l(l({},Dw),{},{width:r.toString(),height:i.toString(),top:s,left:a}),u=T().toLowerCase();n&&(o=Lv(u)?"_blank":n),Cv(u)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Fv(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Ow(null);const d=window.open(t||"",o,h);Ug(d,e,"popup-blocked");try{d.focus()}catch(f){}return new Ow(d)}const Mw="__/auth/handler",Fw="emulator/auth/handler",jw=encodeURIComponent("fac");async function Bw(e,t,n,r,i,s){Ug(e.config.authDomain,e,"auth-domain-config-required"),Ug(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mt,eventId:i};if(t instanceof _b){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Sb){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(jw,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Mw);return Kg(t,Fw)}(e),"?").concat(U(o).slice(1)).concat(c)}const Uw="webStorageSupport";const zw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ky,this._completeRedirectFn=mw,this._overrideRedirectResult=cw}async _openPopup(e,t,n,r){var i;Vg(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Rw(e,await Bw(e,t,n,qg(),r),Ey())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ny().location.href=e}(await Bw(e,t,n,qg(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Vg(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Lw(e),n=new vw(e);return t.register("authEvent",t=>{Ug(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Uw,{type:Uw},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Uw];void 0!==i&&t(!!i),Og(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ww(e);for(const r of t)try{if(Sw(r))return}catch(n){}Og(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jv()||Pv()||Fv()}};class Vw{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return zg("unexpected MultiFactorSessionType")}}}class qw extends Vw{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new qw(e)}_finalizeEnroll(e,t,n){return function(e,t){return Zg(e,"POST","/v2/accounts/mfaEnrollment:finalize",Qg(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Zg(e,"POST","/v2/accounts/mfaSignIn:finalize",Qg(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ww{constructor(){}static assertion(e){return qw._fromCredential(e)}}Ww.FACTOR_ID="phone";var Hw="@firebase/auth",Gw="1.11.0";class Kw{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ug(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=v())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Yw;function Xw(){return window}!function(e){Hv=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Rg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Yw="Browser",it(new K("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Ug(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Yw,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bv(Yw)},c=new Vv(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kv);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),it(new K("auth-internal",e=>(e=>new Kw(e))(qv(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),xt(Hw,Gw,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Yw)),xt(Hw,Gw,"esm2020");async function $w(e,t,n){var r;const{BuildInfo:i}=Xw();Vg(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Vg(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}(t.sessionId),a={};return Fv()?a.ibi=i.packageName:Ov()?a.apn=i.packageName:Og(e,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Bw(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,a)}function Jw(e){const{cordova:t}=Xw();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}class Qw extends vw{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function Zw(e){const t=await nx()._get(rx(e));return t&&await nx()._remove(rx(e)),t}function ex(e,t){const n=function(e){const t=ix(e),n=t.link?decodeURIComponent(t.link):void 0,r=ix(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ix(i).link||i||r||n||e}(t);if(n.includes("/__/auth/callback")){var r;const t=ix(n),i=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===i||void 0===i||null===(r=i.code)||void 0===r||null===(r=r.split("auth/"))||void 0===r?void 0:r[1],a=s?Rg(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:n,postBody:null}}return null}function tx(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function nx(){return kv(yy)}function rx(e){return Av("authEvent",e.config.apiKey,e.name)}function ix(e){if(null===e||void 0===e||!e.includes("?"))return{};const[t,...n]=e.split("?");return z(n.join("?"))}const sx=class{constructor(){this._redirectPersistence=ky,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mw,this._overrideRedirectResult=cw}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Qw(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Og(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s;const a=Xw();Ug("function"===typeof(null===a||void 0===a||null===(t=a.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ug("undefined"!==typeof(null===a||void 0===a||null===(n=a.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ug("function"===typeof(null===a||void 0===a||null===(r=a.cordova)||void 0===r||null===(r=r.plugins)||void 0===r||null===(r=r.browsertab)||void 0===r?void 0:r.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ug("function"===typeof(null===a||void 0===a||null===(i=a.cordova)||void 0===i||null===(i=i.plugins)||void 0===i||null===(i=i.browsertab)||void 0===i?void 0:i.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ug("function"===typeof(null===a||void 0===a||null===(s=a.cordova)||void 0===s||null===(s=s.InAppBrowser)||void 0===s?void 0:s.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),aw.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:tx(),postBody:null,tenantId:e.tenantId,error:Rg(e,"no-auth-event")}}(e,n,r);await function(e,t){return nx()._set(rx(e),t)}(e,s);const a=await $w(e,s,t);return async function(e,t,n){const{cordova:r}=Xw();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){o||(o=window.setTimeout(()=>{a(Rg(e,"redirect-cancelled-by-user"))},2e3))}function u(){var e;"visible"===(null===(e=document)||void 0===e?void 0:e.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Ov()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),o&&window.clearTimeout(o)}})}finally{i()}}(e,i,await Jw(a))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Xw(),n={};Fv()?n.iosBundleId=t.packageName:Ov()?n.androidPackageName=t.packageName:Og(e,"operation-not-supported-in-this-environment"),await ww(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Xw(),s=setTimeout(async()=>{await Zw(e),t.onEvent(ax())},500),a=async n=>{clearTimeout(s);const r=await Zw(e);let i=null;r&&null!==n&&void 0!==n&&n.url&&(i=ex(r,n.url)),t.onEvent(i||ax())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,a);const o=r,l="".concat(i.packageName.toLowerCase(),"://");Xw().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&a({url:e}),"function"===typeof o)try{o(e)}catch(t){console.error(t)}}}};function ax(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rg("no-auth-event")}}function ox(){var e;return(null===(e=self)||void 0===e||null===(e=e.location)||void 0===e?void 0:e.protocol)||null}function lx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return!("file:"!==ox()&&"ionic:"!==ox()&&"capacitor:"!==ox()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function cx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return function(){var e;return C()&&11===(null===(e=document)||void 0===e?void 0:e.documentMode)}()||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/Edge\/\d+/.test(e)}(e)}function ux(){try{const e=self.localStorage,t=Ey();if(e)return e.setItem(t,"1"),e.removeItem(t),!cx()||D()}catch(e){return hx()&&D()}return!1}function hx(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function dx(){return("http:"===ox()||"https:"===ox()||N()||lx())&&!(I()||E())&&ux()&&!hx()}function fx(){return lx()&&"undefined"!==typeof document}const px={LOCAL:"local",NONE:"none",SESSION:"session"},mx=Ug,gx="persistence";async function vx(e){await e._initializationPromise;const t=bx(),n=Av(gx,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistenceType())}function bx(){try{var e;return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const yx=Ug;class wx{constructor(){this.browserResolver=kv(zw),this.cordovaResolver=kv(sx),this.underlyingResolver=null,this._redirectPersistence=ky,this._completeRedirectFn=mw,this._overrideRedirectResult=cw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return fx()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yx(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!fx()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function xx(e){return e.unwrap()}function _x(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Ex(e,function(e,t){var n;const r=G(e),i=t;return Ug(t.customData.operationType,r,"argument-error"),Ug(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),dy._fromError(r,i)}(e,t))}else if(r){const e=Sx(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Sx(e){const{_tokenResponse:t}=e instanceof O?e.customData:e;if(!t)return null;if(!(e instanceof O)&&"temporaryProof"in t&&"phoneNumber"in t)return Jy.credentialFromResult(e);const n=t.providerId;if(!n||n===wg)return null;let r;switch(n){case yg:r=Eb;break;case vg:r=Tb;break;case bg:r=Ab;break;case xg:r=Cb;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:a,nonce:o}=t;return i||s||e||a?a?n.startsWith("saml.")?Nb._create(n,a):gb._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:i}):new kb(n).credential({idToken:e,accessToken:i,rawNonce:o}):null}return e instanceof O?r.credentialFromError(e):r.credentialFromResult(e)}function kx(e,t){return t.catch(t=>{throw t instanceof O&&_x(e,t),t}).then(e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Sx(r)),additionalUserInfo:uy(e),user:Ax.getOrCreate(n)};var r})}async function Tx(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>kx(e,n.confirm(t))}}class Ex{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return kx(xx(this.auth),this.resolver.resolveSignIn(e))}}class Ax{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=G(e);return my.has(t)||my.set(t,py._fromUser(t)),my.get(t)}(e)}static getOrCreate(e){return Ax.USER_MAP.has(e)||Ax.USER_MAP.set(e,new Ax(e)),Ax.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return kx(this.auth,qb(this._delegate,e))}async linkWithPhoneNumber(e,t){return Tx(this.auth,async function(e,t,n){const r=G(e);await Bb(!1,r,"phone");const i=await Xy(r.auth,t,G(n));return new Yy(i,e=>qb(r,e))}(this._delegate,e,t))}async linkWithPopup(e){return kx(this.auth,async function(e,t,n){const r=G(e);jg(r.auth,t,_b);const i=Qy(r.auth,n);return new sw(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,wx))}async linkWithRedirect(e){return await vx(qv(this.auth)),pw(this._delegate,e,wx)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return kx(this.auth,Wb(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Tx(this.auth,async function(e,t,n){const r=G(e);if(ct(r.auth.app))return Promise.reject(Fg(r.auth));const i=await Xy(r.auth,t,G(n));return new Yy(i,e=>Wb(r,e))}(this._delegate,e,t))}reauthenticateWithPopup(e){return kx(this.auth,async function(e,t,n){const r=G(e);if(ct(r.auth.app))return Promise.reject(Rg(r.auth,"operation-not-supported-in-this-environment"));jg(r.auth,t,_b);const i=Qy(r.auth,n);return new sw(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,wx))}async reauthenticateWithRedirect(e){return await vx(qv(this.auth)),fw(this._delegate,e,wx)}sendEmailVerification(e){return ey(this._delegate,e)}async unlink(e){return await Fb(this._delegate,e),this}updateEmail(e){return function(e,t){const n=G(e);return ct(n.auth.app)?Promise.reject(Fg(n.auth)):ry(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return ry(G(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=G(e);if(ct(n.auth.app))return Promise.reject(Fg(n.auth));await jb(n,t)}(this._delegate,e)}updateProfile(e){return ny(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ty(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ax.USER_MAP=new WeakMap;const Nx=Ug;class Ix{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Nx(n,"invalid-api-key",{appName:e.name}),Nx(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?wx:void 0;this._delegate=t.initialize({options:{persistence:Px(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Ig),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ax.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){ib(this._delegate,e,t)}applyActionCode(e){return Jb(this._delegate,e)}checkActionCode(e){return Qb(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await lb(G(e),{oobCode:t,newPassword:n}).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&$b(e),t})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return kx(this._delegate,async function(e,t,n){if(ct(e.app))return Promise.reject(Fg(e));const r=qv(e),i=nb(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pb,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&$b(e),t}),a=await Lb._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Zb(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=wb.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Nx(dx(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await qv(e)._initializationPromise,mw(e,t,!1)}(this._delegate,wx);return e?kx(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){qv(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Cx(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Cx(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=qv(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Ug(t.handleCodeInApp,r,"argument-error"),t&&Xb(r,e,t)}(i,n),await nb(r,i,"getOobCode",fb,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=qv(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Xb(r,i,n),await nb(r,i,"getOobCode",db,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){mx(Object.values(px).includes(t),e,"invalid-persistence-type"),I()?mx(t!==px.SESSION,e,"unsupported-persistence-type"):E()?mx(t===px.NONE,e,"unsupported-persistence-type"):hx()?mx(t===px.NONE||t===px.LOCAL&&D(),e,"unsupported-persistence-type"):mx(t===px.NONE||ux(),e,"unsupported-persistence-type")}(this._delegate,e),e){case px.SESSION:t=ky;break;case px.LOCAL:t=await kv(By)._isAvailable()?By:yy;break;case px.NONE:t=Ev;break;default:return Og("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return kx(this._delegate,async function(e){var t;if(ct(e.app))return Promise.reject(Fg(e));const n=qv(e);if(await n._initializationPromise,null!==(t=n.currentUser)&&void 0!==t&&t.isAnonymous)return new Lb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Pb(n,{returnSecureToken:!0}),i=await Lb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return kx(this._delegate,Vb(this._delegate,e))}signInWithCustomToken(e){return kx(this._delegate,Hb(this._delegate,e))}signInWithEmailAndPassword(e,t){return kx(this._delegate,function(e,t,n){return ct(e.app)?Promise.reject(Fg(e)):Vb(G(e),xb.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&$b(e),t})}(this._delegate,e,t))}signInWithEmailLink(e,t){return kx(this._delegate,async function(e,t,n){if(ct(e.app))return Promise.reject(Fg(e));const r=G(e),i=xb.credentialWithLink(t,n||qg());return Ug(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Vb(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Tx(this._delegate,async function(e,t,n){if(ct(e.app))return Promise.reject(Fg(e));const r=qv(e),i=await Xy(r,t,G(n));return new Yy(i,e=>Vb(r,e))}(this._delegate,e,t))}async signInWithPopup(e){return Nx(dx(),this._delegate,"operation-not-supported-in-this-environment"),kx(this._delegate,async function(e,t,n){if(ct(e.app))return Promise.reject(Rg(e,"operation-not-supported-in-this-environment"));const r=qv(e);jg(e,t,_b);const i=Qy(r,n);return new sw(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,wx))}async signInWithRedirect(e){return Nx(dx(),this._delegate,"operation-not-supported-in-this-environment"),await vx(this._delegate),dw(this._delegate,e,wx)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Qb(G(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Cx(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Ax.getOrCreate(e)),error:t,complete:n}}function Px(e,t){const n=function(e,t){const n=bx();if(!n)return[];const r=Av(gx,e,t);switch(n.getItem(r)){case px.NONE:return[Ev];case px.LOCAL:return[By,ky];case px.SESSION:return[ky];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(By)||n.push(By),"undefined"!==typeof window)for(const r of[yy,ky])n.includes(r)||n.push(r);return n.includes(Ev)||n.push(Ev),n}Ix.Persistence=px;class Lx{static credential(e,t){return Jy.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Jy(xx(jt.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Lx.PHONE_SIGN_IN_METHOD=Jy.PHONE_SIGN_IN_METHOD,Lx.PROVIDER_ID=Jy.PROVIDER_ID;const Dx=Ug;class Ox{constructor(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jt.app();Dx(null===(n=r.options)||void 0===n?void 0:n.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Ky(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new K("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ix(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_g,PASSWORD_RESET:Sg,RECOVER_EMAIL:kg,REVERT_SECOND_FACTOR_ADDITION:Tg,VERIFY_AND_CHANGE_EMAIL:Eg,VERIFY_EMAIL:Ag}},EmailAuthProvider:xb,FacebookAuthProvider:Tb,GithubAuthProvider:Ab,GoogleAuthProvider:Eb,OAuthProvider:kb,SAMLAuthProvider:Ib,PhoneAuthProvider:Lx,PhoneMultiFactorGenerator:Ww,RecaptchaVerifier:Ox,TwitterAuthProvider:Cb,Auth:Ix,AuthCredential:ob,Error:O}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.6.0")}(jt);const Rx={apiKey:"AIzaSyDiI5kjSiaCnJiegGkhGKYnVLY1tgfdlkk",authDomain:"contabilidad-app-4cd29.firebaseapp.com",projectId:"contabilidad-app-4cd29",storageBucket:"contabilidad-app-4cd29.firebasestorage.app",messagingSenderId:"182572888659",appId:"1:182572888659:web:e5f8366b0003a6a87bcca6"};let Mx,Fx,jx;try{Mx=jt.initializeApp(Rx),Fx=jt.firestore(),jx=jt.auth(),console.log("Firebase inicializado correctamente")}catch(O$){console.error("Error al inicializar Firebase:",O$)}const Bx=36.5,Ux=1,zx=37,Vx=()=>{const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{const e=(e=>jx.onAuthStateChanged(e))(e=>{t(e),r(!1)});return()=>e()},[]),{usuario:e,cargando:n}},qx=async(e,t)=>{const n=l(l({},e),{},{usuarioId:t.uid,creadoPor:t.email,creadoEn:jt.firestore.FieldValue.serverTimestamp()});return await Fx.collection("transacciones").add(n)},Wx=e=>{const[t,n]=(0,i.useState)([]);(0,i.useEffect)(()=>{if(!e)return;const t=((e,t)=>Fx.collection("transacciones").where("usuarioId","==",e.uid).orderBy("fecha","desc").onSnapshot(e=>{const n=[];e.forEach(e=>n.push(l({id:e.id},e.data()))),t(n)},n=>{console.error("Error al cargar transacciones:",n),Fx.collection("transacciones").where("usuarioId","==",e.uid).onSnapshot(e=>{const n=[];e.forEach(e=>n.push(l({id:e.id},e.data()))),n.sort((e,t)=>t.fecha.localeCompare(e.fecha)),t(n)})}))(e,e=>{n(e)});return()=>t()},[e]);const r=()=>t.filter(e=>"Compra"===e.tipo);return{transacciones:t,obtenerMesesDisponibles:()=>{const e=new Set;return t.forEach(t=>{const[n,r]=t.fecha.split("-");e.add("".concat(n,"-").concat(r))}),Array.from(e).sort().reverse()},obtenerCompras:r,obtenerClientesUnicos:()=>{const e=r(),t=new Set;return e.forEach(e=>{e.cliente&&t.add(e.cliente)}),Array.from(t).sort()},obtenerOperadoresUnicos:()=>{const e=r(),t=new Set;return e.forEach(e=>{e.operador&&t.add(e.operador)}),Array.from(t).sort()}}},Hx=36.5,Gx=1,Kx=37,Yx=["Efectivo","Banco Provincial","Binance","Otro"],Xx=292,$x=1,Jx=296,Qx=e=>{const[t,n]=(0,i.useState)(Jx),[r,s]=(0,i.useState)({usdToBs:Xx,usdtToUsd:$x});return(0,i.useEffect)(()=>{if(!e)return;const t=((e,t)=>Fx.collection("usuarios").doc(e.uid).collection("configuracion").doc("tasaVenta").onSnapshot(n=>{n.exists?t(n.data().valor):(Fx.collection("usuarios").doc(e.uid).collection("configuracion").doc("tasaVenta").set({valor:Kx}),t(Kx))}))(e,e=>{n(e)});return()=>t()},[e]),(0,i.useEffect)(()=>{if(!e)return;const t=((e,t)=>Fx.collection("usuarios").doc(e.uid).collection("configuracion").doc("tasaCambio").onSnapshot(n=>{if(n.exists)t(n.data());else{const n={usdToBs:Hx,usdtToUsd:Gx};Fx.collection("usuarios").doc(e.uid).collection("configuracion").doc("tasaCambio").set(n),t(n)}}))(e,e=>{s(e)});return()=>t()},[e]),{tasaVenta:t,setTasaVenta:n,tasaCambio:r,setTasaCambio:s}};const Zx={oscuro:{nombre:"Oscuro",primario:"from-slate-900 via-purple-900 to-slate-900",tarjeta:"bg-white/10",texto:"text-white",boton:"bg-purple-600 hover:bg-purple-700"},claro:{nombre:"Claro",primario:"from-blue-50 via-white to-blue-50",tarjeta:"bg-white shadow-lg",texto:"text-gray-900",boton:"bg-blue-600 hover:bg-blue-700"},verde:{nombre:"Verde",primario:"from-green-900 via-teal-900 to-green-900",tarjeta:"bg-white/10",texto:"text-white",boton:"bg-green-600 hover:bg-green-700"},naranja:{nombre:"Naranja",primario:"from-orange-900 via-red-900 to-orange-900",tarjeta:"bg-white/10",texto:"text-white",boton:"bg-orange-600 hover:bg-orange-700"}};var e_=n(579);const t_=e=>{let{temaActual:t}=e;const[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)("login");return(0,e_.jsx)("div",{className:"min-h-screen bg-gradient-to-br ".concat(t.primario," flex items-center justify-center p-4"),children:(0,e_.jsxs)("div",{className:"".concat(t.tarjeta," backdrop-blur-lg rounded-2xl p-8 max-w-md w-full border border-white/20"),children:[(0,e_.jsxs)("h1",{className:"text-3xl font-bold mb-6 text-center ".concat(t.texto),children:["\ud83d\udd10 ","login"===o?"Iniciar Sesi\xf3n":"Registrarse"]}),(0,e_.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{"login"===o?await(async(e,t)=>await jx.signInWithEmailAndPassword(e,t))(n,s):await(async(e,t)=>{const n=await jx.createUserWithEmailAndPassword(e,t),r=n.user.uid;return await Fx.collection("usuarios").doc(r).set({email:e,creadoEn:jt.firestore.FieldValue.serverTimestamp()}),await Fx.collection("usuarios").doc(r).collection("configuracion").doc("tasaVenta").set({valor:zx}),await Fx.collection("usuarios").doc(r).collection("configuracion").doc("tasaCambio").set({usdToBs:Bx,usdtToUsd:Ux}),n})(n,s)}catch(O$){alert("Error: "+O$.message)}},className:"space-y-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 ".concat(t.texto),children:"Email"}),(0,e_.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-3 border border-slate-600",required:!0})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 ".concat(t.texto),children:"Contrase\xf1a"}),(0,e_.jsx)("input",{type:"password",value:s,onChange:e=>a(e.target.value),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-3 border border-slate-600",required:!0})]}),(0,e_.jsx)("button",{type:"submit",className:"w-full ".concat(t.boton," text-white py-3 rounded-lg font-semibold"),children:"login"===o?"Entrar":"Crear Cuenta"})]}),(0,e_.jsx)("button",{onClick:()=>l("login"===o?"registro":"login"),className:"w-full mt-4 ".concat(t.texto," text-center text-sm underline"),children:"login"===o?"\xbfNo tienes cuenta? Reg\xedstrate":"\xbfYa tienes cuenta? Inicia sesi\xf3n"}),(0,e_.jsx)("div",{className:"mt-8 pt-6 border-t border-white/20",children:(0,e_.jsx)("p",{className:"text-center text-sm ".concat(t.texto," opacity-75"),children:"\ud83d\udca1 Cada usuario tiene su propia base de datos separada"})})]})})},n_=e=>{let{temaActual:t}=e;const n=t||{primario:"from-slate-900 via-purple-900 to-slate-900",texto:"text-white"};return(0,e_.jsx)("div",{className:"min-h-screen bg-gradient-to-br ".concat(n.primario," flex items-center justify-center"),children:(0,e_.jsxs)("div",{className:"".concat(n.texto," text-center"),children:[(0,e_.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mx-auto mb-4"}),(0,e_.jsx)("p",{className:"text-xl",children:"Cargando..."})]})})};var r_={version:"0.18.5"},i_=1200,s_=1252,a_=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],o_={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},l_=function(e){-1!=a_.indexOf(e)&&(s_=o_[0]=e)};var c_=function(e){i_=e,l_(e)};function u_(){c_(1200),l_(1252)}function h_(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e.charCodeAt(n);return t}function d_(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var f_,p_=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return 255==t&&254==n?function(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}(e.slice(2)):254==t&&255==n?d_(e.slice(2)):65279==t?e.slice(1):e},m_=function(e){return String.fromCharCode(e)},g_=function(e){return String.fromCharCode(e)};var v_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function b_(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0,l=0,c=0;c<e.length;)s=(n=e.charCodeAt(c++))>>2,a=(3&n)<<4|(r=e.charCodeAt(c++))>>4,o=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(r)?o=l=64:isNaN(i)&&(l=64),t+=v_.charAt(s)+v_.charAt(a)+v_.charAt(o)+v_.charAt(l);return t}function y_(e){var t="",n=0,r=0,i=0,s=0,a=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=v_.indexOf(e.charAt(l++))<<2|(s=v_.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&s)<<4|(a=v_.indexOf(e.charAt(l++)))>>2,64!==a&&(t+=String.fromCharCode(r)),i=(3&a)<<6|(o=v_.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(i));return t}var w_=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),x_=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(t){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function __(e){return w_?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function S_(e){return w_?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var k_=function(e){return w_?x_(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function T_(e){if("undefined"===typeof ArrayBuffer)return k_(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function E_(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function A_(e){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(e instanceof ArrayBuffer)return A_(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var N_=w_?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:x_(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var I_=/\u0000/g,C_=/[\u0001-\u0006]/g;function P_(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function L_(e,t){var n=""+e;return n.length>=t?n:GS("0",t-n.length)+n}function D_(e,t){var n=""+e;return n.length>=t?n:GS(" ",t-n.length)+n}function O_(e,t){var n=""+e;return n.length>=t?n:n+GS(" ",t-n.length)}var R_=Math.pow(2,32);function M_(e,t){return e>R_||e<-R_?function(e,t){var n=""+Math.round(e);return n.length>=t?n:GS("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:GS("0",t-n.length)+n}(Math.round(e),t)}function F_(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var j_=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],B_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var U_={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},z_={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},V_={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function q_(e,t,n){for(var r=e<0?-1:1,i=e*r,s=0,a=1,o=0,l=1,c=0,u=0,h=Math.floor(i);c<t&&(o=(h=Math.floor(i))*a+s,u=h*c+l,!(i-h<5e-8));)i=1/(i-h),s=a,a=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=s):(u=c,o=a)),!n)return[0,r*o,u];var d=Math.floor(r*o/u);return[d,r*o-d*u,u]}function W_(e,t,n){if(e>2958465||e<0)return null;var r=0|e,i=Math.floor(86400*(e-r)),s=0,a=[],o={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,86400==++i&&(o.T=i=0,++r,++o.D)),60===r)a=n?[1317,10,29]:[1900,2,29],s=3;else if(0===r)a=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var H_=new Date(1899,11,31,0,0,0),G_=H_.getTime(),K_=new Date(1900,2,1,0,0,0);function Y_(e,t){var n=e.getTime();return t?n-=1262304e5:e>=K_&&(n+=864e5),(n-(G_+6e4*(e.getTimezoneOffset()-H_.getTimezoneOffset())))/864e5}function X_(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function $_(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=X_(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=X_(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),X_(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function J_(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):$_(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return bS(14,Y_(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Q_(e,t,n,r){var i,s="",a=0,o=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:i=l%100,c=2;break;default:i=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=n.m,c=t.length;break;case 3:return B_[n.m-1][1];case 5:return B_[n.m-1][0];default:return B_[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=n.d,c=t.length;break;case 3:return j_[n.q][0];default:return j_[n.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(a=Math.round(o*(n.S+n.u)))>=60*o&&(a=0),"s"===t?0===a?"0":""+a/o:(s=L_(a,2+r),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):L_(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*n.D+n.H;break;case"[m]":case"[mm]":i=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":i=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=l,c=1}return c>0?L_(i,c):""}function Z_(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var eS=/%/g;function tS(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+tS(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),-1===(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).indexOf("e")){var a=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var nS=/# (\?+)( ?)\/( ?)(\d+)/;var rS=/^#*0*\.([0#]+)/,iS=/\).*[0#]/,sS=/\(###\) ###\\?-####/;function aS(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function oS(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function lS(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function cS(e,t,n){if(40===e.charCodeAt(0)&&!t.match(iS)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?cS("n",r,n):"("+cS("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return dS(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(eS,""),i=t.length-r.length;return dS(e,r,n*Math.pow(10,2*i))+GS("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return tS(t,n);if(36===t.charCodeAt(0))return"$"+cS(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+M_(l,t.length);if(t.match(/^[#?]+$/))return"0"===(i=M_(n,0))&&(i=""),i.length>t.length?i:aS(t.substr(0,t.length-i.length))+i;if(s=t.match(nS))return function(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),s=Math.floor(i/r),a=i-s*r,o=r;return n+(0===s?"":""+s)+" "+(0===a?GS(" ",e[1].length+1+e[4].length):D_(a,e[1].length)+e[2]+"/"+e[3]+L_(o,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+M_(l,t.length-t.indexOf("0"));if(s=t.match(rS))return i=oS(n,s[1].length).replace(/^([^\.]+)$/,"$1."+aS(s[1])).replace(/\.$/,"."+aS(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+GS("0",aS(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+oS(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Z_(M_(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+cS(e,t,-n):Z_(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,s[1].length)))+"."+L_(lS(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return cS(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=P_(cS(e,t.replace(/[\\-]/g,""),n)),a=0,P_(P_(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return a<i.length?i.charAt(a++):"0"===e?"0":""}));if(t.match(sS))return"("+(i=cS(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=q_(l,Math.pow(10,a)-1,!1),i=""+c," "==(u=dS("n",s[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=O_(o[2],a)).length<s[4].length&&(u=aS(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=q_(l,Math.pow(10,a)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?D_(o[1],a)+s[2]+"/"+s[3]+O_(o[2],a):GS(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=M_(n,0),t.length<=i.length?i:aS(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var h=t.indexOf(".")-a,d=t.length-i.length-h;return aS(t.substr(0,h)+i+t.substr(t.length-d))}if(s=t.match(/^00,000\.([#0]*0)$/))return a=lS(n,s[1].length),n<0?"-"+cS(e,t,-n):Z_(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?L_(0,3-e.length):"")+e})+"."+L_(a,s[1].length);switch(t){case"###,##0.00":return cS(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=Z_(M_(l,0));return"0"!==f?c+f:"";case"###,###.00":return cS(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return cS(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function uS(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+uS(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),!(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function hS(e,t,n){if(40===e.charCodeAt(0)&&!t.match(iS)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?hS("n",r,n):"("+hS("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return dS(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(eS,""),i=t.length-r.length;return dS(e,r,n*Math.pow(10,2*i))+GS("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return uS(t,n);if(36===t.charCodeAt(0))return"$"+hS(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+L_(l,t.length);if(t.match(/^[#?]+$/))return i=""+n,0===n&&(i=""),i.length>t.length?i:aS(t.substr(0,t.length-i.length))+i;if(s=t.match(nS))return function(e,t,n){return n+(0===t?"":""+t)+GS(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+L_(l,t.length-t.indexOf("0"));if(s=t.match(rS))return i=(i=(""+n).replace(/^([^\.]+)$/,"$1."+aS(s[1])).replace(/\.$/,"."+aS(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+GS("0",aS(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Z_(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+hS(e,t,-n):Z_(""+n)+"."+GS("0",s[1].length);if(s=t.match(/^#,#*,#0/))return hS(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=P_(hS(e,t.replace(/[\\-]/g,""),n)),a=0,P_(P_(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return a<i.length?i.charAt(a++):"0"===e?"0":""}));if(t.match(sS))return"("+(i=hS(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=q_(l,Math.pow(10,a)-1,!1),i=""+c," "==(u=dS("n",s[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=O_(o[2],a)).length<s[4].length&&(u=aS(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=q_(l,Math.pow(10,a)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?D_(o[1],a)+s[2]+"/"+s[3]+O_(o[2],a):GS(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:aS(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var h=t.indexOf(".")-a,d=t.length-i.length-h;return aS(t.substr(0,h)+i+t.substr(t.length-d))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+hS(e,t,-n):Z_(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?L_(0,3-e.length):"")+e})+"."+L_(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=Z_(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return hS(e,t.slice(0,t.lastIndexOf(".")),n)+aS(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function dS(e,t,n){return(0|n)===n?hS(e,t,n):cS(e,t,n)}var fS=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function pS(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":F_(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(fS))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var mS=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function gS(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function vS(e,t){var n=function(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var s=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,s];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var a=n[0].match(mS),o=n[1].match(mS);return gS(t,a)?[r,n[0]]:gS(t,o)?[r,n[1]]:[r,n[null!=a&&null!=o?2:1]]}return[r,s]}function bS(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:U_)[e])&&(r=n.table&&n.table[z_[e]]||U_[z_[e]]),null==r&&(r=V_[e]||"General")}if(F_(r,0))return J_(t,n);t instanceof Date&&(t=Y_(t,n.date1904));var i=vS(r,t);if(F_(i[1]))return J_(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var i,s,a,o=[],l="",c=0,u="",h="t",d="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!F_(e,c))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(a=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(a);o[o.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),p="("===f||")"===f?f:"t";o[o.length]={t:p,v:f},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==i&&null==(i=W_(t,n,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},h=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=W_(t,n)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===h.toLowerCase()&&(u="M"),"h"===u&&(u=d),o[o.length]={t:u,v:l},h=u;break;case"A":case"a":case"\u4e0a":var m={t:u,v:u};if(null==i&&(i=W_(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=i&&(m.v=i.H>=12?"P":"A"),m.t="T",d="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"PM":"AM"),m.t="T",c+=5,d="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,d="h"):(m.t="t",++c),null==i&&"T"===m.t)return"";o[o.length]=m,h=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(fS)){if(null==i&&null==(i=W_(t,n)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},h=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",pS(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;o[o.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;o[o.length]={t:u,v:l},h=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===r?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:u,v:u},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"t",v:u},++c}var g,v=0,b=0;for(c=o.length-1,h="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=d,h="h",v<1&&(v=1);break;case"s":(g=o[c].v.match(/\.0+$/))&&(b=Math.max(b,g[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":h=o[c].t;break;case"m":"s"===h&&(o[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&o[c].v.match(/[Hh]/)&&(v=1),v<2&&o[c].v.match(/[Mm]/)&&(v=2),v<3&&o[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var y,w="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=Q_(o[c].t.charCodeAt(0),o[c].v,i,b),o[c].t="t";break;case"n":case"?":for(y=c+1;null!=o[y]&&("?"===(u=o[y].t)||"D"===u||(" "===u||"t"===u)&&null!=o[y+1]&&("?"===o[y+1].t||"t"===o[y+1].t&&"/"===o[y+1].v)||"("===o[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===o[y].v||" "===o[y].v&&null!=o[y+1]&&"?"==o[y+1].t));)o[c].v+=o[y].v,o[y]={v:"",t:";"},++y;w+=o[c].v,c=y-1;break;case"G":o[c].t="t",o[c].v=J_(t,n)}var x,_,S="";if(w.length>0){40==w.charCodeAt(0)?(x=t<0&&45===w.charCodeAt(0)?-t:t,_=dS("n",w,x)):(_=dS("n",w,x=t<0&&r>1?-t:t),x<0&&o[0]&&"t"==o[0].t&&(_=_.substr(1),o[0].v="-"+o[0].v)),y=_.length-1;var k=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){k=c;break}var T=o.length;if(k===o.length&&-1===_.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(y>=o[c].v.length-1?(y-=o[c].v.length,o[c].v=_.substr(y+1,o[c].v.length)):y<0?o[c].v="":(o[c].v=_.substr(0,y+1),y=-1),o[c].t="t",T=c);y>=0&&T<o.length&&(o[T].v=_.substr(0,y+1)+o[T].v)}else if(k!==o.length&&-1===_.indexOf("E")){for(y=_.indexOf(".")-1,c=k;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(s=o[c].v.indexOf(".")>-1&&c===k?o[c].v.indexOf(".")-1:o[c].v.length-1,S=o[c].v.substr(s+1);s>=0;--s)y>=0&&("0"===o[c].v.charAt(s)||"#"===o[c].v.charAt(s))&&(S=_.charAt(y--)+S);o[c].v=S,o[c].t="t",T=c}for(y>=0&&T<o.length&&(o[T].v=_.substr(0,y+1)+o[T].v),y=_.indexOf(".")+1,c=k;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===k)){for(s=o[c].v.indexOf(".")>-1&&c===k?o[c].v.indexOf(".")+1:0,S=o[c].v.substr(0,s);s<o[c].v.length;++s)y<_.length&&(S+=_.charAt(y++));o[c].v=S,o[c].t="t",T=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(x=r>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=dS(o[c].t,o[c].v,x),o[c].t="t");var E="";for(c=0;c!==o.length;++c)null!=o[c]&&(E+=o[c].v);return E}(i[1],t,n,i[0])}function yS(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=U_[n]){if(U_[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return U_[t]=e,t}function wS(e){for(var t=0;392!=t;++t)void 0!==e[t]&&yS(e[t],t)}function xS(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',U_=e}var _S={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},SS=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var kS=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var s=[];for(r=1;16!=r;++r)s[r-1]="undefined"!==typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return s}(t),r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,i=0,s=e.length;i<s;)r=r>>>8^t[255&(r^e.charCodeAt(i++))];return~r},e.buf=function(e,n){for(var b=-1^n,y=e.length-15,w=0;w<y;)b=v[e[w++]^255&b]^g[e[w++]^b>>8&255]^m[e[w++]^b>>16&255]^p[e[w++]^b>>>24]^f[e[w++]]^d[e[w++]]^h[e[w++]]^u[e[w++]]^c[e[w++]]^l[e[w++]]^o[e[w++]]^a[e[w++]]^s[e[w++]]^i[e[w++]]^r[e[w++]]^t[e[w++]];for(y+=15;w<y;)b=b>>>8^t[255&(b^e[w++])];return~b},e.str=function(e,n){for(var r=-1^n,i=0,s=e.length,a=0,o=0;i<s;)(a=e.charCodeAt(i++))<128?r=r>>>8^t[255&(r^a)]:a<2048?r=(r=r>>>8^t[255&(r^(192|a>>6&31))])>>>8^t[255&(r^(128|63&a))]:a>=55296&&a<57344?(a=64+(1023&a),o=1023&e.charCodeAt(i++),r=(r=(r=(r=r>>>8^t[255&(r^(240|a>>8&7))])>>>8^t[255&(r^(128|a>>2&63))])>>>8^t[255&(r^(128|o>>6&15|(3&a)<<4))])>>>8^t[255&(r^(128|63&o))]):r=(r=(r=r>>>8^t[255&(r^(224|a>>12&15))])>>>8^t[255&(r^(128|a>>6&63))])>>>8^t[255&(r^(128|63&a))];return~r},e}(),TS=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function s(e){YT(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),i=e.read_shift(2),s=e.l+i,a={};if(21589===r)1&(n=e.read_shift(1))&&(a.mtime=e.read_shift(4)),i>5&&(2&n&&(a.atime=e.read_shift(4)),4&n&&(a.ctime=e.read_shift(4))),a.mtime&&(a.mt=new Date(1e3*a.mtime));e.l=s,t[r]=a}return t}function a(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=_(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(w_&&Buffer.isBuffer(e)?e.toString("binary"):_(e)).split("\r\n"),i=0,s="";for(i=0;i<r.length;++i)if(s=r[i],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),n||(n=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),s.slice(0,n.length)!=n););var a=(r[1]||"").match(/boundary="(.*?)"/);if(!a)throw new Error("MAD cannot find boundary");var o="--"+(a[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};d(u);var h,f=0;for(i=0;i<r.length;++i){var p=r[i];p!==o&&p!==o+"--"||(f++&&ce(u,r.slice(h,i),n),h=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,i,s,a,o,f=512,p=[],m=e.slice(0,512);YT(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(b,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=g[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==g[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==f&&YT(m=e.slice(0,f),28);var y=e.slice(0,f);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var w=m.read_shift(4,"i");if(3===n&&0!==w)throw new Error("# Directory Sectors: Expected 0 saw "+w);m.l+=4,s=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),a=m.read_shift(4,"i"),r=m.read_shift(4,"i"),o=m.read_shift(4,"i"),i=m.read_shift(4,"i");for(var x=-1,S=0;S<109&&!((x=m.read_shift(4,"i"))<0);++S)p[S]=x;var k=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],i=1;i<n;++i)r[i-1]=e.slice(i*t,(i+1)*t);return r[n-1]=e.slice(n*t),r}(e,f);c(o,i,k,f,p);var T=function(e,t,n,r){var i=e.length,s=[],a=[],o=[],l=[],c=r-1,u=0,h=0,d=0,f=0;for(u=0;u<i;++u)if(o=[],(d=u+t)>=i&&(d-=i),!a[d]){l=[];var p=[];for(h=d;h>=0;){p[h]=!0,a[h]=!0,o[o.length]=h,l.push(e[h]);var m=n[Math.floor(4*h/r)];if(r<4+(f=4*h&c))throw new Error("FAT boundary crossed: "+h+" 4 "+r);if(!e[m])break;if(p[h=UT(e[m],f)])break}s[d]={nodes:o,data:mT([l])}}return s}(k,s,p,f);T[s].name="!Directory",r>0&&a!==v&&(T[a].name="!MiniFAT"),T[p[0]].name="!FAT",T.fat_addrs=p,T.ssz=f;var E=[],A=[],N=[];!function(e,t,n,r,i,s,a,o){for(var c,d=0,f=r.length?2:0,p=t[e].data,m=0,g=0;m<p.length;m+=128){var b=p.slice(m,m+128);YT(b,64),g=b.read_shift(2),c=vT(b,0,g-f),r.push(c);var y={name:c,type:b.read_shift(1),color:b.read_shift(1),L:b.read_shift(4,"i"),R:b.read_shift(4,"i"),C:b.read_shift(4,"i"),clsid:b.read_shift(16),state:b.read_shift(4,"i"),start:0,size:0};0!==b.read_shift(2)+b.read_shift(2)+b.read_shift(2)+b.read_shift(2)&&(y.ct=h(b,b.l-8)),0!==b.read_shift(2)+b.read_shift(2)+b.read_shift(2)+b.read_shift(2)&&(y.mt=h(b,b.l-8)),y.start=b.read_shift(4,"i"),y.size=b.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=v,y.name=""),5===y.type?(d=y.start,i>0&&d!==v&&(t[d].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=u(n,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:d!==v&&y.start!==v&&t[d]&&(y.content=l(y,t[d].data,(t[o]||{}).data))),y.content&&YT(y.content,0),s[c]=y,a.push(y)}}(s,T,k,E,r,{},A,a),function(e,t,n){for(var r=0,i=0,s=0,a=0,o=0,l=n.length,c=[],u=[];r<l;++r)c[r]=u[r]=r,t[r]=n[r];for(;o<u.length;++o)i=e[r=u[o]].L,s=e[r].R,a=e[r].C,c[r]===r&&(-1!==i&&c[i]!==i&&(c[r]=c[i]),-1!==s&&c[s]!==s&&(c[r]=c[s])),-1!==a&&(c[a]=r),-1!==i&&r!=c[r]&&(c[i]=c[r],u.lastIndexOf(i)<o&&u.push(i)),-1!==s&&r!=c[r]&&(c[s]=c[r],u.lastIndexOf(s)<o&&u.push(s));for(r=1;r<l;++r)c[r]===r&&(-1!==s&&c[s]!==s?c[r]=c[s]:-1!==i&&c[i]!==i&&(c[r]=c[i]));for(r=1;r<l;++r)if(0!==e[r].type){if((o=r)!=c[o])do{o=c[o],t[r]=t[o]+"/"+t[r]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(A,N,E),E.shift();var I={FileIndex:A,FullPaths:N};return t&&t.raw&&(I.raw={header:y,sectors:k}),I}function l(e,t,n){for(var r=e.start,i=e.size,s=[],a=r;n&&i>0&&a>=0;)s.push(t.slice(a*g,a*g+g)),i-=g,a=UT(n,4*a);return 0===s.length?$T(0):N_(s).slice(0,e.size)}function c(e,t,n,r,i){var s=v;if(e===v){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var a=n[e],o=(r>>>2)-1;if(!a)return;for(var l=0;l<o&&(s=UT(a,4*l))!==v;++l)i.push(s);c(UT(a,r-4),t-1,n,r,i)}}function u(e,t,n,r,i){var s=[],a=[];i||(i=[]);var o=r-1,l=0,c=0;for(l=t;l>=0;){i[l]=!0,s[s.length]=l,a.push(e[l]);var u=n[Math.floor(4*l/r)];if(r<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[u])break;l=UT(e[u],c)}return{nodes:s,data:mT([a])}}function h(e,t){return new Date(1e3*(BT(e,t+4)/1e7*Math.pow(2,32)+BT(e,t)/1e7-11644473600))}function d(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(TS.find(e,"/"+t))return;var n=$T(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){d(e);for(var i=!1,s=!1,a=e.FullPaths.length-1;a>=0;--a){var o=e.FileIndex[a];switch(o.type){case 0:s?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(o.R*o.L*o.C)&&(i=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(i=!0);break;default:i=!0}}if(i||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},h=[];for(a=0;a<e.FullPaths.length;++a)u[e.FullPaths[a]]=!0,0!==e.FileIndex[a].type&&h.push([e.FullPaths[a],e.FileIndex[a]]);for(a=0;a<h.length;++a){var f=n(h[a][0]);(s=u[f])||(h.push([f,{name:r(f).replace("/",""),type:1,clsid:w,ct:l,mt:l,content:null}]),u[f]=!0)}for(h.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0,s=0,a=Math.min(n.length,r.length);i<a;++i){if(s=n[i].length-r[i].length)return s;if(n[i]!=r[i])return n[i]<r[i]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],a=0;a<h.length;++a)e.FullPaths[a]=h[a][0],e.FileIndex[a]=h[a][1];for(a=0;a<h.length;++a){var p=e.FileIndex[a],m=e.FullPaths[a];if(p.name=r(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||w,0===a)p.C=h.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(c=a+1;c<h.length&&n(e.FullPaths[c])!=m;++c);for(p.C=c>=h.length?-1:c,c=a+1;c<h.length&&n(e.FullPaths[c])!=n(m);++c);p.R=c>=h.length?-1:c,p.type=1}else n(e.FullPaths[a+1]||"")==n(m)&&(p.R=a+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],s=e.FullPaths[0],a=s,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(a=e.FullPaths[l].slice(s.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=a){a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=o.content,u=w_&&Buffer.isBuffer(c)?c.toString("binary"):_(c),h=0,d=Math.min(1024,u.length),f=0,p=0;p<=d;++p)(f=u.charCodeAt(p))>=32&&f<128&&++h;var m=h>=4*d/5;i.push(r),i.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+a),i.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),i.push("Content-Type: "+ae(o,a)),i.push(""),i.push(m?le(u):oe(u))}return i.push(r+"--\r\n"),i.join("\r\n")}(e,n);if(f(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],s=[],a=$T(1),o=n.compression?8:0,l=0;0;var c=0,u=0,h=0,d=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],g=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(f.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=p){var b=h,y=$T(p.length);for(u=0;u<p.length;++u)y.write_shift(1,127&p.charCodeAt(u));y=y.slice(0,y.l),g[d]=kS.buf(m.content,0);var w=m.content;8==o&&(w=S(w)),(a=$T(30)).write_shift(4,67324752),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,o),m.mt?i(a,m.mt):a.write_shift(4,0),a.write_shift(-4,8&l?0:g[d]),a.write_shift(4,8&l?0:w.length),a.write_shift(4,8&l?0:m.content.length),a.write_shift(2,y.length),a.write_shift(2,0),h+=a.length,r.push(a),h+=y.length,r.push(y),h+=w.length,r.push(w),8&l&&((a=$T(12)).write_shift(-4,g[d]),a.write_shift(4,w.length),a.write_shift(4,m.content.length),h+=a.l,r.push(a)),(a=$T(46)).write_shift(4,33639248),a.write_shift(2,0),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,o),a.write_shift(4,0),a.write_shift(-4,g[d]),a.write_shift(4,w.length),a.write_shift(4,m.content.length),a.write_shift(2,y.length),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a.write_shift(4,b),v+=a.l,s.push(a),v+=y.length,s.push(y),++d}return a=$T(22),a.write_shift(4,101010256),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,d),a.write_shift(2,d),a.write_shift(4,v),a.write_shift(4,h),a.write_shift(2,0),N_([N_(r),N_(s),a])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var i=e.FileIndex[r];if(i.content){var s=i.content.length;s>0&&(s<4096?t+=s+63>>6:n+=s+511>>9)}}for(var a=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+n+a+o,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var h=[1,u,c,o,a,n,t,0];return e.FileIndex[0].size=t<<6,h[7]=(e.FileIndex[0].start=h[0]+h[1]+h[2]+h[3]+h[4]+h[5])+(h[6]+7>>3),h}(e),s=$T(r[7]<<9),a=0,o=0;for(a=0;a<8;++a)s.write_shift(1,y[a]);for(a=0;a<8;++a)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),a=0;a<3;++a)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,r[2]),s.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:v),s.write_shift(4,r[3]),s.write_shift(-4,r[1]?r[0]-1:v),s.write_shift(4,r[1]),a=0;a<109;++a)s.write_shift(-4,a<r[2]?r[1]+a:-1);if(r[1])for(o=0;o<r[1];++o){for(;a<236+127*o;++a)s.write_shift(-4,a<r[2]?r[1]+a:-1);s.write_shift(-4,o===r[1]-1?v:o+1)}var l=function(e){for(o+=e;a<o-1;++a)s.write_shift(-4,a+1);e&&(++a,s.write_shift(-4,v))};for(o=a=0,o+=r[1];a<o;++a)s.write_shift(-4,x.DIFSECT);for(o+=r[2];a<o;++a)s.write_shift(-4,x.FATSECT);l(r[3]),l(r[4]);for(var c=0,u=0,h=e.FileIndex[0];c<e.FileIndex.length;++c)(h=e.FileIndex[c]).content&&((u=h.content.length)<4096||(h.start=o,l(u+511>>9)));for(l(r[6]+7>>3);511&s.l;)s.write_shift(-4,x.ENDOFCHAIN);for(o=a=0,c=0;c<e.FileIndex.length;++c)(h=e.FileIndex[c]).content&&(!(u=h.content.length)||u>=4096||(h.start=o,l(u+63>>6)));for(;511&s.l;)s.write_shift(-4,x.ENDOFCHAIN);for(a=0;a<r[4]<<2;++a){var d=e.FullPaths[a];if(d&&0!==d.length){h=e.FileIndex[a],0===a&&(h.start=h.size?h.start-1:v);var p=0===a&&n.root||h.name;if(u=2*(p.length+1),s.write_shift(64,p,"utf16le"),s.write_shift(2,u),s.write_shift(1,h.type),s.write_shift(1,h.color),s.write_shift(-4,h.L),s.write_shift(-4,h.R),s.write_shift(-4,h.C),h.clsid)s.write_shift(16,h.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,h.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,h.start),s.write_shift(4,h.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(a=1;a<e.FileIndex.length;++a)if((h=e.FileIndex[a]).size>=4096)if(s.l=h.start+1<<9,w_&&Buffer.isBuffer(h.content))h.content.copy(s,s.l,0,h.size),s.l+=h.size+511&-512;else{for(c=0;c<h.size;++c)s.write_shift(1,h.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(a=1;a<e.FileIndex.length;++a)if((h=e.FileIndex[a]).size>0&&h.size<4096)if(w_&&Buffer.isBuffer(h.content))h.content.copy(s,s.l,0,h.size),s.l+=h.size+63&-64;else{for(c=0;c<h.size;++c)s.write_shift(1,h.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(w_)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var m,g=64,v=-2,b="d0cf11e0a1b11ae1",y=[208,207,17,224,161,177,26,225],w="00000000000000000000000000000000",x={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:b,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:w,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function _(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function S(e){return m?m.deflateRawSync(e):Y(e)}var k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function A(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var N="undefined"!==typeof Uint8Array,I=N?new Uint8Array(256):[],C=0;C<256;++C)I[C]=A(C);function P(e,t){var n=I[255&e];return t<=8?n>>>8-t:(n=n<<8|I[e>>8&255],t<=16?n>>>16-t:(n=n<<8|I[e>>16&255])>>>24-t)}function L(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function D(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function O(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function R(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function M(e,t,n){var r=7&t,i=t>>>3,s=(1<<n)-1,a=e[i]>>>r;return n<8-r?a&s:(a|=e[i+1]<<8-r,n<16-r?a&s:(a|=e[i+2]<<16-r,n<24-r?a&s:(a|=e[i+3]<<24-r)&s))}function F(e,t,n){var r=7&t,i=t>>>3;return r<=5?e[i]|=(7&n)<<r:(e[i]|=n<<r&255,e[i+1]=(7&n)>>8-r),t+3}function j(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function B(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function U(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function z(e,t){var n=e.length,r=2*n>t?2*n:t+5,i=0;if(n>=t)return e;if(w_){var s=S_(r);if(e.copy)e.copy(s);else for(;i<e.length;++i)s[i]=e[i];return s}if(N){var a=new Uint8Array(r);if(a.set)a.set(e);else for(;i<n;++i)a[i]=e[i];return a}return e.length=r,e}function V(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function q(e,t,n){var r=1,i=0,s=0,a=0,o=0,l=e.length,c=N?new Uint16Array(32):V(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<n;++s)e[s]=0;l=e.length;var u=N?new Uint16Array(l):V(l);for(s=0;s<l;++s)c[i=e[s]]++,r<i&&(r=i),u[s]=0;for(c[0]=0,s=1;s<=r;++s)c[s+16]=o=o+c[s-1]<<1;for(s=0;s<l;++s)0!=(o=e[s])&&(u[s]=c[o+16]++);var h=0;for(s=0;s<l;++s)if(0!=(h=e[s]))for(o=P(u[s],r)>>r-h,a=(1<<r+4-h)-1;a>=0;--a)t[o|a<<h]=15&h|s<<4;return r}var W=N?new Uint16Array(512):V(512),H=N?new Uint16Array(32):V(32);if(!N){for(var G=0;G<512;++G)W[G]=0;for(G=0;G<32;++G)H[G]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);q(e,H,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);q(n,W,288)}();var K=function(){for(var e=N?new Uint8Array(32768):[],t=0,n=0;t<E.length-1;++t)for(;n<E[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=N?new Uint8Array(259):[];for(t=0,n=0;t<T.length-1;++t)for(;n<T[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),i=n+r==e.length;for(t.write_shift(1,+i),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var i=0,s=0,a=N?new Uint16Array(32768):[];s<t.length;){var o=Math.min(65535,t.length-s);if(o<10){for(7&(i=F(n,i,+!(s+o!=t.length)))&&(i+=8-(7&i)),n.l=i/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[s++];i=8*n.l}else{i=F(n,i,+!(s+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[s],u=-1,h=0;if((u=a[l=32767&(l<<5^c)])&&((u|=-32768&s)>s&&(u-=32768),u<s))for(;t[u+h]==t[s+h]&&h<250;)++h;if(h>2){(c=r[h])<=22?i=B(n,i,I[c+1]>>1)-1:(B(n,i,3),B(n,i+=5,I[c-23]>>5),i+=3);var d=c<8?0:c-4>>2;d>0&&(U(n,i,h-T[c]),i+=d),c=e[s-u],i=B(n,i,I[c]>>3),i-=3;var f=c<4?0:c-2>>1;f>0&&(U(n,i,s-u-E[c]),i+=f);for(var p=0;p<h;++p)a[l]=32767&s,l=32767&(l<<5^t[s]),++s;o-=h-1}else c<=143?c+=48:i=j(n,i,1),i=B(n,i,I[c]),a[l]=32767&s,++s}i=B(n,i,0)-1}}return n.l=(i+7)/8|0,n.l}(t,n)}}();function Y(e){var t=$T(50+Math.floor(1.1*e.length)),n=K(e,t);return t.slice(0,n)}var X=N?new Uint16Array(32768):V(32768),$=N?new Uint16Array(32768):V(32768),J=N?new Uint16Array(128):V(128),Q=1,Z=1;function ee(e,t){var n=O(e,t)+257,r=O(e,t+=5)+1,i=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var s=0,a=N?new Uint8Array(19):V(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=N?new Uint8Array(8):V(8),u=N?new Uint8Array(8):V(8),h=a.length,d=0;d<i;++d)a[k[d]]=s=D(e,t),l<s&&(l=s),c[s]++,t+=3;var f=0;for(c[0]=0,d=1;d<=l;++d)u[d]=f=f+c[d-1]<<1;for(d=0;d<h;++d)0!=(f=a[d])&&(o[d]=u[f]++);var p=0;for(d=0;d<h;++d)if(0!=(p=a[d])){f=I[o[d]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)J[f|m<<p]=7&p|d<<3}var g=[];for(l=1;g.length<n+r;)switch(t+=7&(f=J[R(e,t)]),f>>>=3){case 16:for(s=3+L(e,t),t+=2,f=g[g.length-1];s-- >0;)g.push(f);break;case 17:for(s=3+D(e,t),t+=3;s-- >0;)g.push(0);break;case 18:for(s=11+R(e,t),t+=7;s-- >0;)g.push(0);break;default:g.push(f),l<f&&(l=f)}var v=g.slice(0,n),b=g.slice(n);for(d=n;d<286;++d)v[d]=0;for(d=r;d<30;++d)b[d]=0;return Q=q(v,X,286),Z=q(b,$,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[__(t),2];for(var n=0,r=0,i=S_(t||1<<18),s=0,a=i.length>>>0,o=0,l=0;0==(1&r);)if(r=D(e,n),n+=3,r>>>1!=0)for(r>>1==1?(o=9,l=5):(n=ee(e,n),o=Q,l=Z);;){!t&&a<s+32767&&(a=(i=z(i,s+32767)).length);var c=M(e,n,o),u=r>>>1==1?W[c]:X[c];if(n+=15&u,0===((u>>>=4)>>>8&255))i[s++]=u;else{if(256==u)break;var h=(u-=257)<8?0:u-4>>2;h>5&&(h=0);var d=s+T[u];h>0&&(d+=M(e,n,h),n+=h),c=M(e,n,l),n+=15&(u=r>>>1==1?H[c]:$[c]);var f=(u>>>=4)<4?0:u-2>>1,p=E[u];for(f>0&&(p+=M(e,n,f),n+=f),!t&&a<d&&(a=(i=z(i,d+100)).length);s<d;)i[s]=i[s-p],++s}}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,m>0)for(!t&&a<s+m&&(a=(i=z(i,s+m)).length);m-- >0;)i[s++]=e[n>>>3],n+=8}return t?[i,n+7>>>3]:[i.slice(0,s),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;YT(n,0);var r={FileIndex:[],FullPaths:[]};d(r,{root:t.root});for(var i=n.length-4;(80!=n[i]||75!=n[i+1]||5!=n[i+2]||6!=n[i+3])&&i>=0;)--i;n.l=i+4,n.l+=4;var a=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,i=0;i<a;++i){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),u=n.read_shift(2),h=n.read_shift(2),f=n.read_shift(2);n.l+=8;var p=n.read_shift(4),m=s(n.slice(n.l+u,n.l+u+h));n.l+=u+h+f;var g=n.l;n.l=p+4,ie(n,l,c,r,m),n.l=g}return r}function ie(e,t,n,r,i){e.l+=2;var a=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,i=31&n,s=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(s-1),r.setDate(i);var a=31&t,o=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(o),r.setSeconds(a<<1),r}(e);if(8257&a)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),h=e.read_shift(2),d=e.read_shift(2),f="",p=0;p<h;++p)f+=String.fromCharCode(e[e.l++]);if(d){var g=s(e.slice(e.l,e.l+d));(g[21589]||{}).mt&&(l=g[21589].mt),((i||{})[21589]||{}).mt&&(l=i[21589].mt)}e.l+=d;var v=e.slice(e.l,e.l+c);switch(o){case 8:v=function(e,t){if(!m)return te(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var b=!1;8&a&&(134695760==e.read_shift(4)&&(e.read_shift(4),b=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&ne(b,"Bad compressed size: "+t+" != "+c),u!=n&&ne(b,"Bad uncompressed size: "+n+" != "+u),ue(r,f,v,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ae(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&se[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&se[r[1]]?se[r[1]]:"application/octet-stream"}function oe(e){for(var t=b_(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<r.length;++i){var s=r[i];if(0!=s.length)for(var a=0;a<s.length;){var o=76,l=s.slice(a,a+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=s.slice(a,a+o),(a+=o)<s.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,i="",s="",a="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":i=c[2].trim();break;case"content-type":a=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++o,s.toLowerCase()){case"base64":r=k_(y_(t.slice(o).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return k_(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var u=ue(e,i.slice(n.length),r,{unsafe:!0});a&&(u.ctype=a)}function ue(e,t,n,i){var s=i&&i.unsafe;s||d(e);var a=!s&&TS.find(e,t);if(!a){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),a={name:r(t),type:2},e.FileIndex.push(a),e.FullPaths.push(o),s||TS.utils.cfb_gc(e)}return a.content=n,a.size=n?n.length:0,i&&(i.CLSID&&(a.clsid=i.CLSID),i.mt&&(a.mt=i.mt),i.ct&&(a.ct=i.ct)),a}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),i=!1;47===t.charCodeAt(0)?(i=!0,t=n[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var s=t.toUpperCase(),a=!0===i?n.indexOf(s):r.indexOf(s);if(-1!==a)return e.FileIndex[a];var o=!s.match(C_);for(s=s.replace(I_,""),o&&(s=s.replace(C_,"!")),a=0;a<n.length;++a){if((o?n[a].replace(C_,"!"):n[a]).replace(I_,"")==s)return e.FileIndex[a];if((o?r[a].replace(C_,"!"):r[a]).replace(I_,"")==s)return e.FileIndex[a]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||w_&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return a(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(k_(y_(t)),n);case"binary":return o(k_(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var r=p(t,n);switch(n&&n.type||"buffer"){case"file":return a(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:_(r);case"base64":return b_("string"==typeof r?r:_(r));case"buffer":if(w_)return Buffer.isBuffer(r)?r:x_(r);case"array":return"string"==typeof r?k_(r):r}return r},t.writeFile=function(t,n,r){a();var i=p(t,r);e.writeFileSync(n,i)},t.utils={cfb_new:function(e){var t={};return d(t,e),t},cfb_add:ue,cfb_del:function(e,t){d(e);var n=TS.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){d(e);var i=TS.find(e,t);if(i)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==i)return e.FileIndex[s].name=r(n),e.FullPaths[s]=n,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:VT,CheckField:KT,prep_blob:YT,bconcat:N_,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(n){console.error("cannot use native zlib: "+(n.message||n))}},_deflateRaw:Y,_inflateRaw:te,consts:x},t}();let ES;function AS(e){return"string"===typeof e?T_(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function NS(e,t,n){if("undefined"!==typeof ES&&ES.writeFileSync)return n?ES.writeFileSync(e,t,n):ES.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=T_(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?Dk(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var i=new Blob([AS(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!==typeof saveAs)return saveAs(i,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var a=document.createElement("a");if(null!=a.download)return a.download=e,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=E_(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function IS(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function CS(e,t){for(var n=[],r=IS(e),i=0;i!==r.length;++i)null==n[e[r[i]][t]]&&(n[e[r[i]][t]]=r[i]);return n}function PS(e){for(var t=[],n=IS(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function LS(e){for(var t=[],n=IS(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var DS=new Date(1899,11,30,0,0,0);function OS(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(DS.getTime()+6e4*(e.getTimezoneOffset()-DS.getTimezoneOffset())))/864e5}var RS=new Date,MS=DS.getTime()+6e4*(RS.getTimezoneOffset()-DS.getTimezoneOffset()),FS=RS.getTimezoneOffset();function jS(e){var t=new Date;return t.setTime(24*e*60*60*1e3+MS),t.getTimezoneOffset()!==FS&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-FS)),t}function BS(e){var t=0,n=0,r=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(n=1,s>3&&(r=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(!r)throw new Error("Unsupported ISO Duration Field: M");n*=60}t+=n*parseInt(i[s],10)}return t}var US=new Date("2017-02-19T19:06:09.000Z"),zS=isNaN(US.getFullYear())?new Date("2/19/17"):US,VS=2017==zS.getFullYear();function qS(e,t){var n=new Date(e);if(VS)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==zS.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function WS(e,t){if(w_&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return Dk(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return Dk(d_(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return Dk(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return Dk(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return n[e]||e})}catch(s){}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function HS(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=HS(e[n]));return t}function GS(e,t){for(var n="";n.length<t;)n+=e;return n}function KS(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var YS=["january","february","march","april","may","june","july","august","september","october","november","december"];function XS(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),i=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var a=e.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==YS.indexOf(a))return n}else if(a.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}var $S=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,n,r){if(e||"string"==typeof n)return t.split(n);for(var i=t.split(n),s=[i[0]],a=1;a<i.length;++a)s.push(r),s.push(i[a]);return s}}();function JS(e){return e?e.content&&e.type?WS(e.content,!0):e.data?p_(e.data):e.asNodeBuffer&&w_?p_(e.asNodeBuffer().toString("binary")):e.asBinary?p_(e.asBinary()):e._data&&e._data.getContent?p_(WS(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function QS(e){if(!e)return null;if(e.data)return h_(e.data);if(e.asNodeBuffer&&w_)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return"string"==typeof t?h_(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function ZS(e,t){for(var n=e.FullPaths||IS(e.files),r=t.toLowerCase().replace(/[\/]/g,"\\"),i=r.replace(/\\/g,"/"),s=0;s<n.length;++s){var a=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==a||i==a)return e.files?e.files[n[s]]:e.FileIndex[s]}return null}function ek(e,t){var n=ZS(e,t);if(null==n)throw new Error("Cannot find file "+t+" in zip");return n}function tk(e,t,n){if(!n)return(r=ek(e,t))&&".bin"===r.name.slice(-4)?QS(r):JS(r);var r;if(!t)return null;try{return tk(e,t)}catch(i){return null}}function nk(e,t,n){if(!n)return JS(ek(e,t));if(!t)return null;try{return nk(e,t)}catch(r){return null}}function rk(e,t,n){if(!n)return QS(ek(e,t));if(!t)return null;try{return rk(e,t)}catch(r){return null}}function ik(e){for(var t=e.FullPaths||IS(e.files),n=[],r=0;r<t.length;++r)"/"!=t[r].slice(-1)&&n.push(t[r].replace(/^Root Entry[\/]/,""));return n.sort()}function sk(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=w_?x_(n):function(e){for(var t=[],n=0,r=e.length+250,i=__(e.length+255),s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a<128)i[n++]=a;else if(a<2048)i[n++]=192|a>>6&31,i[n++]=128|63&a;else if(a>=55296&&a<57344){a=64+(1023&a);var o=1023&e.charCodeAt(++s);i[n++]=240|a>>8&7,i[n++]=128|a>>2&63,i[n++]=128|o>>6&15|(3&a)<<4,i[n++]=128|63&o}else i[n++]=224|a>>12&15,i[n++]=128|a>>6&63,i[n++]=128|63&a;n>r&&(t.push(i.slice(0,n)),n=0,i=__(65535),r=65530)}return t.push(i.slice(0,n)),N_(t)}(n),TS.utils.cfb_add(e,t,r);TS.utils.cfb_add(e,t,n)}else e.file(t,n)}function ak(){return TS.utils.cfb_new()}function ok(e,t){switch(t.type){case"base64":return TS.read(e,{type:"base64"});case"binary":return TS.read(e,{type:"binary"});case"buffer":case"array":return TS.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function lk(e,t){if("/"==e.charAt(0))return e.slice(1);var n=t.split("/");"/"!=t.slice(-1)&&n.pop();for(var r=e.split("/");0!==r.length;){var i=r.shift();".."===i?n.pop():"."!==i&&n.push(i)}return n.join("/")}var ck='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',uk=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,hk=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,dk=ck.match(hk)?hk:/<[^>]*>/g,fk=/<\w*:/,pk=/<(\/?)\w+:/;function mk(e,t,n){for(var r={},i=0,s=0;i!==e.length&&(32!==(s=e.charCodeAt(i))&&10!==s&&13!==s);++i);if(t||(r[0]=e.slice(0,i)),i===e.length)return r;var a=e.match(uk),o=0,l="",c=0,u="",h="",d=1;if(a)for(c=0;c!=a.length;++c){for(h=a[c],s=0;s!=h.length&&61!==h.charCodeAt(s);++s);for(u=h.slice(0,s).trim();32==h.charCodeAt(s+1);)++s;for(d=34==(i=h.charCodeAt(s+1))||39==i?1:0,l=h.slice(s+1+d,h.length-d),o=0;o!=u.length&&58!==u.charCodeAt(o);++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),r[u]=l,n||(r[u.toLowerCase()]=l);else{var f=(5===o&&"xmlns"===u.slice(0,5)?"xmlns":"")+u.slice(o+1);if(r[f]&&"ext"==u.slice(o-3,o))continue;r[f]=l,n||(r[f.toLowerCase()]=l)}}return r}function gk(e){return e.replace(pk,"<$1")}var vk={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},bk=PS(vk),yk=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,t=/_x([\da-fA-F]{4})_/gi;return function n(r){var i=r+"",s=i.indexOf("<![CDATA[");if(-1==s)return i.replace(e,function(e,t){return vk[e]||String.fromCharCode(parseInt(t,e.indexOf("x")>-1?16:10))||e}).replace(t,function(e,t){return String.fromCharCode(parseInt(t,16))});var a=i.indexOf("]]>");return n(i.slice(0,s))+i.slice(s+9,a)+n(i.slice(a+3))}}(),wk=/[&<>'"]/g,xk=/[\u0000-\u0008\u000b-\u001f]/g;function _k(e){return(e+"").replace(wk,function(e){return bk[e]}).replace(xk,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Sk(e){return _k(e).replace(/ /g,"_x0020_")}var kk=/[\u0000-\u001f]/g;function Tk(e){return(e+"").replace(wk,function(e){return bk[e]}).replace(/\n/g,"<br/>").replace(kk,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}var Ek=function(){var e=/&#(\d+);/g;function t(e,t){return String.fromCharCode(parseInt(t,10))}return function(n){return n.replace(e,t)}}();function Ak(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Nk(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(i=e.charCodeAt(n++),r>191&&r<224?(a=(31&r)<<6,a|=63&i,t+=String.fromCharCode(a)):(s=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s):(o=((7&r)<<18|(63&i)<<12|(63&s)<<6|63&(a=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function Ik(e){var t,n,r,i=__(2*e.length),s=1,a=0,o=0;for(n=0;n<e.length;n+=s)s=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),s=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),s=3):(s=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(i[a++]=255&o,i[a++]=o>>>8,o=0),i[a++]=t%256,i[a++]=t>>>8;return i.slice(0,a).toString("ucs2")}function Ck(e){return x_(e,"binary").toString("utf8")}var Pk="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Lk=w_&&(Ck(Pk)==Nk(Pk)&&Ck||Ik(Pk)==Nk(Pk)&&Ik)||Nk,Dk=w_?function(e){return x_(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},Ok=function(){var e={};return function(t,n){var r=t+"|"+(n||"");return e[r]?e[r]:e[r]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",n||"")}}(),Rk=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}(),Mk=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),Fk=/<\/?(?:vt:)?variant>/g,jk=/<(?:vt:)([^>]*)>([\s\S]*)</;function Bk(e,t){var n=mk(e),r=e.match(Mk(n.baseType))||[],i=[];if(r.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return i}return r.forEach(function(e){var t=e.replace(Fk,"").match(jk);t&&i.push({v:Lk(t[2]),t:t[1]})}),i}var Uk=/(^\s|\s$|\n)/;function zk(e,t){return"<"+e+(t.match(Uk)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Vk(e){return IS(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function qk(e,t,n){return"<"+e+(null!=n?Vk(n):"")+(null!=t?(t.match(Uk)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Wk(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(n){if(t)throw n}return""}function Hk(e){if(w_&&Buffer.isBuffer(e))return e.toString("utf8");if("string"===typeof e)return e;if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array)return Lk(E_(A_(e)));throw new Error("Bad input format: expected Buffer or string")}var Gk=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,Kk="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",Yk="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",Xk="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",$k="http://schemas.openxmlformats.org/package/2006/content-types",Jk="http://schemas.openxmlformats.org/package/2006/relationships",Qk="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",Zk="http://purl.org/dc/elements/1.1/",eT="http://purl.org/dc/terms/",tT="http://purl.org/dc/dcmitype/",nT="http://schemas.openxmlformats.org/officeDocument/2006/relationships",rT="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",iT="http://www.w3.org/2001/XMLSchema-instance",sT="http://www.w3.org/2001/XMLSchema",aT=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],oT="urn:schemas-microsoft-com:office:office",lT="urn:schemas-microsoft-com:office:excel",cT="urn:schemas-microsoft-com:office:spreadsheet",uT="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",hT="http://macVmlSchemaUri",dT="urn:schemas-microsoft-com:vml",fT="http://www.w3.org/TR/REC-html40";var pT=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,i=e[0][n].length;r<i;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},mT=w_?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:x_(e)})):pT(e)}:pT,gT=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(FT(e,i)));return r.join("").replace(I_,"")},vT=w_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(I_,""):gT(e,t,n)}:gT,bT=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},yT=w_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):bT(e,t,n)}:bT,wT=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(MT(e,i)));return r.join("")},xT=w_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):wT(e,t,n)}:wT,_T=function(e,t){var n=BT(e,t);return n>0?xT(e,t+4,t+4+n-1):""},ST=_T,kT=function(e,t){var n=BT(e,t);return n>0?xT(e,t+4,t+4+n-1):""},TT=kT,ET=function(e,t){var n=2*BT(e,t);return n>0?xT(e,t+4,t+4+n-1):""},AT=ET,NT=function(e,t){var n=BT(e,t);return n>0?vT(e,t+4,t+4+n):""},IT=NT,CT=function(e,t){var n=BT(e,t);return n>0?xT(e,t+4,t+4+n):""},PT=CT,LT=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],s=5;s>=0;--s)i=256*i+e[t+s];return 2047==r?0==i?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}(e,t)},DT=LT,OT=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function RT(){vT=function(e,t,n){return f_.utils.decode(1200,e.slice(t,n)).replace(I_,"")},xT=function(e,t,n){return f_.utils.decode(65001,e.slice(t,n))},ST=function(e,t){var n=BT(e,t);return n>0?f_.utils.decode(s_,e.slice(t+4,t+4+n-1)):""},TT=function(e,t){var n=BT(e,t);return n>0?f_.utils.decode(i_,e.slice(t+4,t+4+n-1)):""},AT=function(e,t){var n=2*BT(e,t);return n>0?f_.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},IT=function(e,t){var n=BT(e,t);return n>0?f_.utils.decode(1200,e.slice(t+4,t+4+n)):""},PT=function(e,t){var n=BT(e,t);return n>0?f_.utils.decode(65001,e.slice(t+4,t+4+n)):""}}w_&&(ST=function(e,t){if(!Buffer.isBuffer(e))return _T(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},TT=function(e,t){if(!Buffer.isBuffer(e))return kT(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},AT=function(e,t){if(!Buffer.isBuffer(e))return ET(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},IT=function(e,t){if(!Buffer.isBuffer(e))return NT(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},PT=function(e,t){if(!Buffer.isBuffer(e))return CT(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},DT=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):LT(e,t)},OT=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof f_&&RT();var MT=function(e,t){return e[t]},FT=function(e,t){return 256*e[t+1]+e[t]},jT=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},BT=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},UT=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},zT=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function VT(e,t){var n,r,i,s,a,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,w_&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(a=0;a<e;++a)l+=String.fromCharCode(FT(this,o)),o+=2;e*=2;break;case"utf8":l=xT(this,this.l,this.l+e);break;case"utf16le":e*=2,l=vT(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof f_)return VT.call(this,e,"dbcs");l=f_.utils.decode(i_,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=ST(this,this.l),e=4+BT(this,this.l);break;case"lpstr-cp":l=TT(this,this.l),e=4+BT(this,this.l);break;case"lpwstr":l=AT(this,this.l),e=4+2*BT(this,this.l);break;case"lpp4":e=4+BT(this,this.l),l=IT(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+BT(this,this.l),l=PT(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(i=MT(this,this.l+e++));)c.push(m_(i));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(i=FT(this,this.l+e));)c.push(m_(i)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,a=0;a<e;++a){if(this.lens&&-1!==this.lens.indexOf(o))return i=MT(this,o),this.l=o+1,s=VT.call(this,e-a,i?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(m_(FT(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof f_){l=f_.utils.decode(i_,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,a=0;a!=e;++a){if(this.lens&&-1!==this.lens.indexOf(o))return i=MT(this,o),this.l=o+1,s=VT.call(this,e-a,i?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(m_(MT(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return n=MT(this,this.l),this.l++,n;case 2:return n=("i"===t?jT:FT)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?UT:zT)(this,this.l),this.l+=4,n):(r=BT(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?DT(this,this.l):DT([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=yT(this,this.l,e)}}return this.l+=e,l}var qT=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},WT=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},HT=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function GT(e,t,n){var r=0,i=0;if("dbcs"===n){for(i=0;i!=t.length;++i)HT(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof f_&&874==s_)for(i=0;i!=t.length;++i){var s=f_.utils.encode(s_,t.charAt(i));this[this.l+i]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);r=t.length}else{if("hex"===n){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===n){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var o=t.charCodeAt(i);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,qT(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,a=r?-t:t;isFinite(a)?0==a?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[n+o]=255&s;e[n+6]=(15&i)<<4|15&s,e[n+7]=i>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,WT(this,t,this.l)}}return this.l+=r,this}function KT(e,t){var n=yT(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function YT(e,t){e.l=t,e.read_shift=VT,e.chk=KT,e.write_shift=GT}function XT(e,t){e.l+=t}function $T(e){var t=__(e);return YT(t,0),t}function JT(e,t,n){if(e){var r,i,s;YT(e,e.l||0);for(var a=e.length,o=0,l=0;e.l<a;){128&(o=e.read_shift(1))&&(o=(127&o)+((127&e.read_shift(1))<<7));var c=sD[o]||sD[65535];for(s=127&(r=e.read_shift(1)),i=1;i<4&&128&r;++i)s+=(127&(r=e.read_shift(1)))<<7*i;l=e.l+s;var u=c.f&&c.f(e,s,n);if(e.l=l,t(u,c,o))return}}}function QT(){var e=[],t=w_?256:2048,n=function(e){var t=$T(e);return YT(t,0),t},r=n(t),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},s=function(e){return r&&e<r.length-r.l?r:(i(),r=n(Math.max(e+1,t)))};return{next:s,push:function(e){i(),null==(r=e).l&&(r.l=r.length),s(t)},end:function(){return i(),N_(e)},_bufs:e}}function ZT(e,t,n,r){var i,s=+t;if(!isNaN(s)){r||(r=sD[s].p||(n||[]).length||0),i=1+(s>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var a=e.next(i);s<=127?a.write_shift(1,s):(a.write_shift(1,128+(127&s)),a.write_shift(1,s>>7));for(var o=0;4!=o;++o){if(!(r>=128)){a.write_shift(1,r);break}a.write_shift(1,128+(127&r)),r>>=7}r>0&&OT(n)&&e.push(n)}}function eE(e,t,n){var r=HS(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function tE(e,t,n){var r=HS(e);return r.s=eE(r.s,t.s,n),r.e=eE(r.e,t.s,n),r}function nE(e,t){if(e.cRel&&e.c<0)for(e=HS(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=HS(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=cE(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function rE(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?nE(e.s,t.biff)+":"+nE(e.e,t.biff):(e.s.rRel?"":"$")+sE(e.s.r)+":"+(e.e.rRel?"":"$")+sE(e.e.r):(e.s.cRel?"":"$")+oE(e.s.c)+":"+(e.e.cRel?"":"$")+oE(e.e.c)}function iE(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function sE(e){return""+(e+1)}function aE(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function oE(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function lE(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function cE(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function uE(e){var t=e.indexOf(":");return-1==t?{s:lE(e),e:lE(e)}:{s:lE(e.slice(0,t)),e:lE(e.slice(t+1))}}function hE(e,t){return"undefined"===typeof t||"number"===typeof t?hE(e.s,e.e):("string"!==typeof e&&(e=cE(e)),"string"!==typeof t&&(t=cE(t)),e==t?e:e+":"+t)}function dE(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=e.length;for(n=0;r<s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===s||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function fE(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=bS(e.z,n?OS(t):t)}catch(r){}try{return e.w=bS((e.XF||{}).numFmtId||(n?14:0),n?OS(t):t)}catch(r){return""+t}}function pE(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?ZE[e.v]||e.v:fE(e,void 0==t?e.v:t))}function mE(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function gE(e,t,n){var r=n||{},i=e?Array.isArray(e):r.dense;var s=e||(i?[]:{}),a=0,o=0;if(s&&null!=r.origin){if("number"==typeof r.origin)a=r.origin;else{var l="string"==typeof r.origin?lE(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=dE(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==a&&(c.e.r=a=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[h].length;++d)if("undefined"!==typeof t[h][d]){var f={v:t[h][d]},p=a+h,m=o+d;if(c.s.r>p&&(c.s.r=p),c.s.c>m&&(c.s.c=m),c.e.r<p&&(c.e.r=p),c.e.c<m&&(c.e.c=m),!t[h][d]||"object"!==typeof t[h][d]||Array.isArray(t[h][d])||t[h][d]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[h][d][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(r.nullError)f.t="e",f.v=0;else{if(!r.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=r.dateNF||U_[14],r.cellDates?(f.t="d",f.w=bS(f.z,OS(f.v))):(f.t="n",f.v=OS(f.v),f.w=bS(f.z,f.v))):f.t="s";else f=t[h][d];if(i)s[p]||(s[p]=[]),s[p][m]&&s[p][m].z&&(f.z=s[p][m].z),s[p][m]=f;else{var g=cE({c:m,r:p});s[g]&&s[g].z&&(f.z=s[g].z),s[g]=f}}}return c.s.c<1e7&&(s["!ref"]=hE(c)),s}function vE(e,t){return gE(null,e,t)}function bE(e,t){return t||(t=$T(4)),t.write_shift(4,e),t}function yE(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function wE(e,t){var n=!1;return null==t&&(n=!0,t=$T(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function xE(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function _E(e,t){var n=e.l,r=e.read_shift(1),i=yE(e),s=[],a={t:i,h:i};if(0!==(1&r)){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(xE(e));a.r=s}else a.r=[{ich:0,ifnt:0}];return e.l=n+t,a}var SE=_E;function kE(e,t){var n=!1;return null==t&&(n=!0,t=$T(23+4*e.t.length)),t.write_shift(1,1),wE(e.t,t),t.write_shift(4,1),function(e,t){t||(t=$T(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function TE(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function EE(e,t){return null==t&&(t=$T(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function AE(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function NE(e,t){return null==t&&(t=$T(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var IE=yE,CE=wE;function PE(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function LE(e,t){var n=!1;return null==t&&(n=!0,t=$T(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var DE=yE,OE=PE,RE=LE;function ME(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var i=0===r?DT([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):UT(t,0)>>2;return n?i/100:i}function FE(e,t){null==t&&(t=$T(4));var n=0,r=0,i=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:i==(0|i)&&i>=-(1<<29)&&i<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?i:e)<<2)+(n+2))}function jE(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var BE=jE,UE=function(e,t){return t||(t=$T(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function zE(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function VE(e,t){return(t||$T(8)).write_shift(8,e,"f")}function qE(e,t){if(t||(t=$T(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}function WE(e,t){var n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,1==t?"lpstr":"lpwstr")}var HE=80,GE=[HE,81],KE={1:{n:"CodePage",t:2},2:{n:"Category",t:HE},3:{n:"PresentationFormat",t:HE},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:HE},15:{n:"Company",t:HE},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:HE},27:{n:"ContentStatus",t:HE},28:{n:"Language",t:HE},29:{n:"Version",t:HE},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},YE={1:{n:"CodePage",t:2},2:{n:"Title",t:HE},3:{n:"Subject",t:HE},4:{n:"Author",t:HE},5:{n:"Keywords",t:HE},6:{n:"Comments",t:HE},7:{n:"Template",t:HE},8:{n:"LastAuthor",t:HE},9:{n:"RevNumber",t:HE},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:HE},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},XE={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},$E=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function JE(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var QE=HS(JE([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),ZE={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},eA={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},tA={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},nA={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function rA(e,t){var n,r=function(e){for(var t=[],n=IS(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(tA),i=[];i[i.length]=ck,i[i.length]=qk("Types",null,{xmlns:$k,"xmlns:xsd":sT,"xmlns:xsi":iT}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return qk("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(r){e[r]&&e[r].length>0&&(n=e[r][0],i[i.length]=qk("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:nA[r][t.bookType]||nA[r].xlsx}))},a=function(n){(e[n]||[]).forEach(function(e){i[i.length]=qk("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:nA[n][t.bookType]||nA[n].xlsx})})},o=function(t){(e[t]||[]).forEach(function(e){i[i.length]=qk("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var iA={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function sA(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function aA(e,t){var n={"!id":{}};if(!e)return n;"/"!==t.charAt(0)&&(t="/"+t);var r={};return(e.match(dk)||[]).forEach(function(e){var i=mk(e);if("<Relationship"===i[0]){var s={};s.Type=i.Type,s.Target=i.Target,s.Id=i.Id,i.TargetMode&&(s.TargetMode=i.TargetMode);var a="External"===i.TargetMode?i.Target:lk(i.Target,t);n[a]=s,r[i.Id]=s}}),n["!id"]=r,n}function oA(e){var t=[ck,qk("Relationships",null,{xmlns:Jk})];return IS(e["!id"]).forEach(function(n){t[t.length]=qk("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function lA(e,t,n,r,i,s){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=r,i.Target=n,s?i.TargetMode=s:[iA.HLINK,iA.XPATH,iA.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function cA(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function uA(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function hA(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+r_.version+"</meta:generator></office:meta></office:document-meta>"}var dA=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],fA=function(){for(var e=new Array(dA.length),t=0;t<dA.length;++t){var n=dA[t],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);e[t]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return e}();function pA(e){var t={};e=Lk(e);for(var n=0;n<dA.length;++n){var r=dA[n],i=e.match(fA[n]);null!=i&&i.length>0&&(t[r[1]]=yk(i[1])),"date"===r[2]&&t[r[1]]&&(t[r[1]]=qS(t[r[1]]))}return t}function mA(e,t,n,r,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=_k(t),r[r.length]=n?qk(e,t,n):zk(e,t))}function gA(e,t){var n=t||{},r=[ck,qk("cp:coreProperties",null,{"xmlns:cp":Kk,"xmlns:dc":Zk,"xmlns:dcterms":eT,"xmlns:dcmitype":tT,"xmlns:xsi":iT})],i={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&mA("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:Wk(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),null!=e.ModifiedDate&&mA("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:Wk(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=dA.length;++s){var a=dA[s],o=n.Props&&null!=n.Props[a[1]]?n.Props[a[1]]:e?e[a[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&mA(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var vA=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],bA=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function yA(e,t,n,r){var i=[];if("string"==typeof e)i=Bk(e,r);else for(var s=0;s<e.length;++s)i=i.concat(e[s].map(function(e){return{v:e}}));var a="string"==typeof t?Bk(t,r).map(function(e){return e.v}):t,o=0,l=0;if(a.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":n.NamedRanges=l,n.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=a.slice(o,o+l)}o+=l}}function wA(e){var t=[],n=qk;return e||(e={}),e.Application="SheetJS",t[t.length]=ck,t[t.length]=qk("Properties",null,{xmlns:Xk,"xmlns:vt":rT}),vA.forEach(function(r){if(void 0!==e[r[1]]){var i;switch(r[2]){case"string":i=_k(String(e[r[1]]));break;case"bool":i=e[r[1]]?"true":"false"}void 0!==i&&(t[t.length]=n(r[0],i))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+_k(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var xA=/<[^>]+>[^<]*/g;function _A(e){var t=[ck,qk("Properties",null,{xmlns:Yk,"xmlns:vt":rT})];if(!e)return t.join("");var n=1;return IS(e).forEach(function(r){++n,t[t.length]=qk("property",function(e,t){switch(typeof e){case"string":var n=qk("vt:lpwstr",_k(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return qk((0|e)==e?"vt:i4":"vt:r8",_k(String(e)));case"boolean":return qk("vt:bool",e?"true":"false")}if(e instanceof Date)return qk("vt:filetime",Wk(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:_k(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var SA,kA={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function TA(e,t,n){SA||(SA=PS(kA)),e[t=SA[t]||t]=n}function EA(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date(1e3*(n/1e7*Math.pow(2,32)+t/1e7-11644473600)).toISOString().replace(/\.000/,"")}function AA(e,t,n){var r=e.l,i=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-r&3;)++e.l;return i}function NA(e,t,n){var r=e.read_shift(0,"lpwstr");return n&&(e.l+=4-(r.length+1&3)&3),r}function IA(e,t,n){return 31===t?NA(e):AA(e,0,n)}function CA(e,t,n){return IA(e,t,!1===n?0:4)}function PA(e){var t=e.l,n=OA(e,81);return 0==e[e.l]&&0==e[e.l+1]&&e.l-t&2&&(e.l+=2),[n,OA(e,3)]}function LA(e,t){for(var n=e.read_shift(4),r={},i=0;i!=n;++i){var s=e.read_shift(4),a=e.read_shift(4);r[s]=e.read_shift(a,1200===t?"utf16le":"utf8").replace(I_,"").replace(C_,"!"),1200===t&&a%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),r}function DA(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(3&t)>0&&(e.l+=4-(3&t)&3),n}function OA(e,t,n){var r,i=e.read_shift(2),s=n||{};if(e.l+=2,12!==t&&i!==t&&-1===GE.indexOf(t)&&(4126!=(65534&t)||4126!=(65534&i)))throw new Error("Expected type "+t+" saw "+i);switch(12===t?i:t){case 2:return r=e.read_shift(2,"i"),s.raw||(e.l+=2),r;case 3:return r=e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return r=e.read_shift(4);case 30:return AA(e,0,4).replace(I_,"");case 31:return NA(e);case 64:return EA(e);case 65:return DA(e);case 71:return function(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}(e);case 80:return CA(e,i,!s.raw).replace(I_,"");case 81:return function(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return IA(e,t,0)}(e,i).replace(I_,"");case 4108:return function(e){for(var t=e.read_shift(4),n=[],r=0;r<t/2;++r)n.push(PA(e));return n}(e);case 4126:case 4127:return 4127==i?function(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r){var i=e.l;n[r]=e.read_shift(0,"lpwstr").replace(I_,""),e.l-i&2&&(e.l+=2)}return n}(e):function(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r)n[r]=e.read_shift(0,"lpstr-cp").replace(I_,"");return n}(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+i)}}function RA(e,t){var n=$T(4),r=$T(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=$T(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var i=(n*=1e7)/Math.pow(2,32)|0;i>0&&(n%=Math.pow(2,32),r+=i);var s=$T(8);return s.write_shift(4,n),s.write_shift(4,r),s}(t);break;case 31:case 80:for((r=$T(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return N_([n,r])}function MA(e,t){var n=e.l,r=e.read_shift(4),i=e.read_shift(4),s=[],a=0,o=0,l=-1,c={};for(a=0;a!=i;++a){var u=e.read_shift(4),h=e.read_shift(4);s[a]=[u,h+n]}s.sort(function(e,t){return e[1]-t[1]});var d={};for(a=0;a!=i;++a){if(e.l!==s[a][1]){var f=!0;if(a>0&&t)switch(t[s[a-1][0]].t){case 2:e.l+2===s[a][1]&&(e.l+=2,f=!1);break;case 80:case 4108:e.l<=s[a][1]&&(e.l=s[a][1],f=!1)}if((!t||0==a)&&e.l<=s[a][1]&&(f=!1,e.l=s[a][1]),f)throw new Error("Read Error: Expected address "+s[a][1]+" at "+e.l+" :"+a)}if(t){var p=t[s[a][0]];if(d[p.n]=OA(e,p.t,{raw:!0}),"version"===p.p&&(d[p.n]=String(d[p.n]>>16)+"."+("0000"+String(65535&d[p.n])).slice(-4)),"CodePage"==p.n)switch(d[p.n]){case 0:d[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:c_(o=d[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+d[p.n])}}else if(1===s[a][0]){if(o=d.CodePage=OA(e,2),c_(o),-1!==l){var m=e.l;e.l=s[l][1],c=LA(e,o),e.l=m}}else if(0===s[a][0]){if(0===o){l=a,e.l=s[a+1][1];continue}c=LA(e,o)}else{var g,v=c[s[a][0]];switch(e[e.l]){case 65:e.l+=4,g=DA(e);break;case 30:case 31:e.l+=4,g=CA(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,g=e.read_shift(4,"i");break;case 19:e.l+=4,g=e.read_shift(4);break;case 5:e.l+=4,g=e.read_shift(8,"f");break;case 11:e.l+=4,g=qA(e,4);break;case 64:e.l+=4,g=qS(EA(e));break;default:throw new Error("unparsed value: "+e[e.l])}d[v]=g}}return e.l=n+r,d}var FA=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function jA(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function BA(e,t,n){var r=$T(8),i=[],s=[],a=8,o=0,l=$T(8),c=$T(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),a+=8+l.length,!t){(c=$T(8)).write_shift(4,0),i.unshift(c);var u=[$T(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var h=e[o][0];for((l=$T(8+2*(h.length+1)+(h.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=N_(u),s.unshift(l),a+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(FA.indexOf(e[o][0])>-1||bA.indexOf(e[o][0])>-1)&&null!=e[o][1]){var d=e[o][1],f=0;if(t){var p=n[f=+t[e[o][0]]];if("version"==p.p&&"string"==typeof d){var m=d.split(".");d=(+m[0]<<16)+(+m[1]||0)}l=RA(p.t,d)}else{var g=jA(d);-1==g&&(g=31,d=String(d)),l=RA(g,d)}s.push(l),(c=$T(8)).write_shift(4,t?f:2+o),i.push(c),a+=8+l.length}var v=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,v),v+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),N_([r].concat(i).concat(s))}function UA(e,t,n){var r=e.content;if(!r)return{};YT(r,0);var i,s,a,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var c=r.read_shift(4),u=r.read_shift(16);if(u!==TS.utils.consts.HEADER_CLSID&&u!==n)throw new Error("Bad PropertySet CLSID "+u);if(1!==(i=r.read_shift(4))&&2!==i)throw new Error("Unrecognized #Sets: "+i);if(s=r.read_shift(16),o=r.read_shift(4),1===i&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);2===i&&(a=r.read_shift(16),l=r.read_shift(4));var h,d=MA(r,t),f={SystemIdentifier:c};for(var p in d)f[p]=d[p];if(f.FMTID=s,1===i)return f;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);try{h=MA(r,null)}catch(m){}for(p in h)f[p]=h[p];return f.FMTID=[s,a],f}function zA(e,t,n,r,i,s){var a=$T(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,TS.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,t,"hex"),a.write_shift(4,i?68:48);var l=BA(e,n,r);if(o.push(l),i){var c=BA(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(c)}return N_(o)}function VA(e,t){return e.read_shift(t),null}function qA(e,t){return 1===e.read_shift(t)}function WA(e,t){return t||(t=$T(2)),t.write_shift(2,+!!e),t}function HA(e){return e.read_shift(2,"u")}function GA(e,t){return t||(t=$T(2)),t.write_shift(2,e),t}function KA(e,t){return function(e,t,n){for(var r=[],i=e.l+t;e.l<i;)r.push(n(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return r}(e,t,HA)}function YA(e,t,n){return n||(n=$T(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function XA(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",s=i_;(n&&n.biff>=8&&(i_=1200),n&&8!=n.biff)?12==n.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont");n.biff>=2&&n.biff<=5&&(i="cpstr");var a=r?e.read_shift(r,i):"";return i_=s,a}function $A(e){var t=i_;i_=1200;var n,r=e.read_shift(2),i=e.read_shift(1),s=4&i,a=8&i,o=1+(1&i),l=0,c={};a&&(l=e.read_shift(2)),s&&(n=e.read_shift(4));var u=2==o?"dbcs-cont":"sbcs-cont",h=0===r?"":e.read_shift(r,u);return a&&(e.l+=4*l),s&&(e.l+=n),c.t=h,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),i_=t,c}function JA(e){var t=e.t||"",n=$T(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=$T(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),N_([n,r])}function QA(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function ZA(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):QA(e,r,n)}function eN(e,t,n){if(n.biff>5)return ZA(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function tN(e,t,n){return n||(n=$T(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function nN(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return function(e){var t=e.read_shift(4),n=e.l,r=!1;t>24&&(e.l+=t-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(r=!0),e.l=n);var i=e.read_shift((r?t-24:t)>>1,"utf16le").replace(I_,"");return r&&(e.l+=24),i}(e);case"0303000000000000c000000000000046":return function(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var r=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return n+r.replace(/\\/g,"/");var i=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return n+e.read_shift(i>>1,"utf16le").replace(I_,"")}(e);default:throw new Error("Unsupported Moniker "+n)}}function rN(e){var t=e.read_shift(4);return t>0?e.read_shift(t,"utf16le").replace(I_,""):""}function iN(e,t){t||(t=$T(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function sN(e){var t=$T(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(n=0;n<a.length;++n)t.write_shift(4,a[n]);if(28==s)iN(r=r.slice(1),t);else if(2&s){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<a.length;++n)t.write_shift(1,parseInt(a[n],16));var o=i>-1?r.slice(0,i):r;for(t.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)t.write_shift(2,o.charCodeAt(n));t.write_shift(2,0),8&s&&iN(i>-1?r.slice(i+1):"",t)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<a.length;++n)t.write_shift(1,parseInt(a[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function aN(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function oN(e,t){var n=aN(e);return n[3]=0,n}function lN(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function cN(e,t,n,r){return r||(r=$T(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function uN(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function hN(e){return[e.read_shift(2),ME(e)]}function dN(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function fN(e,t){return t||(t=$T(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function pN(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(1),r:t},e:{c:e.read_shift(1),r:n}}}var mN=pN;function gN(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2);return e.l+=12,[n,t,r]}function vN(e){e.l+=2,e.l+=e.read_shift(2)}var bN={0:vN,4:vN,5:vN,6:vN,7:function(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:vN,9:vN,10:vN,11:vN,12:vN,13:function(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t},14:vN,15:vN,16:vN,17:vN,18:vN,19:vN,20:vN,21:gN};function yN(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),(t-=2)>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function wN(e,t,n){var r=1536,i=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;default:throw new Error("unsupported BIFF version")}var s=$T(i);return s.write_shift(2,r),s.write_shift(2,t),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function xN(e,t){var n=!t||t.biff>=8?2:1,r=$T(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function _N(e,t,n){var r=0;n&&2==n.biff||(r=e.read_shift(2));var i=e.read_shift(2);return n&&2==n.biff&&(r=1-(i>>15),i&=32767),[{Unsynced:1&r,DyZero:(2&r)>>1,ExAsc:(4&r)>>2,ExDsc:(8&r)>>3},i]}function SN(e,t,n,r){var i=n&&5==n.biff;r||(r=$T(i?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(i?1:2,t.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return null==s.l&&(s.l=s.length),s}var kN=eN;function TN(e,t,n){var r=e.l+t,i=8!=n.biff&&n.biff?2:4,s=e.read_shift(i),a=e.read_shift(i),o=e.read_shift(2),l=e.read_shift(2);return e.l=r,{s:{r:s,c:o},e:{r:a,c:l}}}function EN(e,t,n,r){var i=n&&5==n.biff;r||(r=$T(i?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function AN(e,t,n){var r=lN(e);2!=n.biff&&9!=t||++e.l;var i=function(e){var t=e.read_shift(1);return 1===e.read_shift(1)?t:1===t}(e);return r.val=i,r.t=!0===i||!1===i?"b":"e",r}var NN=function(e,t,n){return 0===t?"":eN(e,0,n)};function IN(e,t,n){var r,i=e.read_shift(2),s={fBuiltIn:1&i,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return 14849===n.sbcch&&(r=function(e,t,n){e.l+=4,t-=4;var r=e.l+t,i=XA(e,0,n),s=e.read_shift(2);if(s!==(r-=e.l))throw new Error("Malformed AddinUdf: padding = "+r+" != "+s);return e.l+=s,i}(e,t-2,n)),s.body=r||e.read_shift(t-2),"string"===typeof r&&(s.Name=r),s}var CN=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function PN(e,t,n){var r=e.l+t,i=e.read_shift(2),s=e.read_shift(1),a=e.read_shift(1),o=e.read_shift(n&&2==n.biff?1:2),l=0;(!n||n.biff>=5)&&(5!=n.biff&&(e.l+=2),l=e.read_shift(2),5==n.biff&&(e.l+=2),e.l+=4);var c=QA(e,a,n);32&i&&(c=CN[c.charCodeAt(0)]);var u=r-e.l;n&&2==n.biff&&--u;var h=r!=e.l&&0!==o&&u>0?function(e,t,n,r){var i,s=e.l+t,a=GC(e,r,n);s!==e.l&&(i=HC(e,s-e.l,a,n));return[a,i]}(e,u,n,o):[];return{chKey:s,Name:c,itab:l,rgce:h}}function LN(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=XA(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],i=e.l+t,s=e.read_shift(n.biff>8?4:2);0!==s--;)r.push(uN(e,n.biff,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function DN(e,t,n){var r=mN(e,6);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[r,QC(e,t,n)]}var ON={8:function(e,t){var n=e.l+t;e.l+=10;var r=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=n,{fmt:r}}};function RN(e){var t=$T(24),n=lE(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(r[i],16));return N_([t,sN(e[1])])}function MN(e){var t=e[1].Tooltip,n=$T(10+2*(t.length+1));n.write_shift(2,2048);var r=lE(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<t.length;++i)n.write_shift(2,t.charCodeAt(i));return n.write_shift(2,0),n}function FN(e,t,n){if(!n.cellStyles)return XT(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),s=e.read_shift(r),a=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var jN=lN,BN=KA,UN=ZA;var zN=[2,3,48,49,131,139,140,245],VN=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=PS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var i=vE(function(t,n){var r=[],i=__(1);switch(n.type){case"base64":i=k_(y_(t));break;case"binary":i=k_(t);break;case"buffer":case"array":i=t}YT(i,0);var s=i.read_shift(1),a=!!(136&s),o=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,a=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,u=521;2==s&&(c=i.read_shift(2)),i.l+=3,2!=s&&(c=i.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(u=i.read_shift(2));var h=i.read_shift(2),d=n.codepage||1252;2!=s&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(d=e[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);for(var f=[],p={},m=Math.min(i.length,2==s?521:u-10-(o?264:0)),g=l?32:11;i.l<m&&13!=i[i.l];)switch((p={}).name=f_.utils.decode(d,i.slice(i.l,i.l+g)).replace(/[\u0000\r\n].*$/g,""),i.l+=g,p.type=String.fromCharCode(i.read_shift(1)),2==s||l||(p.offset=i.read_shift(4)),p.len=i.read_shift(1),2==s&&(p.offset=i.read_shift(2)),p.dec=i.read_shift(1),p.name.length&&f.push(p),2!=s&&(i.l+=l?13:14),p.type){case"B":o&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var v=0,b=0;for(r[0]=[],b=0;b!=f.length;++b)r[0][b]=f[b].name;for(;c-- >0;)if(42!==i[i.l])for(++i.l,r[++v]=[],b=0,b=0;b!=f.length;++b){var y=i.slice(i.l,i.l+f[b].len);i.l+=f[b].len,YT(y,0);var w=f_.utils.decode(d,y);switch(f[b].type){case"C":w.trim().length&&(r[v][b]=w.replace(/\s+$/,""));break;case"D":8===w.length?r[v][b]=new Date(+w.slice(0,4),+w.slice(4,6)-1,+w.slice(6,8)):r[v][b]=w;break;case"F":r[v][b]=parseFloat(w.trim());break;case"+":case"I":r[v][b]=l?2147483648^y.read_shift(-4,"i"):y.read_shift(4,"i");break;case"L":switch(w.trim().toUpperCase()){case"Y":case"T":r[v][b]=!0;break;case"N":case"F":r[v][b]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+w+"|")}break;case"M":if(!a)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));r[v][b]="##MEMO##"+(l?parseInt(w.trim(),10):y.read_shift(4));break;case"N":(w=w.replace(/\u0000/g,"").trim())&&"."!=w&&(r[v][b]=+w||0);break;case"@":r[v][b]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":r[v][b]=new Date(864e5*(y.read_shift(4)-2440588)+y.read_shift(4));break;case"Y":r[v][b]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[v][b]=-y.read_shift(-8,"f");break;case"B":if(o&&8==f[b].len){r[v][b]=y.read_shift(8,"f");break}case"G":case"P":y.l+=f[b].len;break;case"0":if("_NullFlags"===f[b].name)break;default:throw new Error("DBF Unsupported data type "+f[b].type)}}else i.l+=h;if(2!=s&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=f,r}(t,r),r);return i["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,i}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return mE(n(e,t),t)}catch(r){if(t&&t.WTF)throw r}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var i=n||{};if(+i.codepage>=0&&c_(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var s=QT(),a=AO(e,{header:1,raw:!0,cellDates:!0}),o=a[0],l=a.slice(1),c=e["!cols"]||[],u=0,h=0,d=0,f=1;for(u=0;u<o.length;++u)if(((c[u]||{}).DBF||{}).name)o[u]=c[u].DBF.name,++d;else if(null!=o[u]){if(++d,"number"===typeof o[u]&&(o[u]=o[u].toString(10)),"string"!==typeof o[u])throw new Error("DBF Invalid column name "+o[u]+" |"+typeof o[u]+"|");if(o.indexOf(o[u])!==u)for(h=0;h<1024;++h)if(-1==o.indexOf(o[u]+"_"+h)){o[u]+="_"+h;break}}var p=dE(e["!ref"]),m=[],g=[],v=[];for(u=0;u<=p.e.c-p.s.c;++u){var b="",y="",w=0,x=[];for(h=0;h<l.length;++h)null!=l[h][u]&&x.push(l[h][u]);if(0!=x.length&&null!=o[u]){for(h=0;h<x.length;++h){switch(typeof x[h]){case"number":y="B";break;case"string":default:y="C";break;case"boolean":y="L";break;case"object":y=x[h]instanceof Date?"D":"C"}w=Math.max(w,String(x[h]).length),b=b&&b!=y?"C":y}w>250&&(w=250),"C"==(y=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>w&&(w=c[u].DBF.len),"B"==b&&"N"==y&&(b="N",v[u]=c[u].DBF.dec,w=c[u].DBF.len),g[u]="C"==b||"N"==y?w:r[b]||0,f+=g[u],m[u]=b}else m[u]="?"}var _=s.next(32);for(_.write_shift(4,318902576),_.write_shift(4,l.length),_.write_shift(2,296+32*d),_.write_shift(2,f),u=0;u<4;++u)_.write_shift(4,0);for(_.write_shift(4,(+t[s_]||3)<<8),u=0,h=0;u<o.length;++u)if(null!=o[u]){var S=s.next(32),k=(o[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,k,"sbcs"),S.write_shift(1,"?"==m[u]?"C":m[u],"sbcs"),S.write_shift(4,h),S.write_shift(1,g[u]||r[m[u]]||0),S.write_shift(1,v[u]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),h+=g[u]||r[m[u]]||0}var T=s.next(264);for(T.write_shift(4,13),u=0;u<65;++u)T.write_shift(4,0);for(u=0;u<l.length;++u){var E=s.next(f);for(E.write_shift(1,0),h=0;h<o.length;++h)if(null!=o[h])switch(m[h]){case"L":E.write_shift(1,null==l[u][h]?63:l[u][h]?84:70);break;case"B":E.write_shift(8,l[u][h]||0,"f");break;case"N":var A="0";for("number"==typeof l[u][h]&&(A=l[u][h].toFixed(v[h]||0)),d=0;d<g[h]-A.length;++d)E.write_shift(1,32);E.write_shift(1,A,"sbcs");break;case"D":l[u][h]?(E.write_shift(4,("0000"+l[u][h].getFullYear()).slice(-4),"sbcs"),E.write_shift(2,("00"+(l[u][h].getMonth()+1)).slice(-2),"sbcs"),E.write_shift(2,("00"+l[u][h].getDate()).slice(-2),"sbcs")):E.write_shift(8,"00000000","sbcs");break;case"C":var N=String(null!=l[u][h]?l[u][h]:"").slice(0,g[h]);for(E.write_shift(1,N,"sbcs"),d=0;d<g[h]-N.length;++d)E.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),qN=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+IS(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?g_(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:g_(r)};function i(e,i){var s,a=e.split(/[\n\r]+/),o=-1,l=-1,c=0,u=0,h=[],d=[],f=null,p={},m=[],g=[],v=[],b=0;for(+i.codepage>=0&&c_(+i.codepage);c!==a.length;++c){b=0;var y,w=a[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),x=w.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),_=x[0];if(w.length>0)switch(_){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==x[1].charAt(0)&&d.push(w.slice(3).replace(/;;/g,";"));break;case"C":var S=!1,k=!1,T=!1,E=!1,A=-1,N=-1;for(u=1;u<x.length;++u)switch(x[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(x[u].slice(1))-1,k=!0;break;case"Y":for(o=parseInt(x[u].slice(1))-1,k||(l=0),s=h.length;s<=o;++s)h[s]=[];break;case"K":'"'===(y=x[u].slice(1)).charAt(0)?y=y.slice(1,y.length-1):"TRUE"===y?y=!0:"FALSE"===y?y=!1:isNaN(KS(y))?isNaN(XS(y).getDate())||(y=qS(y)):(y=KS(y),null!==f&&pS(f)&&(y=jS(y))),"undefined"!==typeof f_&&"string"==typeof y&&"string"!=(i||{}).type&&(i||{}).codepage&&(y=f_.utils.decode(i.codepage,y)),S=!0;break;case"E":E=!0;var I=wC(x[u].slice(1),{r:o,c:l});h[o][l]=[h[o][l],I];break;case"S":T=!0,h[o][l]=[h[o][l],"S5S"];break;case"R":A=parseInt(x[u].slice(1))-1;break;case"C":N=parseInt(x[u].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+w)}if(S&&(h[o][l]&&2==h[o][l].length?h[o][l][0]=y:h[o][l]=y,f=null),T){if(E)throw new Error("SYLK shared formula cannot have own formula");var C=A>-1&&h[A][N];if(!C||!C[1])throw new Error("SYLK shared formula cannot find base");h[o][l][1]=SC(C[1],{r:o-A,c:l-N})}break;case"F":var P=0;for(u=1;u<x.length;++u)switch(x[u].charAt(0)){case"X":l=parseInt(x[u].slice(1))-1,++P;break;case"Y":for(o=parseInt(x[u].slice(1))-1,s=h.length;s<=o;++s)h[s]=[];break;case"M":b=parseInt(x[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=d[parseInt(x[u].slice(1))];break;case"W":for(v=x[u].slice(1).split(" "),s=parseInt(v[0],10);s<=parseInt(v[1],10);++s)b=parseInt(v[2],10),g[s-1]=0===b?{hidden:!0}:{wch:b},II(g[s-1]);break;case"C":g[l=parseInt(x[u].slice(1))-1]||(g[l]={});break;case"R":m[o=parseInt(x[u].slice(1))-1]||(m[o]={}),b>0?(m[o].hpt=b,m[o].hpx=LI(b)):0===b&&(m[o].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+w)}P<1&&(f=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+w)}}return m.length>0&&(p["!rows"]=m),g.length>0&&(p["!cols"]=g),i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),[h,p]}function s(e,t){var n=function(e,t){switch(t.type){case"base64":return i(y_(e),t);case"binary":return i(e,t);case"buffer":return i(w_&&Buffer.isBuffer(e)?e.toString("binary"):E_(e),t);case"array":return i(WS(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],s=n[1],a=vE(r,t);return IS(s).forEach(function(e){a[e]=s[e]}),a}function a(e,t,n,r){var i="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+_C(e.f,{r:n,c:r}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return mE(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var n,r,i=["ID;PWXL;N;E"],s=[],o=dE(e["!ref"]),l=Array.isArray(e),c="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=i,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=kI(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=TI(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*PI(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(i,e["!rows"]),i.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var u=o.s.r;u<=o.e.r;++u)for(var h=o.s.c;h<=o.e.c;++h){var d=cE({r:u,c:h});(n=l?(e[u]||[])[h]:e[d])&&(null!=n.v||n.f&&!n.F)&&s.push(a(n,0,u,h))}return i.join(c)+c+s.join(c)+c+"E"+c}}}(),WN=function(){function e(e,t){for(var n=e.split("\n"),r=-1,i=-1,s=0,a=[];s!==n.length;++s)if("BOT"!==n[s].trim()){if(!(r<0)){for(var o=n[s].trim().split(","),l=o[0],c=o[1],u=n[++s]||"";1&(u.match(/["]/g)||[]).length&&s<n.length-1;)u+="\n"+n[++s];switch(u=u.trim(),+l){case-1:if("BOT"===u){a[++r]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?a[r][i]=!0:"FALSE"===u?a[r][i]=!1:isNaN(KS(c))?isNaN(XS(c).getDate())?a[r][i]=c:a[r][i]=qS(c):a[r][i]=KS(c),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),a[r][i++]=""!==u?u:null}if("EOD"===u)break}}else a[++r]=[],i=0;return t&&t.sheetRows&&(a=a.slice(0,t.sheetRows)),a}function t(t,n){return vE(function(t,n){switch(n.type){case"base64":return e(y_(t),n);case"binary":return e(t,n);case"buffer":return e(w_&&Buffer.isBuffer(t)?t.toString("binary"):E_(t),n);case"array":return e(WS(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}var n=function(){var e=function(e,t,n,r,i){e.push(t),e.push(n+","+r),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,i=[],s=dE(n["!ref"]),a=Array.isArray(n);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,s.e.r-s.s.r+1,""),e(i,"TUPLES",0,s.e.c-s.s.c+1,""),e(i,"DATA",0,0,"");for(var o=s.s.r;o<=s.e.r;++o){t(i,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=cE({r:o,c:l});if(r=a?(n[o]||[])[l]:n[c])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(i,1,0,"="+r.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=bS(r.z||U_[14],OS(qS(r.v)))),t(i,0,r.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}t(i,-1,0,"EOD");return i.join("\r\n")}}();return{to_workbook:function(e,n){return mE(t(e,n),n)},to_sheet:t,from_sheet:n}}(),HN=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return vE(function(t,n){for(var r=t.split("\n"),i=-1,s=-1,a=0,o=[];a!==r.length;++a){var l=r[a].trim().split(":");if("cell"===l[0]){var c=lE(l[1]);if(o.length<=c.r)for(i=o.length;i<=c.r;++i)o[i]||(o[i]=[]);switch(i=c.r,s=c.c,l[2]){case"t":o[i][s]=e(l[3]);break;case"v":o[i][s]=+l[3];break;case"vtf":var u=l[l.length-1];case"vtc":"nl"===l[3]?o[i][s]=!!+l[4]:o[i][s]=+l[4],"vtf"==l[2]&&(o[i][s]=[o[i][s],u])}}}return n&&n.sheetRows&&(o=o.slice(0,n.sheetRows)),o}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),a="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var n,r=[],i=[],s="",a=uE(e["!ref"]),o=Array.isArray(e),l=a.s.r;l<=a.e.r;++l)for(var c=a.s.c;c<=a.e.c;++c)if(s=cE({r:l,c:c}),(n=o?(e[l]||[])[c]:e[s])&&null!=n.v&&"z"!==n.t){switch(i=["cell",s,"t"],n.t){case"s":case"str":i.push(t(n.v));break;case"n":n.f?(i[2]="vtf",i[3]="n",i[4]=n.v,i[5]=t(n.f)):(i[2]="v",i[3]=n.v);break;case"b":i[2]="vt"+(n.f?"f":"c"),i[3]="nl",i[4]=n.v?"1":"0",i[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=OS(qS(n.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=n.w||bS(n.z||U_[14],u);break;case"e":continue}r.push(i.join(":"))}return r.push("sheet:c:"+(a.e.c-a.s.c+1)+":r:"+(a.e.r-a.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return mE(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,i,s,i,o(e),a].join("\n")}}}(),GN=function(){function e(e,t,n,r,i){i.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(KS(e))?isNaN(XS(e).getDate())?t[n][r]=e:t[n][r]=qS(e):t[n][r]=KS(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},i=!1,s=0,a=0;s<e.length;++s)34==(a=e.charCodeAt(s))?i=!i:!i&&a in t&&(r[a]=(r[a]||0)+1);for(s in a=[],r)Object.prototype.hasOwnProperty.call(r,s)&&a.push([r[s],s]);if(!a.length)for(s in r=n)Object.prototype.hasOwnProperty.call(r,s)&&a.push([r[s],s]);return a.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[a.pop()[1]]||44}function i(e,t){var n=t||{},i="";var s=n.dense?[]:{},a={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=r(e.slice(0,1024)):i=n&&n.FS?n.FS:r(e.slice(0,1024));var o=0,l=0,c=0,u=0,h=0,d=i.charCodeAt(0),f=!1,p=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=n.dateNF?function(e){var t="number"==typeof e?U_[e]:e;return t=t.replace(SS,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function v(){var t=e.slice(u,h),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(r.t="s",r.v=t):(r.t="n",r.f=t.slice(1));else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=KS(t)))if(!isNaN(XS(t).getDate())||g&&t.match(g)){r.z=n.dateNF||U_[14];var i=0;g&&t.match(g)&&(t=function(e,t,n){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(t.match(SS)||[]).forEach(function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":s=c;break;case"h":a=c;break;case"s":l=c;break;case"m":a>=0?o=c:i=c}}),l>=0&&-1==o&&i>=0&&(o=i,i=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==a&&-1==o&&-1==l?c:-1==r&&-1==i&&-1==s?u:c+"T"+u}(0,n.dateNF,t.match(g)||[]),i=1),n.cellDates?(r.t="d",r.v=qS(t,i)):(r.t="n",r.v=OS(qS(t,i))),!1!==n.cellText&&(r.w=bS(r.z,r.v instanceof Date?OS(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(s[o]||(s[o]=[]),s[o][l]=r):s[cE({c:l,r:o})]=r),u=h+1,m=e.charCodeAt(u),a.e.c<l&&(a.e.c=l),a.e.r<o&&(a.e.r=o),p==d)++l;else if(l=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;h<e.length;++h)switch(p=e.charCodeAt(h)){case 34:34===m&&(f=!f);break;case d:case 10:case 13:if(!f&&v())break e}return h-u>0&&v(),s["!ref"]=hE(a),s}function s(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,n):vE(function(t,n){var r=n||{},i=[];if(!t||0===t.length)return i;for(var s=t.split(/[\r\n]/),a=s.length-1;a>=0&&0===s[a].length;)--a;for(var o=10,l=0,c=0;c<=a;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,o=Math.max(o,l);for(c=0;c<=a;++c){i[c]=[];var u=0;for(e(s[c].slice(0,o).trim(),i,c,u,r),u=1;u<=(s[c].length-o)/10+1;++u)e(s[c].slice(o+10*(u-1),o+10*u).trim(),i,c,u,r)}return r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}(t,n),n):i(t,n)}function a(e,t){var n="",r="string"==t.type?[0,0,0,0]:gO(e,t);switch(t.type){case"base64":n=y_(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof f_?f_.utils.decode(t.codepage,e):w_&&Buffer.isBuffer(e)?e.toString("binary"):E_(e);break;case"array":n=WS(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=Lk(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=Lk(n):"binary"==t.type&&"undefined"!==typeof f_&&t.codepage&&(n=f_.utils.decode(t.codepage,f_.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?HN.to_sheet("string"==t.type?n:Lk(n),t):s(n,t)}return{to_workbook:function(e,t){return mE(a(e,t),t)},to_sheet:a,from_sheet:function(e){for(var t,n=[],r=dE(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){for(var a=[],o=r.s.c;o<=r.e.c;++o){var l=cE({r:s,c:o});if((t=i?(e[s]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(pE(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";a.push(c+(0===o?" ":""))}else a.push("          ")}n.push(a.join(""))}return n.join("\n")}}}();var KN=function(){function e(e,t,n){if(e){YT(e,e.l||0);for(var r=n.Enum||v;e.l<e.length;){var i=e.read_shift(2),s=r[i]||r[65535],a=e.read_shift(2),o=e.l+a,l=s.f&&s.f(e,a,n);if(e.l=o,t(l,s,i))return}}}function t(t,n){if(!t)return t;var r=n||{};var i=r.dense?[]:{},s="Sheet1",a="",o=0,l={},c=[],u=[],h={s:{r:0,c:0},e:{r:0,c:0}},d=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=v,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:h=e;break;case 204:e&&(a=e);break;case 222:a=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||U_[14],r.cellDates&&(e[1].t="d",e[1].v=jS(e[1].v))),r.qpro&&e[3]>o&&(i["!ref"]=hE(h),l[s]=i,c.push(s),i=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s=a||"Sheet"+(o+1),a="");var u=r.dense?(i[e[0].r]||[])[e[0].c]:i[cE(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[cE(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=b,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(i["!ref"]=hE(h),l[s]=i,c.push(s),i=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s="Sheet"+(o+1)),d>0&&e[0].r>=d)break;r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[cE(e[0])]=e[1],h.e.c<e[0].c&&(h.e.c=e[0].c),h.e.r<e[0].r&&(h.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==o&&(s=e[1])}},r)}if(i["!ref"]=hE(h),l[a||s]=i,c.push(a||s),!u.length)return{SheetNames:c,Sheets:l};for(var f={},p=[],m=0;m<u.length;++m)l[c[m]]?(p.push(u[m]||c[m]),f[u[m]]=l[u[m]]||l[c[m]]):(p.push(u[m]),f[u[m]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].t="s",20768==r.vers){e.l++;var a=e.read_shift(1);return s[1].v=e.read_shift(a,"utf8"),s}return r.qpro&&e.l++,s[1].v=e.read_shift(i-e.l,"cstr"),s}function i(e,t,n){var r=$T(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var i=0;i<r.length;++i){var s=n.charCodeAt(i);r.write_shift(1,s>=128?95:s)}return r.write_shift(1,0),r}function s(e,t,n){var r=$T(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function a(e,t,n){var r=$T(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function o(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?oE(t):sE(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function h(e,t,n,r){var i=$T(6+r.length);i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),i.write_shift(1,39);for(var s=0;s<r.length;++s){var a=r.charCodeAt(s);i.write_shift(1,a>=128?95:a)}return i.write_shift(1,0),i}function d(e,t){var n=u(e),r=e.read_shift(4),i=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===r&&3221225472===i?(n[1].t="e",n[1].v=15):0===r&&3489660928===i?(n[1].t="e",n[1].v=42):n[1].v=0,n;var a=32768&s;return s=(32767&s)-16446,n[1].v=(1-2*a)*(i*Math.pow(2,s+32)+r*Math.pow(2,s)),n}function f(e,t,n,r){var i=$T(14);if(i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),0==r)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var s,a=0,o=0,l=0;return r<0&&(a=1,r=-r),o=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,o-31))>>>0))&&(++o,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,s=(r*=Math.pow(2,32))>>>0,i.write_shift(4,s),i.write_shift(4,l),o+=16383+(a?32768:0),i.write_shift(2,o),i}function p(e,t){var n=u(e),r=e.read_shift(8,"f");return n[1].v=r,n}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var n=$T(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);n[n.l++]=i>127?95:i}return n[n.l++]=0,n}var v={0:{n:"BOF",f:HA},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].v=e.read_shift(8,"f"),r.qpro)e.l=i;else{var a=e.read_shift(2);!function(e,t){YT(e,0);var n=[],r=0,i="",s="",a="",u="";for(;e.l<e.length;){var h=e[e.l++];switch(h){case 0:n.push(e.read_shift(8,"f"));break;case 1:s=o(t[0].c,e.read_shift(2),!0),i=o(t[0].r,e.read_shift(2),!1),n.push(s+i);break;case 2:var d=o(t[0].c,e.read_shift(2),!0),f=o(t[0].r,e.read_shift(2),!1);s=o(t[0].c,e.read_shift(2),!0),i=o(t[0].r,e.read_shift(2),!1),n.push(d+f+":"+s+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";h=e[e.l++];)p+=String.fromCharCode(h);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:u=n.pop(),a=n.pop(),n.push(["AND","OR"][h-20]+"("+a+","+u+")");break;default:if(h<32&&c[h])u=n.pop(),a=n.pop(),n.push(a+c[h]+u);else{if(!l[h])return h<=7?console.error("WK1 invalid opcode "+h.toString(16)):h<=24?console.error("WK1 unsupported op "+h.toString(16)):h<=30?console.error("WK1 invalid opcode "+h.toString(16)):h<=115?console.error("WK1 unsupported function opcode "+h.toString(16)):console.error("WK1 unrecognized opcode "+h.toString(16));if(69==(r=l[h][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+h.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(l[h][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+a),s),e.l+=a}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},b={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=u(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:d},24:{n:"NUMBER18",f:function(e,t){var n=u(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=d(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var i=e.read_shift(2);if(14e3==i){for(n[i]=[0,""],n[i][0]=e.read_shift(2);e[e.l];)n[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=u(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var n=p(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&c_(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=QT(),o=dE(e["!ref"]),l=Array.isArray(e),c=[];oD(r,0,function(e){var t=$T(2);return t.write_shift(2,e),t}(1030)),oD(r,6,function(e){var t=$T(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var u=Math.min(o.e.r,8191),h=o.s.r;h<=u;++h)for(var d=sE(h),f=o.s.c;f<=o.e.c;++f){h===o.s.r&&(c[f]=oE(f));var p=c[f]+d,m=l?(e[h]||[])[f]:e[p];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?oD(r,13,s(h,f,m.v)):oD(r,14,a(h,f,m.v));else oD(r,15,i(h,f,pE(m).slice(0,239)))}return oD(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&c_(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=QT();oD(r,0,function(e){var t=$T(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,i=0,s=0;s<e.SheetNames.length;++s){var a=e.SheetNames[s],o=e.Sheets[a];if(o&&o["!ref"]){++i;var l=uE(o["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,i),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,s=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&oD(r,27,g(e.SheetNames[i],s++));var a=0;for(i=0;i<e.SheetNames.length;++i){var o=e.Sheets[e.SheetNames[i]];if(o&&o["!ref"]){for(var l=dE(o["!ref"]),c=Array.isArray(o),u=[],d=Math.min(l.e.r,8191),p=l.s.r;p<=d;++p)for(var m=sE(p),v=l.s.c;v<=l.e.c;++v){p===l.s.r&&(u[v]=oE(v));var b=u[v]+m,y=c?(o[p]||[])[v]:o[b];if(y&&"z"!=y.t)if("n"==y.t)oD(r,23,f(p,v,a,y.v));else oD(r,22,h(p,v,a,pE(y).slice(0,239)))}++a}}return oD(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(k_(y_(e)),n);case"binary":return t(k_(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var YN=function(){var e=Ok("t"),t=Ok("rPr");function n(n){var r=n.match(e);if(!r)return{t:"s",v:""};var i={t:"s",v:yk(r[1])},s=n.match(t);return s&&(i.s=function(e){var t={},n=e.match(dk),r=0,i=!1;if(n)for(;r!=n.length;++r){var s=mk(n[r]);switch(s[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==s.val)break;t.cp=o_[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting"}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if("0"==s.val)break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if("0"==s.val)break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(47!==s[0].charCodeAt(1)&&!i)throw new Error("Unrecognized rich format "+s[0])}}return t}(s[1])),i}var r=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(e){return e.replace(r,"").split(i).map(n).filter(function(e){return e.v})}}(),XN=function(){var e=/(\r\n|\n)/g;function t(t){var n=[[],t.v,[]];return t.v?(t.s&&function(e,t,n){var r=[];e.u&&r.push("text-decoration: underline;"),e.uval&&r.push("text-underline-style:"+e.uval+";"),e.sz&&r.push("font-size:"+e.sz+"pt;"),e.outline&&r.push("text-effect: outline;"),e.shadow&&r.push("text-shadow: auto;"),t.push('<span style="'+r.join("")+'">'),e.b&&(t.push("<b>"),n.push("</b>")),e.i&&(t.push("<i>"),n.push("</i>")),e.strike&&(t.push("<s>"),n.push("</s>"));var i=e.valign||"";"superscript"==i||"super"==i?i="sup":"subscript"==i&&(i="sub"),""!=i&&(t.push("<"+i+">"),n.push("</"+i+">")),n.push("</span>")}(t.s,n[0],n[2]),n[0].join("")+n[1].replace(e,"<br/>")+n[2].join("")):""}return function(e){return e.map(t).join("")}}(),$N=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,JN=/<(?:\w+:)?r>/,QN=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function ZN(e,t){var n=!t||t.cellHTML,r={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=yk(Lk(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Lk(e),n&&(r.h=Tk(r.t))):e.match(JN)&&(r.r=Lk(e),r.t=yk(Lk((e.replace(QN,"").match($N)||[]).join("").replace(dk,""))),n&&(r.h=XN(YN(r.r)))),r):{t:""}}var eI=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,tI=/<(?:\w+:)?(?:si|sstItem)>/g,nI=/<\/(?:\w+:)?(?:si|sstItem)>/;var rI=/^\s|\s$|[\t\n\r]/;function iI(e,t){if(!t.bookSST)return"";var n=[ck];n[n.length]=qk("sst",null,{xmlns:aT[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var i=e[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(rI)&&(s+=' xml:space="preserve"'),s+=">"+_k(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var sI=function(e,t){var n=!1;return null==t&&(n=!0,t=$T(15+4*e.t.length)),t.write_shift(1,0),wE(e.t,t),n?t.slice(0,t.l):t};function aI(e){var t=QT();ZT(t,159,function(e,t){return t||(t=$T(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)ZT(t,19,sI(e[n]));return ZT(t,160),t.end()}function oI(e){if("undefined"!==typeof f_)return f_.utils.encode(s_,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function lI(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function cI(e){for(var t=e.read_shift(4),n=e.l+t-4,r={},i=e.read_shift(4),s=[];i-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(r.name=e.read_shift(0,"lpp4"),r.comps=s,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return r}function uI(e){var t=function(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=lI(e,4),t.U=lI(e,4),t.W=lI(e,4),t}(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return t}function hI(e,t){var n=e.l+t,r={};r.Flags=63&e.read_shift(4),e.l+=4,r.AlgID=e.read_shift(4);var i=!1;switch(r.AlgID){case 26126:case 26127:case 26128:i=36==r.Flags;break;case 26625:i=4==r.Flags;break;case 0:i=16==r.Flags||4==r.Flags||36==r.Flags;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=e.read_shift(4),r.KeySize=e.read_shift(4),r.ProviderType=e.read_shift(4),e.l+=8,r.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,r}function dI(e,t){var n={},r=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,r),e.l=r,n}function fI(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:hI(e,t),v:dI(e,e.length-e.l)}}function pI(){throw new Error("File is password-protected: ECMA-376 Extensible")}function mI(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),r={};return n.replace(dk,function(e){var n=mk(e);switch(gk(n[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":t.forEach(function(e){r[e]=n[e]});break;case"<dataIntegrity":r.encryptedHmacKey=n.encryptedHmacKey,r.encryptedHmacValue=n.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"<keyEncryptor":r.uri=n.uri;break;case"<encryptedKey":r.encs.push(n);break;default:throw n[0]}}),r}function gI(e){var t,n,r=0,i=oI(e),s=i.length+1;for((t=__(s))[0]=i.length,n=1;n!=s;++n)t[n]=i[n-1];for(n=s-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var vI=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(e,t){return 255&((n=e^t)/2|128*n);var n};return function(i){for(var s,a,o,l=oI(i),c=function(e){for(var r=t[e.length-1],i=104,s=e.length-1;s>=0;--s)for(var a=e[s],o=0;7!=o;++o)64&a&&(r^=n[i]),a*=2,--i;return r}(l),u=l.length,h=__(16),d=0;16!=d;++d)h[d]=0;for(1===(1&u)&&(s=c>>8,h[u]=r(e[0],s),--u,s=255&c,a=l[l.length-1],h[u]=r(a,s));u>0;)s=c>>8,h[--u]=r(l[u],s),s=255&c,h[--u]=r(l[u],s);for(u=15,o=15-l.length;o>0;)s=c>>8,h[u]=r(e[o],s),--o,s=255&c,h[--u]=r(l[u],s),--u,--o;return h}}(),bI=function(e){var t=0,n=vI(e);return function(e){var r=function(e,t,n,r,i){var s,a;for(i||(i=t),r||(r=vI(e)),s=0;s!=t.length;++s)a=t[s],a=255&((a^=r[n])>>5|a<<3),i[s]=a,++n;return[i,n,r]}("",e,t,n);return t=r[1],r[0]}};function yI(e,t,n){var r=n||{};return r.Info=e.read_shift(2),e.l-=2,1===r.Info?r.Data=function(e){var t={},n=t.EncryptionVersionInfo=lI(e,4);if(1!=n.Major||1!=n.Minor)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}(e):r.Data=function(e,t){var n={},r=n.EncryptionVersionInfo=lI(e,4);if(t-=4,2!=r.Minor)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=e.read_shift(4),t-=4;var i=e.read_shift(4);return t-=4,n.EncryptionHeader=hI(e,i),t-=i,n.EncryptionVerifier=dI(e,t),n}(e,t),r}var wI=function(){function e(e,n){switch(n.type){case"base64":return t(y_(e),n);case"binary":return t(e,n);case"buffer":return t(w_&&Buffer.isBuffer(e)?e.toString("binary"):E_(e),n);case"array":return t(WS(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,s=/\\\w+\b/g,a=0,o=-1;r=s.exec(e);){if("\\cell"===r[0]){var l=e.slice(a,s.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][o]=c:n[cE({r:t,c:o})]=c}}a=s.lastIndex}o>i.e.c&&(i.e.c=o)}),n["!ref"]=hE(i),n}return{to_workbook:function(t,n){return mE(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=dE(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){n.push("\\trowd\\trautofit1");for(var a=r.s.c;a<=r.e.c;++a)n.push("\\cellx"+(a+1));for(n.push("\\pard\\intbl"),a=r.s.c;a<=r.e.c;++a){var o=cE({r:s,c:a});(t=i?(e[s]||[])[a]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(pE(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function xI(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function _I(e,t){if(0===t)return e;var n=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=i-s;if(0===a)return[0,0,t];var o,l=0,c=i+s;switch(o=a/(c>1?2-c:c),i){case t:l=((n-r)/a+6)%6;break;case n:l=(r-t)/a+2;break;case r:l=(t-n)/a+4}return[l/6,o,c/2]}(function(e){var t=e.slice("#"===e[0]?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e));return n[2]=t<0?n[2]*(1+t):1-(1-n[2])*(1-t),xI(function(e){var t,n=e[0],r=e[1],i=e[2],s=2*r*(i<.5?i:1-i),a=i-s/2,o=[a,a,a],l=6*n;if(0!==r)switch(0|l){case 0:case 6:t=s*l,o[0]+=s,o[1]+=t;break;case 1:t=s*(2-l),o[0]+=t,o[1]+=s;break;case 2:t=s*(l-2),o[1]+=s,o[2]+=t;break;case 3:t=s*(4-l),o[1]+=t,o[2]+=s;break;case 4:t=s*(l-4),o[2]+=s,o[0]+=t;break;case 5:t=s*(6-l),o[2]+=t,o[0]+=s}for(var c=0;3!=c;++c)o[c]=Math.round(255*o[c]);return o}(n))}var SI=6;function kI(e){return Math.floor((e+Math.round(128/SI)/256)*SI)}function TI(e){return Math.floor((e-5)/SI*100+.5)/100}function EI(e){return Math.round((e*SI+5)/SI*256)/256}function AI(e){return EI(TI(kI(e)))}function NI(e){var t=Math.abs(e-AI(e)),n=SI;if(t>.005)for(SI=1;SI<15;++SI)Math.abs(e-AI(e))<=t&&(t=Math.abs(e-AI(e)),n=SI);SI=n}function II(e){e.width?(e.wpx=kI(e.width),e.wch=TI(e.wpx),e.MDW=SI):e.wpx?(e.wch=TI(e.wpx),e.width=EI(e.wch),e.MDW=SI):"number"==typeof e.wch&&(e.width=EI(e.wch),e.wpx=kI(e.width),e.MDW=SI),e.customWidth&&delete e.customWidth}var CI=96;function PI(e){return 96*e/CI}function LI(e){return e*CI/96}var DI={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};var OI=["numFmtId","fillId","fontId","borderId","xfId"],RI=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];var MI=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,r=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(s,a,o){var l,c={};return s?((l=(s=s.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(e))&&function(e,t,n){t.NumberFmt=[];for(var r=IS(U_),i=0;i<r.length;++i)t.NumberFmt[r[i]]=U_[r[i]];var s=e[0].match(dk);if(s)for(i=0;i<s.length;++i){var a=mk(s[i]);switch(gk(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var o=yk(Lk(a.formatCode)),l=parseInt(a.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&null!=t.NumberFmt[l];--l);t.NumberFmt[l]=o}yS(o,l)}break;default:if(n.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}(l,c,o),(l=s.match(r))&&function(e,t,n,r){t.Fonts=[];var i={},s=!1;(e[0].match(dk)||[]).forEach(function(e){var a=mk(e);switch(gk(a[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":t.Fonts.push(i),i={};break;case"<name":a.val&&(i.name=Lk(a.val));break;case"<b":i.bold=a.val?Ak(a.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=a.val?Ak(a.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(a.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=a.val?Ak(a.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=a.val?Ak(a.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=a.val?Ak(a.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=a.val?Ak(a.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=a.val?Ak(a.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":a.val&&(i.sz=+a.val);break;case"<vertAlign":a.val&&(i.vertAlign=a.val);break;case"<family":a.val&&(i.family=parseInt(a.val,10));break;case"<scheme":a.val&&(i.scheme=a.val);break;case"<charset":if("1"==a.val)break;a.codepage=o_[parseInt(a.val,10)];break;case"<color":if(i.color||(i.color={}),a.auto&&(i.color.auto=Ak(a.auto)),a.rgb)i.color.rgb=a.rgb.slice(-6);else if(a.indexed){i.color.index=parseInt(a.indexed,10);var o=QE[i.color.index];81==i.color.index&&(o=QE[1]),o||(o=QE[1]),i.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else a.theme&&(i.color.theme=parseInt(a.theme,10),a.tint&&(i.color.tint=parseFloat(a.tint)),a.theme&&n.themeElements&&n.themeElements.clrScheme&&(i.color.rgb=_I(n.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<AlternateContent":case"<ext":s=!0;break;case"</AlternateContent>":case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+a[0]+" in fonts")}})}(l,c,a,o),(l=s.match(n))&&function(e,t,n,r){t.Fills=[];var i={},s=!1;(e[0].match(dk)||[]).forEach(function(e){var n=mk(e);switch(gk(n[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":i={},t.Fills.push(i);break;case"<gradientFill":case"</gradientFill>":t.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":n.patternType&&(i.patternType=n.patternType);break;case"<bgColor":i.bgColor||(i.bgColor={}),n.indexed&&(i.bgColor.indexed=parseInt(n.indexed,10)),n.theme&&(i.bgColor.theme=parseInt(n.theme,10)),n.tint&&(i.bgColor.tint=parseFloat(n.tint)),n.rgb&&(i.bgColor.rgb=n.rgb.slice(-6));break;case"<fgColor":i.fgColor||(i.fgColor={}),n.theme&&(i.fgColor.theme=parseInt(n.theme,10)),n.tint&&(i.fgColor.tint=parseFloat(n.tint)),null!=n.rgb&&(i.fgColor.rgb=n.rgb.slice(-6));break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+n[0]+" in fills")}})}(l,c,0,o),(l=s.match(i))&&function(e,t,n,r){t.Borders=[];var i={},s=!1;(e[0].match(dk)||[]).forEach(function(e){var n=mk(e);switch(gk(n[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":i={},n.diagonalUp&&(i.diagonalUp=Ak(n.diagonalUp)),n.diagonalDown&&(i.diagonalDown=Ak(n.diagonalDown)),t.Borders.push(i);break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+n[0]+" in borders")}})}(l,c,0,o),(l=s.match(t))&&function(e,t,n){var r;t.CellXf=[];var i=!1;(e[0].match(dk)||[]).forEach(function(e){var s=mk(e),a=0;switch(gk(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(r=s)[0],a=0;a<OI.length;++a)r[OI[a]]&&(r[OI[a]]=parseInt(r[OI[a]],10));for(a=0;a<RI.length;++a)r[RI[a]]&&(r[RI[a]]=Ak(r[RI[a]]));if(t.NumberFmt&&r.numFmtId>392)for(a=392;a>60;--a)if(t.NumberFmt[r.numFmtId]==t.NumberFmt[a]){r.numFmtId=a;break}t.CellXf.push(r);break;case"<alignment":case"<alignment/>":var o={};s.vertical&&(o.vertical=s.vertical),s.horizontal&&(o.horizontal=s.horizontal),null!=s.textRotation&&(o.textRotation=s.textRotation),s.indent&&(o.indent=s.indent),s.wrapText&&(o.wrapText=Ak(s.wrapText)),r.alignment=o;break;case"<AlternateContent":case"<ext":i=!0;break;case"</AlternateContent>":case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}(l,c,o),c):c}}();function FI(e,t){var n,r=[ck,qk("styleSheet",null,{xmlns:aT[0],"xmlns:vt":rT})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=qk("numFmt",null,{numFmtId:r,formatCode:_k(e[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=qk("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=qk("cellXfs",null),e.forEach(function(e){t[t.length]=qk("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=qk("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function jI(e,t,n){n||(n=$T(6+4*t.length)),n.write_shift(2,e),wE(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function BI(e,t){t||(t=$T(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=$T(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),qE(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),wE(e.name,t),t.length>t.l?t.slice(0,t.l):t}var UI,zI=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],VI=XT;function qI(e,t){t||(t=$T(84)),UI||(UI=PS(zI));var n=UI[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(qE({auto:1},t),qE({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function WI(e,t,n){n||(n=$T(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function HI(e,t){return t||(t=$T(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var GI=XT;function KI(e){ZT(e,613,bE(1)),ZT(e,46,function(e,t){return t||(t=$T(51)),t.write_shift(1,0),HI(0,t),HI(0,t),HI(0,t),HI(0,t),HI(0,t),t.length>t.l?t.slice(0,t.l):t}()),ZT(e,614)}function YI(e){ZT(e,619,bE(1)),ZT(e,48,function(e,t){return t||(t=$T(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),LE(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),ZT(e,620)}function XI(e){ZT(e,508,function(e,t,n){var r=$T(2052);return r.write_shift(4,e),LE(t,r),LE(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),ZT(e,509)}function $I(e,t){var n=QT();return ZT(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n}),0!=n&&(ZT(e,615,bE(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&ZT(e,44,jI(r,t[r]))}),ZT(e,616))}}(n,e.SSF),function(e){ZT(e,611,bE(1)),ZT(e,43,BI({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),ZT(e,612)}(n),function(e){ZT(e,603,bE(2)),ZT(e,45,qI({patternType:"none"})),ZT(e,45,qI({patternType:"gray125"})),ZT(e,604)}(n),KI(n),function(e){ZT(e,626,bE(1)),ZT(e,47,WI({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),ZT(e,627)}(n),function(e,t){ZT(e,617,bE(t.length)),t.forEach(function(t){ZT(e,47,WI(t,0))}),ZT(e,618)}(n,t.cellXfs),YI(n),function(e){ZT(e,505,bE(0)),ZT(e,506)}(n),XI(n),ZT(n,279),n.end()}var JI=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function QI(e,t,n){t.themeElements.clrScheme=[];var r={};(e[0].match(dk)||[]).forEach(function(e){var i=mk(e);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=i.val;break;case"<a:sysClr":r.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===i[0].charAt(1)?(t.themeElements.clrScheme[JI.indexOf(i[0])]=r,r={}):r.name=i[0].slice(3,i[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function ZI(){}function eC(){}var tC=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,nC=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,rC=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;var iC=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function sC(e,t){var n;e&&0!==e.length||(e=aC());var r={};if(!(n=e.match(iC)))throw new Error("themeElements not found in theme");return function(e,t,n){var r;t.themeElements={},[["clrScheme",tC,QI],["fontScheme",nC,ZI],["fmtScheme",rC,eC]].forEach(function(i){if(!(r=e.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](r,t,n)})}(n[0],r,t),r.raw=e,r}function aC(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[ck];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function oC(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:case 4:e.l+=4;break;case 1:t.xclrValue=function(e,t){return XT(e,t)}(e,4);break;case 2:t.xclrValue=aN(e);break;case 3:t.xclrValue=function(e){return e.read_shift(4)}(e)}return e.l+=8,t}function lC(e){var t=e.read_shift(2),n=e.read_shift(2)-4,r=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=oC(e);break;case 6:r[1]=function(e,t){return XT(e,t)}(e,n);break;case 14:case 15:r[1]=e.read_shift(1===n?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return r}function cC(e,t){t.forEach(function(e){e[0]})}function uC(){var e=QT();return ZT(e,332),ZT(e,334,bE(1)),ZT(e,335,function(e){var t=$T(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),wE(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),ZT(e,336),ZT(e,339,function(e,t){var n=$T(8+2*t.length);return n.write_shift(4,e),wE(t,n),n.slice(0,n.l)}(1,"XLDAPR")),ZT(e,52),ZT(e,35,bE(514)),ZT(e,4096,bE(0)),ZT(e,4097,GA(1)),ZT(e,36),ZT(e,53),ZT(e,340),ZT(e,337,function(e,t){var n=$T(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),ZT(e,51,function(e){var t=$T(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),ZT(e,338),ZT(e,333),e.end()}function hC(){var e=[ck];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var dC=1024;function fC(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[qk("xml",null,{"xmlns:v":dT,"xmlns:o":oT,"xmlns:x":lT,"xmlns:mv":hT}).replace(/\/>/,">"),qk("o:shapelayout",qk("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),qk("v:shapetype",[qk("v:stroke",null,{joinstyle:"miter"}),qk("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];dC<1e3*e;)dC+=1e3;return t.forEach(function(e){var t=lE(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?qk("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=qk("v:fill",r,n);++dC,i=i.concat(["<v:shape"+Vk({id:"_x0000_s"+dC,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,qk("v:shadow",null,{on:"t",obscured:"t"}),qk("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",zk("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),zk("x:AutoFill","False"),zk("x:Row",String(t.r)),zk("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function pC(e,t,n,r){var i,s=Array.isArray(e);t.forEach(function(t){var a=lE(t.ref);if(s?(e[a.r]||(e[a.r]=[]),i=e[a.r][a.c]):i=e[t.ref],!i){i={t:"z"},s?e[a.r][a.c]=i:e[t.ref]=i;var o=dE(e["!ref"]||"BDWGO1000001:A1");o.s.r>a.r&&(o.s.r=a.r),o.e.r<a.r&&(o.e.r=a.r),o.s.c>a.c&&(o.s.c=a.c),o.e.c<a.c&&(o.e.c=a.c);var l=hE(o);l!==e["!ref"]&&(e["!ref"]=l)}i.c||(i.c=[]);var c={a:t.author,t:t.t,r:t.r,T:n};t.h&&(c.h=t.h);for(var u=i.c.length-1;u>=0;--u){if(!n&&i.c[u].T)return;n&&!i.c[u].T&&i.c.splice(u,1)}if(n&&r)for(u=0;u<r.length;++u)if(c.a==r[u].id){c.a=r[u].name||c.a;break}i.c.push(c)})}function mC(e){var t=[ck,qk("comments",null,{xmlns:aT[0]})],n=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var r=_k(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var r=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(r=n.indexOf(_k(e.a))),i.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),i.length<=1)t.push(zk("t",_k(i[0]||"")));else{for(var s="Comment:\n    "+i[0]+"\n",a=1;a<i.length;++a)s+="Reply:\n    "+i[a]+"\n";t.push(zk("t",_k(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function gC(e,t,n){var r=[ck,qk("ThreadedComments",null,{xmlns:Qk}).replace(/[\/]>/,">")];return e.forEach(function(e){var i="";(e[1]||[]).forEach(function(s,a){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==a?i=o.id:o.parentId=i,s.ID=o.id,s.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),r.push(qk("threadedComment",zk("text",s.t||""),o))}else delete s.ID})}),r.push("</ThreadedComments>"),r.join("")}var vC=yE;function bC(e){var t=QT(),n=[];return ZT(t,628),ZT(t,630),e.forEach(function(e){e[1].forEach(function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),ZT(t,632,function(e){return wE(e.slice(0,54))}(e.a)))})}),ZT(t,631),ZT(t,633),e.forEach(function(e){e[1].forEach(function(r){r.iauthor=n.indexOf(r.a);var i={s:lE(e[0]),e:lE(e[0])};ZT(t,635,function(e,t){return null==t&&(t=$T(36)),t.write_shift(4,e[1].iauthor),UE(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,r])),r.t&&r.t.length>0&&ZT(t,637,kE(r)),ZT(t,636),delete r.iauthor})}),ZT(t,634),ZT(t,629),t.end()}var yC=["xlsb","xlsm","xlam","biff8","xla"];var wC=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,i){var s=!1,a=!1;0==r.length?a=!0:"["==r.charAt(0)&&(a=!0,r=r.slice(1,-1)),0==i.length?s=!0:"["==i.charAt(0)&&(s=!0,i=i.slice(1,-1));var o=r.length>0?0|parseInt(r,10):0,l=i.length>0?0|parseInt(i,10):0;return s?l+=t.c:--l,a?o+=t.r:--o,n+(s?"":"$")+oE(l)+(a?"":"$")+sE(o)}return function(r,i){return t=i,r.replace(e,n)}}(),xC=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,_C=function(){return function(e,t){return e.replace(xC,function(e,n,r,i,s,a){var o=aE(i)-(r?0:t.c),l=iE(a)-(s?0:t.r);return n+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==o?"":r?o+1:"["+o+"]")})}}();function SC(e,t){return e.replace(xC,function(e,n,r,i,s,a){return n+("$"==r?r+i:oE(aE(i)+t.c))+("$"==s?s+a:sE(iE(a)+t.r))})}function kC(e,t,n){var r=uE(t).s,i=lE(n);return SC(e,{r:i.r-r.r,c:i.c-r.c})}function TC(e){return e.replace(/_xlfn\./g,"")}function EC(e){e.l+=1}function AC(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function NC(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return IC(e);12==n.biff&&(r=4)}var i=e.read_shift(r),s=e.read_shift(r),a=AC(e,2),o=AC(e,2);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function IC(e){var t=AC(e,2),n=AC(e,2),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function CC(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=AC(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),i=AC(e,2);return{r:r,c:i[0],cRel:i[1],rRel:i[2]}}function PC(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function LC(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function DC(e){return[e.read_shift(1),e.read_shift(1)]}function OC(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=qA(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=ZE[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=zE(e);break;case 2:n[1]=eN(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function RC(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),i=[],s=0;s!=r;++s)i.push((12==n.biff?BE:dN)(e,8));return i}function MC(e,t,n){var r=0,i=0;12==n.biff?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--i&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=OC(e,n.biff);return a}function FC(e,t,n){return e.l+=2,[PC(e)]}function jC(e){return e.l+=6,[]}function BC(e){return e.l+=2,[HA(e),1&e.read_shift(2)]}var UC=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var zC={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:XT},3:{n:"PtgAdd",f:EC},4:{n:"PtgSub",f:EC},5:{n:"PtgMul",f:EC},6:{n:"PtgDiv",f:EC},7:{n:"PtgPower",f:EC},8:{n:"PtgConcat",f:EC},9:{n:"PtgLt",f:EC},10:{n:"PtgLe",f:EC},11:{n:"PtgEq",f:EC},12:{n:"PtgGe",f:EC},13:{n:"PtgGt",f:EC},14:{n:"PtgNe",f:EC},15:{n:"PtgIsect",f:EC},16:{n:"PtgUnion",f:EC},17:{n:"PtgRange",f:EC},18:{n:"PtgUplus",f:EC},19:{n:"PtgUminus",f:EC},20:{n:"PtgPercent",f:EC},21:{n:"PtgParen",f:EC},22:{n:"PtgMissArg",f:EC},23:{n:"PtgStr",f:function(e,t,n){return e.l++,XA(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,ZE[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,zE(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[cP[i],lP[i],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],i=e.read_shift(1),s=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===s[0]?lP:oP)[s[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,s]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,CC(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,NC(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:XT},40:{n:"PtgMemNoMem",f:XT},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==i&&n>=128&&(n-=256),{r:t,c:n,cRel:i,rRel:r}}(e);var i=e.read_shift(r>=12?4:2),s=e.read_shift(2),a=(16384&s)>>14,o=(32768&s)>>15;if(s&=16383,1==o)for(;i>524287;)i-=1048576;if(1==a)for(;s>8191;)s-=16384;return{r:i,c:s,cRel:a,rRel:o}}(e,0,n);return[r,i]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=function(e,t,n){if(n.biff<8)return IC(e);var r=e.read_shift(12==n.biff?4:2),i=e.read_shift(12==n.biff?4:2),s=AC(e,2),a=AC(e,2);return{s:{r:r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}(e,0,n);return[r,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,i,CC(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,i,NC(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[r,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[r,i]}},255:{}},VC={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},qC={1:{n:"PtgElfLel",f:BC},2:{n:"PtgElfRw",f:FC},3:{n:"PtgElfCol",f:FC},6:{n:"PtgElfRwV",f:FC},7:{n:"PtgElfColV",f:FC},10:{n:"PtgElfRadical",f:FC},11:{n:"PtgElfRadicalS",f:jC},13:{n:"PtgElfColS",f:jC},15:{n:"PtgElfColSV",f:jC},16:{n:"PtgElfRadicalLel",f:BC},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&n,rt:UC[n>>2&31],idx:r,c:i,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},WC={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),i=[],s=0;s<=r;++s)i.push(e.read_shift(n&&2==n.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:LC},33:{n:"PtgAttrBaxcel",f:LC},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),DC(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),DC(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function HC(e,t,n,r){if(r.biff<8)return XT(e,t);for(var i=e.l+t,s=[],a=0;a!==n.length;++a)switch(n[a][0]){case"PtgArray":n[a][1]=MC(e,0,r),s.push(n[a][1]);break;case"PtgMemArea":n[a][2]=RC(e,n[a][1],r),s.push(n[a][2]);break;case"PtgExp":r&&12==r.biff&&(n[a][1][1]=e.read_shift(4),s.push(n[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[a][0]}return 0!==(t=i-e.l)&&s.push(XT(e,t)),s}function GC(e,t,n){for(var r,i,s=e.l+t,a=[];s!=e.l;)t=s-e.l,i=e[e.l],r=zC[i]||zC[VC[i]],24!==i&&25!==i||(r=(24===i?qC:WC)[e[e.l+1]]),r&&r.f?a.push([r.n,r.f(e,t,n)]):XT(e,t);return a}function KC(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],s=0;s<r.length;++s){var a=r[s];if(a)if(2===a[0])i.push('"'+a[1].replace(/"/g,'""')+'"');else i.push(a[1]);else i.push("")}t.push(i.join(","))}return t.join(";")}var YC={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function XC(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(i=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function $C(e,t,n){var r=XC(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function JC(e,t,n,r,i){var s,a,o,l,c=i&&i.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},h=[],d=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",v=0,b=e[0].length;v<b;++v){var y=e[0][v];switch(y[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=h.pop(),a=h.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=GS(" ",e[0][m][1][1]);break;case 1:g=GS("\r",e[0][m][1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}a+=g,m=-1}h.push(a+YC[y[0]]+s);break;case"PtgIsect":s=h.pop(),a=h.pop(),h.push(a+" "+s);break;case"PtgUnion":s=h.pop(),a=h.pop(),h.push(a+","+s);break;case"PtgRange":s=h.pop(),a=h.pop(),h.push(a+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=eE(y[1][1],u,i),h.push(nE(o,c));break;case"PtgRefN":o=n?eE(y[1][1],n,i):y[1][1],h.push(nE(o,c));break;case"PtgRef3d":d=y[1][1],o=eE(y[1][2],u,i);p=$C(r,d,i);h.push(p+"!"+nE(o,c));break;case"PtgFunc":case"PtgFuncVar":var w=y[1][0],x=y[1][1];w||(w=0);var _=0==(w&=127)?[]:h.slice(-w);h.length-=w,"User"===x&&(x=_.shift()),h.push(x+"("+_.join(",")+")");break;case"PtgBool":h.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":h.push(y[1]);break;case"PtgNum":h.push(String(y[1]));break;case"PtgStr":h.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=tE(y[1][1],n?{s:n}:u,i),h.push(rE(l,i));break;case"PtgArea":l=tE(y[1][1],u,i),h.push(rE(l,i));break;case"PtgArea3d":d=y[1][1],l=y[1][2],p=$C(r,d,i),h.push(p+"!"+rE(l,i));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgName":f=y[1][2];var S=(r.names||[])[f-1]||(r[0]||[])[f],k=S?S.Name:"SH33TJSNAME"+String(f);k&&"_xlfn."==k.slice(0,6)&&!i.xlfn&&(k=k.slice(6)),h.push(k);break;case"PtgNameX":var T,E=y[1][1];if(f=y[1][2],!(i.biff<=5)){var A="";if(14849==((r[E]||[])[0]||[])[0]||(1025==((r[E]||[])[0]||[])[0]?r[E][f]&&r[E][f].itab>0&&(A=r.SheetNames[r[E][f].itab-1]+"!"):A=r.SheetNames[f-1]+"!"),r[E]&&r[E][f])A+=r[E][f].Name;else if(r[0]&&r[0][f])A+=r[0][f].Name;else{var N=(XC(r,E,i)||"").split(";;");N[f-1]?A=N[f-1]:A+="SH33TJSERRX"}h.push(A);break}E<0&&(E=-E),r[E]&&(T=r[E][f]),T||(T={Name:"SH33TJSERRY"}),h.push(T.Name);break;case"PtgParen":var I="(",C=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:I=GS(" ",e[0][m][1][1])+I;break;case 3:I=GS("\r",e[0][m][1][1])+I;break;case 4:C=GS(" ",e[0][m][1][1])+C;break;case 5:C=GS("\r",e[0][m][1][1])+C;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}h.push(I+h.pop()+C);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":h.push("#REF!");break;case"PtgExp":o={c:y[1][1],r:y[1][0]};var P={c:n.c,r:n.r};if(r.sharedf[cE(o)]){var L=r.sharedf[cE(o)];h.push(JC(L,u,P,r,i))}else{var D=!1;for(s=0;s!=r.arrayf.length;++s)if(a=r.arrayf[s],!(o.c<a[0].s.c||o.c>a[0].e.c)&&!(o.r<a[0].s.r||o.r>a[0].e.r)){h.push(JC(a[1],u,P,r,i)),D=!0;break}D||h.push(y[1])}break;case"PtgArray":h.push("{"+KC(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=v;break;case"PtgMissArg":h.push("");break;case"PtgList":h.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=i.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var O=!0;switch((y=e[0][m])[1][0]){case 4:O=!1;case 0:g=GS(" ",y[1][1]);break;case 5:O=!1;case 1:g=GS("\r",y[1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}h.push((O?g:"")+h.pop()+(O?"":g)),m=-1}}if(h.length>1&&i.WTF)throw new Error("bad formula stack");return h[0]}function QC(e,t,n){var r,i=e.l+t,s=2==n.biff?1:2,a=e.read_shift(s);if(65535==a)return[[],XT(e,t-2)];var o=GC(e,a,n);return t!==a+s&&(r=HC(e,t-a-s,o,n)),e.l=i,[o,r]}function ZC(e,t,n){var r,i=e.l+t,s=e.read_shift(2),a=GC(e,s,n);return 65535==s?[[],XT(e,t-2)]:(t!==s+2&&(r=HC(e,i-s-2,a,n)),[a,r])}function eP(e,t,n){var r=e.l+t,i=lN(e);2==n.biff&&++e.l;var s=function(e){var t;if(65535!==FT(e,e.l+6))return[zE(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=1===e[e.l+2],e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),a=e.read_shift(1);2!=n.biff&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var o=function(e,t,n){var r,i=e.l+t,s=2==n.biff?1:2,a=e.read_shift(s);if(65535==a)return[[],XT(e,t-2)];var o=GC(e,a,n);return t!==a+s&&(r=HC(e,t-a-s,o,n)),e.l=i,[o,r]}(e,r-e.l,n);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function tP(e,t,n,r,i){var s=cN(t,n,i),a=function(e){if(null==e){var t=$T(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return VE("number"==typeof e?e:0)}(e.v),o=$T(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=$T(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return N_([s,a,o,l])}function nP(e,t,n){var r=e.read_shift(4),i=GC(e,r,n),s=e.read_shift(4);return[i,s>0?HC(e,s,i,n):null]}var rP=nP,iP=nP,sP=nP,aP=nP,oP={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},lP={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},cP={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function uP(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,t){return t.replace(/\./g,"")})).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function hP(e){return("of:="+e.replace(xC,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function dP(e){var t=e.split(":");return[t[0].split(".")[0],t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function fP(e){return e.replace(/\./,"!")}var pP={},mP={},gP="undefined"!==typeof Map;function vP(e,t,n){var r=0,i=e.length;if(n){if(gP?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var s=gP?n.get(t):n[t];r<s.length;++r)if(e[s[r]].t===t)return e.Count++,s[r]}else for(;r<i;++r)if(e[r].t===t)return e.Count++,r;return e[i]={t:t},e.Count++,e.Unique++,n&&(gP?(n.has(t)||n.set(t,[]),n.get(t).push(i)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(i))),i}function bP(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(SI=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=TI(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=EI(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function yP(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function wP(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],i=60,s=e.length;if(null==r&&n.ssf)for(;i<392;++i)if(null==n.ssf[i]){yS(t.z,i),n.ssf[i]=t.z,n.revssf[t.z]=r=i;break}for(i=0;i!=s;++i)if(e[i].numFmtId===r)return i;return e[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function xP(e,t,n,r,i,s){try{r.cellNF&&(e.z=U_[t])}catch(o){if(r.WTF)throw o}if("z"!==e.t||r.cellStyles){if("d"===e.t&&"string"===typeof e.v&&(e.v=qS(e.v)),(!r||!1!==r.cellText)&&"z"!==e.t)try{if(null==U_[t]&&yS(_S[t]||"General",t),"e"===e.t)e.w=e.w||ZE[e.v];else if(0===t)if("n"===e.t)(0|e.v)===e.v?e.w=e.v.toString(10):e.w=$_(e.v);else if("d"===e.t){var a=OS(e.v);e.w=(0|a)===a?a.toString(10):$_(a)}else{if(void 0===e.v)return"";e.w=J_(e.v,mP)}else"d"===e.t?e.w=bS(t,OS(e.v),mP):e.w=bS(t,e.v,mP)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&null!=n)try{e.s=s.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=_I(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),r.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=_I(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),r.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&s.Fills)throw o}}}function _P(e,t,n){if(e&&e["!ref"]){var r=dE(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var SP=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,kP=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,TP=/<(?:\w:)?hyperlink [^>]*>/gm,EP=/"(\w*:\w*)"/,AP=/<(?:\w:)?col\b[^>]*[\/]?>/g,NP=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,IP=/<(?:\w:)?pageMargins[^>]*\/>/g,CP=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,PP=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,LP=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function DP(e,t,n,r,i,s,a){if(!e)return e;r||(r={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",h=e.match(kP);h?(c=e.slice(0,h.index),u=e.slice(h.index+h[0].length)):c=u=e;var d=c.match(CP);d?OP(d[0],o,i,n):(d=c.match(PP))&&function(e,t,n,r,i){OP(e.slice(0,e.indexOf(">")),n,r,i)}(d[0],d[1],o,i,n);var f=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var p=c.slice(f,f+50).match(EP);p&&function(e,t){var n=dE(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=hE(n))}(o,p[1])}var m=c.match(LP);m&&m[1]&&function(e,t){t.Views||(t.Views=[{}]);(e.match(FP)||[]).forEach(function(e,n){var r=mk(e);t.Views[n]||(t.Views[n]={}),+r.zoomScale&&(t.Views[n].zoom=+r.zoomScale),Ak(r.rightToLeft)&&(t.Views[n].RTL=!0)})}(m[1],i);var g=[];if(t.cellStyles){var v=c.match(AP);v&&function(e,t){for(var n=!1,r=0;r!=t.length;++r){var i=mk(t[r],!0);i.hidden&&(i.hidden=Ak(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!n&&i.width&&(n=!0,NI(i.width)),II(i);s<=a;)e[s++]=HS(i)}}(g,v)}h&&BP(h[1],o,t,l,s,a);var b=u.match(NP);b&&(o["!autofilter"]=function(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}(b[0]));var y=[],w=u.match(SP);if(w)for(f=0;f!=w.length;++f)y[f]=dE(w[f].slice(w[f].indexOf('"')+1));var x=u.match(TP);x&&function(e,t,n){for(var r=Array.isArray(e),i=0;i!=t.length;++i){var s=mk(Lk(t[i]),!0);if(!s.ref)return;var a=((n||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+yk(s.location))):(s.Target="#"+yk(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=dE(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=cE({c:c,r:l});r?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=s):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=s)}}}(o,x,r);var _=u.match(IP);if(_&&(o["!margins"]=function(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(n){e[n]&&(t[n]=parseFloat(e[n]))}),t}(mk(_[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=hE(l)),t.sheetRows>0&&o["!ref"]){var S=dE(o["!ref"]);t.sheetRows<=+S.e.r&&(S.e.r=t.sheetRows-1,S.e.r>l.e.r&&(S.e.r=l.e.r),S.e.r<S.s.r&&(S.s.r=S.e.r),S.e.c>l.e.c&&(S.e.c=l.e.c),S.e.c<S.s.c&&(S.s.c=S.e.c),o["!fullref"]=o["!ref"],o["!ref"]=hE(S))}return g.length>0&&(o["!cols"]=g),y.length>0&&(o["!merges"]=y),o}function OP(e,t,n,r){var i=mk(e);n.Sheets[r]||(n.Sheets[r]={}),i.codeName&&(n.Sheets[r].CodeName=yk(Lk(i.codeName)))}var RP=["objects","scenarios","selectLockedCells","selectUnlockedCells"],MP=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];var FP=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function jP(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var i="",s=e.t,a=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=ZE[e.v];break;case"d":r&&r.cellDates?i=qS(e.v,-1).toISOString():((e=HS(e)).t="n",i=""+(e.v=OS(qS(e.v)))),"undefined"===typeof e.z&&(e.z=U_[14]);break;default:i=e.v}var o=zk("v",_k(i)),l={r:t},c=wP(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=zk("v",""+vP(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=a),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=qk("f",_k(e.f),u)+(null!=e.v?o:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),qk("c",o,l)}var BP=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=Ok("v"),a=Ok("f");return function(o,l,c,u,h,d){for(var f,p,m,g,v,b=0,y="",w=[],x=[],_=0,S=0,k=0,T="",E=0,A=0,N=0,I=0,C=Array.isArray(d.CellXf),P=[],L=[],D=Array.isArray(l),O=[],R={},M=!1,F=!!c.sheetStubs,j=o.split(t),B=0,U=j.length;B!=U;++B){var z=(y=j[B].trim()).length;if(0!==z){var V=0;e:for(b=0;b<z;++b)switch(y[b]){case">":if("/"!=y[b-1]){++b;break e}if(c&&c.cellStyles){if(E=null!=(p=mk(y.slice(V,b),!0)).r?parseInt(p.r,10):E+1,A=-1,c.sheetRows&&c.sheetRows<E)continue;R={},M=!1,p.ht&&(M=!0,R.hpt=parseFloat(p.ht),R.hpx=LI(R.hpt)),"1"==p.hidden&&(M=!0,R.hidden=!0),null!=p.outlineLevel&&(M=!0,R.level=+p.outlineLevel),M&&(O[E-1]=R)}break;case"<":V=b}if(V>=b)break;if(E=null!=(p=mk(y.slice(V,b),!0)).r?parseInt(p.r,10):E+1,A=-1,!(c.sheetRows&&c.sheetRows<E)){u.s.r>E-1&&(u.s.r=E-1),u.e.r<E-1&&(u.e.r=E-1),c&&c.cellStyles&&(R={},M=!1,p.ht&&(M=!0,R.hpt=parseFloat(p.ht),R.hpx=LI(R.hpt)),"1"==p.hidden&&(M=!0,R.hidden=!0),null!=p.outlineLevel&&(M=!0,R.level=+p.outlineLevel),M&&(O[E-1]=R)),w=y.slice(b).split(e);for(var q=0;q!=w.length&&"<"==w[q].trim().charAt(0);++q);for(w=w.slice(q),b=0;b!=w.length;++b)if(0!==(y=w[b].trim()).length){if(x=y.match(n),_=b,S=0,k=0,y="<c "+("<"==y.slice(0,1)?">":"")+y,null!=x&&2===x.length){for(_=0,T=x[1],S=0;S!=T.length&&!((k=T.charCodeAt(S)-64)<1||k>26);++S)_=26*_+k;A=--_}else++A;for(S=0;S!=y.length&&62!==y.charCodeAt(S);++S);if(++S,(p=mk(y.slice(0,S),!0)).r||(p.r=cE({r:E-1,c:A})),f={t:""},null!=(x=(T=y.slice(S)).match(s))&&""!==x[1]&&(f.v=yk(x[1])),c.cellFormula){if(null!=(x=T.match(a))&&""!==x[1]){if(f.f=yk(Lk(x[1])).replace(/\r\n/g,"\n"),c.xlfn||(f.f=TC(f.f)),x[0].indexOf('t="array"')>-1)f.F=(T.match(i)||[])[1],f.F.indexOf(":")>-1&&P.push([dE(f.F),f.F]);else if(x[0].indexOf('t="shared"')>-1){g=mk(x[0]);var W=yk(Lk(x[1]));c.xlfn||(W=TC(W)),L[parseInt(g.si,10)]=[g,W,p.r]}}else(x=T.match(/<f[^>]*\/>/))&&L[(g=mk(x[0])).si]&&(f.f=kC(L[g.si][1],L[g.si][2],p.r));var H=lE(p.r);for(S=0;S<P.length;++S)H.r>=P[S][0].s.r&&H.r<=P[S][0].e.r&&H.c>=P[S][0].s.c&&H.c<=P[S][0].e.c&&(f.F=P[S][1])}if(null==p.t&&void 0===f.v)if(f.f||f.F)f.v=0,f.t="n";else{if(!F)continue;f.t="z"}else f.t=p.t||"n";switch(u.s.c>A&&(u.s.c=A),u.e.c<A&&(u.e.c=A),f.t){case"n":if(""==f.v||null==f.v){if(!F)continue;f.t="z"}else f.v=parseFloat(f.v);break;case"s":if("undefined"==typeof f.v){if(!F)continue;f.t="z"}else m=pP[parseInt(f.v,10)],f.v=m.t,f.r=m.r,c.cellHTML&&(f.h=m.h);break;case"str":f.t="s",f.v=null!=f.v?Lk(f.v):"",c.cellHTML&&(f.h=Tk(f.v));break;case"inlineStr":x=T.match(r),f.t="s",null!=x&&(m=ZN(x[1]))?(f.v=m.t,c.cellHTML&&(f.h=m.h)):f.v="";break;case"b":f.v=Ak(f.v);break;case"d":c.cellDates?f.v=qS(f.v,1):(f.v=OS(qS(f.v,1)),f.t="n");break;case"e":c&&!1===c.cellText||(f.w=f.v),f.v=eA[f.v]}if(N=I=0,v=null,C&&void 0!==p.s&&null!=(v=d.CellXf[p.s])&&(null!=v.numFmtId&&(N=v.numFmtId),c.cellStyles&&null!=v.fillId&&(I=v.fillId)),xP(f,N,I,c,h,d),c.cellDates&&C&&"n"==f.t&&pS(U_[N])&&(f.t="d",f.v=jS(f.v)),p.cm&&c.xlmeta){var G=(c.xlmeta.Cell||[])[+p.cm-1];G&&"XLDAPR"==G.type&&(f.D=!0)}if(D){var K=lE(p.r);l[K.r]||(l[K.r]=[]),l[K.r][K.c]=f}else l[p.r]=f}}}}O.length>0&&(l["!rows"]=O)}}();function UP(e,t,n,r){var i,s=[ck,qk("worksheet",null,{xmlns:aT[0],"xmlns:r":nT})],a=n.SheetNames[e],o="",l=n.Sheets[a];null==l&&(l={});var c=l["!ref"]||"A1",u=dE(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=hE(u)}r||(r={}),l["!comments"]=[];var h=[];!function(e,t,n,r,i){var s=!1,a={},o=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(u){}s=!0,a.codeName=Dk(_k(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+qk("outlinePr",null,c)}(s||o)&&(i[i.length]=qk("sheetPr",o,a))}(l,n,e,t,s),s[s.length]=qk("dimension",null,{ref:c}),s[s.length]=function(e,t,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),qk("sheetViews",qk("sheetView",null,i),{})}(0,0,0,n),t.sheetFormat&&(s[s.length]=qk("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var n,r=["<cols>"],i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=qk("col",null,bP(i,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var n,r,i=[],s=[],a=dE(e["!ref"]),o="",l="",c=[],u=0,h=0,d=e["!rows"],f=Array.isArray(e),p={r:l},m=-1;for(h=a.s.c;h<=a.e.c;++h)c[h]=oE(h);for(u=a.s.r;u<=a.e.r;++u){for(s=[],l=sE(u),h=a.s.c;h<=a.e.c;++h){n=c[h]+l;var g=f?(e[u]||[])[h]:e[n];void 0!==g&&null!=(o=jP(g,n,e,t))&&s.push(o)}(s.length>0||d&&d[u])&&(p={r:l},d&&d[u]&&((r=d[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=PI(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level)),i[i.length]=qk("row",s.join(""),p))}if(d)for(;u<d.length;++u)d&&d[u]&&(p={r:u+1},(r=d[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=PI(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level),i[i.length]=qk("row","",p));return i.join("")}(l,t,0,0),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return RP.forEach(function(n){null!=e[n]&&e[n]&&(t[n]="1")}),MP.forEach(function(n){null==e[n]||e[n]||(t[n]="0")}),e.password&&(t.password=gI(e.password).toString(16).toUpperCase()),qk("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,n,r){var i="string"==typeof e.ref?e.ref:hE(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,a=uE(i);a.s.r==a.e.r&&(a.e.r=uE(t["!ref"]).e.r,i=hE(a));for(var o=0;o<s.length;++o){var l=s[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),qk("autoFilter",null,{ref:i})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+hE(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var d,f,p=-1,m=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(d={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=lA(r,-1,_k(e[1].Target).replace(/#.*$/,""),iA.HLINK),d["r:id"]="rId"+m),(p=e[1].Target.indexOf("#"))>-1&&(d.location=_k(e[1].Target.slice(p+1))),e[1].Tooltip&&(d.tooltip=_k(e[1].Tooltip)),s[s.length]=qk("hyperlink",null,d))}),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(yP(f=l["!margins"]),qk("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=zk("ignoredErrors",qk("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(m=lA(r,-1,"../drawings/drawing"+(e+1)+".xml",iA.DRAW),s[s.length]=qk("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=h),l["!comments"].length>0&&(m=lA(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",iA.VML),s[s.length]=qk("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function zP(e,t,n,r){var i=function(e,t,n){var r=$T(145),i=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var s=320;i.hpx?s=20*PI(i.hpx):i.hpt&&(s=20*i.hpt),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,d=-1,f=u<<10;f<u+1<<10;++f)c.c=f,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[cE(c)])&&(h<0&&(h=f),d=f);h<0||(++o,r.write_shift(4,h),r.write_shift(4,d))}var p=r.l;return r.l=l,r.write_shift(4,o),r.l=p,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(i.length>17||(t["!rows"]||[])[r])&&ZT(e,0,i)}var VP=BE,qP=UE;function WP(e){return[AE(e),zE(e),"n"]}var HP=BE,GP=UE;var KP=["left","right","top","bottom","header","footer"];function YP(e,t,n,r,i,s,a){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=HS(t)).z=t.z||U_[14],t.v=OS(qS(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:n,c:r};switch(l.s=wP(i.cellXfs,t,i),t.l&&s["!links"].push([cE(l),t.l]),t.c&&s["!comments"].push([cE(l),t.c]),t.t){case"s":case"str":return i.bookSST?(o=vP(i.Strings,t.v,i.revStrings),l.t="s",l.v=o,a?ZT(e,18,function(e,t,n){return null==n&&(n=$T(8)),NE(t,n),n.write_shift(4,t.v),n}(0,l)):ZT(e,7,function(e,t,n){return null==n&&(n=$T(12)),EE(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",a?ZT(e,17,function(e,t,n){return null==n&&(n=$T(8+4*e.v.length)),NE(t,n),wE(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):ZT(e,6,function(e,t,n){return null==n&&(n=$T(12+4*e.v.length)),EE(t,n),wE(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?a?ZT(e,13,function(e,t,n){return null==n&&(n=$T(8)),NE(t,n),FE(e.v,n),n}(t,l)):ZT(e,2,function(e,t,n){return null==n&&(n=$T(12)),EE(t,n),FE(e.v,n),n}(t,l)):a?ZT(e,16,function(e,t,n){return null==n&&(n=$T(12)),NE(t,n),VE(e.v,n),n}(t,l)):ZT(e,5,function(e,t,n){return null==n&&(n=$T(16)),EE(t,n),VE(e.v,n),n}(t,l)),!0;case"b":return l.t="b",a?ZT(e,15,function(e,t,n){return null==n&&(n=$T(5)),NE(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):ZT(e,4,function(e,t,n){return null==n&&(n=$T(9)),EE(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",a?ZT(e,14,function(e,t,n){return null==n&&(n=$T(8)),NE(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):ZT(e,3,function(e,t,n){return null==n&&(n=$T(9)),EE(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return a?ZT(e,12,function(e,t,n){return null==n&&(n=$T(4)),NE(t,n)}(0,l)):ZT(e,1,function(e,t,n){return null==n&&(n=$T(8)),EE(t,n)}(0,l)),!0}function XP(e,t){t&&t["!merges"]&&(ZT(e,177,function(e,t){return null==t&&(t=$T(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach(function(t){ZT(e,176,GP(t))}),ZT(e,178))}function $P(e,t){t&&t["!cols"]&&(ZT(e,390),t["!cols"].forEach(function(t,n){t&&ZT(e,60,function(e,t,n){null==n&&(n=$T(18));var r=bP(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof r.width&&(i|=2),t.level&&(i|=t.level<<8),n.write_shift(2,i),n}(n,t))}),ZT(e,391))}function JP(e,t){t&&t["!ref"]&&(ZT(e,648),ZT(e,649,function(e){var t=$T(24);return t.write_shift(4,4),t.write_shift(4,1),UE(e,t),t}(dE(t["!ref"]))),ZT(e,650))}function QP(e,t,n){t["!links"].forEach(function(t){if(t[1].Target){var r=lA(n,-1,t[1].Target.replace(/#.*$/,""),iA.HLINK);ZT(e,494,function(e,t){var n=$T(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));UE({s:lE(e[0]),e:lE(e[0])},n),RE("rId"+t,n);var r=e[1].Target.indexOf("#");return wE((-1==r?"":e[1].Target.slice(r+1))||"",n),wE(e[1].Tooltip||"",n),wE("",n),n.slice(0,n.l)}(t,r))}}),delete t["!links"]}function ZP(e,t,n){ZT(e,133),ZT(e,137,function(e,t,n){null==n&&(n=$T(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),ZT(e,138),ZT(e,134)}function eL(e,t){t["!protect"]&&ZT(e,535,function(e,t){return null==t&&(t=$T(66)),t.write_shift(2,e.password?gI(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?t.write_shift(4,null==e[n[0]]||e[n[0]]?0:1):t.write_shift(4,null!=e[n[0]]&&e[n[0]]?0:1)}),t}(t["!protect"]))}function tL(e,t,n,r){var i=QT(),s=n.SheetNames[e],a=n.Sheets[s]||{},o=s;try{n&&n.Workbook&&(o=n.Workbook.Sheets[e].CodeName||o)}catch(c){}var l=dE(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],ZT(i,129),(n.vbaraw||a["!outline"])&&ZT(i,147,function(e,t,n){null==n&&(n=$T(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return qE({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),CE(e,n),n.slice(0,n.l)}(o,a["!outline"])),ZT(i,148,qP(l)),ZP(i,0,n.Workbook),$P(i,a),function(e,t,n,r){var i,s=dE(t["!ref"]||"A1"),a="",o=[];ZT(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=c;++u){a=sE(u),zP(e,t,s,u);var h=!1;if(u<=s.e.r)for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(o[d]=oE(d)),i=o[d]+a;var f=l?(t[u]||[])[d]:t[i];h=!!f&&YP(e,f,u,d,r,t,h)}}ZT(e,146)}(i,a,0,t),eL(i,a),function(e,t,n,r){if(t["!autofilter"]){var i=t["!autofilter"],s="string"===typeof i.ref?i.ref:hE(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,o=uE(s);o.s.r==o.e.r&&(o.e.r=uE(t["!ref"]).e.r,s=hE(o));for(var l=0;l<a.length;++l){var c=a[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),ZT(e,161,UE(dE(s))),ZT(e,162)}}(i,a,n,e),XP(i,a),QP(i,a,r),a["!margins"]&&ZT(i,476,function(e,t){return null==t&&(t=$T(48)),yP(e),KP.forEach(function(n){VE(e[n],t)}),t}(a["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||JP(i,a),function(e,t,n,r){if(t["!comments"].length>0){var i=lA(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",iA.VML);ZT(e,551,RE("rId"+i)),t["!legacy"]=i}}(i,a,e,r),ZT(i,130),i.end()}function nL(e,t,n,r,i,s){var a=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(e){var t=function(e){var t,n=[],r=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach(function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);t&&(n[+t[1]]=r?+t[2]:t[2])});var i=yk((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach(function(e){t=e.replace(/<.*?>/g,"")}),[n,i,t]}(e);u.s.r=u.s.c=0,u.e.c=o,c=oE(o),t[0].forEach(function(e,n){a[c+sE(n)]={t:"n",v:e,z:t[1]},l=n}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=hE(u)),a}var rL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],iL=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],sL=[],aL=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function oL(e,t){for(var n=0;n!=e.length;++n)for(var r=e[n],i=0;i!=t.length;++i){var s=t[i];if(null==r[s[0]])r[s[0]]=s[1];else switch(s[2]){case"bool":"string"==typeof r[s[0]]&&(r[s[0]]=Ak(r[s[0]]));break;case"int":"string"==typeof r[s[0]]&&(r[s[0]]=parseInt(r[s[0]],10))}}}function lL(e,t){for(var n=0;n!=t.length;++n){var r=t[n];if(null==e[r[0]])e[r[0]]=r[1];else switch(r[2]){case"bool":"string"==typeof e[r[0]]&&(e[r[0]]=Ak(e[r[0]]));break;case"int":"string"==typeof e[r[0]]&&(e[r[0]]=parseInt(e[r[0]],10))}}}function cL(e){lL(e.WBProps,rL),lL(e.CalcPr,aL),oL(e.WBView,iL),oL(e.Sheets,sL),mP.date1904=Ak(e.WBProps.date1904)}var uL="][*?/\\".split("");function hL(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return uL.forEach(function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function dL(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,n){e.forEach(function(r,i){hL(r);for(var s=0;s<i;++s)if(r==e[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var a=t&&t[i]&&t[i].CodeName||r;if(95==a.charCodeAt(0)&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}(e.SheetNames,t,!!e.vbaraw);for(var n=0;n<e.SheetNames.length;++n)_P(e.Sheets[e.SheetNames[n]],e.SheetNames[n],n)}var fL=/<\w+:workbook/;function pL(e){var t=[ck];t[t.length]=qk("workbook",null,{xmlns:aT[0],"xmlns:r":nT});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(rL.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=qk("workbookPr",null,r);var i=e.Workbook&&e.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&i[s]&&i[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var a={name:_k(e.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden"}t[t.length]=qk("sheet",null,a)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=qk("definedName",_k(e.Ref),n))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function mL(e,t){return t||(t=$T(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),RE(e.strRelID,t),wE(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function gL(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function vL(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n=t.Workbook.Sheets,r=0,i=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&-1==i?i=r:1==n[r].Hidden&&-1==s&&(s=r);s>i||(ZT(e,135),ZT(e,158,function(e,t){return t||(t=$T(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(i)),ZT(e,136))}}function bL(e,t){var n=QT();return ZT(n,131),ZT(n,128,function(e,t){t||(t=$T(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return wE("SheetJS",t),wE(r_.version,t),wE(r_.version,t),wE("7262",t),t.length>t.l?t.slice(0,t.l):t}()),ZT(n,153,function(e,t){t||(t=$T(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),CE(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),vL(n,e),function(e,t){ZT(e,143);for(var n=0;n!=t.SheetNames.length;++n)ZT(e,156,mL({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));ZT(e,144)}(n,e),ZT(n,132),n.end()}function yL(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],i=!1;t||(t={}),t.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],sD[16]={n:"BrtFRTArchID$",f:gL},JT(e,function(e,o,l){switch(l){case 156:a.SheetNames.push(e.name),n.Sheets.push(e);break;case 153:n.WBProps=e;break;case 39:null!=e.Sheet&&(t.SID=e.Sheet),e.Ref=JC(e.Ptg,0,null,a,t),delete t.SID,delete e.Ptg,s.push(e);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:a[0].length?a.push([l,e]):a[0]=[l,e],a[a.length-1].XTI=[];break;case 362:0===a.length&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(e),a.XTI=a.XTI.concat(e);break;case 35:case 37:r.push(l),i=!0;break;case 36:case 38:r.pop(),i=!1;break;default:if(o.T);else if(!i||t.WTF&&37!=r[r.length-1]&&35!=r[r.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}},t),cL(n),n.Names=s,n.supbooks=a,n}(e,n):function(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,i="xmlns",s={},a=0;if(e.replace(dk,function(o,l){var c=mk(o);switch(gk(c[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":o.match(fL)&&(i="xmlns"+o.match(/<(\w+):/)[1]),n.xmlns=c[i];break;case"<fileVersion":delete c[0],n.AppVersion=c;break;case"<workbookPr":case"<workbookPr/>":rL.forEach(function(e){if(null!=c[e[0]])switch(e[2]){case"bool":n.WBProps[e[0]]=Ak(c[e[0]]);break;case"int":n.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:n.WBProps[e[0]]=c[e[0]]}}),c.codeName&&(n.WBProps.CodeName=Lk(c.codeName));break;case"<workbookView":case"<workbookView/>":delete c[0],n.WBView.push(c);break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=yk(Lk(c.name)),delete c[0],n.Sheets.push(c);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":r=!1;break;case"<definedName":(s={}).Name=Lk(c.name),c.comment&&(s.Comment=c.comment),c.localSheetId&&(s.Sheet=+c.localSheetId),Ak(c.hidden||"0")&&(s.Hidden=!0),a=l+o.length;break;case"</definedName>":s.Ref=yk(Lk(e.slice(a,l))),n.Names.push(s);break;case"<calcPr":case"<calcPr/>":delete c[0],n.CalcPr=c;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return o}),-1===aT.indexOf(n.xmlns))throw new Error("Unknown Namespace: "+n.xmlns);return cL(n),n}(e,n)}function wL(e,t,n,r,i,s,a,o){return".bin"===t.slice(-4)?function(e,t,n,r,i,s,a){if(!e)return e;var o=t||{};r||(r={"!id":{}});var l,c,u,h,d,f,p,m,g,v,b=o.dense?[]:{},y={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=[],x=!1,_=!1,S=[];o.biff=12,o["!row"]=0;var k=0,T=!1,E=[],A={},N=o.supbooks||i.supbooks||[[]];if(N.sharedf=A,N.arrayf=E,N.SheetNames=i.SheetNames||i.Sheets.map(function(e){return e.name}),!o.supbooks&&(o.supbooks=N,i.Names))for(var I=0;I<i.Names.length;++I)N[0][I+1]=i.Names[I];var C,P,L=[],D=[],O=!1;if(sD[16]={n:"BrtShortReal",f:WP},JT(e,function(e,t,I){if(!_)switch(I){case 148:l=e;break;case 0:c=e,o.sheetRows&&o.sheetRows<=c.r&&(_=!0),g=sE(d=c.r),o["!row"]=c.r,(e.hidden||e.hpt||null!=e.level)&&(e.hpt&&(e.hpx=LI(e.hpt)),D[e.r]=e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(u={t:e[2]},e[2]){case"n":u.v=e[1];break;case"s":m=pP[e[1]],u.v=m.t,u.r=m.r;break;case"b":u.v=!!e[1];break;case"e":u.v=e[1],!1!==o.cellText&&(u.w=ZE[u.v]);break;case"str":u.t="s",u.v=e[1];break;case"is":u.t="s",u.v=e[1].t}if((h=a.CellXf[e[0].iStyleRef])&&xP(u,h.numFmtId,null,o,s,a),f=-1==e[0].c?f+1:e[0].c,o.dense?(b[d]||(b[d]=[]),b[d][f]=u):b[oE(f)+g]=u,o.cellFormula){for(T=!1,k=0;k<E.length;++k){var R=E[k];c.r>=R[0].s.r&&c.r<=R[0].e.r&&f>=R[0].s.c&&f<=R[0].e.c&&(u.F=hE(R[0]),T=!0)}!T&&e.length>3&&(u.f=e[3])}if(y.s.r>c.r&&(y.s.r=c.r),y.s.c>f&&(y.s.c=f),y.e.r<c.r&&(y.e.r=c.r),y.e.c<f&&(y.e.c=f),o.cellDates&&h&&"n"==u.t&&pS(U_[h.numFmtId])){var M=W_(u.v);M&&(u.t="d",u.v=new Date(M.y,M.m-1,M.d,M.H,M.M,M.S,M.u))}C&&("XLDAPR"==C.type&&(u.D=!0),C=void 0),P&&(P=void 0);break;case 1:case 12:if(!o.sheetStubs||x)break;u={t:"z",v:void 0},f=-1==e[0].c?f+1:e[0].c,o.dense?(b[d]||(b[d]=[]),b[d][f]=u):b[oE(f)+g]=u,y.s.r>c.r&&(y.s.r=c.r),y.s.c>f&&(y.s.c=f),y.e.r<c.r&&(y.e.r=c.r),y.e.c<f&&(y.e.c=f),C&&("XLDAPR"==C.type&&(u.D=!0),C=void 0),P&&(P=void 0);break;case 176:S.push(e);break;case 49:C=((o.xlmeta||{}).Cell||[])[e-1];break;case 494:var F=r["!id"][e.relId];for(F?(e.Target=F.Target,e.loc&&(e.Target+="#"+e.loc),e.Rel=F):""==e.relId&&(e.Target="#"+e.loc),d=e.rfx.s.r;d<=e.rfx.e.r;++d)for(f=e.rfx.s.c;f<=e.rfx.e.c;++f)o.dense?(b[d]||(b[d]=[]),b[d][f]||(b[d][f]={t:"z",v:void 0}),b[d][f].l=e):(p=cE({c:f,r:d}),b[p]||(b[p]={t:"z",v:void 0}),b[p].l=e);break;case 426:if(!o.cellFormula)break;E.push(e),(v=o.dense?b[d][f]:b[oE(f)+g]).f=JC(e[1],0,{r:c.r,c:f},N,o),v.F=hE(e[0]);break;case 427:if(!o.cellFormula)break;A[cE(e[0].s)]=e[1],(v=o.dense?b[d][f]:b[oE(f)+g]).f=JC(e[1],0,{r:c.r,c:f},N,o);break;case 60:if(!o.cellStyles)break;for(;e.e>=e.s;)L[e.e--]={width:e.w/256,hidden:!!(1&e.flags),level:e.level},O||(O=!0,NI(e.w/256)),II(L[e.e+1]);break;case 161:b["!autofilter"]={ref:hE(e)};break;case 476:b["!margins"]=e;break;case 147:i.Sheets[n]||(i.Sheets[n]={}),e.name&&(i.Sheets[n].CodeName=e.name),(e.above||e.left)&&(b["!outline"]={above:e.above,left:e.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),e.RTL&&(i.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:x=!0;break;case 36:x=!1;break;case 37:w.push(I),x=!0;break;case 38:w.pop(),x=!1;break;default:if(t.T);else if(!x||o.WTF)throw new Error("Unexpected record 0x"+I.toString(16))}},o),delete o.supbooks,delete o["!row"],!b["!ref"]&&(y.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(b["!ref"]=hE(l||y)),o.sheetRows&&b["!ref"]){var R=dE(b["!ref"]);o.sheetRows<=+R.e.r&&(R.e.r=o.sheetRows-1,R.e.r>y.e.r&&(R.e.r=y.e.r),R.e.r<R.s.r&&(R.s.r=R.e.r),R.e.c>y.e.c&&(R.e.c=y.e.c),R.e.c<R.s.c&&(R.s.c=R.e.c),b["!fullref"]=b["!ref"],b["!ref"]=hE(R))}return S.length>0&&(b["!merges"]=S),L.length>0&&(b["!cols"]=L),D.length>0&&(b["!rows"]=D),b}(e,r,n,i,s,a,o):DP(e,r,n,i,s,a,o)}function xL(e,t,n,r,i,s,a,o){return".bin"===t.slice(-4)?function(e,t,n,r,i){if(!e)return e;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=[],o=!1;return JT(e,function(e,r,l){switch(l){case 550:s["!rel"]=e;break;case 651:i.Sheets[n]||(i.Sheets[n]={}),e.name&&(i.Sheets[n].CodeName=e.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:a.push(l);break;case 38:a.pop();break;default:if(r.T>0)a.push(l);else if(r.T<0)a.pop();else if(!o||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}},t),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}(e,r,n,i,s):function(e,t,n,r,i){if(!e)return e;r||(r={"!id":{}});var s,a={"!type":"chart","!drawel":null,"!rel":""},o=e.match(CP);return o&&OP(o[0],0,i,n),(s=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=s[1]),r["!id"][a["!rel"]]&&(a["!drawel"]=r["!id"][a["!rel"]]),a}(e,0,n,i,s)}function _L(e,t,n,r){return".bin"===t.slice(-4)?function(e,t,n){var r={NumberFmt:[]};for(var i in U_)r.NumberFmt[i]=U_[i];r.CellXf=[],r.Fonts=[];var s=[],a=!1;return JT(e,function(e,i,o){switch(o){case 44:r.NumberFmt[e[0]]=e[1],yS(e[1],e[0]);break;case 43:r.Fonts.push(e),null!=e.color.theme&&t&&t.themeElements&&t.themeElements.clrScheme&&(e.color.rgb=_I(t.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==s[s.length-1]&&r.CellXf.push(e);break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(o),a=!0;break;case 38:s.pop(),a=!1;break;default:if(i.T>0)s.push(o);else if(i.T<0)s.pop();else if(!a||n.WTF&&37!=s[s.length-1])throw new Error("Unexpected record 0x"+o.toString(16))}}),r}(e,n,r):MI(e,n,r)}function SL(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n=[],r=!1;return JT(e,function(e,i,s){switch(s){case 159:n.Count=e[0],n.Unique=e[1];break;case 19:n.push(e);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(i.T,!r||t.WTF)throw new Error("Unexpected record 0x"+s.toString(16))}}),n}(e,n):function(e,t){var n=[],r="";if(!e)return n;var i=e.match(eI);if(i){r=i[2].replace(tI,"").split(nI);for(var s=0;s!=r.length;++s){var a=ZN(r[s].trim(),t);null!=a&&(n[n.length]=a)}i=mk(i[1]),n.Count=i.count,n.Unique=i.uniqueCount}return n}(e,n)}function kL(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n=[],r=[],i={},s=!1;return JT(e,function(e,a,o){switch(o){case 632:r.push(e);break;case 635:i=e;break;case 637:i.t=e.t,i.h=e.h,i.r=e.r;break;case 636:if(i.author=r[i.iauthor],delete i.iauthor,t.sheetRows&&i.rfx&&t.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,n.push(i);break;case 3072:case 37:case 38:break;case 35:s=!0;break;case 36:s=!1;break;default:if(a.T);else if(!s||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}(e,n):function(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],i=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(e){if(""!==e&&""!==e.trim()){var t=e.match(/<(?:\w+:)?author[^>]*>(.*)/);t&&n.push(t[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(e){if(""!==e&&""!==e.trim()){var i=e.match(/<(?:\w+:)?comment[^>]*>/);if(i){var s=mk(i[0]),a={author:s.authorId&&n[s.authorId]||"sheetjsghost",ref:s.ref,guid:s.guid},o=lE(s.ref);if(!(t.sheetRows&&t.sheetRows<=o.r)){var l=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),c=!!l&&!!l[1]&&ZN(l[1])||{r:"",t:"",h:""};a.r=c.r,"<t></t>"==c.r&&(c.t=c.h=""),a.t=(c.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.cellHTML&&(a.h=c.h),r.push(a)}}}}),r}(e,n)}function TL(e,t,n){return".bin"===t.slice(-4)?function(e){var t=[];return JT(e,function(e,n,r){if(63===r)t.push(e);else if(!n.T)throw new Error("Unexpected record 0x"+r.toString(16))}),t}(e):function(e){var t=[];if(!e)return t;var n=1;return(e.match(dk)||[]).forEach(function(e){var r=mk(e);switch(r[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete r[0],r.i?n=r.i:r.i=n,t.push(r)}}),t}(e)}function EL(e,t,n,r){if(".bin"===n.slice(-4))return function(e,t,n,r){if(!e)return e;var i=r||{},s=!1;JT(e,function(e,t,n){switch(n){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(t.T);else if(!s||i.WTF)throw new Error("Unexpected record 0x"+n.toString(16))}},i)}(e,0,0,r)}function AL(e,t,n){return".bin"===t.slice(-4)?function(e,t,n){var r={Types:[],Cell:[],Value:[]},i=n||{},s=[],a=!1,o=2;return JT(e,function(e,t,n){switch(n){case 335:r.Types.push({name:e.name});break;case 51:e.forEach(function(e){1==o?r.Cell.push({type:r.Types[e[0]-1].name,index:e[1]}):0==o&&r.Value.push({type:r.Types[e[0]-1].name,index:e[1]})});break;case 337:o=e?1:0;break;case 338:o=2;break;case 35:s.push(n),a=!0;break;case 36:s.pop(),a=!1;break;default:if(t.T);else if(!a||i.WTF&&35!=s[s.length-1])throw new Error("Unexpected record 0x"+n.toString(16))}}),r}(e,0,n):function(e,t,n){var r={Types:[],Cell:[],Value:[]};if(!e)return r;var i,s=!1,a=2;return e.replace(dk,function(e){var t=mk(e);switch(gk(t[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":r.Types.push({name:t.name});break;case"<futureMetadata":for(var o=0;o<r.Types.length;++o)r.Types[o].name==t.name&&(i=r.Types[o]);break;case"<rc":1==a?r.Cell.push({type:r.Types[t.t-1].name,index:+t.v}):0==a&&r.Value.push({type:r.Types[t.t-1].name,index:+t.v});break;case"<cellMetadata":a=1;break;case"</cellMetadata>":case"</valueMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+t.i);break;default:if(!s&&n.WTF)throw new Error("unrecognized "+t[0]+" in metadata")}return e}),r}(e,0,n)}function NL(e,t,n,r,i){return(".bin"===t.slice(-4)?tL:UP)(e,n,r,i)}function IL(e,t,n){return(".bin"===t.slice(-4)?bC:mC)(e,n)}var CL,PL=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,LL=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function DL(e,t){var n=e.split(/\s+/),r=[];if(t||(r[0]=n[0]),1===n.length)return r;var i,s,a,o=e.match(PL);if(o)for(a=0;a!=o.length;++a)-1===(s=(i=o[a].match(LL))[1].indexOf(":"))?r[i[1]]=i[2].slice(1,i[2].length-1):r["xmlns:"===i[1].slice(0,6)?"xmlns"+i[1].slice(6):i[1].slice(s+1)]=i[2].slice(1,i[2].length-1);return r}function OL(e){var t={};if(1===e.split(/\s+/).length)return t;var n,r,i,s=e.match(PL);if(s)for(i=0;i!=s.length;++i)-1===(r=(n=s[i].match(LL))[1].indexOf(":"))?t[n[1]]=n[2].slice(1,n[2].length-1):t["xmlns:"===n[1].slice(0,6)?"xmlns"+n[1].slice(6):n[1].slice(r+1)]=n[2].slice(1,n[2].length-1);return t}function RL(e,t,n,r){var i=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Ak(r);break;case"i2":case"int":i=parseInt(r,10);break;case"r4":case"float":i=parseFloat(r);break;case"date":case"dateTime.tz":i=qS(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[yk(t)]=i}function ML(e,t,n){if("z"!==e.t){if(!n||!1!==n.cellText)try{"e"===e.t?e.w=e.w||ZE[e.v]:"General"===t?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=$_(e.v):e.w=J_(e.v):e.w=function(e,t){var n=CL[e]||yk(e);return"General"===n?J_(t):bS(n,t)}(t||"General",e.v)}catch(s){if(n.WTF)throw s}try{var r=CL[t]||t||"General";if(n.cellNF&&(e.z=r),n.cellDates&&"n"==e.t&&pS(r)){var i=W_(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(n.WTF)throw s}}}function FL(e,t,n){if(n.cellStyles&&t.Interior){var r=t.Interior;r.Pattern&&(r.patternType=DI[r.Pattern]||r.Pattern)}e[t.ID]=t}function jL(e,t,n,r,i,s,a,o,l,c){var u="General",h=r.StyleID,d={};c=c||{};var f=[],p=0;for(void 0===h&&o&&(h=o.StyleID),void 0===h&&a&&(h=a.StyleID);void 0!==s[h]&&(s[h].nf&&(u=s[h].nf),s[h].Interior&&f.push(s[h].Interior),s[h].Parent);)h=s[h].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=Ak(e);break;case"String":r.t="s",r.r=Ek(yk(e)),r.v=e.indexOf("<")>-1?yk(t||e).replace(/<.*?>/g,""):r.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),r.v=(qS(e)-new Date(Date.UTC(1899,11,30)))/864e5,r.v!==r.v?r.v=yk(e):r.v<60&&(r.v=r.v-1),u&&"General"!=u||(u="yyyy-mm-dd");case"Number":void 0===r.v&&(r.v=+e),r.t||(r.t="n");break;case"Error":r.t="e",r.v=eA[e],!1!==c.cellText&&(r.w=e);break;default:""==e&&""==t?r.t="z":(r.t="s",r.v=Ek(t||e))}if(ML(r,u,c),!1!==c.cellFormula)if(r.Formula){var m=yk(r.Formula);61==m.charCodeAt(0)&&(m=m.slice(1)),r.f=wC(m,i),delete r.Formula,"RC"==r.ArrayRange?r.F=wC("RC:RC",i):r.ArrayRange&&(r.F=wC(r.ArrayRange,i),l.push([dE(r.F),r.F]))}else for(p=0;p<l.length;++p)i.r>=l[p][0].s.r&&i.r<=l[p][0].e.r&&i.c>=l[p][0].s.c&&i.c<=l[p][0].e.c&&(r.F=l[p][1]);c.cellStyles&&(f.forEach(function(e){!d.patternType&&e.patternType&&(d.patternType=e.patternType)}),r.s=d),void 0!==r.StyleID&&(r.ixfe=r.StyleID)}function BL(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function UL(e,t){var n=t||{};xS();var r=p_(Hk(e));"binary"!=n.type&&"array"!=n.type&&"base64"!=n.type||(r="undefined"!==typeof f_?f_.utils.decode(65001,h_(r)):Lk(r));var i,s=r.slice(0,1024).toLowerCase(),a=!1;if((1023&(s=s.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&s.indexOf(","),1023&s.indexOf(";"))){var o=HS(n);return o.type="string",GN.to_workbook(r,o)}if(-1==s.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach(function(e){s.indexOf("<"+e)>=0&&(a=!0)}),a)return function(e,t){var n=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||0==n.length)throw new Error("Invalid HTML: could not find <table>");if(1==n.length)return mE(vD(n[0],t),t);var r={SheetNames:[],Sheets:{}};return n.forEach(function(e,n){RO(r,vD(e,t),"Sheet"+(n+1))}),r}(r,n);CL={"General Number":"General","General Date":U_[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":U_[15],"Short Date":U_[14],"Long Time":U_[19],"Medium Time":U_[18],"Short Time":U_[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:U_[2],Standard:U_[4],Percent:U_[10],Scientific:U_[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[];var u,h={},d=[],f=n.dense?[]:{},p="",m={},g={},v=DL('<Data ss:Type="String">'),b=0,y=0,w=0,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},_={},S={},k="",T=0,E=[],A={},N={},I=0,C=[],P=[],L={},D=[],O=!1,R=[],M=[],F={},j=0,B=0,U={Sheets:[],WBProps:{date1904:!1}},z={};Gk.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/gm,"");for(var V="";i=Gk.exec(r);)switch(i[3]=(V=i[3]).toLowerCase()){case"data":if("data"==V){if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&c.push([i[3],!0]);break}if(c[c.length-1][1])break;"/"===i[1]?jL(r.slice(b,i.index),k,v,"comment"==c[c.length-1][0]?L:m,{c:y,r:w},_,D[y],g,R,n):(k="",v=DL(i[0]),b=i.index+i[0].length);break;case"cell":if("/"===i[1])if(P.length>0&&(m.c=P),(!n.sheetRows||n.sheetRows>w)&&void 0!==m.v&&(n.dense?(f[w]||(f[w]=[]),f[w][y]=m):f[oE(y)+sE(w)]=m),m.HRef&&(m.l={Target:yk(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(j=y+(0|parseInt(m.MergeAcross,10)),B=w+(0|parseInt(m.MergeDown,10)),E.push({s:{c:y,r:w},e:{c:j,r:B}})),n.sheetStubs)if(m.MergeAcross||m.MergeDown){for(var q=y;q<=j;++q)for(var W=w;W<=B;++W)(q>y||W>w)&&(n.dense?(f[W]||(f[W]=[]),f[W][q]={t:"z"}):f[oE(q)+sE(W)]={t:"z"});y=j+1}else++y;else m.MergeAcross?y=j+1:++y;else(m=OL(i[0])).Index&&(y=+m.Index-1),y<x.s.c&&(x.s.c=y),y>x.e.c&&(x.e.c=y),"/>"===i[0].slice(-2)&&++y,P=[];break;case"row":"/"===i[1]||"/>"===i[0].slice(-2)?(w<x.s.r&&(x.s.r=w),w>x.e.r&&(x.e.r=w),"/>"===i[0].slice(-2)&&(g=DL(i[0])).Index&&(w=+g.Index-1),y=0,++w):((g=DL(i[0])).Index&&(w=+g.Index-1),F={},("0"==g.AutoFitHeight||g.Height)&&(F.hpx=parseInt(g.Height,10),F.hpt=PI(F.hpx),M[w]=F),"1"==g.Hidden&&(F.hidden=!0,M[w]=F));break;case"worksheet":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"));d.push(p),x.s.r<=x.e.r&&x.s.c<=x.e.c&&(f["!ref"]=hE(x),n.sheetRows&&n.sheetRows<=x.e.r&&(f["!fullref"]=f["!ref"],x.e.r=n.sheetRows-1,f["!ref"]=hE(x))),E.length&&(f["!merges"]=E),D.length>0&&(f["!cols"]=D),M.length>0&&(f["!rows"]=M),h[p]=f}else x={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=y=0,c.push([i[3],!1]),l=DL(i[0]),p=yk(l.Name),f=n.dense?[]:{},E=[],R=[],M=[],z={name:p,Hidden:0},U.Sheets.push(z);break;case"table":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==i[0].slice(-2))break;c.push([i[3],!1]),D=[],O=!1}break;case"style":"/"===i[1]?FL(_,S,n):S=DL(i[0]);break;case"numberformat":S.nf=yk(DL(i[0]).Format||"General"),CL[S.nf]&&(S.nf=CL[S.nf]);for(var H=0;392!=H&&U_[H]!=S.nf;++H);if(392==H)for(H=57;392!=H;++H)if(null==U_[H]){yS(S.nf,H);break}break;case"column":if("table"!==c[c.length-1][0])break;if((u=DL(i[0])).Hidden&&(u.hidden=!0,delete u.Hidden),u.Width&&(u.wpx=parseInt(u.Width,10)),!O&&u.wpx>10){O=!0,SI=6;for(var G=0;G<D.length;++G)D[G]&&II(D[G])}O&&II(u),D[u.Index-1||D.length]=u;for(var K=0;K<+u.Span;++K)D[D.length]=HS(u);break;case"namedrange":if("/"===i[1])break;U.Names||(U.Names=[]);var Y=mk(i[0]),X={Name:Y.Name,Ref:wC(Y.RefersTo.slice(1),{r:0,c:0})};U.Sheets.length>0&&(X.Sheet=U.Sheets.length-1),U.Names.push(X);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===i[0].slice(-2))break;"/"===i[1]?k+=r.slice(T,i.index):T=i.index+i[0].length;break;case"interior":if(!n.cellStyles)break;S.Interior=DL(i[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===i[0].slice(-2))break;"/"===i[1]?TA(A,V,r.slice(I,i.index)):I=i.index+i[0].length;break;case"styles":case"workbook":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else c.push([i[3],!1]);break;case"comment":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"));BL(L),P.push(L)}else c.push([i[3],!1]),L={a:(l=DL(i[0])).Author};break;case"autofilter":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==i[0].charAt(i[0].length-2)){var $=DL(i[0]);f["!autofilter"]={ref:wC($.Range).replace(/\$/g,"")},c.push([i[3],!0])}break;case"datavalidation":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&c.push([i[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&c.push([i[3],!0]);break;default:if(0==c.length&&"document"==i[3])return CD(r,n);if(0==c.length&&"uof"==i[3])return CD(r,n);var J=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(i[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:J=!1}break;case"componentoptions":switch(i[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:J=!1}break;case"excelworkbook":switch(i[3]){case"date1904":U.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:J=!1}break;case"workbookoptions":switch(i[3]){case"owcversion":case"height":case"width":break;default:J=!1}break;case"worksheetoptions":switch(i[3]){case"visible":if("/>"===i[0].slice(-2));else if("/"===i[1])switch(r.slice(I,i.index)){case"SheetHidden":z.Hidden=1;break;case"SheetVeryHidden":z.Hidden=2}else I=i.index+i[0].length;break;case"header":f["!margins"]||yP(f["!margins"]={},"xlml"),isNaN(+mk(i[0]).Margin)||(f["!margins"].header=+mk(i[0]).Margin);break;case"footer":f["!margins"]||yP(f["!margins"]={},"xlml"),isNaN(+mk(i[0]).Margin)||(f["!margins"].footer=+mk(i[0]).Margin);break;case"pagemargins":var Q=mk(i[0]);f["!margins"]||yP(f["!margins"]={},"xlml"),isNaN(+Q.Top)||(f["!margins"].top=+Q.Top),isNaN(+Q.Left)||(f["!margins"].left=+Q.Left),isNaN(+Q.Right)||(f["!margins"].right=+Q.Right),isNaN(+Q.Bottom)||(f["!margins"].bottom=+Q.Bottom);break;case"displayrighttoleft":U.Views||(U.Views=[]),U.Views[0]||(U.Views[0]={}),U.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;default:J=!1}break;case"pivottable":case"pivotcache":switch(i[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:J=!1}break;case"pagebreaks":switch(i[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:J=!1}break;case"autofilter":switch(i[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:J=!1}break;case"querytable":switch(i[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:J=!1}break;case"datavalidation":switch(i[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:J=!1}break;case"sorting":case"conditionalformatting":switch(i[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:J=!1}break;case"mapinfo":case"schema":case"data":switch(i[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:J=!1}break;case"smarttags":break;default:J=!1}if(J)break;if(i[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+i[3]+"|"+c.join("|");if("customdocumentproperties"===c[c.length-1][0]){if("/>"===i[0].slice(-2))break;"/"===i[1]?RL(N,V,C,r.slice(I,i.index)):(C=i,I=i.index+i[0].length);break}if(n.WTF)throw"Unrecognized tag: "+i[3]+"|"+c.join("|")}var Z={};return n.bookSheets||n.bookProps||(Z.Sheets=h),Z.SheetNames=d,Z.Workbook=U,Z.SSF=HS(U_),Z.Props=A,Z.Custprops=N,Z}function zL(e,t){switch(lO(t=t||{}),t.type||"base64"){case"base64":return UL(y_(e),t);case"binary":case"buffer":case"file":return UL(e,t);case"array":return UL(E_(e),t)}}function VL(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return IS(kA).map(function(e){for(var t=0;t<dA.length;++t)if(dA[t][1]==e)return dA[t];for(t=0;t<vA.length;++t)if(vA[t][1]==e)return vA[t];throw e}).forEach(function(r){if(null!=e[r[1]]){var i=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(zk(kA[r[1]]||r[1],i))}}),qk("DocumentProperties",n.join(""),{xmlns:oT})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return e&&IS(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<dA.length;++r)if(t==dA[r][1])return;for(r=0;r<vA.length;++r)if(t==vA[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var s=e[t],a="string";"number"==typeof s?(a="float",s=String(s)):!0===s||!1===s?(a="boolean",s=s?"1":"0"):s=String(s),i.push(qk(Sk(t),s,{"dt:dt":a}))}}),t&&IS(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],s="string";"number"==typeof r?(s="float",r=String(r)):!0===r||!1===r?(s="boolean",r=r?"1":"0"):r instanceof Date?(s="dateTime.tz",r=r.toISOString()):r=String(r),i.push(qk(Sk(n),r,{"dt:dt":s}))}}),"<"+r+' xmlns="'+oT+'">'+i.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function qL(e){return qk("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+_C(e.Ref,{r:0,c:0})})}function WL(e,t,n,r,i,s,a){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+_k(_C(e.f,a))),e.F&&e.F.slice(0,t.length)==t){var l=lE(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=_k(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=_k(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c==a.c&&c[u].s.r==a.r&&(c[u].e.c>c[u].s.c&&(o["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(o["ss:MergeDown"]=c[u].e.r-c[u].s.r));var h="",d="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",d=String(e.v);break;case"b":h="Boolean",d=e.v?"1":"0";break;case"e":h="Error",d=ZE[e.v];break;case"d":h="DateTime",d=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||U_[14]);break;case"s":h="String",d=((e.v||"")+"").replace(wk,function(e){return bk[e]}).replace(kk,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var f=wP(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=a.c+1;var p=null!=e.v?d:"",m="z"==e.t?"":'<Data ss:Type="'+h+'">'+p+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map(function(e){var t=qk("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return qk("Comment",t,{"ss:Author":e.a})}).join("")),qk("Cell",m,o)}function HL(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=LI(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function GL(e,t,n){var r=[],i=n.SheetNames[e],s=n.Sheets[i],a=s?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||s.push(qL(o)))}return s.join("")}(s,0,e,n):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?function(e,t){if(!e["!ref"])return"";var n=dE(e["!ref"]),r=e["!merges"]||[],i=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){II(e);var n=!!e.width,r=bP(t,e),i={"ss:Index":t+1};n&&(i["ss:Width"]=kI(r.width)),e.hidden&&(i["ss:Hidden"]="1"),s.push(qk("Column",null,i))});for(var a=Array.isArray(e),o=n.s.r;o<=n.e.r;++o){for(var l=[HL(o,(e["!rows"]||[])[o])],c=n.s.c;c<=n.e.c;++c){var u=!1;for(i=0;i!=r.length;++i)if(!(r[i].s.c>c)&&!(r[i].s.r>o)&&!(r[i].e.c<c)&&!(r[i].e.r<o)){r[i].s.c==c&&r[i].s.r==o||(u=!0);break}if(!u){var h={r:o,c:c},d=cE(h),f=a?(e[o]||[])[c]:e[d];l.push(WL(f,d,e,t,0,0,h))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(qk("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(qk("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(qk("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(qk("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&(!r.Workbook.Sheets[s]||r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(zk("ProtectContents","True")),e["!protect"].objects&&i.push(zk("ProtectObjects","True")),e["!protect"].scenarios&&i.push(zk("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(zk("EnableSelection","UnlockedCells")):i.push(zk("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")})),0==i.length?"":qk("WorksheetOptions",i.join(""),{xmlns:lT})}(s,0,e,n)),r.join("")}function KL(e,t){t||(t={}),e.SSF||(e.SSF=HS(U_)),e.SSF&&(xS(),wS(e.SSF),t.revssf=LS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],wP(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(VL(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(qk("Worksheet",GL(r,t,e),{"ss:Name":_k(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var r=[];r.push(qk("NumberFormat",null,{"ss:Format":_k(U_[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};n.push(qk("Style",r.join(""),i))}),qk("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var i=t[r];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||n.push(qL(i)))}return qk("Names",n.join(""))}(e),ck+qk("Workbook",n.join(""),{xmlns:cT,"xmlns:o":oT,"xmlns:x":lT,"xmlns:ss":cT,"xmlns:dt":uT,"xmlns:html":fT})}function YL(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=function(e){return WE(e,1)}(n),n.length-n.l<=4)return t;var r=n.read_shift(4);return 0==r||r>40?t:(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4||1907505652!==(r=n.read_shift(4))?t:(t.UnicodeClipboardFormat=function(e){return WE(e,2)}(n),0==(r=n.read_shift(4))||r>40?t:(n.l-=4,void(t.Reserved2=n.read_shift(0,"lpwstr")))))}var XL=[60,1084,2066,2165,2175];function $L(e,t,n,r,i){var s=r,a=[],o=n.slice(n.l,n.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:i.enc.insitu(o)}a.push(o),n.l+=s;for(var l=FT(n,n.l),c=aD[l],u=0;null!=c&&XL.indexOf(l)>-1;)s=FT(n,n.l+2),u=n.l+4,2066==l?u+=4:2165!=l&&2175!=l||(u+=12),o=n.slice(u,n.l+4+s),a.push(o),n.l+=4+s,c=aD[l=FT(n,n.l)];var h=N_(a);YT(h,0);var d=0;h.lens=[];for(var f=0;f<a.length;++f)h.lens.push(d),d+=a[f].length;if(h.length<r)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+r;return t.f(h,h.length,i)}function JL(e,t,n){if("z"!==e.t&&e.XF){var r=0;try{r=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=U_[r])}catch(s){if(t.WTF)throw s}if(!t||!1!==t.cellText)try{"e"===e.t?e.w=e.w||ZE[e.v]:0===r||"General"==r?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=$_(e.v):e.w=J_(e.v):e.w=bS(r,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&r&&"n"==e.t&&pS(U_[r]||String(r))){var i=W_(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function QL(e,t,n){return{v:e,ixfe:t,t:n}}function ZL(e,t){var n={opts:{}},r={};var i,s,a,o,l,c,u,h,d=t.dense?[]:{},f={},p={},m=null,g=[],v="",b={},y="",w={},x=[],_=[],S=[],k={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},E=function(e){return e<8?QE[e]:e<64&&S[e-8]||QE[e]},A=function(e,t,n){if(!(F>1)&&!(n.sheetRows&&e.r>=n.sheetRows)){if(n.cellStyles&&t.XF&&t.XF.data&&function(e,t,n){var r,i=t.XF.data;i&&i.patternType&&n&&n.cellStyles&&(t.s={},t.s.patternType=i.patternType,(r=xI(E(i.icvFore)))&&(t.s.fgColor={rgb:r}),(r=xI(E(i.icvBack)))&&(t.s.bgColor={rgb:r}))}(0,t,n),delete t.ixfe,delete t.XF,i=e,y=cE(e),p&&p.s&&p.e||(p={s:{r:0,c:0},e:{r:0,c:0}}),e.r<p.s.r&&(p.s.r=e.r),e.c<p.s.c&&(p.s.c=e.c),e.r+1>p.e.r&&(p.e.r=e.r+1),e.c+1>p.e.c&&(p.e.c=e.c+1),n.cellFormula&&t.f)for(var r=0;r<x.length;++r)if(!(x[r][0].s.c>e.c||x[r][0].s.r>e.r)&&!(x[r][0].e.c<e.c||x[r][0].e.r<e.r)){t.F=hE(x[r][0]),x[r][0].s.c==e.c&&x[r][0].s.r==e.r||delete t.f,t.f&&(t.f=""+JC(x[r][1],0,e,O,N));break}n.dense?(d[e.r]||(d[e.r]=[]),d[e.r][e.c]=t):d[y]=t}},N={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:x,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(N.password=t.password);var I=[],C=[],P=[],L=[],D=!1,O=[];O.SheetNames=N.snames,O.sharedf=N.sharedf,O.arrayf=N.arrayf,O.names=[],O.XTI=[];var R,M=0,F=0,j=0,B=[],U=[];N.codepage=1200,c_(1200);for(var z=!1;e.l<e.length-1;){var V=e.l,q=e.read_shift(2);if(0===q&&10===M)break;var W=e.l===e.length?0:e.read_shift(2),H=aD[q];if(H&&H.f){if(t.bookSheets&&133===M&&133!==q)break;if(M=q,2===H.r||12==H.r){var G=e.read_shift(2);if(W-=2,!N.enc&&G!==q&&((255&G)<<8|G>>8)!==q)throw new Error("rt mismatch: "+G+"!="+q);12==H.r&&(e.l+=10,W-=10)}var K={};if(K=10===q?H.f(e,W,N):$L(q,H,e,W,N),0==F&&-1===[9,521,1033,2057].indexOf(M))continue;switch(q){case 34:n.opts.Date1904=k.WBProps.date1904=K;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(N.enc||(e.l=0),N.enc=K,!t.password)throw new Error("File is password-protected");if(null==K.valid)throw new Error("Encryption scheme unsupported");if(!K.valid)throw new Error("Password is incorrect");break;case 92:N.lastuser=K;break;case 66:var Y=Number(K);switch(Y){case 21010:Y=1200;break;case 32768:Y=1e4;break;case 32769:Y=1252}c_(N.codepage=Y),z=!0;break;case 317:N.rrtabid=K;break;case 25:N.winlocked=K;break;case 439:n.opts.RefreshAll=K;break;case 12:n.opts.CalcCount=K;break;case 16:n.opts.CalcDelta=K;break;case 17:n.opts.CalcIter=K;break;case 13:n.opts.CalcMode=K;break;case 14:n.opts.CalcPrecision=K;break;case 95:n.opts.CalcSaveRecalc=K;break;case 15:N.CalcRefMode=K;break;case 2211:n.opts.FullCalc=K;break;case 129:K.fDialog&&(d["!type"]="dialog"),K.fBelow||((d["!outline"]||(d["!outline"]={})).above=!0),K.fRight||((d["!outline"]||(d["!outline"]={})).left=!0);break;case 224:_.push(K);break;case 430:O.push([K]),O[O.length-1].XTI=[];break;case 35:case 547:O[O.length-1].push(K);break;case 24:case 536:R={Name:K.Name,Ref:JC(K.rgce,0,null,O,N)},K.itab>0&&(R.Sheet=K.itab-1),O.names.push(R),O[0]||(O[0]=[],O[0].XTI=[]),O[O.length-1].push(K),"_xlnm._FilterDatabase"==K.Name&&K.itab>0&&K.rgce&&K.rgce[0]&&K.rgce[0][0]&&"PtgArea3d"==K.rgce[0][0][0]&&(U[K.itab-1]={ref:hE(K.rgce[0][0][1][2])});break;case 22:N.ExternCount=K;break;case 23:0==O.length&&(O[0]=[],O[0].XTI=[]),O[O.length-1].XTI=O[O.length-1].XTI.concat(K),O.XTI=O.XTI.concat(K);break;case 2196:if(N.biff<8)break;null!=R&&(R.Comment=K[1]);break;case 18:d["!protect"]=K;break;case 19:0!==K&&N.WTF&&console.error("Password verifier: "+K);break;case 133:f[K.pos]=K,N.snames.push(K.name);break;case 10:if(--F)break;if(p.e){if(p.e.r>0&&p.e.c>0){if(p.e.r--,p.e.c--,d["!ref"]=hE(p),t.sheetRows&&t.sheetRows<=p.e.r){var X=p.e.r;p.e.r=t.sheetRows-1,d["!fullref"]=d["!ref"],d["!ref"]=hE(p),p.e.r=X}p.e.r++,p.e.c++}I.length>0&&(d["!merges"]=I),C.length>0&&(d["!objects"]=C),P.length>0&&(d["!cols"]=P),L.length>0&&(d["!rows"]=L),k.Sheets.push(T)}""===v?b=d:r[v]=d,d=t.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===N.biff&&(N.biff={9:2,521:3,1033:4}[q]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[K.BIFFVer]||8),N.biffguess=0==K.BIFFVer,0==K.BIFFVer&&4096==K.dt&&(N.biff=5,z=!0,c_(N.codepage=28591)),8==N.biff&&0==K.BIFFVer&&16==K.dt&&(N.biff=2),F++)break;if(d=t.dense?[]:{},N.biff<8&&!z&&(z=!0,c_(N.codepage=t.codepage||1252)),N.biff<5||0==K.BIFFVer&&4096==K.dt){""===v&&(v="Sheet1"),p={s:{r:0,c:0},e:{r:0,c:0}};var $={pos:e.l-W,name:v};f[$.pos]=$,N.snames.push(v)}else v=(f[V]||{name:""}).name;32==K.dt&&(d["!type"]="chart"),64==K.dt&&(d["!type"]="macro"),I=[],C=[],N.arrayf=x=[],P=[],L=[],D=!1,T={Hidden:(f[V]||{hs:0}).hs,name:v};break;case 515:case 3:case 2:"chart"==d["!type"]&&(t.dense?(d[K.r]||[])[K.c]:d[cE({c:K.c,r:K.r})])&&++K.c,c={ixfe:K.ixfe,XF:_[K.ixfe]||{},v:K.val,t:"n"},j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 5:case 517:c={ixfe:K.ixfe,XF:_[K.ixfe],v:K.val,t:K.t},j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 638:c={ixfe:K.ixfe,XF:_[K.ixfe],v:K.rknum,t:"n"},j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 189:for(var J=K.c;J<=K.C;++J){var Q=K.rkrec[J-K.c][0];c={ixfe:Q,XF:_[Q],v:K.rkrec[J-K.c][1],t:"n"},j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A({c:J,r:K.r},c,t)}break;case 6:case 518:case 1030:if("String"==K.val){m=K;break}if((c=QL(K.val,K.cell.ixfe,K.tt)).XF=_[c.ixfe],t.cellFormula){var Z=K.formula;if(Z&&Z[0]&&Z[0][0]&&"PtgExp"==Z[0][0][0]){var ee=Z[0][0][1][0],te=Z[0][0][1][1],ne=cE({r:ee,c:te});w[ne]?c.f=""+JC(K.formula,0,K.cell,O,N):c.F=((t.dense?(d[ee]||[])[te]:d[ne])||{}).F}else c.f=""+JC(K.formula,0,K.cell,O,N)}j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A(K.cell,c,t),m=K;break;case 7:case 519:if(!m)throw new Error("String record expects Formula");m.val=K,(c=QL(K,m.cell.ixfe,"s")).XF=_[c.ixfe],t.cellFormula&&(c.f=""+JC(m.formula,0,m.cell,O,N)),j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A(m.cell,c,t),m=null;break;case 33:case 545:x.push(K);var re=cE(K[0].s);if(s=t.dense?(d[K[0].s.r]||[])[K[0].s.c]:d[re],t.cellFormula&&s){if(!m)break;if(!re||!s)break;s.f=""+JC(K[1],0,K[0],O,N),s.F=hE(K[0])}break;case 1212:if(!t.cellFormula)break;if(y){if(!m)break;w[cE(m.cell)]=K[0],((s=t.dense?(d[m.cell.r]||[])[m.cell.c]:d[cE(m.cell)])||{}).f=""+JC(K[0],0,i,O,N)}break;case 253:c=QL(g[K.isst].t,K.ixfe,"s"),g[K.isst].h&&(c.h=g[K.isst].h),c.XF=_[c.ixfe],j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 513:t.sheetStubs&&(c={ixfe:K.ixfe,XF:_[K.ixfe],t:"z"},j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A({c:K.c,r:K.r},c,t));break;case 190:if(t.sheetStubs)for(var ie=K.c;ie<=K.C;++ie){var se=K.ixfe[ie-K.c];c={ixfe:se,XF:_[se],t:"z"},j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A({c:ie,r:K.r},c,t)}break;case 214:case 516:case 4:(c=QL(K.val,K.ixfe,"s")).XF=_[c.ixfe],j>0&&(c.z=B[c.ixfe>>8&63]),JL(c,t,n.opts.Date1904),A({c:K.c,r:K.r},c,t);break;case 0:case 512:1===F&&(p=K);break;case 252:g=K;break;case 1054:if(4==N.biff){B[j++]=K[1];for(var ae=0;ae<j+163&&U_[ae]!=K[1];++ae);ae>=163&&yS(K[1],j+163)}else yS(K[1],K[0]);break;case 30:B[j++]=K;for(var oe=0;oe<j+163&&U_[oe]!=K;++oe);oe>=163&&yS(K,j+163);break;case 229:I=I.concat(K);break;case 93:C[K.cmo[0]]=N.lastobj=K;break;case 438:N.lastobj.TxO=K;break;case 127:N.lastobj.ImData=K;break;case 440:for(l=K[0].s.r;l<=K[0].e.r;++l)for(o=K[0].s.c;o<=K[0].e.c;++o)(s=t.dense?(d[l]||[])[o]:d[cE({c:o,r:l})])&&(s.l=K[1]);break;case 2048:for(l=K[0].s.r;l<=K[0].e.r;++l)for(o=K[0].s.c;o<=K[0].e.c;++o)(s=t.dense?(d[l]||[])[o]:d[cE({c:o,r:l})])&&s.l&&(s.l.Tooltip=K[1]);break;case 28:if(N.biff<=5&&N.biff>=2)break;s=t.dense?(d[K[0].r]||[])[K[0].c]:d[cE(K[0])];var le=C[K[2]];s||(t.dense?(d[K[0].r]||(d[K[0].r]=[]),s=d[K[0].r][K[0].c]={t:"z"}):s=d[cE(K[0])]={t:"z"},p.e.r=Math.max(p.e.r,K[0].r),p.s.r=Math.min(p.s.r,K[0].r),p.e.c=Math.max(p.e.c,K[0].c),p.s.c=Math.min(p.s.c,K[0].c)),s.c||(s.c=[]),a={a:K[1],t:le.TxO.t},s.c.push(a);break;case 2173:cC(_[K.ixfe],K.ext);break;case 125:if(!N.cellStyles)break;for(;K.e>=K.s;)P[K.e--]={width:K.w/256,level:K.level||0,hidden:!!(1&K.flags)},D||(D=!0,NI(K.w/256)),II(P[K.e+1]);break;case 520:var ce={};null!=K.level&&(L[K.r]=ce,ce.level=K.level),K.hidden&&(L[K.r]=ce,ce.hidden=!0),K.hpt&&(L[K.r]=ce,ce.hpt=K.hpt,ce.hpx=LI(K.hpt));break;case 38:case 39:case 40:case 41:d["!margins"]||yP(d["!margins"]={}),d["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[q]]=K;break;case 161:d["!margins"]||yP(d["!margins"]={}),d["!margins"].header=K.header,d["!margins"].footer=K.footer;break;case 574:K.RTL&&(k.Views[0].RTL=!0);break;case 146:S=K;break;case 2198:h=K;break;case 140:u=K;break;case 442:v?T.CodeName=K||T.name:k.WBProps.CodeName=K||"ThisWorkbook"}}else H||console.error("Missing Info for XLS Record 0x"+q.toString(16)),e.l+=W}return n.SheetNames=IS(f).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return f[e].name}),t.bookSheets||(n.Sheets=r),!n.SheetNames.length&&b["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=b)):n.Preamble=b,n.Sheets&&U.forEach(function(e,t){n.Sheets[n.SheetNames[t]]["!autofilter"]=e}),n.Strings=g,n.SSF=HS(U_),N.enc&&(n.Encryption=N.enc),h&&(n.Themes=h),n.Metadata={},void 0!==u&&(n.Metadata.Country=u),O.names.length>0&&(k.Names=O.names),n.Workbook=k,n}var eD="e0859ff2f94f6810ab9108002b27b3d9",tD="02d5cdd59c2e1b10939708002b2cf9ae",nD="05d5cdd59c2e1b10939708002b2cf9ae";function rD(e,t){var n,r,i,s;if(t||(t={}),lO(t),u_(),t.codepage&&l_(t.codepage),e.FullPaths){if(TS.find(e,"/encryption"))throw new Error("File is password-protected");n=TS.find(e,"!CompObj"),r=TS.find(e,"/Workbook")||TS.find(e,"/Book")}else{switch(t.type){case"base64":e=k_(y_(e));break;case"binary":e=k_(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}YT(e,0),r={content:e}}if(n&&YL(n),t.bookProps&&!t.bookSheets)i={};else{var a=w_?"buffer":"array";if(r&&r.content)i=ZL(r.content,t);else if((s=TS.find(e,"PerfectOffice_MAIN"))&&s.content)i=KN.to_workbook(s.content,(t.type=a,t));else{if(!(s=TS.find(e,"NativeContent_MAIN"))||!s.content)throw(s=TS.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");i=KN.to_workbook(s.content,(t.type=a,t))}t.bookVBA&&e.FullPaths&&TS.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=function(e){var t=TS.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(n,r){if("/"!==n.slice(-1)&&n.match(/_VBA_PROJECT_CUR/)){var i=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");TS.utils.cfb_add(t,i,e.FileIndex[r].content)}}),TS.write(t)}(e))}var o={};return e.FullPaths&&function(e,t,n){var r=TS.find(e,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var i=UA(r,KE,tD);for(var s in i)t[s]=i[s]}catch(c){if(n.WTF)throw c}var a=TS.find(e,"/!SummaryInformation");if(a&&a.size>0)try{var o=UA(a,YE,eD);for(var l in o)null==t[l]&&(t[l]=o[l])}catch(c){if(n.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(yA(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}(e,o,t),i.Props=i.Custprops=o,t.bookFiles&&(i.cfb=e),i}function iD(e,t){var n=t||{},r=TS.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return TS.utils.cfb_add(r,i,gD(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],i=[],s=[],a=0,o=CS(KE,"n"),l=CS(YE,"n");if(e.Props)for(n=IS(e.Props),a=0;a<n.length;++a)(Object.prototype.hasOwnProperty.call(o,n[a])?r:Object.prototype.hasOwnProperty.call(l,n[a])?i:s).push([n[a],e.Props[n[a]]]);if(e.Custprops)for(n=IS(e.Custprops),a=0;a<n.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},n[a])||(Object.prototype.hasOwnProperty.call(o,n[a])?r:Object.prototype.hasOwnProperty.call(l,n[a])?i:s).push([n[a],e.Custprops[n[a]]]);var c=[];for(a=0;a<s.length;++a)FA.indexOf(s[a][0])>-1||bA.indexOf(s[a][0])>-1||null!=s[a][1]&&c.push(s[a]);i.length&&TS.utils.cfb_add(t,"/\x05SummaryInformation",zA(i,eD,l,YE)),(r.length||c.length)&&TS.utils.cfb_add(t,"/\x05DocumentSummaryInformation",zA(r,tD,o,KE,c.length?c:null,nD))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(n,r){if(0!=r){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&TS.utils.cfb_add(e,i,t.FileIndex[r].content)}})}(r,TS.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var sD={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,7&s&&(n.level=7&s),16&s&&(n.hidden=!0),32&s&&(n.hpt=i/20),n}},1:{f:function(e){return[TE(e)]}},2:{f:function(e){return[TE(e),ME(e),"n"]}},3:{f:function(e){return[TE(e),e.read_shift(1),"e"]}},4:{f:function(e){return[TE(e),e.read_shift(1),"b"]}},5:{f:function(e){return[TE(e),zE(e),"n"]}},6:{f:function(e){return[TE(e),yE(e),"str"]}},7:{f:function(e){return[TE(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,i=TE(e);i.r=n["!row"];var s=[i,yE(e),"str"];if(n.cellFormula){e.l+=2;var a=iP(e,r-e.l,n);s[3]=JC(a,0,i,n.supbooks,n)}else e.l=r;return s}},9:{f:function(e,t,n){var r=e.l+t,i=TE(e);i.r=n["!row"];var s=[i,zE(e),"n"];if(n.cellFormula){e.l+=2;var a=iP(e,r-e.l,n);s[3]=JC(a,0,i,n.supbooks,n)}else e.l=r;return s}},10:{f:function(e,t,n){var r=e.l+t,i=TE(e);i.r=n["!row"];var s=[i,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var a=iP(e,r-e.l,n);s[3]=JC(a,0,i,n.supbooks,n)}else e.l=r;return s}},11:{f:function(e,t,n){var r=e.l+t,i=TE(e);i.r=n["!row"];var s=[i,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var a=iP(e,r-e.l,n);s[3]=JC(a,0,i,n.supbooks,n)}else e.l=r;return s}},12:{f:function(e){return[AE(e)]}},13:{f:function(e){return[AE(e),ME(e),"n"]}},14:{f:function(e){return[AE(e),e.read_shift(1),"e"]}},15:{f:function(e){return[AE(e),e.read_shift(1),"b"]}},16:{f:WP},17:{f:function(e){return[AE(e),yE(e),"str"]}},18:{f:function(e){return[AE(e),e.read_shift(4),"s"]}},19:{f:_E},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),s=DE(e),a=sP(e,0,n),o=PE(e);e.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(r.underline=s);var a=e.read_shift(1);a>0&&(r.family=a);var o=e.read_shift(1);switch(o>0&&(r.charset=o),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),a=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=QE[r];l&&(t.rgb=xI(l));break;case 2:t.rgb=xI([s,a,o]);break;case 3:t.theme=r}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=yE(e),r}},44:{f:function(e,t){return[e.read_shift(2),yE(e)]}},45:{f:VI},46:{f:GI},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:FN},62:{f:function(e){return[TE(e),_E(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=cE(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:XT,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=IE(e,t-19),n}},148:{f:VP,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?yE(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=OE(e,t-8),n.name=yE(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:BE},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:HP},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:yE(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:OE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:LN},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,i=jE(e),s=e.read_shift(1),a=[i];if(a[2]=s,n.cellFormula){var o=rP(e,r-e.l,n);a[1]=o}else e.l=r;return a}},427:{f:function(e,t,n){var r=e.l+t,i=[BE(e,16)];if(n.cellFormula){var s=aP(e,r-e.l,n);i[1]=s,e.l=r}else e.l=r;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return KP.forEach(function(n){t[n]=zE(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=BE(e,16),i=PE(e),s=yE(e),a=yE(e),o=yE(e);e.l=n;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:OE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:vC},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=BE(e,16);return t.rfx=n.s,t.ref=cE(n.s),e.l+=16,t}},636:{T:-1},637:{f:SE},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:yE(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},aD={6:{f:eP},10:{f:VA},12:{f:HA},13:{f:HA},14:{f:qA},15:{f:qA},16:{f:zE},17:{f:qA},18:{f:qA},19:{f:HA},20:{f:NN},21:{f:NN},23:{f:LN},24:{f:PN},25:{f:qA},26:{},27:{},28:{f:function(e,t,n){return function(e,t,n){if(!(n.biff<8)){var r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),o=eN(e,0,n);return n.biff<8&&e.read_shift(1),[{r:r,c:i},o,a,s]}}(e,0,n)}},29:{},34:{f:qA},35:{f:IN},38:{f:zE},39:{f:zE},40:{f:zE},41:{f:zE},42:{f:qA},43:{f:qA},47:{f:function(e,t,n){var r={Type:n.biff>=8?e.read_shift(2):0};return r.Type?yI(e,t-2,r):function(e,t,n,r){var i={key:HA(e),verificationBytes:HA(e)};n.password&&(i.verifier=gI(n.password)),r.valid=i.verificationBytes===i.verifier,r.valid&&(r.insitu=bI(n.password))}(e,n.biff,n,r),r}},49:{f:function(e,t,n){var r={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return r.name=XA(e,0,n),r}},51:{f:HA},60:{},61:{f:function(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:qA},65:{f:function(){}},66:{f:HA},77:{},80:{},81:{},82:{},85:{f:HA},89:{},90:{},91:{},92:{f:function(e,t,n){if(n.enc)return e.l+=t,"";var r=e.l,i=eN(e,0,n);return e.read_shift(t+r-e.l),i}},93:{f:function(e,t,n){if(n&&n.biff<8)return function(e,t,n){e.l+=4;var r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var a=[];return a.push((ON[r]||XT)(e,t,n)),{cmo:[i,r,s],ft:a}}(e,t,n);var r=gN(e),i=function(e,t){for(var n=e.l+t,r=[];e.l<n;){var i=e.read_shift(2);e.l-=2;try{r.push(bN[i](e,n-e.l))}catch(s){return e.l=n,r}}return e.l!=n&&(e.l=n),r}(e,t-22,r[1]);return{cmo:r,ft:i}}},94:{},95:{f:qA},96:{},97:{},99:{f:qA},125:{f:FN},128:{f:function(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(0!==t[0]&&t[0]--,0!==t[1]&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}},129:{f:function(e,t,n){var r=n&&8==n.biff||2==t?e.read_shift(2):(e.l+=t,0);return{fDialog:16&r,fBelow:64&r,fRight:128&r}}},130:{f:HA},131:{f:qA},132:{f:qA},133:{f:function(e,t,n){var r=e.read_shift(4),i=3&e.read_shift(1),s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule"}var a=XA(e,0,n);return 0===a.length&&(a="Sheet1"),{pos:r,hs:i,dt:s,name:a}}},134:{},140:{f:function(e){var t,n=[0,0];return t=e.read_shift(2),n[0]=XE[t]||t,t=e.read_shift(2),n[1]=XE[t]||t,n}},141:{f:HA},144:{},146:{f:function(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(oN(e));return n}},151:{},152:{},153:{},154:{},155:{},156:{f:HA},157:{},158:{},160:{f:BN},161:{f:function(e,t){var n={};return t<32||(e.l+=16,n.header=zE(e),n.footer=zE(e),e.l+=2),n}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function(e,t){for(var n=e.l+t-2,r=e.read_shift(2),i=e.read_shift(2),s=[];e.l<n;)s.push(hN(e));if(e.l!==n)throw new Error("MulRK read error");var a=e.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r:r,c:i,C:a,rkrec:s}}},190:{f:function(e,t){for(var n=e.l+t-2,r=e.read_shift(2),i=e.read_shift(2),s=[];e.l<n;)s.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var a=e.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r:r,c:i,C:a,ixfe:s}}},193:{f:VA},197:{},198:{},199:{},200:{},201:{},202:{f:qA},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:HA},220:{},221:{f:qA},222:{},224:{f:function(e,t,n){var r={};return r.ifnt=e.read_shift(2),r.numFmtId=e.read_shift(2),r.flags=e.read_shift(2),r.fStyle=r.flags>>2&1,r.data=function(e,t,n,r){var i={},s=e.read_shift(4),a=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return i.patternType=$E[o>>26],r.cellStyles?(i.alc=7&s,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=15&a,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=127&o,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=127&l,i.icvBack=l>>7&127,i.fsxButton=l>>14&1,i):i}(e,0,r.fStyle,n),r}},225:{f:function(e,t){return 0===t||e.read_shift(2),1200}},226:{f:VA},227:{},229:{f:function(e,t){for(var n=[],r=e.read_shift(2);r--;)n.push(dN(e));return n}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function(e,t){for(var n=e.l+t,r=e.read_shift(4),i=e.read_shift(4),s=[],a=0;a!=i&&e.l<n;++a)s.push($A(e));return s.Count=r,s.Unique=i,s}},253:{f:function(e){var t=lN(e);return t.isst=e.read_shift(4),t}},255:{f:function(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:KA},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:qA},353:{f:VA},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function(e,t,n){var r=e.l+t,i=e.read_shift(2),s=e.read_shift(2);if(n.sbcch=s,1025==s||14849==s)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=QA(e,s),o=[];r>e.l;)o.push(ZA(e));return[s,i,a,o]}},431:{f:qA},432:{},433:{},434:{},437:{},438:{f:function(e,t,n){var r=e.l,i="";try{e.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(s)?e.l+=6:function(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}(e);var a=e.read_shift(2);e.read_shift(2),HA(e);var o=e.read_shift(2);e.l+=o;for(var l=1;l<e.lens.length-1;++l){if(e.l-r!=e.lens[l])throw new Error("TxO: bad continue record");var c=e[e.l];if((i+=QA(e,e.lens[l+1]-e.lens[l]-1)).length>=(c?a:2*a))break}if(i.length!==a&&i.length!==2*a)throw new Error("cchText: "+a+" != "+i.length);return e.l=r+t,{t:i}}catch(u){return e.l=r+t,{t:i}}}},439:{f:qA},440:{f:function(e,t){var n=dN(e);e.l+=16;var r=function(e,t){var n=e.l+t,r=e.read_shift(4);if(2!==r)throw new Error("Unrecognized streamVersion: "+r);var i=e.read_shift(2);e.l+=2;var s,a,o,l,c,u,h="";16&i&&(s=rN(e,e.l)),128&i&&(a=rN(e,e.l)),257===(257&i)&&(o=rN(e,e.l)),1===(257&i)&&(l=nN(e,e.l)),8&i&&(h=rN(e,e.l)),32&i&&(c=e.read_shift(16)),64&i&&(u=EA(e)),e.l=n;var d=a||o||l||"";d&&h&&(d+="#"+h),d||(d="#"+h),2&i&&"/"==d.charAt(0)&&"/"!=d.charAt(1)&&(d="file://"+d);var f={Target:d};return c&&(f.guid=c),u&&(f.time=u),s&&(f.Tooltip=s),f}(e,t-24);return[n,r]}},441:{},442:{f:ZA},443:{},444:{f:HA},445:{},446:{},448:{f:VA},449:{f:function(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:VA},512:{f:TN},513:{f:jN},515:{f:function(e,t,n){n.biffguess&&2==n.biff&&(n.biff=5);var r=lN(e),i=zE(e);return r.val=i,r}},516:{f:function(e,t,n){n.biffguess&&2==n.biff&&(n.biff=5),e.l;var r=lN(e);2==n.biff&&e.l++;var i=ZA(e,e.l,n);return r.val=i,r}},517:{f:AN},519:{f:UN},520:{f:function(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var r=e.read_shift(1);return e.l+=3,7&r&&(t.level=7&r),32&r&&(t.hidden=!0),64&r&&(t.hpt=n/20),t}},523:{},545:{f:DN},549:{f:_N},566:{},574:{f:function(e,t,n){return n&&n.biff>=2&&n.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function(e){var t=e.read_shift(2),n=e.read_shift(2),r=hN(e);return{r:t,c:n,ixfe:r[0],rknum:r[1]}}},659:{},1048:{},1054:{f:function(e,t,n){return[e.read_shift(2),eN(e,0,n)]}},1084:{},1212:{f:function(e,t,n){var r=pN(e);e.l++;var i=e.read_shift(1);return[ZC(e,t-=8,n),i,r]}},2048:{f:function(e,t){e.read_shift(2);var n=dN(e),r=e.read_shift((t-10)/2,"dbcs-cont");return[n,r=r.replace(I_,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:yN},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:VA},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t},r:12},2173:{f:function(e,t){e.l,e.l+=2;var n=e.read_shift(2);e.l+=2;for(var r=e.read_shift(2),i=[];r-- >0;)i.push(lC(e,e.l));return{ixfe:n,ext:i}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:qA,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function(e,t,n){if(!(n.biff<8)){var r=e.read_shift(2),i=e.read_shift(2);return[QA(e,r,n),QA(e,i,n)]}e.l+=t},r:12},2197:{},2198:{f:function(e,t,n){var r=e.l+t;if(124226!==e.read_shift(4))if(n.cellStyles){var i,s=e.slice(e.l);e.l=r;try{i=ok(s,{type:"array"})}catch(o){return}var a=nk(i,"theme/theme/theme1.xml",!0);if(a)return sC(a,n)}else e.l=r},r:12},2199:{},2200:{},2201:{},2202:{f:function(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:VA},2204:{},2205:{},2206:{},2207:{},2211:{f:function(e){var t=function(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}(e);if(2211!=t.type)throw new Error("Invalid Future Record "+t.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:HA},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function(e,t,n){var r={area:!1};if(5!=n.biff)return e.l+=t,r;var i=e.read_shift(1);return e.l+=3,16&i&&(r.area=!0),r}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(oN(e));return n}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:TN},1:{},2:{f:function(e){var t=lN(e);++e.l;var n=e.read_shift(2);return t.t="n",t.val=n,t}},3:{f:function(e){var t=lN(e);++e.l;var n=zE(e);return t.t="n",t.val=n,t}},4:{f:function(e,t,n){n.biffguess&&5==n.biff&&(n.biff=2);var r=lN(e);++e.l;var i=eN(e,0,n);return r.t="str",r.val=i,r}},5:{f:AN},7:{f:function(e){var t=e.read_shift(1);return 0===t?(e.l++,""):e.read_shift(t,"sbcs-cont")}},8:{},9:{f:yN},11:{},22:{f:HA},30:{f:kN},31:{},32:{},33:{f:DN},36:{},37:{f:_N},50:{f:function(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}},62:{},52:{},67:{},68:{f:HA},69:{},86:{},126:{},127:{f:function(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i={fmt:t,env:n,len:r,data:e.slice(e.l,e.l+r)};return e.l+=r,i}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function(e,t,n){var r=e.l+t,i=lN(e),s=e.read_shift(2),a=QA(e,s,n);return e.l=r,i.t="str",i.val=a,i}},223:{},234:{},354:{},421:{},518:{f:eP},521:{f:yN},536:{f:PN},547:{f:IN},561:{},579:{},1030:{f:eP},1033:{f:yN},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function oD(e,t,n,r){var i=t;if(!isNaN(i)){var s=r||(n||[]).length||0,a=e.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&OT(n)&&e.push(n)}}function lD(e,t,n){return e||(e=$T(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function cD(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?OS(qS(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?oD(e,2,function(e,t,n){var r=$T(9);return lD(r,e,t),r.write_shift(2,n),r}(n,r,i)):oD(e,3,function(e,t,n){var r=$T(15);return lD(r,e,t),r.write_shift(8,n,"f"),r}(n,r,i)));case"b":case"e":return void oD(e,5,function(e,t,n,r){var i=$T(9);return lD(i,e,t),YA(n,r||"b",i),i}(n,r,t.v,t.t));case"s":case"str":return void oD(e,4,function(e,t,n){var r=$T(8+2*n.length);return lD(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}oD(e,1,lD(null,n,r))}function uD(e,t){var n=t||{};for(var r=QT(),i=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==n.sheet&&(i=s);if(0==i&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return oD(r,4==n.biff?1033:3==n.biff?521:9,wN(0,16,n)),function(e,t,n,r){var i,s=Array.isArray(t),a=dE(t["!ref"]||"A1"),o="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=hE(a)}for(var c=a.s.r;c<=a.e.r;++c){o=sE(c);for(var u=a.s.c;u<=a.e.c;++u){c===a.s.r&&(l[u]=oE(u)),i=l[u]+o;var h=s?(t[c]||[])[u]:t[i];h&&cD(e,h,c,u)}}}(r,e.Sheets[e.SheetNames[i]],0,n),oD(r,10),r.end()}function hD(e,t,n){oD(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,i=$T(r?15+n.length:16+2*n.length);return i.write_shift(2,20*(e.sz||12)),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,n.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),i}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function dD(e,t){if(t){var n=0;t.forEach(function(t,r){++n<=256&&t&&oD(e,125,function(e,t){var n=$T(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(bP(r,t),r))})}}function fD(e,t,n,r,i){var s=16+wP(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)oD(e,6,tP(t,n,r,0,s));else switch(t.t){case"d":case"n":oD(e,515,function(e,t,n,r){var i=$T(14);return cN(e,t,r,i),VE(n,i),i}(n,r,"d"==t.t?OS(qS(t.v)):t.v,s));break;case"b":case"e":oD(e,517,function(e,t,n,r,i,s){var a=$T(8);return cN(e,t,r,a),YA(n,s,a),a}(n,r,t.v,s,0,t.t));break;case"s":case"str":if(i.bookSST)oD(e,253,function(e,t,n,r){var i=$T(10);return cN(e,t,r,i),i.write_shift(4,n),i}(n,r,vP(i.Strings,t.v,i.revStrings),s));else oD(e,516,function(e,t,n,r,i){var s=!i||8==i.biff,a=$T(+s+8+(1+s)*n.length);return cN(e,t,r,a),a.write_shift(2,n.length),s&&a.write_shift(1,1),a.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),a}(n,r,(t.v||"").slice(0,255),s,i));break;default:oD(e,513,cN(n,r,s))}else oD(e,513,cN(n,r,s))}function pD(e,t,n){var r,i=QT(),s=n.SheetNames[e],a=n.Sheets[s]||{},o=(n||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(a),u=8==t.biff,h="",d=[],f=dE(a["!ref"]||"A1"),p=u?65536:16384;if(f.e.c>255||f.e.r>=p){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}oD(i,2057,wN(0,16,t)),oD(i,13,GA(1)),oD(i,12,GA(100)),oD(i,15,WA(!0)),oD(i,17,WA(!1)),oD(i,16,VE(.001)),oD(i,95,WA(!0)),oD(i,42,WA(!1)),oD(i,43,WA(!1)),oD(i,130,GA(1)),oD(i,128,function(e){var t=$T(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),oD(i,131,WA(!1)),oD(i,132,WA(!1)),u&&dD(i,a["!cols"]),oD(i,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=$T(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(f,t)),u&&(a["!links"]=[]);for(var m=f.s.r;m<=f.e.r;++m){h=sE(m);for(var g=f.s.c;g<=f.e.c;++g){m===f.s.r&&(d[g]=oE(g)),r=d[g]+h;var v=c?(a[m]||[])[g]:a[r];v&&(fD(i,v,m,g,t),u&&v.l&&a["!links"].push([r,v.l]))}}var b=l.CodeName||l.name||s;return u&&oD(i,574,function(e){var t=$T(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),u&&(a["!merges"]||[]).length&&oD(i,229,function(e){var t=$T(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)fN(e[n],t);return t}(a["!merges"])),u&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];oD(e,440,RN(r)),r[1].Tooltip&&oD(e,2048,MN(r))}delete t["!links"]}(i,a),oD(i,442,tN(b)),u&&function(e,t){var n=$T(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),oD(e,2151,n),(n=$T(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),fN(dE(t["!ref"]||"A1"),n),n.write_shift(4,4),oD(e,2152,n)}(i,a),oD(i,10),i.end()}function mD(e,t,n){var r=QT(),i=(e||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=8==n.biff,l=5==n.biff;(oD(r,2057,wN(0,5,n)),"xla"==n.bookType&&oD(r,135),oD(r,225,o?GA(1200):null),oD(r,193,function(e,t){t||(t=$T(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&oD(r,191),l&&oD(r,192),oD(r,226),oD(r,92,function(e,t){var n=!t||8==t.biff,r=$T(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),oD(r,66,GA(o?1200:1252)),o&&oD(r,353,GA(0)),o&&oD(r,448),oD(r,317,function(e){for(var t=$T(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&oD(r,211),o&&e.vbaraw)&&oD(r,442,tN(a.CodeName||"ThisWorkbook"));oD(r,156,GA(17)),oD(r,25,WA(!1)),oD(r,18,WA(!1)),oD(r,19,GA(0)),o&&oD(r,431,WA(!1)),o&&oD(r,444,GA(0)),oD(r,61,function(){var e=$T(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),oD(r,64,WA(!1)),oD(r,141,GA(0)),oD(r,34,WA("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Ak(e.Workbook.WBProps.date1904)?"true":"false"}(e))),oD(r,14,WA(!0)),o&&oD(r,439,WA(!1)),oD(r,218,GA(0)),hD(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=t[i]&&oD(e,1054,SN(i,t[i],n))})}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)oD(e,224,EN({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){oD(e,224,EN(n,0,t))})}(r,n),o&&oD(r,352,WA(!1));var c=r.end(),u=QT();o&&oD(u,140,function(e){return e||(e=$T(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),o&&n.Strings&&function(e,t,n,r){var i=r||(n||[]).length||0;if(i<=8224)return oD(e,t,n,i);var s=t;if(!isNaN(s)){for(var a=n.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,s),u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<i;){for((u=e.next(4)).write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(u,252,function(e){var t=$T(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=JA(e[r]);var i=N_([t].concat(n));return i.parts=[t.length].concat(n.map(function(e){return e.length})),i}(n.Strings)),oD(u,10);var h=u.end(),d=QT(),f=0,p=0;for(p=0;p<e.SheetNames.length;++p)f+=(o?12:11)+(o?2:1)*e.SheetNames[p].length;var m=c.length+f+h.length;for(p=0;p<e.SheetNames.length;++p){oD(d,133,xN({pos:m,hs:(s[p]||{}).Hidden||0,dt:0,name:e.SheetNames[p]},n)),m+=t[p].length}var g=d.end();if(f!=g.length)throw new Error("BS8 "+f+" != "+g.length);var v=[];return c.length&&v.push(c),g.length&&v.push(g),h.length&&v.push(h),N_(v)}function gD(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])uE(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=HS(U_)),e&&e.SSF&&(xS(),wS(e.SSF),n.revssf=LS(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,cO(n),n.cellXfs=[],wP(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)r[r.length]=pD(i,n,e);return r.unshift(mD(e,r,n)),N_(r)}(e,t);case 4:case 3:case 2:return uD(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function vD(e,t){var n=t||{};var r=n.dense?[]:{},i=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),a=i.index,o=s&&s.index||e.length,l=$S(e.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,h=0,d=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(a=0;a<l.length;++a){var m=l[a].trim(),g=m.slice(0,3).toLowerCase();if("<tr"!=g){if("<td"==g||"<th"==g){var v=m.split(/<\/t[dh]>/i);for(o=0;o<v.length;++o){var b=v[o].trim();if(b.match(/<t[dh]/i)){for(var y=b,w=0;"<"==y.charAt(0)&&(w=y.indexOf(">"))>-1;)y=y.slice(w+1);for(var x=0;x<p.length;++x){var _=p[x];_.s.c==u&&_.s.r<c&&c<=_.e.r&&(u=_.e.c+1,x=-1)}var S=mk(b.slice(0,b.indexOf(">")));d=S.colspan?+S.colspan:1,((h=+S.rowspan)>1||d>1)&&p.push({s:{r:c,c:u},e:{r:c+(h||1)-1,c:u+d-1}});var k=S.t||S["data-t"]||"";if(y.length)if(y=Rk(y),f.s.r>c&&(f.s.r=c),f.e.r<c&&(f.e.r=c),f.s.c>u&&(f.s.c=u),f.e.c<u&&(f.e.c=u),y.length){var T={t:"s",v:y};n.raw||!y.trim().length||"s"==k||("TRUE"===y?T={t:"b",v:!0}:"FALSE"===y?T={t:"b",v:!1}:isNaN(KS(y))?isNaN(XS(y).getDate())||(T={t:"d",v:qS(y)},n.cellDates||(T={t:"n",v:OS(T.v)}),T.z=n.dateNF||U_[14]):T={t:"n",v:KS(y)}),n.dense?(r[c]||(r[c]=[]),r[c][u]=T):r[cE({r:c,c:u})]=T,u+=d}else u+=d;else u+=d}}}}else{if(++c,n.sheetRows&&n.sheetRows<=c){--c;break}u=0}}return r["!ref"]=hE(f),p.length&&(r["!merges"]=p),r}function bD(e,t,n,r){for(var i=e["!merges"]||[],s=[],a=t.s.c;a<=t.e.c;++a){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>a)&&!(i[c].e.r<n||i[c].e.c<a)){if(i[c].s.r<n||i[c].s.c<a){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var u=cE({r:n,c:a}),h=r.dense?(e[n]||[])[a]:e[u],d=h&&null!=h.v&&(h.h||Tk(h.w||(pE(h),h.w)||""))||"",f={};o>1&&(f.rowspan=o),l>1&&(f.colspan=l),r.editable?d='<span contenteditable="true">'+d+"</span>":h&&(f["data-t"]=h&&h.t||"z",null!=h.v&&(f["data-v"]=h.v),null!=h.z&&(f["data-z"]=h.z),h.l&&"#"!=(h.l.Target||"#").charAt(0)&&(d='<a href="'+h.l.Target+'">'+d+"</a>")),f.id=(r.id||"sjs")+"-"+u,s.push(qk("td",d,f))}}return"<tr>"+s.join("")+"</tr>"}var yD='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',wD="</body></html>";function xD(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function _D(e,t){var n=t||{},r=null!=n.header?n.header:yD,i=null!=n.footer?n.footer:wD,s=[r],a=uE(e["!ref"]);n.dense=Array.isArray(e),s.push(xD(0,0,n));for(var o=a.s.r;o<=a.e.r;++o)s.push(bD(e,a,o,n));return s.push("</table>"+i),s.join("")}function SD(e,t,n){var r=n||{};var i=0,s=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var a="string"==typeof r.origin?lE(r.origin):r.origin;i=a.r,s=a.c}var o=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(e["!ref"]){var u=uE(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==i&&(c.e.r=i=u.e.r+1)}var h=[],d=0,f=e["!rows"]||(e["!rows"]=[]),p=0,m=0,g=0,v=0,b=0,y=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&m<l;++p){var w=o[p];if(TD(w)){if(r.display)continue;f[m]={hidden:!0}}var x=w.children;for(g=v=0;g<x.length;++g){var _=x[g];if(!r.display||!TD(_)){var S=_.hasAttribute("data-v")?_.getAttribute("data-v"):_.hasAttribute("v")?_.getAttribute("v"):Rk(_.innerHTML),k=_.getAttribute("data-z")||_.getAttribute("z");for(d=0;d<h.length;++d){var T=h[d];T.s.c==v+s&&T.s.r<m+i&&m+i<=T.e.r&&(v=T.e.c+1-s,d=-1)}y=+_.getAttribute("colspan")||1,((b=+_.getAttribute("rowspan")||1)>1||y>1)&&h.push({s:{r:m+i,c:v+s},e:{r:m+i+(b||1)-1,c:v+s+(y||1)-1}});var E={t:"s",v:S},A=_.getAttribute("data-t")||_.getAttribute("t")||"";null!=S&&(0==S.length?E.t=A||"z":r.raw||0==S.trim().length||"s"==A||("TRUE"===S?E={t:"b",v:!0}:"FALSE"===S?E={t:"b",v:!1}:isNaN(KS(S))?isNaN(XS(S).getDate())||(E={t:"d",v:qS(S)},r.cellDates||(E={t:"n",v:OS(E.v)}),E.z=r.dateNF||U_[14]):E={t:"n",v:KS(S)})),void 0===E.z&&null!=k&&(E.z=k);var N="",I=_.getElementsByTagName("A");if(I&&I.length)for(var C=0;C<I.length&&(!I[C].hasAttribute("href")||"#"==(N=I[C].getAttribute("href")).charAt(0));++C);N&&"#"!=N.charAt(0)&&(E.l={Target:N}),r.dense?(e[m+i]||(e[m+i]=[]),e[m+i][v+s]=E):e[cE({c:v+s,r:m+i})]=E,c.e.c<v+s&&(c.e.c=v+s),v+=y}}++m}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,m-1+i),e["!ref"]=hE(c),m>=l&&(e["!fullref"]=hE((c.e.r=o.length-p+m-1+i,c))),e}function kD(e,t){return SD((t||{}).dense?[]:{},e,t)}function TD(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}function ED(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(e,t){return Array(parseInt(t,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[yk(t.replace(/<[^>]*>/g,""))]}var AD={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function ND(e,t){var n=t||{};var r,i,s,a,o,l,c=Hk(e),u=[],h={name:""},d="",f=0,p={},m=[],g=n.dense?[]:{},v={value:""},b="",y=0,w=[],x=-1,_=-1,S={s:{r:1e6,c:1e7},e:{r:0,c:0}},k=0,T={},E=[],A={},N=[],I=1,C=1,P=[],L={Names:[]},D={},O=["",""],R=[],M={},F="",j=0,B=!1,U=!1,z=0;for(Gk.lastIndex=0,c=c.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");o=Gk.exec(c);)switch(o[3]=o[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===o[1]?(S.e.c>=S.s.c&&S.e.r>=S.s.r?g["!ref"]=hE(S):g["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=S.e.r&&(g["!fullref"]=g["!ref"],S.e.r=n.sheetRows-1,g["!ref"]=hE(S)),E.length&&(g["!merges"]=E),N.length&&(g["!rows"]=N),s.name=s["\u540d\u79f0"]||s.name,"undefined"!==typeof JSON&&JSON.stringify(s),m.push(s.name),p[s.name]=g,U=!1):"/"!==o[0].charAt(o[0].length-2)&&(s=mk(o[0],!1),x=_=-1,S.s.r=S.s.c=1e7,S.e.r=S.e.c=0,g=n.dense?[]:{},E=[],N=[],U=!0);break;case"table-row-group":"/"===o[1]?--k:++k;break;case"table-row":case"\u884c":if("/"===o[1]){x+=I,I=1;break}if((a=mk(o[0],!1))["\u884c\u53f7"]?x=a["\u884c\u53f7"]-1:-1==x&&(x=0),(I=+a["number-rows-repeated"]||1)<10)for(z=0;z<I;++z)k>0&&(N[x+z]={level:k});_=-1;break;case"covered-table-cell":"/"!==o[1]&&++_,n.sheetStubs&&(n.dense?(g[x]||(g[x]=[]),g[x][_]={t:"z"}):g[cE({r:x,c:_})]={t:"z"}),b="",w=[];break;case"table-cell":case"\u6570\u636e":if("/"===o[0].charAt(o[0].length-2))++_,v=mk(o[0],!1),C=parseInt(v["number-columns-repeated"]||"1",10),l={t:"z",v:null},v.formula&&0!=n.cellFormula&&(l.f=uP(yk(v.formula))),"string"==(v["\u6570\u636e\u7c7b\u578b"]||v["value-type"])&&(l.t="s",l.v=yk(v["string-value"]||""),n.dense?(g[x]||(g[x]=[]),g[x][_]=l):g[cE({r:x,c:_})]=l),_+=C-1;else if("/"!==o[1]){b="",y=0,w=[],C=1;var V=I?x+I-1:x;if(++_>S.e.c&&(S.e.c=_),_<S.s.c&&(S.s.c=_),x<S.s.r&&(S.s.r=x),V>S.e.r&&(S.e.r=V),R=[],M={},l={t:(v=mk(o[0],!1))["\u6570\u636e\u7c7b\u578b"]||v["value-type"],v:null},n.cellFormula)if(v.formula&&(v.formula=yk(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(A={s:{r:x,c:_},e:{r:x+(parseInt(v["number-matrix-rows-spanned"],10)||0)-1,c:_+(parseInt(v["number-matrix-columns-spanned"],10)||0)-1}},l.F=hE(A),P.push([A,l.F])),v.formula)l.f=uP(v.formula);else for(z=0;z<P.length;++z)x>=P[z][0].s.r&&x<=P[z][0].e.r&&_>=P[z][0].s.c&&_<=P[z][0].e.c&&(l.F=P[z][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(A={s:{r:x,c:_},e:{r:x+(parseInt(v["number-rows-spanned"],10)||0)-1,c:_+(parseInt(v["number-columns-spanned"],10)||0)-1}},E.push(A)),v["number-columns-repeated"]&&(C=parseInt(v["number-columns-repeated"],10)),l.t){case"boolean":l.t="b",l.v=Ak(v["boolean-value"]);break;case"float":case"percentage":case"currency":l.t="n",l.v=parseFloat(v.value);break;case"date":l.t="d",l.v=qS(v["date-value"]),n.cellDates||(l.t="n",l.v=OS(l.v)),l.z="m/d/yy";break;case"time":l.t="n",l.v=BS(v["time-value"])/86400,n.cellDates&&(l.t="d",l.v=jS(l.v)),l.z="HH:MM:SS";break;case"number":l.t="n",l.v=parseFloat(v["\u6570\u636e\u6570\u503c"]);break;default:if("string"!==l.t&&"text"!==l.t&&l.t)throw new Error("Unsupported value type "+l.t);l.t="s",null!=v["string-value"]&&(b=yk(v["string-value"]),w=[])}}else{if(B=!1,"s"===l.t&&(l.v=b||"",w.length&&(l.R=w),B=0==y),D.Target&&(l.l=D),R.length>0&&(l.c=R,R=[]),b&&!1!==n.cellText&&(l.w=b),B&&(l.t="z",delete l.v),(!B||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=x))for(var q=0;q<I;++q){if(C=parseInt(v["number-columns-repeated"]||"1",10),n.dense)for(g[x+q]||(g[x+q]=[]),g[x+q][_]=0==q?l:HS(l);--C>0;)g[x+q][_+C]=HS(l);else for(g[cE({r:x+q,c:_})]=l;--C>0;)g[cE({r:x+q,c:_+C})]=HS(l);S.e.c<=_&&(S.e.c=_)}_+=(C=parseInt(v["number-columns-repeated"]||"1",10))-1,C=0,l={},b="",w=[]}D={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===o[1]){if((r=u.pop())[0]!==o[3])throw"Bad state: "+r}else"/"!==o[0].charAt(o[0].length-2)&&u.push([o[3],!0]);break;case"annotation":if("/"===o[1]){if((r=u.pop())[0]!==o[3])throw"Bad state: "+r;M.t=b,w.length&&(M.R=w),M.a=F,R.push(M)}else"/"!==o[0].charAt(o[0].length-2)&&u.push([o[3],!1]);F="",j=0,b="",y=0,w=[];break;case"creator":"/"===o[1]?F=c.slice(j,o.index):j=o.index+o[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===o[1]){if((r=u.pop())[0]!==o[3])throw"Bad state: "+r}else"/"!==o[0].charAt(o[0].length-2)&&u.push([o[3],!1]);b="",y=0,w=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===o[1]){if(T[h.name]=d,(r=u.pop())[0]!==o[3])throw"Bad state: "+r}else"/"!==o[0].charAt(o[0].length-2)&&(d="",h=mk(o[0],!1),u.push([o[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(u[u.length-1][0]){case"time-style":case"date-style":i=mk(o[0],!1),d+=AD[o[3]]["long"===i.style?1:0]}break;case"text":if("/>"===o[0].slice(-2))break;if("/"===o[1])switch(u[u.length-1][0]){case"number-style":case"date-style":case"time-style":d+=c.slice(f,o.index)}else f=o.index+o[0].length;break;case"named-range":O=dP((i=mk(o[0],!1))["cell-range-address"]);var W={Name:i.name,Ref:O[0]+"!"+O[1]};U&&(W.Sheet=m.length),L.Names.push(W);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(u[u.length-1][0])>-1)break;if("/"!==o[1]||v&&v["string-value"])mk(o[0],!1),y=o.index+o[0].length;else{var H=ED(c.slice(y,o.index));b=(b.length>0?b+"\n":"")+H[0]}break;case"database-range":if("/"===o[1])break;try{p[(O=dP(mk(o[0])["target-range-address"]))[0]]["!autofilter"]={ref:O[1]}}catch(K){}break;case"a":if("/"!==o[1]){if(!(D=mk(o[0],!1)).href)break;D.Target=yk(D.href),delete D.href,"#"==D.Target.charAt(0)&&D.Target.indexOf(".")>-1?(O=dP(D.Target.slice(1)),D.Target="#"+O[0]+"!"+O[1]):D.Target.match(/^\.\.[\\\/]/)&&(D.Target=D.Target.slice(3))}break;default:switch(o[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(n.WTF)throw new Error(o)}}var G={Sheets:p,SheetNames:m,Workbook:L};return n.bookSheets&&delete G.Sheets,G}function ID(e,t){t=t||{},ZS(e,"META-INF/manifest.xml")&&function(e,t){for(var n,r,i=Hk(e);n=Gk.exec(i);)switch(n[3]){case"manifest":break;case"file-entry":if("/"==(r=mk(n[0],!1)).path&&"application/vnd.oasis.opendocument.spreadsheet"!==r.type)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}(tk(e,"META-INF/manifest.xml"),t);var n=nk(e,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=ND(Lk(n),t);return ZS(e,"meta.xml")&&(r.Props=pA(tk(e,"meta.xml"))),r}function CD(e,t){return ND(e,t)}var PD=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Vk({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ck+t}}(),LD=function(){var e=function(e){return _k(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",n=function(n,r,i){var s=[];s.push('      <table:table table:name="'+_k(r.SheetNames[i])+'" table:style-name="ta1">\n');var a=0,o=0,l=uE(n["!ref"]||"A1"),c=n["!merges"]||[],u=0,h=Array.isArray(n);if(n["!cols"])for(o=0;o<=l.e.c;++o)s.push("        <table:table-column"+(n["!cols"][o]?' table:style-name="co'+n["!cols"][o].ods+'"':"")+"></table:table-column>\n");var d="",f=n["!rows"]||[];for(a=0;a<l.s.r;++a)d=f[a]?' table:style-name="ro'+f[a].ods+'"':"",s.push("        <table:table-row"+d+"></table:table-row>\n");for(;a<=l.e.r;++a){for(d=f[a]?' table:style-name="ro'+f[a].ods+'"':"",s.push("        <table:table-row"+d+">\n"),o=0;o<l.s.c;++o)s.push(t);for(;o<=l.e.c;++o){var p=!1,m={},g="";for(u=0;u!=c.length;++u)if(!(c[u].s.c>o)&&!(c[u].s.r>a)&&!(c[u].e.c<o)&&!(c[u].e.r<a)){c[u].s.c==o&&c[u].s.r==a||(p=!0),m["table:number-columns-spanned"]=c[u].e.c-c[u].s.c+1,m["table:number-rows-spanned"]=c[u].e.r-c[u].s.r+1;break}if(p)s.push("          <table:covered-table-cell/>\n");else{var v=cE({r:a,c:o}),b=h?(n[a]||[])[o]:n[v];if(b&&b.f&&(m["table:formula"]=_k(hP(b.f)),b.F&&b.F.slice(0,v.length)==v)){var y=uE(b.F);m["table:number-matrix-columns-spanned"]=y.e.c-y.s.c+1,m["table:number-matrix-rows-spanned"]=y.e.r-y.s.r+1}if(b){switch(b.t){case"b":g=b.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=b.v?"true":"false";break;case"n":g=b.w||String(b.v||0),m["office:value-type"]="float",m["office:value"]=b.v||0;break;case"s":case"str":g=null==b.v?"":b.v,m["office:value-type"]="string";break;case"d":g=b.w||qS(b.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=qS(b.v).toISOString(),m["table:style-name"]="ce1";break;default:s.push(t);continue}var w=e(g);if(b.l&&b.l.Target){var x=b.l.Target;"#"==(x="#"==x.charAt(0)?"#"+fP(x.slice(1)):x).charAt(0)||x.match(/^\w+:/)||(x="../"+x),w=qk("text:a",w,{"xlink:href":x.replace(/&/g,"&amp;")})}s.push("          "+qk("table:table-cell",qk("text:p",w,{}),m)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var r=[ck],i=Vk({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=Vk({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(r.push("<office:document"+i+s+">\n"),r.push(hA().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var i=t["!cols"][r];if(null==i.width&&null==i.wpx&&null==i.wch)continue;II(i),i.ods=n;var s=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++n}});var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var i=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++r}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var a=0;a!=e.SheetNames.length;++a)r.push(n(e.Sheets[e.SheetNames[a]],e,a));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==t.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function DD(e,t){if("fods"==t.bookType)return LD(e,t);var n=ak(),r="",i=[],s=[];return sk(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),sk(n,r="content.xml",LD(e,t)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),sk(n,r="styles.xml",PD(e,t)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),sk(n,r="meta.xml",ck+hA()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),sk(n,r="manifest.rdf",function(e){var t=[ck];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=e.length;++n)t.push(cA(e[n][0],e[n][1])),t.push(uA("",e[n][0]));return t.push(cA("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),i.push([r,"application/rdf+xml"]),sk(n,r="META-INF/manifest.xml",function(e){var t=[ck];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),n}function OD(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function RD(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Lk(E_(e))}function MD(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):k_(Dk(e))}function FD(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function jD(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function BD(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function UD(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function zD(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function VD(e){for(var t=[],n=[0];n[0]<e.length;){var r,i=n[0],s=BD(e,n),a=7&s,o=0;if(0==(s=Math.floor(s/8)))break;switch(a){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:o=4,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=BD(e,n),r=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(i))}var c={data:r,type:a};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function qD(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e){e.data&&(t.push(UD(8*n+e.type)),2==e.type&&t.push(UD(e.data.length)),t.push(e.data))})}),FD(t)}function WD(e,t){return(null==e?void 0:e.map(function(e){return t(e.data)}))||[]}function HD(e){for(var t,n=[],r=[0];r[0]<e.length;){var i=BD(e,r),s=VD(e.slice(r[0],r[0]+i));r[0]+=i;var a={id:zD(s[1][0].data),messages:[]};s[2].forEach(function(t){var n=VD(t.data),i=zD(n[3][0].data);a.messages.push({meta:n,data:e.slice(r[0],r[0]+i)}),r[0]+=i}),(null==(t=s[3])?void 0:t[0])&&(a.merge=zD(s[3][0].data)>>>0>0),n.push(a)}return n}function GD(e){var t=[];return e.forEach(function(e){var n=[];n[1]=[{data:UD(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:UD(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(e){r.push(e.data),e.meta[3]=[{type:0,data:UD(e.data.length)}],n[2].push({data:qD(e.meta),type:2})});var i=qD(n);t.push(UD(i.length)),t.push(i),r.forEach(function(e){return t.push(e)})}),FD(t)}function KD(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=BD(t,n),i=[];n[0]<t.length;){var s=3&t[n[0]];if(0!=s){var a=0,o=0;if(1==s?(o=4+(t[n[0]]>>2&7),a=(224&t[n[0]++])<<3,a|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==s?(a=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(a=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),i=[FD(i)],0==a)throw new Error("Invalid offset 0");if(a>i[0].length)throw new Error("Invalid offset beyond length");if(o>=a)for(i.push(i[0].slice(-a)),o-=a;o>=i[i.length-1].length;)i.push(i[i.length-1]),o-=i[i.length-1].length;i.push(i[0].slice(-a,-a+o))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}i.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var u=FD(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function YD(e){for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(KD(r,e.slice(n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return FD(t)}function XD(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),i=new Uint8Array(4);t.push(i);var s=UD(r),a=s.length;t.push(s),r<=60?(a++,t.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),a+=r,i[0]=0,i[1]=255&a,i[2]=a>>8&255,i[3]=a>>16&255,n+=r}return FD(t)}function $D(e,t,n){var r,i=OD(e),s=i.getUint32(8,!0),a=12,o=-1,l=-1,c=NaN,u=NaN,h=new Date(2001,0,1);switch(1&s&&(c=function(e,t){for(var n=(127&e[t+15])<<7|e[t+14]>>1,r=1&e[t+14],i=t+13;i>=t;--i)r=256*r+e[i];return(128&e[t+15]?-r:r)*Math.pow(10,n-6176)}(e,a),a+=16),2&s&&(u=i.getFloat64(a,!0),a+=8),4&s&&(h.setTime(h.getTime()+1e3*i.getFloat64(a,!0)),a+=8),8&s&&(l=i.getUint32(a,!0),a+=4),16&s&&(o=i.getUint32(a,!0),a+=4),e[1]){case 0:break;case 2:case 10:r={t:"n",v:c};break;case 3:r={t:"s",v:t[l]};break;case 5:r={t:"d",v:h};break;case 6:r={t:"b",v:u>0};break;case 7:r={t:"n",v:u/86400};break;case 8:r={t:"e",v:0};break;case 9:if(!(o>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&s," : ").concat(e.slice(0,4)));r={t:"s",v:n[o]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&s," : ").concat(e.slice(0,4)))}return r}function JD(e,t){var n=new Uint8Array(32),r=OD(n),i=12,s=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var s=0;i>=1;++s,i/=256)e[t+s]=255&i;e[t+15]|=n>=0?0:128}(n,i,e.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,e.v?1:0,!0),s|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,s,!0),n.slice(0,i)}function QD(e,t){var n=new Uint8Array(32),r=OD(n),i=12,s=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(i,e.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,e.v?1:0,!0),s|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,s,!0),n.slice(0,i)}function ZD(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:return function(e,t,n,r){var i,s=OD(e),a=s.getUint32(4,!0),o=(r>1?12:8)+4*jD(a&(r>1?3470:398)),l=-1,c=-1,u=NaN,h=new Date(2001,0,1);switch(512&a&&(l=s.getUint32(o,!0),o+=4),o+=4*jD(a&(r>1?12288:4096)),16&a&&(c=s.getUint32(o,!0),o+=4),32&a&&(u=s.getFloat64(o,!0),o+=8),64&a&&(h.setTime(h.getTime()+1e3*s.getFloat64(o,!0)),o+=8),e[2]){case 0:break;case 2:i={t:"n",v:u};break;case 3:i={t:"s",v:t[c]};break;case 5:i={t:"d",v:h};break;case 6:i={t:"b",v:u>0};break;case 7:i={t:"n",v:u/86400};break;case 8:i={t:"e",v:0};break;case 9:if(l>-1)i={t:"s",v:n[l]};else if(c>-1)i={t:"s",v:t[c]};else{if(isNaN(u))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));i={t:"n",v:u}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return i}(e,t,n,e[0]);case 5:return $D(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function eO(e){return BD(VD(e)[1][0].data)}function tO(e,t){var n=VD(t.data),r=zD(n[1][0].data),i=n[3],s=[];return(i||[]).forEach(function(t){var n=VD(t.data),i=zD(n[1][0].data)>>>0;switch(r){case 1:s[i]=RD(n[3][0].data);break;case 8:var a=VD(e[eO(n[9][0].data)][0].data),o=e[eO(a[1][0].data)][0],l=zD(o.meta[1][0].data);if(2001!=l)throw new Error("2000 unexpected reference to ".concat(l));var c=VD(o.data);s[i]=c[3].map(function(e){return RD(e.data)}).join("")}}),s}function nO(e,t){var n,r=VD(t.data),i=(null==(n=null==r?void 0:r[7])?void 0:n[0])?zD(r[7][0].data)>>>0>0?1:0:-1,s=WD(r[5],function(e){return function(e,t){var n,r,i,s,a,o,l,c,u,h,d,f,p,m,g,v,b=VD(e),y=zD(b[1][0].data)>>>0,w=zD(b[2][0].data)>>>0,x=(null==(r=null==(n=b[8])?void 0:n[0])?void 0:r.data)&&zD(b[8][0].data)>0||!1;if((null==(s=null==(i=b[7])?void 0:i[0])?void 0:s.data)&&0!=t)g=null==(o=null==(a=b[7])?void 0:a[0])?void 0:o.data,v=null==(c=null==(l=b[6])?void 0:l[0])?void 0:c.data;else{if(!(null==(h=null==(u=b[4])?void 0:u[0])?void 0:h.data)||1==t)throw"NUMBERS Tile missing ".concat(t," cell storage");g=null==(f=null==(d=b[4])?void 0:d[0])?void 0:f.data,v=null==(m=null==(p=b[3])?void 0:p[0])?void 0:m.data}for(var _=x?4:1,S=OD(g),k=[],T=0;T<g.length/2;++T){var E=S.getUint16(2*T,!0);E<65535&&k.push([T,E])}if(k.length!=w)throw"Expected ".concat(w," cells, found ").concat(k.length);var A=[];for(T=0;T<k.length-1;++T)A[k[T][0]]=v.subarray(k[T][1]*_,k[T+1][1]*_);return k.length>=1&&(A[k[k.length-1][0]]=v.subarray(k[k.length-1][1]*_)),{R:y,cells:A}}(e,i)});return{nrows:zD(r[4][0].data)>>>0,data:s.reduce(function(e,t){return e[t.R]||(e[t.R]=[]),t.cells.forEach(function(n,r){if(e[t.R][r])throw new Error("Duplicate cell r=".concat(t.R," c=").concat(r));e[t.R][r]=n}),e},[])}}function rO(e,t){var n={"!ref":"A1"},r=e[eO(VD(t.data)[2][0].data)],i=zD(r[0].meta[1][0].data);if(6001!=i)throw new Error("6000 unexpected reference to ".concat(i));return function(e,t,n){var r,i=VD(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(zD(i[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(s.e.c=(zD(i[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));n["!ref"]=hE(s);var a=VD(i[4][0].data),o=tO(e,e[eO(a[4][0].data)][0]),l=(null==(r=a[17])?void 0:r[0])?tO(e,e[eO(a[17][0].data)][0]):[],c=VD(a[3][0].data),u=0;c[1].forEach(function(t){var r=VD(t.data),i=e[eO(r[2][0].data)][0],s=zD(i.meta[1][0].data);if(6002!=s)throw new Error("6001 unexpected reference to ".concat(s));var a=nO(0,i);a.data.forEach(function(e,t){e.forEach(function(e,r){var i=cE({r:u+t,c:r}),s=ZD(e,o,l);s&&(n[i]=s)})}),u+=a.nrows})}(e,r[0],n),n}function iO(e,t){var n={SheetNames:[],Sheets:{}};if(WD(VD(t.data)[1],eO).forEach(function(t){e[t].forEach(function(t){if(2==zD(t.meta[1][0].data)){var r=function(e,t){var n,r=VD(t.data),i={name:(null==(n=r[1])?void 0:n[0])?RD(r[1][0].data):"",sheets:[]};return WD(r[2],eO).forEach(function(t){e[t].forEach(function(t){6e3==zD(t.meta[1][0].data)&&i.sheets.push(rO(e,t))})}),i}(e,t);r.sheets.forEach(function(e,t){RO(n,e,0==t?r.name:r.name+"_"+t,!0)})}})}),0==n.SheetNames.length)throw new Error("Empty NUMBERS file");return n}function sO(e){var t,n,r,i,s={},a=[];if(e.FullPaths.forEach(function(e){if(e.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(e){if(e.name.match(/\.iwa$/)){var t,n;try{t=YD(e.content)}catch(r){return console.log("?? "+e.content.length+" "+(r.message||r))}try{n=HD(t)}catch(r){return console.log("## "+(r.message||r))}n.forEach(function(e){s[e.id]=e.messages,a.push(e.id)})}}),!a.length)throw new Error("File has no messages");var o=(null==(i=null==(r=null==(n=null==(t=null==s?void 0:s[1])?void 0:t[0])?void 0:n.meta)?void 0:r[1])?void 0:i[0].data)&&1==zD(s[1][0].meta[1][0].data)&&s[1][0];if(o||a.forEach(function(e){s[e].forEach(function(e){if(1==zD(e.meta[1][0].data)>>>0){if(o)throw new Error("Document has multiple roots");o=e}})}),!o)throw new Error("Cannot find Document root");return iO(s,o)}function aO(e,t,n){var r,i,s,a;if(!(null==(r=e[6])?void 0:r[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(a=null==(s=e[8])?void 0:s[0])?void 0:a.data)&&zD(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=OD(e[7][0].data),c=0,u=[],h=OD(e[4][0].data),d=0,f=[],p=0;p<t.length;++p)if(null!=t[p]){var m,g;switch(l.setUint16(2*p,c,!0),h.setUint16(2*p,d,!0),typeof t[p]){case"string":m=JD({t:"s",v:t[p]},n),g=QD({t:"s",v:t[p]},n);break;case"number":m=JD({t:"n",v:t[p]},n),g=QD({t:"n",v:t[p]},n);break;case"boolean":m=JD({t:"b",v:t[p]},n),g=QD({t:"b",v:t[p]},n);break;default:throw new Error("Unsupported value "+t[p])}u.push(m),c+=m.length,f.push(g),d+=g.length,++o}else l.setUint16(2*p,65535,!0),h.setUint16(2*p,65535);for(e[2][0].data=UD(o);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),h.setUint16(2*p,65535,!0);return e[6][0].data=FD(u),e[3][0].data=FD(f),o}function oO(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function lO(e){oO([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function cO(e){oO([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function uO(e,t,n,r,i,s,a,o,l,c,u,h){try{s[r]=aA(nk(e,n,!0),t);var d,f=tk(e,t);switch(o){case"sheet":d=wL(f,t,i,l,s[r],c,u,h);break;case"chart":if(!(d=xL(f,t,i,l,s[r],c))||!d["!drawel"])break;var p=lk(d["!drawel"].Target,t),m=sA(p),g=function(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][n].Target}(nk(e,p,!0),aA(nk(e,m,!0),p)),v=lk(g,p),b=sA(v);d=nL(nk(e,v,!0),0,0,aA(nk(e,b,!0),v),0,d);break;case"macro":w=t,s[r],w.slice(-4),d={"!type":"macro"};break;case"dialog":d=function(e,t){return t.slice(-4),{"!type":"dialog"}}(0,t,0,0,s[r]);break;default:throw new Error("Unrecognized sheet type "+o)}a[r]=d;var y=[];s&&s[r]&&IS(s[r]).forEach(function(n){var i="";if(s[r][n].Type==iA.CMNT){i=lk(s[r][n].Target,t);var a=kL(tk(e,i,!0),i,l);if(!a||!a.length)return;pC(d,a,!1)}s[r][n].Type==iA.TCMNT&&(i=lk(s[r][n].Target,t),y=y.concat(function(e,t){var n=[],r=!1,i={},s=0;return e.replace(dk,function(a,o){var l=mk(a);switch(gk(l[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":i={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=i.t&&n.push(i);break;case"<text>":case"<text":s=o+a.length;break;case"</text>":i.t=e.slice(s,o).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":r=!0;break;case"</mentions>":case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return a}),n}(tk(e,i,!0),l)))}),y&&y.length&&pC(d,y,!0,l.people||[])}catch(x){if(l.WTF)throw x}var w}function hO(e){return"/"==e.charAt(0)?e.slice(1):e}function dO(e,t){if(xS(),lO(t=t||{}),ZS(e,"META-INF/manifest.xml"))return ID(e,t);if(ZS(e,"objectdata.xml"))return ID(e,t);if(ZS(e,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if(e.FileIndex)return sO(e);var n=TS.utils.cfb_new();return ik(e).forEach(function(t){sk(n,t,rk(e,t))}),sO(n)}if(!ZS(e,"[Content_Types].xml")){if(ZS(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(ZS(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");throw new Error("Unsupported ZIP file")}var r,i,s=ik(e),a=function(e){var t={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return t;var n={};if((e.match(dk)||[]).forEach(function(e){var r=mk(e);switch(r[0].replace(fk,"<")){case"<?xml":break;case"<Types":t.xmlns=r["xmlns"+(r[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[r.Extension]=r.ContentType;break;case"<Override":void 0!==t[tA[r.ContentType]]&&t[tA[r.ContentType]].push(r.PartName)}}),t.xmlns!==$k)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}(nk(e,"[Content_Types].xml")),o=!1;if(0===a.workbooks.length&&tk(e,i="xl/workbook.xml",!0)&&a.workbooks.push(i),0===a.workbooks.length){if(!tk(e,i="xl/workbook.bin",!0))throw new Error("Could not find workbook");a.workbooks.push(i),o=!0}"bin"==a.workbooks[0].slice(-3)&&(o=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(pP=[],a.sst)try{pP=SL(tk(e,hO(a.sst)),a.sst,t)}catch(C){if(t.WTF)throw C}t.cellStyles&&a.themes.length&&(l=function(e,t,n){return sC(e,n)}(nk(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(c=_L(tk(e,hO(a.style)),a.style,l,t))}a.links.map(function(n){try{aA(nk(e,sA(hO(n))),n);return EL(tk(e,hO(n)),0,n,t)}catch(C){}});var u=yL(tk(e,hO(a.workbooks[0])),a.workbooks[0],t),h={},d="";a.coreprops.length&&((d=tk(e,hO(a.coreprops[0]),!0))&&(h=pA(d)),0!==a.extprops.length&&(d=tk(e,hO(a.extprops[0]),!0))&&function(e,t,n){var r={};t||(t={}),e=Lk(e),vA.forEach(function(n){var i=(e.match(Ok(n[0]))||[])[1];switch(n[2]){case"string":i&&(t[n[1]]=yk(i));break;case"bool":t[n[1]]="true"===i;break;case"raw":var s=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));s&&s.length>0&&(r[n[1]]=s[1])}}),r.HeadingPairs&&r.TitlesOfParts&&yA(r.HeadingPairs,r.TitlesOfParts,t,n)}(d,h,t));var f={};t.bookSheets&&!t.bookProps||0!==a.custprops.length&&(d=nk(e,hO(a.custprops[0]),!0))&&(f=function(e,t){var n={},r="",i=e.match(xA);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=mk(a);switch(o[0]){case"<?xml":case"<Properties":break;case"<property":r=yk(o.name);break;case"</property>":r=null;break;default:if(0===a.indexOf("<vt:")){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":n[r]=yk(u);break;case"bool":n[r]=Ak(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(u,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(u);break;case"filetime":case"date":n[r]=qS(u);break;default:if("/"==c.slice(-1))break;t.WTF&&"undefined"!==typeof console&&console.warn("Unexpected",a,c,l)}}else if("</"===a.slice(0,2));else if(t.WTF)throw new Error(a)}}return n}(d,t));var p={};if((t.bookSheets||t.bookProps)&&(u.Sheets?r=u.Sheets.map(function(e){return e.name}):h.Worksheets&&h.SheetNames.length>0&&(r=h.SheetNames),t.bookProps&&(p.Props=h,p.Custprops=f),t.bookSheets&&"undefined"!==typeof r&&(p.SheetNames=r),t.bookSheets?p.SheetNames:t.bookProps))return p;r={};var m={};t.bookDeps&&a.calcchain&&(m=TL(tk(e,hO(a.calcchain)),a.calcchain));var g,v,b=0,y={},w=u.Sheets;h.Worksheets=w.length,h.SheetNames=[];for(var x=0;x!=w.length;++x)h.SheetNames[x]=w[x].name;var _=o?"bin":"xml",S=a.workbooks[0].lastIndexOf("/"),k=(a.workbooks[0].slice(0,S+1)+"_rels/"+a.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");ZS(e,k)||(k="xl/_rels/workbook."+_+".rels");var T=aA(nk(e,k,!0),k.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=AL(tk(e,hO(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=function(e,t){var n=[],r=!1;return e.replace(dk,function(e){var i=mk(e);switch(gk(i[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":n.push({name:i.displayname,id:i.id});break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return e}),n}(tk(e,hO(a.people[0])),t)),T&&(T=function(e,t){if(!e)return 0;try{e=t.map(function(t){return t.id||(t.id=t.strRelID),[t.name,e["!id"][t.id].Target,(n=e["!id"][t.id].Type,iA.WS.indexOf(n)>-1?"sheet":iA.CS&&n==iA.CS?"chart":iA.DS&&n==iA.DS?"dialog":iA.MS&&n==iA.MS?"macro":n&&n.length?n:"sheet")];var n})}catch(C){return null}return e&&0!==e.length?e:null}(T,u.Sheets));var E=tk(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=h.Worksheets;++b){var A="sheet";if(T&&T[b]?(g="xl/"+T[b][1].replace(/[\/]?xl\//,""),ZS(e,g)||(g=T[b][1]),ZS(e,g)||(g=k.replace(/_rels\/.*$/,"")+T[b][1]),A=T[b][2]):g=(g="xl/worksheets/sheet"+(b+1-E)+"."+_).replace(/sheet0\./,"sheet."),v=g.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&null!=t.sheets)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(h.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var N=!1,I=0;I!=t.sheets.length;++I)"number"==typeof t.sheets[I]&&t.sheets[I]==b&&(N=1),"string"==typeof t.sheets[I]&&t.sheets[I].toLowerCase()==h.SheetNames[b].toLowerCase()&&(N=1);if(!N)continue e}}uO(e,g,v,h.SheetNames[b],b,y,r,A,t,u,l,c)}return p={Directory:a,Workbook:u,Props:h,Custprops:f,Deps:m,Sheets:r,SheetNames:h.SheetNames,Strings:pP,Styles:c,Themes:l,SSF:HS(U_)},t&&t.bookFiles&&(e.files?(p.keys=s,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach(function(t,n){t=t.replace(/^Root Entry[\/]/,""),p.keys.push(t),p.files[t]=e.FileIndex[n]}))),t&&t.bookVBA&&(a.vba.length>0?p.vbaraw=tk(e,hO(a.vba[0]),!0):a.defaults&&"application/vnd.ms-office.vbaProject"===a.defaults.bin&&(p.vbaraw=tk(e,"xl/vbaProject.bin",!0))),p}function fO(e,t){var n=t||{},r="Workbook",i=TS.find(e,r);try{if(r="/!DataSpaces/Version",!(i=TS.find(e,r))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(function(e){var t={};t.id=e.read_shift(0,"lpp4"),t.R=lI(e,4),t.U=lI(e,4),t.W=lI(e,4)}(i.content),r="/!DataSpaces/DataSpaceMap",!(i=TS.find(e,r))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=function(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(cI(e));return t}(i.content);if(1!==s.length||1!==s[0].comps.length||0!==s[0].comps[0].t||"StrongEncryptionDataSpace"!==s[0].name||"EncryptedPackage"!==s[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",!(i=TS.find(e,r))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=function(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}(i.content);if(1!=a.length||"StrongEncryptionTransform"!=a[0])throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",!(i=TS.find(e,r))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);uI(i.content)}catch(l){}if(r="/EncryptionInfo",!(i=TS.find(e,r))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=function(e){var t=lI(e);switch(t.Minor){case 2:return[t.Minor,fI(e)];case 3:return[t.Minor,pI()];case 4:return[t.Minor,mI(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}(i.content);if(r="/EncryptedPackage",!(i=TS.find(e,r))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(4==o[0]&&"undefined"!==typeof decrypt_agile)return decrypt_agile(o[1],i.content,n.password||"",n);if(2==o[0]&&"undefined"!==typeof decrypt_std76)return decrypt_std76(o[1],i.content,n.password||"",n);throw new Error("File is password-protected")}function pO(e,t){return"ods"==t.bookType?DD(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=uE(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(hE(r)));var s=AO(n,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&a.push(e)})});var o={},l=[],c=TS.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&HD(YD(t.content)).forEach(function(e){l.push(e.id),o[e.id]={deps:[],location:n,type:zD(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var u=l.filter(function(e){return e>1}).map(function(e){return[e,UD(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&HD(YD(t.content)).forEach(function(e){e.messages.forEach(function(t){u.forEach(function(t){e.messages.some(function(e){return 11006!=zD(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])})&&o[t[0]].deps.push(e.id)})})})});for(var h,d=TS.find(c,o[1].location),f=HD(YD(d.content)),p=0;p<f.length;++p){var m=f[p];1==m.id&&(h=m)}var g=eO(VD(h.messages[0].data)[1][0].data);for(f=HD(YD((d=TS.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);for(g=eO(VD(h.messages[0].data)[2][0].data),f=HD(YD((d=TS.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);for(g=eO(VD(h.messages[0].data)[2][0].data),f=HD(YD((d=TS.find(c,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);var v=VD(h.messages[0].data);v[6][0].data=UD(r.e.r+1),v[7][0].data=UD(r.e.c+1);for(var b=eO(v[46][0].data),y=TS.find(c,o[b].location),w=HD(YD(y.content)),x=0;x<w.length&&w[x].id!=b;++x);if(w[x].id!=b)throw"Bad ColumnRowUIDMapArchive";var _=VD(w[x].messages[0].data);_[1]=[],_[2]=[],_[3]=[];for(var S=0;S<=r.e.c;++S){var k=[];k[1]=k[2]=[{type:0,data:UD(S+420690)}],_[1].push({type:2,data:qD(k)}),_[2].push({type:0,data:UD(S)}),_[3].push({type:0,data:UD(S)})}_[4]=[],_[5]=[],_[6]=[];for(var T=0;T<=r.e.r;++T)(k=[])[1]=k[2]=[{type:0,data:UD(T+726270)}],_[4].push({type:2,data:qD(k)}),_[5].push({type:0,data:UD(T)}),_[6].push({type:0,data:UD(T)});w[x].messages[0].data=qD(_),y.content=XD(GD(w)),y.size=y.content.length,delete v[46];var E=VD(v[4][0].data);E[7][0].data=UD(r.e.r+1);var A=eO(VD(E[1][0].data)[2][0].data);if((w=HD(YD((y=TS.find(c,o[A].location)).content)))[0].id!=A)throw"Bad HeaderStorageBucket";var N=VD(w[0].messages[0].data);for(T=0;T<s.length;++T){var I=VD(N[2][0].data);I[1][0].data=UD(T),I[4][0].data=UD(s[T].length),N[2][T]={type:N[2][0].type,data:qD(I)}}w[0].messages[0].data=qD(N),y.content=XD(GD(w)),y.size=y.content.length;var C=eO(E[2][0].data);if((w=HD(YD((y=TS.find(c,o[C].location)).content)))[0].id!=C)throw"Bad HeaderStorageBucket";for(N=VD(w[0].messages[0].data),S=0;S<=r.e.c;++S)(I=VD(N[2][0].data))[1][0].data=UD(S),I[4][0].data=UD(r.e.r+1),N[2][S]={type:N[2][0].type,data:qD(I)};w[0].messages[0].data=qD(N),y.content=XD(GD(w)),y.size=y.content.length;var P=eO(E[4][0].data);!function(){for(var e,t=TS.find(c,o[P].location),n=HD(YD(t.content)),r=0;r<n.length;++r){var i=n[r];i.id==P&&(e=i)}var s=VD(e.messages[0].data);s[3]=[];var l=[];a.forEach(function(e,t){l[1]=[{type:0,data:UD(t)}],l[2]=[{type:0,data:UD(1)}],l[3]=[{type:2,data:MD(e)}],s[3].push({type:2,data:qD(l)})}),e.messages[0].data=qD(s);var u=XD(GD(n));t.content=u,t.size=t.content.length}();var L=VD(E[3][0].data),D=L[1][0];delete L[2];var O=VD(D.data),R=eO(O[2][0].data);!function(){for(var e,t=TS.find(c,o[R].location),n=HD(YD(t.content)),i=0;i<n.length;++i){var l=n[i];l.id==R&&(e=l)}var u=VD(e.messages[0].data);delete u[6],delete L[7];var h=new Uint8Array(u[5][0].data);u[5]=[];for(var d=0,f=0;f<=r.e.r;++f){var p=VD(h);d+=aO(p,s[f],a),p[1][0].data=UD(f),u[5].push({data:qD(p),type:2})}u[1]=[{type:0,data:UD(r.e.c+1)}],u[2]=[{type:0,data:UD(r.e.r+1)}],u[3]=[{type:0,data:UD(d)}],u[4]=[{type:0,data:UD(r.e.r+1)}],e.messages[0].data=qD(u);var m=XD(GD(n));t.content=m,t.size=t.content.length}(),D.data=qD(O),E[3][0].data=qD(L),v[4][0].data=qD(E),h.messages[0].data=qD(v);var M=XD(GD(f));return d.content=M,d.size=d.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){dC=1024,e&&!e.SSF&&(e.SSF=HS(U_));e&&e.SSF&&(xS(),wS(e.SSF),t.revssf=LS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,gP?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=yC.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};cO(t=t||{});var s=ak(),a="",o=0;t.cellXfs=[],wP(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(a="docProps/core.xml",sk(s,a,gA(e.Props,t)),i.coreprops.push(a),lA(t.rels,2,a,iA.CORE_PROPS),a="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,sk(s,a,wA(e.Props)),i.extprops.push(a),lA(t.rels,3,a,iA.EXT_PROPS),e.Custprops!==e.Props&&IS(e.Custprops||{}).length>0&&(sk(s,a="docProps/custom.xml",_A(e.Custprops)),i.custprops.push(a),lA(t.rels,4,a,iA.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(sk(s,a="xl/worksheets/sheet"+o+"."+n,NL(o-1,a,t,e,u)),i.sheets.push(a),lA(t.wbrels,-1,"worksheets/sheet"+o+"."+n,iA.WS[0]),h){var d=h["!comments"],f=!1,p="";d&&d.length>0&&(sk(s,p="xl/comments"+o+"."+n,IL(d,p,t)),i.comments.push(p),lA(u,-1,"../comments"+o+"."+n,iA.CMNT),f=!0),h["!legacy"]&&f&&sk(s,"xl/drawings/vmlDrawing"+o+".vml",fC(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&sk(s,sA(a),oA(u))}null!=t.Strings&&t.Strings.length>0&&(sk(s,a="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?aI:iI)(e,n)}(t.Strings,a,t)),i.strs.push(a),lA(t.wbrels,-1,"sharedStrings."+n,iA.SST));a="xl/workbook."+n,sk(s,a,function(e,t,n){return(".bin"===t.slice(-4)?bL:pL)(e,n)}(e,a,t)),i.workbooks.push(a),lA(t.rels,1,a,iA.WB),a="xl/theme/theme1.xml",sk(s,a,aC(e.Themes,t)),i.themes.push(a),lA(t.wbrels,-1,"theme/theme1.xml",iA.THEME),a="xl/styles."+n,sk(s,a,function(e,t,n){return(".bin"===t.slice(-4)?$I:FI)(e,n)}(e,a,t)),i.styles.push(a),lA(t.wbrels,-1,"styles."+n,iA.STY),e.vbaraw&&r&&(sk(s,a="xl/vbaProject.bin",e.vbaraw),i.vba.push(a),lA(t.wbrels,-1,"vbaProject.bin",iA.VBA));return a="xl/metadata."+n,sk(s,a,function(e){return(".bin"===e.slice(-4)?uC:hC)()}(a)),i.metadata.push(a),lA(t.wbrels,-1,"metadata."+n,iA.XLMETA),sk(s,"[Content_Types].xml",rA(i,t)),sk(s,"_rels/.rels",oA(t.rels)),sk(s,"xl/_rels/workbook."+n+".rels",oA(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):mO(e,t)}function mO(e,t){dC=1024,e&&!e.SSF&&(e.SSF=HS(U_)),e&&e.SSF&&(xS(),wS(e.SSF),t.revssf=LS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,gP?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=yC.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};cO(t=t||{});var s=ak(),a="",o=0;if(t.cellXfs=[],wP(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),sk(s,a="docProps/core.xml",gA(e.Props,t)),i.coreprops.push(a),lA(t.rels,2,a,iA.CORE_PROPS),a="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,sk(s,a,wA(e.Props)),i.extprops.push(a),lA(t.rels,3,a,iA.EXT_PROPS),e.Custprops!==e.Props&&IS(e.Custprops||{}).length>0&&(sk(s,a="docProps/custom.xml",_A(e.Custprops)),i.custprops.push(a),lA(t.rels,4,a,iA.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var h={"!id":{}},d=e.Sheets[e.SheetNames[o-1]];(d||{})["!type"];if(sk(s,a="xl/worksheets/sheet"+o+"."+n,UP(o-1,t,e,h)),i.sheets.push(a),lA(t.wbrels,-1,"worksheets/sheet"+o+"."+n,iA.WS[0]),d){var f=d["!comments"],p=!1,m="";if(f&&f.length>0){var g=!1;f.forEach(function(e){e[1].forEach(function(e){1==e.T&&(g=!0)})}),g&&(sk(s,m="xl/threadedComments/threadedComment"+o+"."+n,gC(f,u,t)),i.threadedcomments.push(m),lA(h,-1,"../threadedComments/threadedComment"+o+"."+n,iA.TCMNT)),sk(s,m="xl/comments"+o+"."+n,mC(f)),i.comments.push(m),lA(h,-1,"../comments"+o+"."+n,iA.CMNT),p=!0}d["!legacy"]&&p&&sk(s,"xl/drawings/vmlDrawing"+o+".vml",fC(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&sk(s,sA(a),oA(h))}return null!=t.Strings&&t.Strings.length>0&&(sk(s,a="xl/sharedStrings."+n,iI(t.Strings,t)),i.strs.push(a),lA(t.wbrels,-1,"sharedStrings."+n,iA.SST)),sk(s,a="xl/workbook."+n,pL(e)),i.workbooks.push(a),lA(t.rels,1,a,iA.WB),sk(s,a="xl/theme/theme1.xml",aC(e.Themes,t)),i.themes.push(a),lA(t.wbrels,-1,"theme/theme1.xml",iA.THEME),sk(s,a="xl/styles."+n,FI(e,t)),i.styles.push(a),lA(t.wbrels,-1,"styles."+n,iA.STY),e.vbaraw&&r&&(sk(s,a="xl/vbaProject.bin",e.vbaraw),i.vba.push(a),lA(t.wbrels,-1,"vbaProject.bin",iA.VBA)),sk(s,a="xl/metadata."+n,hC()),i.metadata.push(a),lA(t.wbrels,-1,"metadata."+n,iA.XLMETA),u.length>1&&(sk(s,a="xl/persons/person.xml",function(e){var t=[ck,qk("personList",null,{xmlns:Qk,"xmlns:x":aT[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,n){t.push(qk("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(u)),i.people.push(a),lA(t.wbrels,-1,"persons/person.xml",iA.PEOPLE)),sk(s,"[Content_Types].xml",rA(i,t)),sk(s,"_rels/.rels",oA(t.rels)),sk(s,"xl/_rels/workbook.xml.rels",oA(t.wbrels)),delete t.revssf,delete t.ssf,s}function gO(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=y_(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function vO(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return zL(e.slice(n),t);default:break e}return GN.to_workbook(e,t)}function bO(e,t,n,r){return r?(n.type="string",GN.to_workbook(e,n)):GN.to_workbook(t,n)}function yO(e,t){u_();var n=t||{};if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer)return yO(new Uint8Array(e),((n=HS(n)).type="array",n));"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&!n.type&&(n.type="undefined"!==typeof Deno?"buffer":"array");var r,i=e,s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),mP={},n.dateNF&&(mP.dateNF=n.dateNF),n.type||(n.type=w_&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==n.type&&(n.type=w_?"buffer":"binary",i=function(e){if("undefined"!==typeof ES)return ES.readFileSync(e);if("undefined"!==typeof Deno)return Deno.readFileSync(e);if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+e)}(e),"undefined"===typeof Uint8Array||w_||(n.type="array")),"string"==n.type&&(s=!0,n.type="binary",n.codepage=65001,i=function(e){return e.match(/[^\x00-\x7F]/)?Dk(e):e}(e)),"array"==n.type&&"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&"undefined"!==typeof ArrayBuffer){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return(n=HS(n)).type="array",yO(A_(i),n)}switch((r=gO(i,n))[0]){case 208:if(207===r[1]&&17===r[2]&&224===r[3]&&161===r[4]&&177===r[5]&&26===r[6]&&225===r[7])return function(e,t){return TS.find(e,"EncryptedPackage")?fO(e,t):rD(e,t)}(TS.read(i,n),n);break;case 9:if(r[1]<=8)return rD(i,n);break;case 60:return zL(i,n);case 73:if(73===r[1]&&42===r[2]&&0===r[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===r[1])return function(e,t){var n=t||{},r=!!n.WTF;n.WTF=!0;try{var i=qN.to_workbook(e,n);return n.WTF=r,i}catch(s){if(n.WTF=r,!s.message.match(/SYLK bad record ID/)&&r)throw s;return GN.to_workbook(e,t)}}(i,n);break;case 84:if(65===r[1]&&66===r[2]&&76===r[3])return WN.to_workbook(i,n);break;case 80:return 75===r[1]&&r[2]<9&&r[3]<9?function(e,t){var n=e,r=t||{};return r.type||(r.type=w_&&Buffer.isBuffer(e)?"buffer":"base64"),dO(ok(n,r),r)}(i,n):bO(e,i,n,s);case 239:return 60===r[3]?zL(i,n):bO(e,i,n,s);case 255:if(254===r[1])return function(e,t){var n=e;return"base64"==t.type&&(n=y_(n)),n=f_.utils.decode(1200,n.slice(2),"str"),t.type="binary",vO(n,t)}(i,n);if(0===r[1]&&2===r[2]&&0===r[3])return KN.to_workbook(i,n);break;case 0:if(0===r[1]){if(r[2]>=2&&0===r[3])return KN.to_workbook(i,n);if(0===r[2]&&(8===r[3]||9===r[3]))return KN.to_workbook(i,n)}break;case 3:case 131:case 139:case 140:return VN.to_workbook(i,n);case 123:if(92===r[1]&&114===r[2]&&116===r[3])return wI.to_workbook(i,n);break;case 10:case 13:case 32:return function(e,t){var n="",r=gO(e,t);switch(t.type){case"base64":n=y_(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=WS(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]&&(n=Lk(n)),t.type="binary",vO(n,t)}(i,n);case 137:if(80===r[1]&&78===r[2]&&71===r[3])throw new Error("PNG Image File is not a spreadsheet")}return zN.indexOf(r[0])>-1&&r[2]<=12&&r[3]<=31?VN.to_workbook(i,n):bO(e,i,n,s)}function wO(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return NS(t.file,TS.write(e,{type:w_?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return TS.write(e,t)}function xO(e,t){var n={},r=w_?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?TS.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(T_(i))}return t.password&&"undefined"!==typeof encrypt_agile?wO(encrypt_agile(i,t.password),t):"file"===t.type?NS(t.file,i):"string"==t.type?Lk(i):i}function _O(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return b_(Dk(r));case"binary":return Dk(r);case"string":return e;case"file":return NS(t.file,r,"utf8");case"buffer":return w_?x_(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):_O(r,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function SO(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?b_(n):"string"==t.type?Lk(n):n;case"file":return NS(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function kO(e,t){u_(),dL(e);var n=HS(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=kO(e,n);return n.type="array",T_(r)}var i=0;if(n.sheet&&(i="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return _O(KL(e,n),n);case"slk":case"sylk":return _O(qN.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"htm":case"html":return _O(_D(e.Sheets[e.SheetNames[i]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return b_(e);case"binary":case"string":return e;case"file":return NS(t.file,e,"binary");case"buffer":return w_?x_(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(PO(e.Sheets[e.SheetNames[i]],n),n);case"csv":return _O(CO(e.Sheets[e.SheetNames[i]],n),n,"\ufeff");case"dif":return _O(WN.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"dbf":return SO(VN.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"prn":return _O(GN.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"rtf":return _O(wI.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"eth":return _O(HN.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"fods":return _O(DD(e,n),n);case"wk1":return SO(KN.sheet_to_wk1(e.Sheets[e.SheetNames[i]],n),n);case"wk3":return SO(KN.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),SO(gD(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return wO(iD(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=HS(t||{});return xO(pO(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function TO(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function EO(e,t,n,r,i,s,a,o){var l=sE(n),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,d=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:n,enumerable:!1})}catch(g){d.__rowNum__=n}else d.__rowNum__=n;if(!a||e[n])for(var f=t.s.c;f<=t.e.c;++f){var p=a?e[n][f]:e[r[f]+l];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=s[f]){if(null==m)if("e"==p.t&&null===m)d[s[f]]=null;else if(void 0!==c)d[s[f]]=c;else{if(!u||null!==m)continue;d[s[f]]=null}else d[s[f]]=u&&("n"!==p.t||"n"===p.t&&!1!==o.rawNumbers)?m:pE(p,m,o);null!=m&&(h=!1)}}else{if(void 0===c)continue;null!=s[f]&&(d[s[f]]=c)}}return{row:d,isempty:h}}function AO(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof u){case"string":l=dE(u);break;case"number":(l=dE(e["!ref"])).s.r=u;break;default:l=u}r>0&&(i=0);var h=sE(l.s.r),d=[],f=[],p=0,m=0,g=Array.isArray(e),v=l.s.r,b=0,y={};g&&!e[v]&&(e[v]=[]);var w=c.skipHidden&&e["!cols"]||[],x=c.skipHidden&&e["!rows"]||[];for(b=l.s.c;b<=l.e.c;++b)if(!(w[b]||{}).hidden)switch(d[b]=oE(b),n=g?e[v][b]:e[d[b]+h],r){case 1:s[b]=b-l.s.c;break;case 2:s[b]=d[b];break;case 3:s[b]=c.header[b-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=a=pE(n,null,c),m=y[a]||0){do{o=a+"_"+m++}while(y[o]);y[a]=m,y[o]=1}else y[a]=1;s[b]=o}for(v=l.s.r+i;v<=l.e.r;++v)if(!(x[v]||{}).hidden){var _=EO(e,l,v,d,r,s,g,c);(!1===_.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(f[p++]=_.row)}return f.length=p,f}var NO=/"/g;function IO(e,t,n,r,i,s,a,o){for(var l=!0,c=[],u="",h=sE(n),d=t.s.c;d<=t.e.c;++d)if(r[d]){var f=o.dense?(e[n]||[])[d]:e[r[d]+h];if(null==f)u="";else if(null!=f.v){l=!1,u=""+(o.rawNumbers&&"n"==f.t?f.v:pE(f,null,o));for(var p=0,m=0;p!==u.length;++p)if((m=u.charCodeAt(p))===i||m===s||34===m||o.forceQuotes){u='"'+u.replace(NO,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==f.f||f.F?u="":(l=!1,(u="="+f.f).indexOf(",")>=0&&(u='"'+u.replace(NO,'""')+'"'));c.push(u)}return!1===o.blankrows&&l?null:c.join(a)}function CO(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=dE(e["!ref"]),s=void 0!==r.FS?r.FS:",",a=s.charCodeAt(0),o=void 0!==r.RS?r.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),u="",h=[];r.dense=Array.isArray(e);for(var d=r.skipHidden&&e["!cols"]||[],f=r.skipHidden&&e["!rows"]||[],p=i.s.c;p<=i.e.c;++p)(d[p]||{}).hidden||(h[p]=oE(p));for(var m=0,g=i.s.r;g<=i.e.r;++g)(f[g]||{}).hidden||null!=(u=IO(e,i,g,h,a,l,s,r))&&(r.strip&&(u=u.replace(c,"")),(u||!1!==r.blankrows)&&n.push((m++?o:"")+u));return delete r.dense,n.join("")}function PO(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=CO(e,t);if("undefined"==typeof f_||"string"==t.type)return n;var r=f_.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function LO(e,t,n){var r,i=n||{},s=+!i.skipHeader,a=e||{},o=0,l=0;if(a&&null!=i.origin)if("number"==typeof i.origin)o=i.origin;else{var c="string"==typeof i.origin?lE(i.origin):i.origin;o=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(a["!ref"]){var h=dE(a["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),-1==o&&(o=h.e.r+1,u.e.r=o+t.length-1+s)}else-1==o&&(o=0,u.e.r=t.length-1+s);var d=i.header||[],f=0;t.forEach(function(e,t){IS(e).forEach(function(n){-1==(f=d.indexOf(n))&&(d[f=d.length]=n);var c=e[n],u="z",h="",p=cE({c:l+f,r:o+t+s});r=DO(a,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",i.cellDates||(u="n",c=OS(c)),h=i.dateNF||U_[14]):null===c&&i.nullError&&(u="e",c=0),r?(r.t=u,r.v=c,delete r.w,delete r.R,h&&(r.z=h)):a[p]=r={t:u,v:c},h&&(r.z=h)):a[p]=c})}),u.e.c=Math.max(u.e.c,l+d.length-1);var p=sE(o);if(s)for(f=0;f<d.length;++f)a[oE(f+l)+p]={t:"s",v:d[f]};return a["!ref"]=hE(u),a}function DO(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=lE(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return DO(e,cE("number"!=typeof t?t:{r:t,c:n||0}))}function OO(){return{SheetNames:[],Sheets:{}}}function RO(e,t,n,r){var i=1;if(!n)for(;i<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+i);++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||n;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(n=a+i);++i);}if(hL(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function MO(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var FO={encode_col:oE,encode_row:sE,encode_cell:cE,encode_range:hE,decode_col:aE,decode_row:iE,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:lE,decode_range:uE,format_cell:pE,sheet_add_aoa:gE,sheet_add_json:LO,sheet_add_dom:SD,aoa_to_sheet:vE,json_to_sheet:function(e,t){return LO(null,e,t)},table_to_sheet:kD,table_to_book:function(e,t){return mE(kD(e,t),t)},sheet_to_csv:CO,sheet_to_txt:PO,sheet_to_json:AO,sheet_to_html:_D,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var i,s=dE(e["!ref"]),a="",o=[],l=[],c=Array.isArray(e);for(i=s.s.c;i<=s.e.c;++i)o[i]=oE(i);for(var u=s.s.r;u<=s.e.r;++u)for(a=sE(u),i=s.s.c;i<=s.e.c;++i)if(n=o[i]+a,r="",void 0!==(t=c?(e[u]||[])[i]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:AO,sheet_get_cell:DO,book_new:OO,book_append_sheet:RO,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:MO,cell_set_internal_link:function(e,t,n){return MO(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var i="string"!=typeof t?t:dE(t),s="string"==typeof t?t:hE(t),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=DO(e,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};r_.version;var jO=n(2284),BO=Uint8Array,UO=Uint16Array,zO=Int32Array,VO=new BO([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qO=new BO([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),WO=new BO([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HO=function(e,t){for(var n=new UO(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new zO(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},GO=HO(VO,2),KO=GO.b,YO=GO.r;KO[28]=258,YO[258]=28;for(var XO=HO(qO,0),$O=(XO.b,XO.r),JO=new UO(32768),QO=0;QO<32768;++QO){var ZO=(43690&QO)>>1|(21845&QO)<<1;ZO=(61680&(ZO=(52428&ZO)>>2|(13107&ZO)<<2))>>4|(3855&ZO)<<4,JO[QO]=((65280&ZO)>>8|(255&ZO)<<8)>>1}var eR=function(e,t,n){for(var r=e.length,i=0,s=new UO(t);i<r;++i)e[i]&&++s[e[i]-1];var a,o=new UO(t);for(i=1;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;if(n){a=new UO(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],h=o[e[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[JO[h]>>l]=c}else for(a=new UO(r),i=0;i<r;++i)e[i]&&(a[i]=JO[o[e[i]-1]++]>>15-e[i]);return a},tR=new BO(288);for(QO=0;QO<144;++QO)tR[QO]=8;for(QO=144;QO<256;++QO)tR[QO]=9;for(QO=256;QO<280;++QO)tR[QO]=7;for(QO=280;QO<288;++QO)tR[QO]=8;var nR=new BO(32);for(QO=0;QO<32;++QO)nR[QO]=5;var rR=eR(tR,9,0),iR=eR(nR,5,0),sR=function(e){return(e+7)/8|0},aR=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new BO(e.subarray(t,n))},oR=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},lR=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},cR=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:gR,l:0};if(1==i){var a=new BO(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};var d=s[0].s;for(r=1;r<i;++r)s[r].s>d&&(d=s[r].s);var f=new UO(d+1),p=uR(n[u-1],f,0);if(p>t){r=0;var m=0,g=p-t,v=1<<g;for(s.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});r<i;++r){var b=s[r].s;if(!(f[b]>t))break;m+=v-(1<<p-f[b]),f[b]=t}for(m>>=g;m>0;){var y=s[r].s;f[y]<t?m-=1<<t-f[y]++-1:++r}for(;r>=0&&m;--r){var w=s[r].s;f[w]==t&&(--f[w],++m)}p=t}return{t:new BO(f),l:p}},uR=function(e,t,n){return-1==e.s?Math.max(uR(e.l,t,n+1),uR(e.r,t,n+1)):t[e.s]=n},hR=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new UO(++t),r=0,i=e[0],s=1,a=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==i&&o!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[o]}return{c:n.subarray(0,r),n:t}},dR=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},fR=function(e,t,n){var r=n.length,i=sR(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var s=0;s<r;++s)e[i+s+4]=n[s];return 8*(i+4+r)},pR=function(e,t,n,r,i,s,a,o,l,c,u){oR(t,u++,n),++i[256];for(var h=cR(i,15),d=h.t,f=h.l,p=cR(s,15),m=p.t,g=p.l,v=hR(d),b=v.c,y=v.n,w=hR(m),x=w.c,_=w.n,S=new UO(19),k=0;k<b.length;++k)++S[31&b[k]];for(k=0;k<x.length;++k)++S[31&x[k]];for(var T=cR(S,7),E=T.t,A=T.l,N=19;N>4&&!E[WO[N-1]];--N);var I,C,P,L,D=c+5<<3,O=dR(i,tR)+dR(s,nR)+a,R=dR(i,d)+dR(s,m)+a+14+3*N+dR(S,E)+2*S[16]+3*S[17]+7*S[18];if(l>=0&&D<=O&&D<=R)return fR(t,u,e.subarray(l,l+c));if(oR(t,u,1+(R<O)),u+=2,R<O){I=eR(d,f,0),C=d,P=eR(m,g,0),L=m;var M=eR(E,A,0);oR(t,u,y-257),oR(t,u+5,_-1),oR(t,u+10,N-4),u+=14;for(k=0;k<N;++k)oR(t,u+3*k,E[WO[k]]);u+=3*N;for(var F=[b,x],j=0;j<2;++j){var B=F[j];for(k=0;k<B.length;++k){var U=31&B[k];oR(t,u,M[U]),u+=E[U],U>15&&(oR(t,u,B[k]>>5&127),u+=B[k]>>12)}}}else I=rR,C=tR,P=iR,L=nR;for(k=0;k<o;++k){var z=r[k];if(z>255){lR(t,u,I[(U=z>>18&31)+257]),u+=C[U+257],U>7&&(oR(t,u,z>>23&31),u+=VO[U]);var V=31&z;lR(t,u,P[V]),u+=L[V],V>3&&(lR(t,u,z>>5&8191),u+=qO[V])}else lR(t,u,I[z]),u+=C[z]}return lR(t,u,I[256]),u+C[256]},mR=new zO([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gR=new BO(0),vR=function(e,t,n,r,i,s){var a=s.z||e.length,o=new BO(r+a+5*(1+Math.ceil(a/7e3))+i),l=o.subarray(r,o.length-i),c=s.l,u=7&(s.r||0);if(t){u&&(l[0]=s.r>>3);for(var h=mR[t-1],d=h>>13,f=8191&h,p=(1<<n)-1,m=s.p||new UO(32768),g=s.h||new UO(p+1),v=Math.ceil(n/3),b=2*v,y=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<b)&p},w=new zO(25e3),x=new UO(288),_=new UO(32),S=0,k=0,T=s.i||0,E=0,A=s.w||0,N=0;T+2<a;++T){var I=y(T),C=32767&T,P=g[I];if(m[C]=P,g[I]=C,A<=T){var L=a-T;if((S>7e3||E>24576)&&(L>423||!c)){u=pR(e,l,0,w,x,_,k,E,N,T-N,u),E=S=k=0,N=T;for(var D=0;D<286;++D)x[D]=0;for(D=0;D<30;++D)_[D]=0}var O=2,R=0,M=f,F=C-P&32767;if(L>2&&I==y(T-F))for(var j=Math.min(d,L)-1,B=Math.min(32767,T),U=Math.min(258,L);F<=B&&--M&&C!=P;){if(e[T+O]==e[T+O-F]){for(var z=0;z<U&&e[T+z]==e[T+z-F];++z);if(z>O){if(O=z,R=F,z>j)break;var V=Math.min(F,z-2),q=0;for(D=0;D<V;++D){var W=T-F+D&32767,H=W-m[W]&32767;H>q&&(q=H,P=W)}}}F+=(C=P)-(P=m[C])&32767}if(R){w[E++]=268435456|YO[O]<<18|$O[R];var G=31&YO[O],K=31&$O[R];k+=VO[G]+qO[K],++x[257+G],++_[K],A=T+O,++S}else w[E++]=e[T],++x[e[T]]}}for(T=Math.max(T,A);T<a;++T)w[E++]=e[T],++x[e[T]];u=pR(e,l,c,w,x,_,k,E,N,T-N,u),c||(s.r=7&u|l[u/8|0]<<3,u-=7,s.h=g,s.p=m,s.i=T,s.w=A)}else{for(T=s.w||0;T<a+c;T+=65535){var Y=T+65535;Y>=a&&(l[u/8|0]=c,Y=a),u=fR(l,u+1,e.subarray(T,Y))}s.i=a}return aR(o,0,r+sR(u)+i)},bR=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=0|n.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=n[a];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},yR=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new BO(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return vR(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,i)},wR=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},xR=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=bR();i.p(t.dictionary),wR(e,2,i.d())}};function _R(e,t){t||(t={});var n=bR();n.p(e);var r=yR(e,t,t.dictionary?6:2,4);return xR(r,t),wR(r,r.length-4,n.d()),r}var SR="undefined"!=typeof TextDecoder&&new TextDecoder;try{SR.decode(gR,{stream:!0})}catch(R$){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function kR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function TR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kR(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ER(e){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(e)}const AR=new TextEncoder;const NR=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),IR={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class CR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"byteLength",void 0),(0,a.A)(this,"byteOffset",void 0),(0,a.A)(this,"length",void 0),(0,a.A)(this,"offset",void 0),(0,a.A)(this,"lastWrittenByte",void 0),(0,a.A)(this,"littleEndian",void 0),(0,a.A)(this,"_data",void 0),(0,a.A)(this,"_mark",void 0),(0,a.A)(this,"_marks",void 0);let n=!1;"number"===typeof e?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const r=t.offset?t.offset>>>0:0,i=e.byteLength-r;let s=r;(ArrayBuffer.isView(e)||e instanceof CR)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+r),e=e.buffer),this.lastWrittenByte=n?i:0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,i),this._mark=0,this._marks=[]}available(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=e,this}back(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(e)){const t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(e,"uint8")}readArray(e,t){const n=IR[t].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,i=this.buffer.slice(r,r+n);if(this.littleEndian===NR&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(r,r+n));e.reverse();const i=new IR[t](e.buffer);return this.offset+=n,i.reverse(),i}const s=new IR[t](i);return this.offset+=n,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return ER(this.readBytes(e))}decodeText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return ER(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function(e){return AR.encode(e)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function PR(e){let t=e.length;for(;--t>=0;)e[t]=0}const LR=256,DR=286,OR=30,RR=15,MR=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),FR=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jR=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),BR=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),UR=new Array(576);PR(UR);const zR=new Array(60);PR(zR);const VR=new Array(512);PR(VR);const qR=new Array(256);PR(qR);const WR=new Array(29);PR(WR);const HR=new Array(OR);function GR(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let KR,YR,XR;function $R(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}PR(HR);const JR=e=>e<256?VR[e]:VR[256+(e>>>7)],QR=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ZR=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,QR(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},eM=(e,t,n)=>{ZR(e,n[2*t],n[2*t+1])},tM=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},nM=(e,t,n)=>{const r=new Array(16);let i,s,a=0;for(i=1;i<=RR;i++)a=a+n[i-1]<<1,r[i]=a;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=tM(r[t]++,t))}},rM=e=>{let t;for(t=0;t<DR;t++)e.dyn_ltree[2*t]=0;for(t=0;t<OR;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},iM=e=>{e.bi_valid>8?QR(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},sM=(e,t,n,r)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},aM=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&sM(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!sM(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},oM=(e,t,n)=>{let r,i,s,a,o=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],0===r?eM(e,i,t):(s=qR[i],eM(e,s+LR+1,t),a=MR[s],0!==a&&(i-=WR[s],ZR(e,i,a)),r--,s=JR(r),eM(e,s,n),a=FR[s],0!==a&&(r-=HR[s],ZR(e,r,a)))}while(o<e.sym_next);eM(e,256,t)},lM=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let a,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<s;a++)0!==n[2*a]?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)aM(e,n,a);l=s;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],aM(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=o,n[2*l]=n[2*a]+n[2*o],e.depth[l]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1,n[2*a+1]=n[2*o+1]=l,e.heap[1]=l++,aM(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,h,d,f,p,m=0;for(d=0;d<=RR;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],d=n[2*n[2*u+1]+1]+1,d>l&&(d=l,m++),n[2*u+1]=d,u>r||(e.bl_count[d]++,f=0,u>=o&&(f=a[u-o]),p=n[2*u],e.opt_len+=p*(d+f),s&&(e.static_len+=p*(i[2*u+1]+f)));if(0!==m){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(d=l;0!==d;d--)for(u=e.bl_count[d];0!==u;)h=e.heap[--c],h>r||(n[2*h+1]!==d&&(e.opt_len+=(d-n[2*h+1])*n[2*h],n[2*h+1]=d),u--)}})(e,t),nM(n,c,e.bl_count)},cM=(e,t,n)=>{let r,i,s=-1,a=t[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++o<l&&i===a||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4))},uM=(e,t,n)=>{let r,i,s=-1,a=t[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++o<l&&i===a)){if(o<c)do{eM(e,i,e.bl_tree)}while(0!==--o);else 0!==i?(i!==s&&(eM(e,i,e.bl_tree),o--),eM(e,16,e.bl_tree),ZR(e,o-3,2)):o<=10?(eM(e,17,e.bl_tree),ZR(e,o-3,3)):(eM(e,18,e.bl_tree),ZR(e,o-11,7));o=0,s=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4)}};let hM=!1;const dM=(e,t,n,r)=>{ZR(e,0+(r?1:0),3),iM(e),QR(e,n),QR(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var fM=e=>{hM||((()=>{let e,t,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(WR[r]=n,e=0;e<1<<MR[r];e++)qR[n++]=r;for(qR[n-1]=r,i=0,r=0;r<16;r++)for(HR[r]=i,e=0;e<1<<FR[r];e++)VR[i++]=r;for(i>>=7;r<OR;r++)for(HR[r]=i<<7,e=0;e<1<<FR[r]-7;e++)VR[256+i++]=r;for(t=0;t<=RR;t++)s[t]=0;for(e=0;e<=143;)UR[2*e+1]=8,e++,s[8]++;for(;e<=255;)UR[2*e+1]=9,e++,s[9]++;for(;e<=279;)UR[2*e+1]=7,e++,s[7]++;for(;e<=287;)UR[2*e+1]=8,e++,s[8]++;for(nM(UR,287,s),e=0;e<OR;e++)zR[2*e+1]=5,zR[2*e]=tM(e,5);KR=new GR(UR,MR,257,DR,RR),YR=new GR(zR,FR,0,OR,RR),XR=new GR(new Array(0),jR,0,19,7)})(),hM=!0),e.l_desc=new $R(e.dyn_ltree,KR),e.d_desc=new $R(e.dyn_dtree,YR),e.bl_desc=new $R(e.bl_tree,XR),e.bi_buf=0,e.bi_valid=0,rM(e)},pM=(e,t,n,r)=>{let i,s,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<LR;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),lM(e,e.l_desc),lM(e,e.d_desc),a=(e=>{let t;for(cM(e,e.dyn_ltree,e.l_desc.max_code),cM(e,e.dyn_dtree,e.d_desc.max_code),lM(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*BR[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?dM(e,t,n,r):4===e.strategy||s===i?(ZR(e,2+(r?1:0),3),oM(e,UR,zR)):(ZR(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(ZR(e,t-257,5),ZR(e,n-1,5),ZR(e,r-4,4),i=0;i<r;i++)ZR(e,e.bl_tree[2*BR[i]+1],3);uM(e,e.dyn_ltree,t-1),uM(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),oM(e,e.dyn_ltree,e.dyn_dtree)),rM(e),r&&iM(e)},mM=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(qR[n]+LR+1)]++,e.dyn_dtree[2*JR(t)]++),e.sym_next===e.sym_end),gM=e=>{ZR(e,2,3),eM(e,256,UR),(e=>{16===e.bi_valid?(QR(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},vM={_tr_init:fM,_tr_stored_block:dM,_tr_flush_block:pM,_tr_tally:mM,_tr_align:gM};var bM=(e,t,n,r)=>{let i=65535&e,s=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+t[r++]|0,s=s+i|0}while(--a);i%=65521,s%=65521}return i|s<<16};const yM=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var wM=(e,t,n,r)=>{const i=yM,s=r+n;e^=-1;for(let a=r;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},xM={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_M={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:SM,_tr_stored_block:kM,_tr_flush_block:TM,_tr_tally:EM,_tr_align:AM}=vM,{Z_NO_FLUSH:NM,Z_PARTIAL_FLUSH:IM,Z_FULL_FLUSH:CM,Z_FINISH:PM,Z_BLOCK:LM,Z_OK:DM,Z_STREAM_END:OM,Z_STREAM_ERROR:RM,Z_DATA_ERROR:MM,Z_BUF_ERROR:FM,Z_DEFAULT_COMPRESSION:jM,Z_FILTERED:BM,Z_HUFFMAN_ONLY:UM,Z_RLE:zM,Z_FIXED:VM,Z_DEFAULT_STRATEGY:qM,Z_UNKNOWN:WM,Z_DEFLATED:HM}=_M,GM=258,KM=262,YM=42,XM=113,$M=666,JM=(e,t)=>(e.msg=xM[t],t),QM=e=>2*e-(e>4?9:0),ZM=e=>{let t=e.length;for(;--t>=0;)e[t]=0},eF=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let tF=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const nF=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},rF=(e,t)=>{TM(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,nF(e.strm)},iF=(e,t)=>{e.pending_buf[e.pending++]=t},sF=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},aF=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=bM(e.adler,t,i,n):2===e.state.wrap&&(e.adler=wM(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},oF=(e,t)=>{let n,r,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-KM?e.strstart-(e.w_size-KM):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+GM;let f=c[s+a-1],p=c[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,c[n+a]===p&&c[n+a-1]===f&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<d);if(r=GM-(d-s),s=d-GM,r>a){if(e.match_start=t,a=r,r>=o)break;f=c[s+a-1],p=c[s+a]}}}while((t=h[t&u])>l&&0!==--i);return a<=e.lookahead?a:e.lookahead},lF=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-KM)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),eF(e),r+=t),0===e.strm.avail_in)break;if(n=aF(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=tF(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=tF(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<KM&&0!==e.strm.avail_in)},cF=(e,t)=>{let n,r,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,o=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&t!==PM||t===NM||n!==r+e.strm.avail_in))break;a=t===PM&&n===r+e.strm.avail_in?1:0,kM(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,nF(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(aF(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==NM&&t!==PM&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(aF(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=s||(r||t===PM)&&t!==NM&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,a=t===PM&&0===e.strm.avail_in&&n===r?1:0,kM(e,e.block_start,n,a),e.block_start+=n,nF(e.strm)),a?3:1)},uF=(e,t)=>{let n,r;for(;;){if(e.lookahead<KM){if(lF(e),e.lookahead<KM&&t===NM)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=tF(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-KM&&(e.match_length=oF(e,n)),e.match_length>=3)if(r=EM(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=tF(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=tF(e,e.ins_h,e.window[e.strstart+1]);else r=EM(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(rF(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===PM?(rF(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(rF(e,!1),0===e.strm.avail_out)?1:2},hF=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<KM){if(lF(e),e.lookahead<KM&&t===NM)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=tF(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-KM&&(e.match_length=oF(e,n),e.match_length<=5&&(e.strategy===BM||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=EM(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=tF(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(rF(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=EM(e,0,e.window[e.strstart-1]),r&&rF(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=EM(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===PM?(rF(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(rF(e,!1),0===e.strm.avail_out)?1:2};function dF(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const fF=[new dF(0,0,0,0,cF),new dF(4,4,8,4,uF),new dF(4,5,16,8,uF),new dF(4,6,32,32,uF),new dF(4,4,16,16,hF),new dF(8,16,32,32,hF),new dF(8,16,128,128,hF),new dF(8,32,128,256,hF),new dF(32,128,258,1024,hF),new dF(32,258,258,4096,hF)];function pF(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=HM,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ZM(this.dyn_ltree),ZM(this.dyn_dtree),ZM(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ZM(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ZM(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const mF=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==YM&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==XM&&t.status!==$M?1:0},gF=e=>{if(mF(e))return JM(e,RM);e.total_in=e.total_out=0,e.data_type=WM;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?YM:XM,e.adler=2===t.wrap?0:1,t.last_flush=-2,SM(t),DM},vF=e=>{const t=gF(e);return t===DM&&(e=>{e.window_size=2*e.w_size,ZM(e.head),e.max_lazy_match=fF[e.level].max_lazy,e.good_match=fF[e.level].good_length,e.nice_match=fF[e.level].nice_length,e.max_chain_length=fF[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},bF=(e,t,n,r,i,s)=>{if(!e)return RM;let a=1;if(t===jM&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==HM||r<8||r>15||t<0||t>9||s<0||s>VM||8===r&&1!==a)return JM(e,RM);8===r&&(r=9);const o=new pF;return e.state=o,o.strm=e,o.status=YM,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=s,o.method=n,vF(e)};var yF=(e,t)=>{if(mF(e)||t>LM||t<0)return e?JM(e,RM):RM;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===$M&&t!==PM)return JM(e,0===e.avail_out?FM:RM);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(nF(e),0===e.avail_out)return n.last_flush=-1,DM}else if(0===e.avail_in&&QM(t)<=QM(r)&&t!==PM)return JM(e,FM);if(n.status===$M&&0!==e.avail_in)return JM(e,FM);if(n.status===YM&&0===n.wrap&&(n.status=XM),n.status===YM){let t=HM+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=UM||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,sF(n,t),0!==n.strstart&&(sF(n,e.adler>>>16),sF(n,65535&e.adler)),e.adler=1,n.status=XM,nF(e),0!==n.pending)return n.last_flush=-1,DM}if(57===n.status)if(e.adler=0,iF(n,31),iF(n,139),iF(n,8),n.gzhead)iF(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),iF(n,255&n.gzhead.time),iF(n,n.gzhead.time>>8&255),iF(n,n.gzhead.time>>16&255),iF(n,n.gzhead.time>>24&255),iF(n,9===n.level?2:n.strategy>=UM||n.level<2?4:0),iF(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(iF(n,255&n.gzhead.extra.length),iF(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=wM(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(iF(n,0),iF(n,0),iF(n,0),iF(n,0),iF(n,0),iF(n,9===n.level?2:n.strategy>=UM||n.level<2?4:0),iF(n,3),n.status=XM,nF(e),0!==n.pending)return n.last_flush=-1,DM;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=wM(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,nF(e),0!==n.pending)return n.last_flush=-1,DM;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=wM(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=wM(e.adler,n.pending_buf,n.pending-r,r)),nF(e),0!==n.pending)return n.last_flush=-1,DM;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,iF(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=wM(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=wM(e.adler,n.pending_buf,n.pending-r,r)),nF(e),0!==n.pending)return n.last_flush=-1,DM;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,iF(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=wM(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(nF(e),0!==n.pending))return n.last_flush=-1,DM;iF(n,255&e.adler),iF(n,e.adler>>8&255),e.adler=0}if(n.status=XM,nF(e),0!==n.pending)return n.last_flush=-1,DM}if(0!==e.avail_in||0!==n.lookahead||t!==NM&&n.status!==$M){let r=0===n.level?cF(n,t):n.strategy===UM?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(lF(e),0===e.lookahead)){if(t===NM)return 1;break}if(e.match_length=0,n=EM(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(rF(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===PM?(rF(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(rF(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===zM?((e,t)=>{let n,r,i,s;const a=e.window;for(;;){if(e.lookahead<=GM){if(lF(e),e.lookahead<=GM&&t===NM)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){s=e.strstart+GM;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);e.match_length=GM-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=EM(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=EM(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(rF(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===PM?(rF(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(rF(e,!1),0===e.strm.avail_out)?1:2})(n,t):fF[n.level].func(n,t);if(3!==r&&4!==r||(n.status=$M),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),DM;if(2===r&&(t===IM?AM(n):t!==LM&&(kM(n,0,0,!1),t===CM&&(ZM(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),nF(e),0===e.avail_out))return n.last_flush=-1,DM}return t!==PM?DM:n.wrap<=0?OM:(2===n.wrap?(iF(n,255&e.adler),iF(n,e.adler>>8&255),iF(n,e.adler>>16&255),iF(n,e.adler>>24&255),iF(n,255&e.total_in),iF(n,e.total_in>>8&255),iF(n,e.total_in>>16&255),iF(n,e.total_in>>24&255)):(sF(n,e.adler>>>16),sF(n,65535&e.adler)),nF(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?DM:OM)},wF=(e,t)=>{let n=t.length;if(mF(e))return RM;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==YM||r.lookahead)return RM;if(1===i&&(e.adler=bM(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(ZM(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const s=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,lF(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=tF(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,lF(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=o,e.avail_in=s,r.wrap=i,DM},xF={deflateInit:(e,t)=>bF(e,t,HM,15,8,qM),deflateInit2:bF,deflateReset:vF,deflateResetKeep:gF,deflateSetHeader:(e,t)=>mF(e)||2!==e.state.wrap?RM:(e.state.gzhead=t,DM),deflate:yF,deflateEnd:e=>{if(mF(e))return RM;const t=e.state.status;return e.state=null,t===XM?JM(e,MM):DM},deflateSetDictionary:wF,deflateInfo:"pako deflate (from Nodeca project)"};const _F=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var SF=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(const t in n)_F(n,t)&&(e[t]=n[t])}}return e},kF=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let t=e[r];n.set(t,i),i+=t.length}return n};let TF=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(M$){TF=!1}const EF=new Uint8Array(256);for(let $=0;$<256;$++)EF[$]=$>=252?6:$>=248?5:$>=240?4:$>=224?3:$>=192?2:1;EF[254]=EF[254]=1;var AF=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,s,a=e.length,o=0;for(i=0;i<a;i++)n=e.charCodeAt(i),55296===(64512&n)&&i+1<a&&(r=e.charCodeAt(i+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)n=e.charCodeAt(i),55296===(64512&n)&&i+1<a&&(r=e.charCodeAt(i+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},NF=(e,t)=>{const n=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){s[i++]=t;continue}let a=EF[t];if(a>4)s[i++]=65533,r+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&r<n;)t=t<<6|63&e[r++],a--;a>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&TF)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,i)},IF=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+EF[e[n]]>t?n:t};var CF=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const PF=Object.prototype.toString,{Z_NO_FLUSH:LF,Z_SYNC_FLUSH:DF,Z_FULL_FLUSH:OF,Z_FINISH:RF,Z_OK:MF,Z_STREAM_END:FF,Z_DEFAULT_COMPRESSION:jF,Z_DEFAULT_STRATEGY:BF,Z_DEFLATED:UF}=_M;function zF(e){this.options=SF({level:jF,method:UF,chunkSize:16384,windowBits:15,memLevel:8,strategy:BF},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new CF,this.strm.avail_out=0;let n=xF.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==MF)throw new Error(xM[n]);if(t.header&&xF.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?AF(t.dictionary):"[object ArrayBuffer]"===PF.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=xF.deflateSetDictionary(this.strm,e),n!==MF)throw new Error(xM[n]);this._dict_set=!0}}function VF(e,t){const n=new zF(t);if(n.push(e,!0),n.err)throw n.msg||xM[n.err];return n.result}zF.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?RF:LF,"string"===typeof e?n.input=AF(e):"[object ArrayBuffer]"===PF.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===DF||s===OF)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=xF.deflate(n,s),i===FF)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=xF.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===MF;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},zF.prototype.onData=function(e){this.chunks.push(e)},zF.prototype.onEnd=function(e){e===MF&&(this.result=kF(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var qF={Deflate:zF,deflate:VF,deflateRaw:function(e,t){return(t=t||{}).raw=!0,VF(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,VF(e,t)},constants:_M};const WF=16209;var HF=function(e,t){let n,r,i,s,a,o,l,c,u,h,d,f,p,m,g,v,b,y,w,x,_,S,k,T;const E=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),i=e.next_out,T=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),o=E.dmax,l=E.wsize,c=E.whave,u=E.wnext,h=E.window,d=E.hold,f=E.bits,p=E.lencode,m=E.distcode,g=(1<<E.lenbits)-1,v=(1<<E.distbits)-1;e:do{f<15&&(d+=k[n++]<<f,f+=8,d+=k[n++]<<f,f+=8),b=p[d&g];t:for(;;){if(y=b>>>24,d>>>=y,f-=y,y=b>>>16&255,0===y)T[i++]=65535&b;else{if(!(16&y)){if(0===(64&y)){b=p[(65535&b)+(d&(1<<y)-1)];continue t}if(32&y){E.mode=16191;break e}e.msg="invalid literal/length code",E.mode=WF;break e}w=65535&b,y&=15,y&&(f<y&&(d+=k[n++]<<f,f+=8),w+=d&(1<<y)-1,d>>>=y,f-=y),f<15&&(d+=k[n++]<<f,f+=8,d+=k[n++]<<f,f+=8),b=m[d&v];n:for(;;){if(y=b>>>24,d>>>=y,f-=y,y=b>>>16&255,!(16&y)){if(0===(64&y)){b=m[(65535&b)+(d&(1<<y)-1)];continue n}e.msg="invalid distance code",E.mode=WF;break e}if(x=65535&b,y&=15,f<y&&(d+=k[n++]<<f,f+=8,f<y&&(d+=k[n++]<<f,f+=8)),x+=d&(1<<y)-1,x>o){e.msg="invalid distance too far back",E.mode=WF;break e}if(d>>>=y,f-=y,y=i-s,x>y){if(y=x-y,y>c&&E.sane){e.msg="invalid distance too far back",E.mode=WF;break e}if(_=0,S=h,0===u){if(_+=l-y,y<w){w-=y;do{T[i++]=h[_++]}while(--y);_=i-x,S=T}}else if(u<y){if(_+=l+u-y,y-=u,y<w){w-=y;do{T[i++]=h[_++]}while(--y);if(_=0,u<w){y=u,w-=y;do{T[i++]=h[_++]}while(--y);_=i-x,S=T}}}else if(_+=u-y,y<w){w-=y;do{T[i++]=h[_++]}while(--y);_=i-x,S=T}for(;w>2;)T[i++]=S[_++],T[i++]=S[_++],T[i++]=S[_++],w-=3;w&&(T[i++]=S[_++],w>1&&(T[i++]=S[_++]))}else{_=i-x;do{T[i++]=T[_++],T[i++]=T[_++],T[i++]=T[_++],w-=3}while(w>2);w&&(T[i++]=T[_++],w>1&&(T[i++]=T[_++]))}break}}break}}while(n<r&&i<a);w=f>>3,n-=w,f-=w<<3,d&=(1<<f)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<a?a-i+257:257-(i-a),E.hold=d,E.bits=f};const GF=15,KF=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),YF=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XF=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$F=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var JF=(e,t,n,r,i,s,a,o)=>{const l=o.bits;let c,u,h,d,f,p,m=0,g=0,v=0,b=0,y=0,w=0,x=0,_=0,S=0,k=0,T=null;const E=new Uint16Array(16),A=new Uint16Array(16);let N,I,C,P=null;for(m=0;m<=GF;m++)E[m]=0;for(g=0;g<r;g++)E[t[n+g]]++;for(y=l,b=GF;b>=1&&0===E[b];b--);if(y>b&&(y=b),0===b)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(v=1;v<b&&0===E[v];v++);for(y<v&&(y=v),_=1,m=1;m<=GF;m++)if(_<<=1,_-=E[m],_<0)return-1;if(_>0&&(0===e||1!==b))return-1;for(A[1]=0,m=1;m<GF;m++)A[m+1]=A[m]+E[m];for(g=0;g<r;g++)0!==t[n+g]&&(a[A[t[n+g]]++]=g);if(0===e?(T=P=a,p=20):1===e?(T=KF,P=YF,p=257):(T=XF,P=$F,p=0),k=0,g=0,m=v,f=s,w=y,x=0,h=-1,S=1<<y,d=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){N=m-x,a[g]+1<p?(I=0,C=a[g]):a[g]>=p?(I=P[a[g]-p],C=T[a[g]-p]):(I=96,C=0),c=1<<m-x,u=1<<w,v=u;do{u-=c,i[f+(k>>x)+u]=N<<24|I<<16|C}while(0!==u);for(c=1<<m-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,g++,0===--E[m]){if(m===b)break;m=t[n+a[g]]}if(m>y&&(k&d)!==h){for(0===x&&(x=y),f+=v,w=m-x,_=1<<w;w+x<b&&(_-=E[w+x],!(_<=0));)w++,_<<=1;if(S+=1<<w,1===e&&S>852||2===e&&S>592)return 1;h=k&d,i[h]=y<<24|w<<16|f-s}}return 0!==k&&(i[f+k]=m-x<<24|64<<16),o.bits=y,0};const{Z_FINISH:QF,Z_BLOCK:ZF,Z_TREES:ej,Z_OK:tj,Z_STREAM_END:nj,Z_NEED_DICT:rj,Z_STREAM_ERROR:ij,Z_DATA_ERROR:sj,Z_MEM_ERROR:aj,Z_BUF_ERROR:oj,Z_DEFLATED:lj}=_M,cj=16180,uj=16190,hj=16191,dj=16192,fj=16194,pj=16199,mj=16200,gj=16206,vj=16209,bj=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function yj(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wj=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<cj||t.mode>16211?1:0},xj=e=>{if(wj(e))return ij;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=cj,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tj},_j=e=>{if(wj(e))return ij;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,xj(e)},Sj=(e,t)=>{let n;if(wj(e))return ij;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ij:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,_j(e))},kj=(e,t)=>{if(!e)return ij;const n=new yj;e.state=n,n.strm=e,n.window=null,n.mode=cj;const r=Sj(e,t);return r!==tj&&(e.state=null),r};let Tj,Ej,Aj=!0;const Nj=e=>{if(Aj){Tj=new Int32Array(512),Ej=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(JF(1,e.lens,0,288,Tj,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;JF(2,e.lens,0,32,Ej,0,e.work,{bits:5}),Aj=!1}e.lencode=Tj,e.lenbits=9,e.distcode=Ej,e.distbits=5},Ij=(e,t,n,r)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var Cj=(e,t)=>{let n,r,i,s,a,o,l,c,u,h,d,f,p,m,g,v,b,y,w,x,_,S,k=0;const T=new Uint8Array(4);let E,A;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wj(e)||!e.output||!e.input&&0!==e.avail_in)return ij;n=e.state,n.mode===hj&&(n.mode=dj),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,h=o,d=l,S=tj;e:for(;;)switch(n.mode){case cj:if(0===n.wrap){n.mode=dj;break}for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=wM(n.check,T,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=vj;break}if((15&c)!==lj){e.msg="unknown compression method",n.mode=vj;break}if(c>>>=4,u-=4,_=8+(15&c),0===n.wbits&&(n.wbits=_),_>15||_>n.wbits){e.msg="invalid window size",n.mode=vj;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:hj,c=0,u=0;break;case 16181:for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==lj){e.msg="unknown compression method",n.mode=vj;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=vj;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=wM(n.check,T,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=wM(n.check,T,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=wM(n.check,T,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=wM(n.check,T,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>o&&(f=o),f&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),_)),512&n.flags&&4&n.wrap&&(n.check=wM(n.check,r,f,s)),o-=f,s+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;f=0;do{_=r[s+f++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_))}while(_&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=wM(n.check,r,f,s)),o-=f,s+=f,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;f=0;do{_=r[s+f++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_))}while(_&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=wM(n.check,r,f,s)),o-=f,s+=f,_)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=vj;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=hj;break;case 16189:for(;u<32;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}e.adler=n.check=bj(c),c=0,u=0,n.mode=uj;case uj:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=u,rj;e.adler=n.check=1,n.mode=hj;case hj:if(t===ZF||t===ej)break e;case dj:if(n.last){c>>>=7&u,u-=7&u,n.mode=gj;break}for(;u<3;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(Nj(n),n.mode=pj,t===ej){c>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=vj}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=vj;break}if(n.length=65535&c,c=0,u=0,n.mode=fj,t===ej)break e;case fj:n.mode=16195;case 16195:if(f=n.length,f){if(f>o&&(f=o),f>l&&(f=l),0===f)break e;i.set(r.subarray(s,s+f),a),o-=f,s+=f,l-=f,a+=f,n.length-=f;break}n.mode=hj;break;case 16196:for(;u<14;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=vj;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.lens[N[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},S=JF(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,S){e.msg="invalid code lengths set",n.mode=vj;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,v=k>>>16&255,b=65535&k,!(g<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(b<16)c>>>=g,u-=g,n.lens[n.have++]=b;else{if(16===b){for(A=g+2;u<A;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(c>>>=g,u-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=vj;break}_=n.lens[n.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===b){for(A=g+3;u<A;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}c>>>=g,u-=g,_=0,f=3+(7&c),c>>>=3,u-=3}else{for(A=g+7;u<A;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}c>>>=g,u-=g,_=0,f=11+(127&c),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=vj;break}for(;f--;)n.lens[n.have++]=_}}if(n.mode===vj)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=vj;break}if(n.lenbits=9,E={bits:n.lenbits},S=JF(1,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,S){e.msg="invalid literal/lengths set",n.mode=vj;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},S=JF(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,S){e.msg="invalid distances set",n.mode=vj;break}if(n.mode=pj,t===ej)break e;case pj:n.mode=mj;case mj:if(o>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=u,HF(e,d),a=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,n.mode===hj&&(n.back=-1);break}for(n.back=0;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,v=k>>>16&255,b=65535&k,!(g<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(v&&0===(240&v)){for(y=g,w=v,x=b;k=n.lencode[x+((c&(1<<y+w)-1)>>y)],g=k>>>24,v=k>>>16&255,b=65535&k,!(y+g<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=g,u-=g,n.back+=g,n.length=b,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=hj;break}if(64&v){e.msg="invalid literal/length code",n.mode=vj;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;u<A;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;k=n.distcode[c&(1<<n.distbits)-1],g=k>>>24,v=k>>>16&255,b=65535&k,!(g<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(0===(240&v)){for(y=g,w=v,x=b;k=n.distcode[x+((c&(1<<y+w)-1)>>y)],g=k>>>24,v=k>>>16&255,b=65535&k,!(y+g<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}c>>>=y,u-=y,n.back+=y}if(c>>>=g,u-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=vj;break}n.offset=b,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;u<A;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=vj;break}n.mode=16204;case 16204:if(0===l)break e;if(f=d-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=vj;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,p=a-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{i[a++]=m[p++]}while(--f);0===n.length&&(n.mode=mj);break;case 16205:if(0===l)break e;i[a++]=n.length,l--,n.mode=mj;break;case gj:if(n.wrap){for(;u<32;){if(0===o)break e;o--,c|=r[s++]<<u,u+=8}if(d-=l,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?wM(n.check,i,d,a-d):bM(n.check,i,d,a-d)),d=l,4&n.wrap&&(n.flags?c:bj(c))!==n.check){e.msg="incorrect data check",n.mode=vj;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=vj;break}c=0,u=0}n.mode=16208;case 16208:S=nj;break e;case vj:S=sj;break e;case 16210:return aj;default:return ij}return e.next_out=a,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<vj&&(n.mode<gj||t!==QF))&&Ij(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?wM(n.check,i,d,e.next_out-d):bM(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===hj?128:0)+(n.mode===pj||n.mode===fj?256:0),(0===h&&0===d||t===QF)&&S===tj&&(S=oj),S},Pj={inflateReset:_j,inflateReset2:Sj,inflateResetKeep:xj,inflateInit:e=>kj(e,15),inflateInit2:kj,inflate:Cj,inflateEnd:e=>{if(wj(e))return ij;let t=e.state;return t.window&&(t.window=null),e.state=null,tj},inflateGetHeader:(e,t)=>{if(wj(e))return ij;const n=e.state;return 0===(2&n.wrap)?ij:(n.head=t,t.done=!1,tj)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,s;return wj(e)?ij:(r=e.state,0!==r.wrap&&r.mode!==uj?ij:r.mode===uj&&(i=1,i=bM(i,t,n,0),i!==r.check)?sj:(s=Ij(e,t,n,n),s?(r.mode=16210,aj):(r.havedict=1,tj)))},inflateInfo:"pako inflate (from Nodeca project)"};var Lj=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Dj=Object.prototype.toString,{Z_NO_FLUSH:Oj,Z_FINISH:Rj,Z_OK:Mj,Z_STREAM_END:Fj,Z_NEED_DICT:jj,Z_STREAM_ERROR:Bj,Z_DATA_ERROR:Uj,Z_MEM_ERROR:zj}=_M;function Vj(e){this.options=SF({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new CF,this.strm.avail_out=0;let n=Pj.inflateInit2(this.strm,t.windowBits);if(n!==Mj)throw new Error(xM[n]);if(this.header=new Lj,Pj.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=AF(t.dictionary):"[object ArrayBuffer]"===Dj.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Pj.inflateSetDictionary(this.strm,t.dictionary),n!==Mj)))throw new Error(xM[n])}function qj(e,t){const n=new Vj(t);if(n.push(e),n.err)throw n.msg||xM[n.err];return n.result}Vj.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Rj:Oj,"[object ArrayBuffer]"===Dj.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Pj.inflate(n,a),s===jj&&i&&(s=Pj.inflateSetDictionary(n,i),s===Mj?s=Pj.inflate(n,a):s===Uj&&(s=jj));n.avail_in>0&&s===Fj&&n.state.wrap>0&&0!==e[n.next_in];)Pj.inflateReset(n),s=Pj.inflate(n,a);switch(s){case Bj:case Uj:case jj:case zj:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||s===Fj))if("string"===this.options.to){let e=IF(n.output,n.next_out),t=n.next_out-e,i=NF(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==Mj||0!==o){if(s===Fj)return s=Pj.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Vj.prototype.onData=function(e){this.chunks.push(e)},Vj.prototype.onEnd=function(e){e===Mj&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=kF(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Wj={Inflate:Vj,inflate:qj,inflateRaw:function(e,t){return(t=t||{}).raw=!0,qj(e,t)},ungzip:qj,constants:_M};const{Deflate:Hj,deflate:Gj,deflateRaw:Kj,gzip:Yj}=qF,{Inflate:Xj,inflate:$j,inflateRaw:Jj,ungzip:Qj}=Wj;var Zj=Xj,eB=$j;const tB=[];for(let $=0;$<256;$++){let e=$;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;tB[$]=e}const nB=4294967295;function rB(e,t){return(function(e,t,n){let r=e;for(let i=0;i<n;i++)r=tB[255&(r^t[i])]^r>>>8;return r}(nB,e,t)^nB)>>>0}function iB(e,t,n){const r=e.readUint32(),i=rB(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==r)throw new Error("CRC mismatch for chunk ".concat(n,". Expected ").concat(r,", found ").concat(i))}function sB(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function aB(e,t,n,r){let i=0;for(;i<r;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-r]&255}function oB(e,t,n,r){let i=0;if(0===n.length)for(;i<r;i++)t[i]=e[i];else for(;i<r;i++)t[i]=e[i]+n[i]&255}function lB(e,t,n,r,i){let s=0;if(0===n.length){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=e[s]+(n[s]>>1)&255;for(;s<r;s++)t[s]=e[s]+(t[s-i]+n[s]>>1)&255}}function cB(e,t,n,r,i){let s=0;if(0===n.length){for(;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=e[s]+n[s]&255;for(;s<r;s++)t[s]=e[s]+uB(t[s-i],n[s],n[s-i])&255}}function uB(e,t,n){const r=e+t-n,i=Math.abs(r-e),s=Math.abs(r-t),a=Math.abs(r-n);return i<=s&&i<=a?e:s<=a?t:n}function hB(e,t,n,r,i,s){switch(e){case 0:sB(t,n,i);break;case 1:aB(t,n,i,s);break;case 2:oB(t,n,r,i);break;case 3:lB(t,n,r,i,s);break;case 4:cB(t,n,r,i,s);break;default:throw new Error("Unsupported filter: ".concat(e))}}const dB=new Uint16Array([255]),fB=255===new Uint8Array(dB.buffer)[0];function pB(e){return(255&e)<<8|e>>8&255}const mB=new Uint16Array([255]),gB=255===new Uint8Array(mB.buffer)[0],vB=new Uint8Array(0);function bB(e){const{data:t,width:n,height:r,channels:i,depth:s}=e,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*n),l=new Uint8Array(r*o);let c,u,h=vB,d=0;for(let f=0;f<r;f++){switch(c=t.subarray(d+1,d+1+o),u=l.subarray(f*o,(f+1)*o),t[d]){case 0:sB(c,u,o);break;case 1:aB(c,u,o,a);break;case 2:oB(c,u,h,o);break;case 3:lB(c,u,h,o,a);break;case 4:cB(c,u,h,o,a);break;default:throw new Error("Unsupported filter: ".concat(t[d]))}h=u,d+=o+1}if(16===s){const e=new Uint16Array(l.buffer);if(gB)for(let t=0;t<e.length;t++)e[t]=yB(e[t]);return e}return l}function yB(e){return(255&e)<<8|e>>8&255}const wB=Uint8Array.of(137,80,78,71,13,10,26,10);function xB(e){if(!function(e){if(e.length<wB.length)return!1;for(let t=0;t<wB.length;t++)if(e[t]!==wB[t])return!1;return!0}(e.readBytes(wB.length)))throw new Error("wrong PNG signature")}const _B="tEXt",SB=new TextDecoder("latin1");function kB(e){if(EB(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const TB=/^[\u0000-\u00FF]*$/;function EB(e){if(!TB.test(e))throw new Error("invalid latin1 text")}function AB(e,t,n){const r=NB(t);e[r]=function(e,t){return SB.decode(e.readBytes(t))}(t,n-r.length-1)}function NB(e){for(e.mark();0!==e.readByte(););const t=e.offset;e.reset();const n=SB.decode(e.readBytes(t-e.offset-1));return e.skip(1),kB(n),n}const IB=-1,CB=0,PB=2,LB=3,DB=4,OB=6,RB=-1,MB=0,FB=-1,jB=0,BB=-1,UB=0,zB=1,VB=0,qB=1,WB=2,HB=0,GB=1;class KB extends CR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,a.A)(this,"_checkCrc",void 0),(0,a.A)(this,"_inflator",void 0),(0,a.A)(this,"_png",void 0),(0,a.A)(this,"_apng",void 0),(0,a.A)(this,"_end",void 0),(0,a.A)(this,"_hasPalette",void 0),(0,a.A)(this,"_palette",void 0),(0,a.A)(this,"_hasTransparency",void 0),(0,a.A)(this,"_transparency",void 0),(0,a.A)(this,"_compressionMethod",void 0),(0,a.A)(this,"_filterMethod",void 0),(0,a.A)(this,"_interlaceMethod",void 0),(0,a.A)(this,"_colorType",void 0),(0,a.A)(this,"_isAnimated",void 0),(0,a.A)(this,"_numberOfFrames",void 0),(0,a.A)(this,"_numberOfPlays",void 0),(0,a.A)(this,"_frames",void 0),(0,a.A)(this,"_writingDataChunks",void 0);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new Zj,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=RB,this._filterMethod=FB,this._interlaceMethod=BB,this._colorType=IB,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(xB(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(xB(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case _B:AB(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?iB(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?iB(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error("invalid bit depth: ".concat(e));return e}(this.readUint8());const t=this.readUint8();let n;switch(this._colorType=t,t){case CB:n=1;break;case PB:n=3;break;case LB:n=1;break;case DB:n=2;break;case OB:n=4;break;default:throw new Error("Unknown color type: ".concat(t))}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==MB)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(e));const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let r=0;r<t;r++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodetRNS(e){switch(this._colorType){case CB:case PB:if(e%2!==0)throw new RangeError("tRNS chunk length must be a multiple of 2. Got ".concat(e));if(e/2>this._png.width*this._png.height)throw new Error("tRNS chunk contains more alpha values than there are pixels (".concat(e/2," vs ").concat(this._png.width*this._png.height,")"));this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case LB:{if(e>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(e," vs ").concat(this._palette.length,")"));let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error("tRNS chunk is not supported for color type ".concat(this._colorType))}}decodeiCCP(e){const t=NB(this),n=this.readUint8();if(n!==MB)throw new Error("Unsupported iCCP compression method: ".concat(n));const r=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:eB(r)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=bB({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===n.xOffset&&0===n.yOffset&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const r=this._apng.frames.at(e-1);this.disposeFrame(n,r,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case VB:break;case qB:for(let t=0;t<this._png.height;t++)for(let r=0;r<this._png.width;r++){const i=(t*e.width+r)*this._png.channels;for(let e=0;e<this._png.channels;e++)n.data[i+e]=0}break;case WB:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,r=(e,n)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+n)*this._png.channels,frameIndex:(e*t.width+n)*this._png.channels});switch(t.blendOp){case HB:for(let n=0;n<t.height;n++)for(let i=0;i<t.width;i++){const{index:s,frameIndex:a}=r(n,i);for(let n=0;n<this._png.channels;n++)e.data[s+n]=t.data[a+n]}break;case GB:for(let i=0;i<t.height;i++)for(let s=0;s<t.width;s++){const{index:a,frameIndex:o}=r(i,s);for(let r=0;r<this._png.channels;r++){const i=t.data[o+this._png.channels-1]/n,s=r%(this._png.channels-1)===0?1:t.data[o+r],l=Math.floor(i*s+(1-i)*e.data[a+r]);e.data[a+r]+=l}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var e;if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));const t=this._isAnimated?(null===(e=this._frames)||void 0===e?void 0:e.at(0)).data:this._inflator.result;if(this._filterMethod!==jB)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod===UB)this._png.data=bB({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==zB)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this._png.data=function(e){const{data:t,width:n,height:r,channels:i,depth:s}=e,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,l=new Uint8Array(r*n*o);let c=0;for(let u=0;u<7;u++){const e=a[u],i=Math.ceil((n-e.x)/e.xStep),s=Math.ceil((r-e.y)/e.yStep);if(i<=0||s<=0)continue;const h=i*o,d=new Uint8Array(h);for(let a=0;a<s;a++){const s=t[c++],u=t.subarray(c,c+h);c+=h;const f=new Uint8Array(h);hB(s,u,f,d,h,o),d.set(f);for(let t=0;t<i;t++){const i=e.x+t*e.xStep,s=e.y+a*e.yStep;if(!(i>=n||s>=r))for(let e=0;e<o;e++)l[(s*n+i)*o+e]=f[t*o+e]}}}if(16===s){const e=new Uint16Array(l.buffer);if(fB)for(let t=0;t<e.length;t++)e[t]=pB(e[t]);return e}return l}({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:VB,blendOp:HB,data:e}),this._inflator=new Zj,this._writingDataChunks=!1}}var YB;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"}(YB||(YB={}));var XB=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function $B(){XB.console&&"function"==typeof XB.console.log&&XB.console.log.apply(XB.console,arguments)}var JB={log:$B,warn:function(e){XB.console&&("function"==typeof XB.console.warn?XB.console.warn.apply(XB.console,arguments):$B.call(null,arguments))},error:function(e){XB.console&&("function"==typeof XB.console.error?XB.console.error.apply(XB.console,arguments):$B(e))}};function QB(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){tU(r.response,t,n)},r.onerror=function(){JB.error("could not download file")},r.send()}function ZB(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function eU(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var tU=XB.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,jO.A)(window))||window!==XB?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=XB.URL||XB.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?ZB(i.href)?QB(e,t,n):eU(i,i.target="_blank"):eU(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){eU(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(ZB(e))QB(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){eU(r)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,jO.A)(t)&&(JB.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return QB(e,t,n);var i="application/octet-stream"===e.type,s=/constructor/i.test(XB.HTMLElement)||XB.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&"object"===("undefined"==typeof FileReader?"undefined":(0,jO.A)(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},o.readAsDataURL(e)}else{var l=XB.URL||XB.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function nU(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}var rU=XB.atob.bind(XB),iU=XB.btoa.bind(XB);function sU(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=oU(n,r,i,s,t[0],7,-680876936),s=oU(s,n,r,i,t[1],12,-389564586),i=oU(i,s,n,r,t[2],17,606105819),r=oU(r,i,s,n,t[3],22,-1044525330),n=oU(n,r,i,s,t[4],7,-176418897),s=oU(s,n,r,i,t[5],12,1200080426),i=oU(i,s,n,r,t[6],17,-1473231341),r=oU(r,i,s,n,t[7],22,-45705983),n=oU(n,r,i,s,t[8],7,1770035416),s=oU(s,n,r,i,t[9],12,-1958414417),i=oU(i,s,n,r,t[10],17,-42063),r=oU(r,i,s,n,t[11],22,-1990404162),n=oU(n,r,i,s,t[12],7,1804603682),s=oU(s,n,r,i,t[13],12,-40341101),i=oU(i,s,n,r,t[14],17,-1502002290),n=lU(n,r=oU(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=lU(s,n,r,i,t[6],9,-1069501632),i=lU(i,s,n,r,t[11],14,643717713),r=lU(r,i,s,n,t[0],20,-373897302),n=lU(n,r,i,s,t[5],5,-701558691),s=lU(s,n,r,i,t[10],9,38016083),i=lU(i,s,n,r,t[15],14,-660478335),r=lU(r,i,s,n,t[4],20,-405537848),n=lU(n,r,i,s,t[9],5,568446438),s=lU(s,n,r,i,t[14],9,-1019803690),i=lU(i,s,n,r,t[3],14,-187363961),r=lU(r,i,s,n,t[8],20,1163531501),n=lU(n,r,i,s,t[13],5,-1444681467),s=lU(s,n,r,i,t[2],9,-51403784),i=lU(i,s,n,r,t[7],14,1735328473),n=cU(n,r=lU(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=cU(s,n,r,i,t[8],11,-2022574463),i=cU(i,s,n,r,t[11],16,1839030562),r=cU(r,i,s,n,t[14],23,-35309556),n=cU(n,r,i,s,t[1],4,-1530992060),s=cU(s,n,r,i,t[4],11,1272893353),i=cU(i,s,n,r,t[7],16,-155497632),r=cU(r,i,s,n,t[10],23,-1094730640),n=cU(n,r,i,s,t[13],4,681279174),s=cU(s,n,r,i,t[0],11,-358537222),i=cU(i,s,n,r,t[3],16,-722521979),r=cU(r,i,s,n,t[6],23,76029189),n=cU(n,r,i,s,t[9],4,-640364487),s=cU(s,n,r,i,t[12],11,-421815835),i=cU(i,s,n,r,t[15],16,530742520),n=uU(n,r=cU(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=uU(s,n,r,i,t[7],10,1126891415),i=uU(i,s,n,r,t[14],15,-1416354905),r=uU(r,i,s,n,t[5],21,-57434055),n=uU(n,r,i,s,t[12],6,1700485571),s=uU(s,n,r,i,t[3],10,-1894986606),i=uU(i,s,n,r,t[10],15,-1051523),r=uU(r,i,s,n,t[1],21,-2054922799),n=uU(n,r,i,s,t[8],6,1873313359),s=uU(s,n,r,i,t[15],10,-30611744),i=uU(i,s,n,r,t[6],15,-1560198380),r=uU(r,i,s,n,t[13],21,1309151649),n=uU(n,r,i,s,t[4],6,-145523070),s=uU(s,n,r,i,t[11],10,-1120210379),i=uU(i,s,n,r,t[2],15,718787259),r=uU(r,i,s,n,t[9],21,-343485551),e[0]=bU(n,e[0]),e[1]=bU(r,e[1]),e[2]=bU(i,e[2]),e[3]=bU(s,e[3])}function aU(e,t,n,r,i,s){return t=bU(bU(t,e),bU(r,s)),bU(t<<i|t>>>32-i,n)}function oU(e,t,n,r,i,s,a){return aU(t&n|~t&r,e,t,i,s,a)}function lU(e,t,n,r,i,s,a){return aU(t&r|n&~r,e,t,i,s,a)}function cU(e,t,n,r,i,s,a){return aU(t^n^r,e,t,i,s,a)}function uU(e,t,n,r,i,s,a){return aU(n^(t|~r),e,t,i,s,a)}function hU(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)sU(r,dU(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(sU(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,sU(r,i),r}function dU(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var fU="0123456789abcdef".split("");function pU(e){for(var t="",n=0;n<4;n++)t+=fU[e>>8*n+4&15]+fU[e>>8*n&15];return t}function mU(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function gU(e){return hU(e).map(mU).join("")}var vU="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=pU(e[t]);return e.join("")}(hU("hello"));function bU(e,t){if(vU){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function yU(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length|0),new Array(s+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}n=e,r=o}else o=r;var h=t.length,d=0,f=0,p="";for(l=0;l<h;l++)f=(f+(u=o[d=(d+1)%256]))%256,o[d]=o[f],o[f]=u,a=o[(o[d]+o[f])%256],p+=String.fromCharCode(t.charCodeAt(l)^a);return p}var wU={print:4,modify:8,copy:16,"annot-forms":32};function xU(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(e){if(void 0!==wU.perm)throw new Error("Invalid permission: "+e);i+=wU[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=gU(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=yU(this.encryptionKey,this.padding)}function _U(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function SU(e){if("object"!==(0,jO.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!r],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(eU){XB.console&&JB.error("jsPDF PubSub Error",eU.message,eU)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function kU(e){if(!(this instanceof kU))return new kU(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function TU(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function EU(e,t,n,r,i){if(!(this instanceof EU))return new EU(e,t,n,r,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,TU.call(this,r,i)}function AU(e,t,n,r,i){if(!(this instanceof AU))return new AU(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,TU.call(this,r,i)}function NU(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",u=null;"object"===(0,jO.A)(e=e||{})&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),a=e.filters||(!0===s?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,d={},f={internal:{},__private__:{}};f.__private__.PubSub=SU;var p="1.3",m=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(e){p=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var v=f.__private__.getPageFormat=function(e){return g[e]};i=i||"a4";var b="compat",y="advanced",w=b;function x(){this.saveGraphicsState(),J(new Pe(de,0,0,-de,0,fn()*de).toString()+" cm"),this.setFontSize(this.getFontSize()/de),c="n",w=y}function _(){this.restoreGraphicsState(),c="S",w=b}var S=f.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};f.advancedAPI=function(e){var t=w===b;return t&&x.call(this),"function"!=typeof e||(e(this),t&&_.call(this)),this},f.compatAPI=function(e){var t=w===y;return t&&_.call(this),"function"!=typeof e||(e(this),t&&x.call(this)),this},f.isAdvancedAPI=function(){return w===y};var k,T=function(e){if(w!==y)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=f.roundToPrecision=f.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};k=f.hpf=f.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return E(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return E(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return E(e,16)};var A=f.f2=f.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return E(e,2)},N=f.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return E(e,3)},I=f.scale=f.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return w===b?e*de:w===y?e:void 0},C=function(e){return I(function(e){return w===b?fn()-e:w===y?e:void 0}(e))};f.__private__.setPrecision=f.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var P,L="00000000000000000000000000000000",D=f.__private__.getFileId=function(){return L},O=f.__private__.setFileId=function(e){return L=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():L.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==u&&(bt=new xU(u.userPermissions,u.userPassword,u.ownerPassword,L)),L};f.setFileId=function(e){return O(e),this},f.getFileId=function(){return D()};var R=f.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),s=[n,U(r),"'",U(i),"'"].join("");return["D:",e.getFullYear(),U(e.getMonth()+1),U(e.getDate()),U(e.getHours()),U(e.getMinutes()),U(e.getSeconds()),s].join("")},M=f.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),a=parseInt(e.substr(14,2),10);return new Date(t,n,r,i,s,a,0)},F=f.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=R(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return P=t},j=f.__private__.getCreationDate=function(e){var t=P;return"jsDate"===e&&(t=M(P)),t};f.setCreationDate=function(e){return F(e),this},f.getCreationDate=function(e){return j(e)};var B,U=f.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},z=f.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},V=0,q=[],W=[],H=0,G=[],K=[],Y=!1,X=W;f.__private__.setCustomOutputDestination=function(e){Y=!0,X=e};var $=function(e){Y||(X=e)};f.__private__.resetCustomOutputDestination=function(){Y=!1,X=W};var J=f.__private__.out=function(e){return e=e.toString(),H+=e.length+1,X.push(e),X},Q=f.__private__.write=function(e){return J(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Z=f.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(e){return te=w===y?e/de:e,this};var ne,re=f.__private__.getFontSize=f.getFontSize=function(){return w===b?te:te*de},ie=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(e){return ie=e,this},f.__private__.getR2L=f.getR2L=function(){return ie};var se,ae=f.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};f.__private__.getZoomMode=function(){return ne};var oe,le=f.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');se=e};f.__private__.getPageMode=function(){return se};var ce=f.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');oe=e};f.__private__.getLayoutMode=function(){return oe},f.__private__.setDisplayMode=f.setDisplayMode=function(e,t,n){return ae(e),ce(t),le(n),this};var ue={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ue[e]},f.__private__.getDocumentProperties=function(){return ue},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(e){for(var t in ue)ue.hasOwnProperty(t)&&e[t]&&(ue[t]=e[t]);return this},f.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ue[e]=t};var he,de,fe,pe,me,ge={},ve={},be=[],ye={},we={},xe={},_e={},Se=null,ke=0,Te=[],Ee=new SU(f),Ae=e.hotfixes||[],Ne={},Ie={},Ce=[],Pe=function e(t,n,r,i,s,a){if(!(this instanceof e))return new e(t,n,r,i,s,a);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(s)&&(s=0),isNaN(a)&&(a=0),this._matrix=[t,n,r,i,s,a]};Object.defineProperty(Pe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Pe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Pe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Pe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Pe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Pe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Pe.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Pe.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Pe.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Pe.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Pe.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Pe.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Pe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pe.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Pe.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(e)},Pe.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,s=e.tx*this.sx+e.ty*this.shx+this.tx,a=e.tx*this.shy+e.ty*this.sy+this.ty;return new Pe(t,n,r,i,s,a)},Pe.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty,a=Math.sqrt(e*e+t*t),o=(e/=a)*n+(t/=a)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,a=-a),{scale:new Pe(a,0,0,l,0,0),translate:new Pe(1,0,0,1,i,s),rotate:new Pe(e,t,-t,e,0,0),skew:new Pe(1,0,o,1,0,0)}},Pe.prototype.toString=function(e){return this.join(" ")},Pe.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty,a=1/(e*r-t*n),o=r*a,l=-t*a,c=-n*a,u=e*a;return new Pe(o,l,c,u,-o*i-c*s,-l*i-u*s)},Pe.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new tn(t,n)},Pe.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new tn(e.x+e.w,e.y+e.h));return new nn(t.x,t.y,n.x-t.x,n.y-t.y)},Pe.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty;return new Pe(e,t,n,r,i,s)},f.Matrix=Pe;var Le=f.matrixMult=function(e,t){return t.multiply(e)},De=new Pe(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=De;var Oe=function(e,t){if(!we[e]){var n=(t instanceof EU?"Sh":"P")+(Object.keys(ye).length+1).toString(10);t.id=n,we[e]=n,ye[n]=t,Ee.publish("addPattern",t)}};f.ShadingPattern=EU,f.TilingPattern=AU,f.addShadingPattern=function(e,t){return T("addShadingPattern()"),Oe(e,t),this},f.beginTilingPattern=function(e){T("beginTilingPattern()"),sn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},f.endTilingPattern=function(e,t){T("endTilingPattern()"),t.stream=K[B].join("\n"),Oe(e,t),Ee.publish("endTilingPattern",t),Ce.pop().restore()};var Re,Me=f.__private__.newObject=function(){var e=Fe();return je(e,!0),e},Fe=f.__private__.newObjectDeferred=function(){return V++,q[V]=function(){return H},V},je=function(e,t){return t="boolean"==typeof t&&t,q[e]=H,t&&J(e+" 0 obj"),e},Be=f.__private__.newAdditionalObject=function(){var e={objId:Fe(),content:""};return G.push(e),e},Ue=Fe(),ze=Fe(),Ve=f.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return r},qe=f.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,i=e.ch3,s=e.ch4,a="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var o=new nU(n);if(o.ok)n=o.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,i=255&l}if(void 0===r||void 0===s&&n===r&&r===i)t="string"==typeof n?n+" "+a[0]:2===e.precision?A(n/255)+" "+a[0]:N(n/255)+" "+a[0];else if(void 0===s||"object"===(0,jO.A)(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.","1.","1.",a[1]].join(" ");t="string"==typeof n?[n,r,i,a[1]].join(" "):2===e.precision?[A(n/255),A(r/255),A(i/255),a[1]].join(" "):[N(n/255),N(r/255),N(i/255),a[1]].join(" ")}else t="string"==typeof n?[n,r,i,s,a[2]].join(" "):2===e.precision?[A(n),A(r),A(i),A(s),a[2]].join(" "):[N(n),N(r),N(i),N(s),a[2]].join(" ");return t},We=f.__private__.getFilters=function(){return a},He=f.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||We(),r=e.alreadyAppliedFilters||[],i=e.addLength1||!1,s=t.length,a=e.objectId,o=function(e){return e};if(null!==u&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(o=bt.encryptor(a,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],h=(l=void 0!==NU.API.processDataByFilters?NU.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===i&&c.push({key:"Length1",value:s})),0!=h.length)if(h.split("/").length-1==1)c.push({key:"Filter",value:h});else{c.push({key:"Filter",value:"["+h+"]"});for(var d=0;d<c.length;d+=1)if("DecodeParms"===c[d].key){for(var f=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)f.push("null");f.push(c[d].value),c[d].value="["+f.join(" ")+"]"}}J("<<");for(var m=0;m<c.length;m++)J("/"+c[m].key+" "+c[m].value);J(">>"),0!==l.data.length&&(J("stream"),J(o(l.data)),J("endstream"))},Ge=f.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,i=e.contentsObjId;je(r,!0),J("<</Type /Page"),J("/Parent "+e.rootDictionaryObjId+" 0 R"),J("/Resources "+e.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(k(e.mediaBox.bottomLeftX))+" "+parseFloat(k(e.mediaBox.bottomLeftY))+" "+k(e.mediaBox.topRightX)+" "+k(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&J("/CropBox ["+k(e.cropBox.bottomLeftX)+" "+k(e.cropBox.bottomLeftY)+" "+k(e.cropBox.topRightX)+" "+k(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&J("/BleedBox ["+k(e.bleedBox.bottomLeftX)+" "+k(e.bleedBox.bottomLeftY)+" "+k(e.bleedBox.topRightX)+" "+k(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&J("/TrimBox ["+k(e.trimBox.bottomLeftX)+" "+k(e.trimBox.bottomLeftY)+" "+k(e.trimBox.topRightX)+" "+k(e.trimBox.topRightY)+"]"),null!==e.artBox&&J("/ArtBox ["+k(e.artBox.bottomLeftX)+" "+k(e.artBox.bottomLeftY)+" "+k(e.artBox.topRightX)+" "+k(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&J("/UserUnit "+e.userUnit),Ee.publish("putPage",{objId:r,pageContext:Te[t],pageNumber:t,page:n}),J("/Contents "+i+" 0 R"),J(">>"),J("endobj");var s=n.join("\n");return w===y&&(s+="\nQ"),je(i,!0),He({data:s,filters:We(),objectId:i}),J("endobj"),r},Ke=f.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=ke;e++)Te[e].objId=Fe(),Te[e].contentsObjId=Fe();for(e=1;e<=ke;e++)n.push(Ge({number:e,data:K[e],objId:Te[e].objId,contentsObjId:Te[e].contentsObjId,mediaBox:Te[e].mediaBox,cropBox:Te[e].cropBox,bleedBox:Te[e].bleedBox,trimBox:Te[e].trimBox,artBox:Te[e].artBox,userUnit:Te[e].userUnit,rootDictionaryObjId:Ue,resourceDictionaryObjId:ze}));je(Ue,!0),J("<</Type /Pages");var r="/Kids [";for(t=0;t<ke;t++)r+=n[t]+" 0 R ";J(r+"]"),J("/Count "+ke),J(">>"),J("endobj"),Ee.publish("postPutPages")},Ye=function(e){Ee.publish("putFont",{font:e,out:J,newObject:Me,putStream:He}),!0!==e.isAlreadyPutted&&(e.objectNumber=Me(),J("<<"),J("/Type /Font"),J("/BaseFont /"+_U(e.postScriptName)),J("/Subtype /Type1"),"string"==typeof e.encoding&&J("/Encoding /"+e.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Xe=function(e){e.objectNumber=Me();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[k(e.x),k(e.y),k(e.x+e.width),k(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");He({data:n,additionalKeyValues:t,objectId:e.objectNumber}),J("endobj")},$e=function(e,t){t||(t=21);var n=Me(),r=function(e,t){var n,r=[],i=1/(t-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=e[0].offset){var s={offset:0,color:e[0].color};e.unshift(s)}if(1!=e[e.length-1].offset){var a={offset:1,color:e[e.length-1].color};e.push(a)}for(var o="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var u=e[l].offset,h=(n-u)/(e[l+1].offset-u),d=e[l].color,f=e[l+1].color;o+=z(Math.round((1-h)*d[0]+h*f[0]).toString(16))+z(Math.round((1-h)*d[1]+h*f[1]).toString(16))+z(Math.round((1-h)*d[2]+h*f[2]).toString(16))}return o.trim()}(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),J("endobj"),e.objectNumber=Me(),J("<< /ShadingType "+e.type),J("/ColorSpace /DeviceRGB");var s="/Coords ["+k(parseFloat(e.coords[0]))+" "+k(parseFloat(e.coords[1]))+" ";2===e.type?s+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3])):s+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3]))+" "+k(parseFloat(e.coords[4]))+" "+k(parseFloat(e.coords[5])),J(s+="]"),e.matrix&&J("/Matrix ["+e.matrix.toString()+"]"),J("/Function "+n+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Je=function(e,t){var n=Fe(),r=Me();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(k).join(" ")+"]"}),i.push({key:"XStep",value:k(e.xStep)}),i.push({key:"YStep",value:k(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),He({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),J("endobj")},Qe=function(e){for(var t in e.objectNumber=Me(),J("<<"),e)switch(t){case"opacity":J("/ca "+A(e[t]));break;case"stroke-opacity":J("/CA "+A(e[t]))}J(">>"),J("endobj")},Ze=function(e){je(e.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in J("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===h||!0===h&&d.hasOwnProperty(e))&&J("/"+e+" "+ge[e].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(ye).length>0){for(var e in J("/Shading <<"),ye)ye.hasOwnProperty(e)&&ye[e]instanceof EU&&ye[e].objectNumber>=0&&J("/"+e+" "+ye[e].objectNumber+" 0 R");Ee.publish("putShadingPatternDict"),J(">>")}}(),function(e){if(Object.keys(ye).length>0){for(var t in J("/Pattern <<"),ye)ye.hasOwnProperty(t)&&ye[t]instanceof f.TilingPattern&&ye[t].objectNumber>=0&&ye[t].objectNumber<e&&J("/"+t+" "+ye[t].objectNumber+" 0 R");Ee.publish("putTilingPatternDict"),J(">>")}}(e.objectOid),function(){if(Object.keys(xe).length>0){var e;for(e in J("/ExtGState <<"),xe)xe.hasOwnProperty(e)&&xe[e].objectNumber>=0&&J("/"+e+" "+xe[e].objectNumber+" 0 R");Ee.publish("putGStateDict"),J(">>")}}(),function(){for(var e in J("/XObject <<"),Ne)Ne.hasOwnProperty(e)&&Ne[e].objectNumber>=0&&J("/"+e+" "+Ne[e].objectNumber+" 0 R");Ee.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},et=function(e){ve[e.fontName]=ve[e.fontName]||{},ve[e.fontName][e.fontStyle]=e.id},tt=function(e,t,n,r,i){var s={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Ee.publish("addFont",{font:s,instance:this}),ge[s.id]=s,et(s),s.id},nt=f.__private__.pdfEscape=f.pdfEscape=function(e,t){return function(e,t){var n,r,i,s,a,o,l,c,u;if(i=(t=t||{}).sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&ge[he].metadata&&ge[he].metadata[i]&&ge[he].metadata[i].encoding&&(s=ge[he].metadata[i].encoding,!a&&ge[he].encoding&&(a=ge[he].encoding),!a&&s.codePages&&(a=s.codePages[0]),"string"==typeof a&&(a=s[a]),a)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(c=a[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(u),o.push(c-(u<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=f.__private__.beginPage=function(e){K[++ke]=[],Te[ke]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},at(ke),$(K[B])},it=function(e,t){var r,s,a;switch(n=t||n,"string"==typeof e&&(r=v(e.toLowerCase()),Array.isArray(r)&&(s=r[0],a=r[1])),Array.isArray(e)&&(s=e[0]*de,a=e[1]*de),isNaN(s)&&(s=i[0],a=i[1]),(s>14400||a>14400)&&(JB.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),s=Math.min(14400,s),a=Math.min(14400,a)),i=[s,a],n.substr(0,1)){case"l":a>s&&(i=[a,s]);break;case"p":s>a&&(i=[a,s])}rt(i),jt(Mt),J(Gt),0!==Qt&&J(Qt+" J"),0!==Zt&&J(Zt+" j"),Ee.publish("addPage",{pageNumber:ke})},st=function(e){e>0&&e<=ke&&(K.splice(e,1),Te.splice(e,1),ke--,B>ke&&(B=ke),this.setPage(B))},at=function(e){e>0&&e<=ke&&(B=e)},ot=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return K.length-1},lt=function(e,t,n){var r,i=void 0;return n=n||{},e=void 0!==e?e:ge[he].fontName,t=void 0!==t?t:ge[he].fontStyle,r=e.toLowerCase(),void 0!==ve[r]&&void 0!==ve[r][t]?i=ve[r][t]:void 0!==ve[e]&&void 0!==ve[e][t]?i=ve[e][t]:!1===n.disableWarning&&JB.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=ve.times[t])&&(i=ve.times.normal),i},ct=f.__private__.putInfo=function(){var e=Me(),t=function(e){return e};for(var n in null!==u&&(t=bt.encryptor(e,0)),J("<<"),J("/Producer ("+nt(t("jsPDF "+NU.version))+")"),ue)ue.hasOwnProperty(n)&&ue[n]&&J("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+nt(t(ue[n]))+")");J("/CreationDate ("+nt(t(P))+")"),J(">>"),J("endobj")},ut=f.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Ue;switch(Me(),J("<<"),J("/Type /Catalog"),J("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&J("/OpenAction [3 0 R /XYZ null null "+A(ne)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}se&&J("/PageMode /"+se),Ee.publish("putCatalog"),J(">>"),J("endobj")},ht=f.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(V+1)),J("/Root "+V+" 0 R"),J("/Info "+(V-1)+" 0 R"),null!==u&&J("/Encrypt "+bt.oid+" 0 R"),J("/ID [ <"+L+"> <"+L+"> ]"),J(">>")},dt=f.__private__.putHeader=function(){J("%PDF-"+p),J("%\xba\xdf\xac\xe0")},ft=f.__private__.putXRef=function(){var e="0000000000";J("xref"),J("0 "+(V+1)),J("0000000000 65535 f ");for(var t=1;t<=V;t++)"function"==typeof q[t]?J((e+q[t]()).slice(-10)+" 00000 n "):void 0!==q[t]?J((e+q[t]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},pt=f.__private__.buildDocument=function(){var e;V=0,H=0,W=[],q=[],G=[],Ue=Fe(),ze=Fe(),$(W),Ee.publish("buildDocument"),dt(),Ke(),function(){Ee.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];je(t.objId,!0),J(t.content),J("endobj")}Ee.publish("postPutAdditionalObjects")}(),e=[],function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===h||!0===h&&d.hasOwnProperty(e))&&Ye(ge[e])}(),function(){var e;for(e in xe)xe.hasOwnProperty(e)&&Qe(xe[e])}(),function(){for(var e in Ne)Ne.hasOwnProperty(e)&&Xe(Ne[e])}(),function(e){var t;for(t in ye)ye.hasOwnProperty(t)&&(ye[t]instanceof EU?$e(ye[t]):ye[t]instanceof AU&&Je(ye[t],e))}(e),Ee.publish("putResources"),e.forEach(Ze),Ze({resourcesOid:ze,objectOid:Number.MAX_SAFE_INTEGER}),Ee.publish("postPutResources"),null!==u&&(bt.oid=Me(),J("<<"),J("/Filter /Standard"),J("/V "+bt.v),J("/R "+bt.r),J("/U <"+bt.toHexString(bt.U)+">"),J("/O <"+bt.toHexString(bt.O)+">"),J("/P "+bt.P),J(">>"),J("endobj")),ct(),ut();var t=H;return ft(),ht(),J("startxref"),J(""+t),J("%%EOF"),$(K[B]),W.join("\n")},mt=f.__private__.getBlob=function(e){return new Blob([Z(e)],{type:"application/pdf"})},gt=f.output=f.__private__.output=(Re=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":f.save(t.filename);break;case"arraybuffer":return Z(pt());case"blob":return mt(pt());case"bloburi":case"bloburl":if(void 0!==XB.URL&&"function"==typeof XB.URL.createObjectURL)return XB.URL&&XB.URL.createObjectURL(mt(pt()))||void 0;JB.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=pt();try{n=iU(r)}catch(u){n=iU(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(XB)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,s="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=XB.open();return null!==o&&o.document.write(a),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(XB)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=XB.open();if(null!==c){c.document.write(l);var h=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(h.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(XB))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',p=XB.open();if(null!==p&&(p.document.write(d),p.document.title=t.filename),p||"undefined"==typeof safari)return p;break;case"datauri":case"dataurl":return XB.document.location.href=this.output("datauristring",t);default:return null}},Re.foo=function(){try{return Re.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!XB.console)throw new Error(n);XB.console.error(n,t),XB.alert&&alert(n)}},Re.foo.bar=Re,Re.foo),vt=function(e){return!0===Array.isArray(Ae)&&Ae.indexOf(e)>-1};switch(r){case"pt":de=1;break;case"mm":de=72/25.4;break;case"cm":de=72/2.54;break;case"in":de=72;break;case"px":de=1==vt("px_scaling")?.75:96/72;break;case"pc":case"em":de=12;break;case"ex":de=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);de=r}var bt=null;F(),O();var yt=f.__private__.getPageInfo=f.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Te[e].objId,pageNumber:e,pageContext:Te[e]}},wt=f.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Te)if(Te[t].objId===e)break;return yt(t)},xt=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Te[B].objId,pageNumber:B,pageContext:Te[B]}};f.addPage=function(){return it.apply(this,arguments),this},f.setPage=function(){return at.apply(this,arguments),$.call(this,K[B]),this},f.insertPage=function(e){return this.addPage(),this.movePage(B,e),this},f.movePage=function(e,t){var n,r;if(e>t){n=K[e],r=Te[e];for(var i=e;i>t;i--)K[i]=K[i-1],Te[i]=Te[i-1];K[t]=n,Te[t]=r,this.setPage(t)}else if(e<t){n=K[e],r=Te[e];for(var s=e;s<t;s++)K[s]=K[s+1],Te[s]=Te[s+1];K[t]=n,Te[t]=r,this.setPage(t)}return this},f.deletePage=function(){return st.apply(this,arguments),this},f.__private__.text=f.text=function(e,t,n,r,i){var s,a,o,l,c,u,h,f,p,m=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Pe==0?(o=arguments[4],l=arguments[5],"object"===(0,jO.A)(h=arguments[3])&&null!==h||("string"==typeof o&&(l=o,o=null),"string"==typeof h&&(l=h,h=null),"number"==typeof h&&(o=h,h=null),r={flags:h,angle:o,align:l})):(T("The transform parameter of text() with a Matrix value"),p=i),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return m;var v,b="",x="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Rt,_=m.internal.scaleFactor;function S(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),nt(e,h)}function E(e){for(var t,n=e.concat(),r=[],i=n.length;i--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function A(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,i,s=e.concat(),a=[],o=s.length;o--;)"string"==typeof(r=s.shift())?a.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=t(r[0],r[1],r[2]),a.push([i[0],i[1],i[2]]));n=a}return n}var N=!1,C=!0;if("string"==typeof e)N=!0;else if(Array.isArray(e)){var P=e.concat();a=[];for(var L,D=P.length;D--;)("string"!=typeof(L=P.shift())||Array.isArray(L)&&"string"!=typeof L[0])&&(C=!1);N=C}if(!1===N)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var O=te/m.internal.scaleFactor,R=O*(x-1);switch(r.baseline){case"bottom":n-=R;break;case"top":n+=O-R;break;case"hanging":n+=O-2*R;break;case"middle":n+=O/2-R}if((u=r.maxWidth||0)>0&&("string"==typeof e?e=m.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(m.splitTextToSize(t,u))},[]))),s={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:he,fonts:ge,activeFontSize:te}},Ee.publish("preProcessText",s),e=s.text,o=(r=s.options).angle,p instanceof Pe==0&&o&&"number"==typeof o){o*=Math.PI/180,0===r.rotationDirection&&(o=-o),w===y&&(o=-o);var M=Math.cos(o),F=Math.sin(o);p=new Pe(M,F,-F,M,0,0)}else o&&o instanceof Pe&&(p=o);w!==y||p||(p=De),void 0!==(c=r.charSpace||$t)&&(b+=k(I(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=r.horizontalScale)&&(b+=k(100*f)+" Tz\n"),r.lang;var j=-1,B=void 0!==r.renderingMode?r.renderingMode:r.stroke,U=m.internal.getCurrentPageInfo().pageContext;switch(B){case 0:case!1:case"fill":j=0;break;case 1:case!0:case"stroke":j=1;break;case 2:case"fillThenStroke":j=2;break;case 3:case"invisible":j=3;break;case 4:case"fillAndAddForClipping":j=4;break;case 5:case"strokeAndAddPathForClipping":j=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":j=6;break;case 7:case"addToPathForClipping":j=7}var z=void 0!==U.usedRenderingMode?U.usedRenderingMode:-1;-1!==j?b+=j+" Tr\n":-1!==z&&(b+="0 Tr\n"),-1!==j&&(U.usedRenderingMode=j),l=r.align||"left";var V,q=te*x,W=m.internal.pageSize.getWidth(),H=ge[he];c=r.charSpace||$t,u=r.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},r.flags);var G=[],K=function(e){return m.getStringUnitWidth(e,{font:H,charSpace:c,fontSize:te,doKerning:!1})*te/_};if("[object Array]"===Object.prototype.toString.call(e)){var Y;a=E(e),"left"!==l&&(V=a.map(K));var X,$=0;if("right"===l){t-=V[0],e=[],D=a.length;for(var Q=0;Q<D;Q++)0===Q?(X=Vt(t),Y=qt(n)):(X=I($-V[Q]),Y=-q),e.push([a[Q],X,Y]),$=V[Q]}else if("center"===l){t-=V[0]/2,e=[],D=a.length;for(var Z=0;Z<D;Z++)0===Z?(X=Vt(t),Y=qt(n)):(X=I(($-V[Z])/2),Y=-q),e.push([a[Z],X,Y]),$=V[Z]}else if("left"===l){e=[],D=a.length;for(var ee=0;ee<D;ee++)e.push(a[ee])}else if("justify"===l&&"Identity-H"===H.encoding){e=[],D=a.length,u=0!==u?u:W;for(var ne=0,re=0;re<D;re++)if(Y=0===re?qt(n):-q,X=0===re?Vt(t):ne,re<D-1){var se=I((u-V[re])/(a[re].split(" ").length-1)),ae=a[re].split(" ");e.push([ae[0]+" ",X,Y]),ne=0;for(var oe=1;oe<ae.length;oe++){var le=(K(ae[oe-1]+" "+ae[oe])-K(ae[oe]))*_+se;oe==ae.length-1?e.push([ae[oe],le,0]):e.push([ae[oe]+" ",le,0]),ne-=le}}else e.push([a[re],X,Y]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],D=a.length,u=0!==u?u:W,re=0;re<D;re++){Y=0===re?qt(n):-q,X=0===re?Vt(t):0;var ce=a[re].split(" ").length-1,ue=ce>0?(u-V[re])/ce:0;re<D-1?G.push(k(I(ue))):G.push(0),e.push([a[re],X,Y])}}}!0===("boolean"==typeof r.R2L?r.R2L:ie)&&(e=A(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),s={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:he,fonts:ge,activeFontSize:te}},Ee.publish("postProcessText",s),e=s.text,v=s.mutex.isHex||!1;var de=ge[he].encoding;"WinAnsiEncoding"!==de&&"StandardEncoding"!==de||(e=A(e,function(e,t,n){return[S(e),t,n]})),a=E(e),e=[];for(var fe,pe,me,ve=Array.isArray(a[0])?1:0,be="",ye=function(e,t,n){var i="";return n instanceof Pe?(n="number"==typeof r.angle?Le(n,new Pe(1,0,0,1,e,t)):Le(new Pe(1,0,0,1,e,t),n),w===y&&(n=Le(new Pe(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=k(e)+" "+k(t)+" Td\n",i},we=0;we<a.length;we++){switch(be="",ve){case 1:me=(v?"<":"(")+a[we][0]+(v?">":")"),fe=parseFloat(a[we][1]),pe=parseFloat(a[we][2]);break;case 0:me=(v?"<":"(")+a[we]+(v?">":")"),fe=Vt(t),pe=qt(n)}void 0!==G&&void 0!==G[we]&&(be=G[we]+" Tw\n"),0===we?e.push(be+ye(fe,pe,p)+me):0===ve?e.push(be+me):1===ve&&e.push(be+ye(fe,pe,p)+me)}e=0===ve?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var xe="BT\n/";return xe+=he+" "+te+" Tf\n",xe+=k(te*x)+" TL\n",xe+=Yt+"\n",xe+=b,xe+=e,J(xe+="ET"),d[he]=!0,m};var _t=f.__private__.clip=f.clip=function(e){return J("evenodd"===e?"W*":"W"),this};f.clipEvenOdd=function(){return _t("evenodd")},f.__private__.discardPath=f.discardPath=function(){return J("n"),this};var St=f.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(e){return St(e)&&(c=e),this};var kt=f.__private__.getStyle=f.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Tt=f.close=function(){return J("h"),this};f.stroke=function(){return J("S"),this},f.fill=function(e){return Et("f",e),this},f.fillEvenOdd=function(e){return Et("f*",e),this},f.fillStroke=function(e){return Et("B",e),this},f.fillStrokeEvenOdd=function(e){return Et("B*",e),this};var Et=function(e,t){"object"===(0,jO.A)(t)?It(t,e):J(e)},At=function(e){null===e||w===y&&void 0===e||(e=kt(e),J(e))};function Nt(e,t,n,r,i){var s=new AU(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);s.stream=this.stream;var a=e+"$$"+this.cloneIndex+++"$$";return Oe(a,s),s}var It=function(e,t){var n=we[e.key],r=ye[n];if(r instanceof EU)J("q"),J(Ct(t)),r.gState&&f.setGState(r.gState),J(e.matrix.toString()+" cm"),J("/"+n+" sh"),J("Q");else if(r instanceof AU){var i=new Pe(1,0,0,-1,0,fn());e.matrix&&(i=i.multiply(e.matrix||De),n=Nt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,i).id),J("q"),J("/Pattern cs"),J("/"+n+" scn"),r.gState&&f.setGState(r.gState),J(t),J("Q")}},Ct=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Pt=f.moveTo=function(e,t){return J(k(I(e))+" "+k(C(t))+" m"),this},Lt=f.lineTo=function(e,t){return J(k(I(e))+" "+k(C(t))+" l"),this},Dt=f.curveTo=function(e,t,n,r,i,s){return J([k(I(e)),k(C(t)),k(I(n)),k(C(r)),k(I(i)),k(C(s)),"c"].join(" ")),this};f.__private__.line=f.line=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!St(i))throw new Error("Invalid arguments passed to jsPDF.line");return w===b?this.lines([[n-e,r-t]],e,t,[1,1],i||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},f.__private__.lines=f.lines=function(e,t,n,r,i,s){var a,o,l,c,u,h,d,f,p,m,g,v;if("number"==typeof e&&(v=n,n=t,t=e,e=v),r=r||[1,1],s=s||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!St(i)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(Pt(t,n),a=r[0],o=r[1],c=e.length,m=t,g=n,l=0;l<c;l++)2===(u=e[l]).length?(m=u[0]*a+m,g=u[1]*o+g,Lt(m,g)):(h=u[0]*a+m,d=u[1]*o+g,f=u[2]*a+m,p=u[3]*o+g,m=u[4]*a+m,g=u[5]*o+g,Dt(h,d,f,p,m,g));return s&&Tt(),At(i),this},f.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Pt(r[0],r[1]);break;case"l":Lt(r[0],r[1]);break;case"c":Dt.apply(this,r);break;case"h":Tt()}}return this},f.__private__.rect=f.rect=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!St(i))throw new Error("Invalid arguments passed to jsPDF.rect");return w===b&&(r=-r),J([k(I(e)),k(C(t)),k(I(n)),k(I(r)),"re"].join(" ")),At(i),this},f.__private__.triangle=f.triangle=function(e,t,n,r,i,s,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)||!St(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[i-n,s-r],[e-i,t-s]],e,t,[1,1],a,!0),this},f.__private__.roundedRect=f.roundedRect=function(e,t,n,r,i,s,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)||!St(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),s=Math.min(s,.5*r),this.lines([[n-2*i,0],[i*o,0,i,s-s*o,i,s],[0,r-2*s],[0,s*o,-i*o,s,-i,s],[2*i-n,0],[-i*o,0,-i,-s*o,-i,-s],[0,2*s-r],[0,-s*o,i*o,-s,i,-s]],e+i,t,[1,1],a,!0),this},f.__private__.ellipse=f.ellipse=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!St(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return Pt(e+n,t),Dt(e+n,t-a,e+s,t-r,e,t-r),Dt(e-s,t-r,e-n,t-a,e-n,t),Dt(e-n,t+a,e-s,t+r,e,t+r),Dt(e+s,t+r,e+n,t+a,e+n,t),At(i),this},f.__private__.circle=f.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!St(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},f.setFont=function(e,t,n){return n&&(t=S(t,n)),he=lt(e,t,{disableWarning:!1}),this};var Ot=f.__private__.getFont=f.getFont=function(){return ge[lt.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var e,t,n={};for(e in ve)if(ve.hasOwnProperty(e))for(t in n[e]=[],ve[e])ve[e].hasOwnProperty(t)&&n[e].push(t);return n},f.addFont=function(e,t,n,r,i){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(n=S(n,r)),tt.call(this,e,t,n,i=i||"Identity-H")};var Rt,Mt=e.lineWidth||.200025,Ft=f.__private__.getLineWidth=f.getLineWidth=function(){return Mt},jt=f.__private__.setLineWidth=f.setLineWidth=function(e){return Mt=e,J(k(I(e))+" w"),this};f.__private__.setLineDash=NU.API.setLineDash=NU.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return k(I(e))}).join(" "),t=k(I(t)),J("["+e+"] "+t+" d"),this};var Bt=f.__private__.getLineHeight=f.getLineHeight=function(){return te*Rt};f.__private__.getLineHeight=f.getLineHeight=function(){return te*Rt};var Ut=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Rt=e),this},zt=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Rt};Ut(e.lineHeight);var Vt=f.__private__.getHorizontalCoordinate=function(e){return I(e)},qt=f.__private__.getVerticalCoordinate=function(e){return w===y?e:Te[B].mediaBox.topRightY-Te[B].mediaBox.bottomLeftY-I(e)},Wt=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(e){return k(Vt(e))},Ht=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(e){return k(qt(e))},Gt=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ve(Gt)},f.__private__.setStrokeColor=f.setDrawColor=function(e,t,n,r){return Gt=qe({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),J(Gt),this};var Kt=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ve(Kt)},f.__private__.setFillColor=f.setFillColor=function(e,t,n,r){return Kt=qe({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),J(Kt),this};var Yt=e.textColor||"0 g",Xt=f.__private__.getTextColor=f.getTextColor=function(){return Ve(Yt)};f.__private__.setTextColor=f.setTextColor=function(e,t,n,r){return Yt=qe({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var $t=e.charSpace,Jt=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat($t||0)};f.__private__.setCharSpace=f.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $t=e,this};var Qt=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qt=t,J(t+" J"),this};var Zt=0;f.__private__.setLineJoin=f.setLineJoin=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,J(t+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(k(I(e))+" M"),this},f.GState=kU,f.setGState=function(e){(e="string"==typeof e?xe[_e[e]]:en(null,e)).equals(Se)||(J("/"+e.id+" gs"),Se=e)};var en=function(e,t){if(!e||!_e[e]){var n=!1;for(var r in xe)if(xe.hasOwnProperty(r)&&xe[r].equals(t)){n=!0;break}if(n)t=xe[r];else{var i="GS"+(Object.keys(xe).length+1).toString(10);xe[i]=t,t.id=i}return e&&(_e[e]=t.id),Ee.publish("addGState",t),t}};f.addGState=function(e,t){return en(e,t),this},f.saveGraphicsState=function(){return J("q"),be.push({key:he,size:te,color:Yt}),this},f.restoreGraphicsState=function(){J("Q");var e=be.pop();return he=e.key,te=e.size,Yt=e.color,Se=null,this},f.setCurrentTransformationMatrix=function(e){return J(e.toString()+" cm"),this},f.comment=function(e){return J("#"+e),this};var tn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},nn=function(e,t,n,r){tn.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var s=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}}),this},rn=function(){this.page=ke,this.currentPage=B,this.pages=K.slice(0),this.pagesContext=Te.slice(0),this.x=fe,this.y=pe,this.matrix=me,this.width=on(B),this.height=cn(B),this.outputDestination=X,this.id="",this.objectNumber=-1};rn.prototype.restore=function(){ke=this.page,B=this.currentPage,Te=this.pagesContext,K=this.pages,fe=this.x,pe=this.y,me=this.matrix,ln(B,this.width),un(B,this.height),X=this.outputDestination};var sn=function(e,t,n,r,i){Ce.push(new rn),ke=B=0,K=[],fe=e,pe=t,me=i,rt([n,r])};for(var an in f.beginFormObject=function(e,t,n,r,i){return sn(e,t,n,r,i),this},f.endFormObject=function(e){return function(e){if(Ie[e])Ce.pop().restore();else{var t=new rn,n="Xo"+(Object.keys(Ne).length+1).toString(10);t.id=n,Ie[e]=n,Ne[n]=t,Ee.publish("addFormObject",t),Ce.pop().restore()}}(e),this},f.doFormObject=function(e,t){var n=Ne[Ie[e]];return J("q"),J(t.toString()+" cm"),J("/"+n.id+" Do"),J("Q"),this},f.getFormObject=function(e){var t=Ne[Ie[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},f.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(tU(mt(pt()),e),"function"==typeof tU.unload&&XB.setTimeout&&setTimeout(tU.unload,911),this):new Promise(function(t,n){try{var i=tU(mt(pt()),e);"function"==typeof tU.unload&&XB.setTimeout&&setTimeout(tU.unload,911),t(i)}catch(r){n(r.message)}})},NU.API)NU.API.hasOwnProperty(an)&&("events"===an&&NU.API.events.length?function(e,t){var n,r,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],r=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Ee,NU.API.events):f[an]=NU.API[an]);function on(e){return Te[e].mediaBox.topRightX-Te[e].mediaBox.bottomLeftX}function ln(e,t){Te[e].mediaBox.topRightX=t+Te[e].mediaBox.bottomLeftX}function cn(e){return Te[e].mediaBox.topRightY-Te[e].mediaBox.bottomLeftY}function un(e,t){Te[e].mediaBox.topRightY=t+Te[e].mediaBox.bottomLeftY}var hn=f.getPageWidth=function(e){return on(e=e||B)/de},dn=f.setPageWidth=function(e,t){ln(e,t*de)},fn=f.getPageHeight=function(e){return cn(e=e||B)/de},pn=f.setPageHeight=function(e,t){un(e,t*de)};return f.internal={pdfEscape:nt,getStyle:kt,getFont:Ot,getFontSize:re,getCharSpace:Jt,getTextColor:Xt,getLineHeight:Bt,getLineHeightFactor:zt,getLineWidth:Ft,write:Q,getHorizontalCoordinate:Vt,getVerticalCoordinate:qt,getCoordinateString:Wt,getVerticalCoordinateString:Ht,collections:{},newObject:Me,newAdditionalObject:Be,newObjectDeferred:Fe,newObjectDeferredBegin:je,getFilters:We,putStream:He,events:Ee,scaleFactor:de,pageSize:{getWidth:function(){return hn(B)},setWidth:function(e){dn(B,e)},getHeight:function(){return fn(B)},setHeight:function(e){pn(B,e)}},encryptionOptions:u,encryption:bt,getEncryptor:function(e){return null!==u?bt.encryptor(e,0):function(e){return e}},output:gt,getNumberOfPages:ot,pages:K,out:J,f2:A,f3:N,getPageInfo:yt,getPageInfoByObjId:wt,getCurrentPageInfo:xt,getPDFVersion:m,Point:tn,Rectangle:nn,Matrix:Pe,hasHotfix:vt},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return hn(B)},set:function(e){dn(B,e)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return fn(B)},set:function(e){pn(B,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var r=tt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===h&&(d[r]=!0);var i=e[t][0].split("-");et({id:r,fontName:i[0],fontStyle:i[1]||""})}Ee.publish("addFonts",{fonts:ge,dictionary:ve})}.call(f,ee),he="F1",it(i,n),Ee.publish("initialized"),f}xU.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},xU.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xU.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},xU.prototype.processOwnerPassword=function(e,t){return yU(gU(t).substr(0,5),e)},xU.prototype.encryptor=function(e,t){var n=gU(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return yU(n,e)}},kU.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,jO.A)(e)!==(0,jO.A)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},NU.API={events:[]},NU.version="3.0.3";var IU=NU.API,CU=1,PU=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},LU=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},DU=function(e){return e.toFixed(2)},OU=function(e){return e.toFixed(5)};IU.__acroform__={};var RU=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},MU=function(e){return e*CU},FU=function(e){var t=new ZU,n=fz.internal.getHeight(e)||0,r=fz.internal.getWidth(e)||0;return t.BBox=[0,0,Number(DU(r)),Number(DU(n))],t},jU=IU.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},BU=IU.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},UU=IU.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},zU=IU.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return UU(e,t-1)},VU=IU.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return jU(e,t-1)},qU=IU.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return BU(e,t-1)},WU=IU.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],o=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(i+a)||0,l.upperRight_Y=r(s)||0,[Number(DU(l.lowerLeft_X)),Number(DU(l.lowerLeft_Y)),Number(DU(l.upperRight_X)),Number(DU(l.upperRight_Y))]},HU=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=GU(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+DU(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=FU(e);return s.scope=e.scope,s.stream=t.join("\n"),s}},GU=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(e){return e.split("\n")}):i.map(function(e){return[e]});var s=n,a=fz.internal.getHeight(e)||0;a=a<0?-a:a;var o=fz.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<i.length){var s=n+" "+i[t+1][0];return KU(s,e,r).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,u,h=KU("3",e,s).height,d=e.multiline?a-s:(a-h)/2,f=d+=2,p=0,m=0,g=0;if(s<=0){t="(...) Tj\n",t+="% Width of Text: "+KU(t,e,s=12).width+", FieldWidth:"+o+"\n";break}for(var v="",b=0,y=0;y<i.length;y++)if(i.hasOwnProperty(y)){var w=!1;if(1!==i[y].length&&g!==i[y].length-1){if((h+2)*(b+2)+2>a)continue e;v+=i[y][g],w=!0,m=y,y--}else{v=" "==(v+=i[y][g]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var x=parseInt(y),_=l(x,v,s),S=y>=i.length-1;if(_&&!S){v+=" ",g=0;continue}if(_||S){if(S)m=x;else if(e.multiline&&(h+2)*(b+2)+2>a)continue e}else{if(!e.multiline)continue e;if((h+2)*(b+2)+2>a)continue e;m=x}}for(var k="",T=p;T<=m;T++){var E=i[T];if(e.multiline){if(T===m){k+=E[g]+" ",g=(g+1)%E.length;continue}if(T===p){k+=E[E.length-1]+" ";continue}}k+=E[0]+" "}switch(k=" "==k.substr(k.length-1)?k.substr(0,k.length-1):k,u=KU(k,e,s).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}t+=DU(c)+" "+DU(f)+" Td\n",t+="("+PU(k)+") Tj\n",t+=-DU(c)+" 0 Td\n",f=-(s+2),u=0,p=w?m:m+1,b++,v=""}break}return r.text=t,r.fontSize=s,r},KU=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},YU={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},XU=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},$U=IU.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(0!==s&&(i+=" "),(0,jO.A)(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":"/"!==e[s].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),i+="("+PU(r(e[s].toString()))+")"):i+=e[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},JU=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+PU(r(e))+")"},QU=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};QU.prototype.toString=function(){return this.objId+" 0 R"},QU.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},QU.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:$U(i,this.objId,this.scope)}):i instanceof QU?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:r,value:i}))}return e};var ZU=function(){QU.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};RU(ZU,QU);var ez=function(){QU.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+PU(t(e))+")"}},set:function(t){e=t}})};RU(ez,QU);var tz=function e(){QU.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(t,3))},set:function(e){!0===Boolean(e)?this.F=VU(t,3):this.F=qU(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof cz)return;s="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+PU(t(s))+")"},set:function(e){s=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(e){s=e}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/CU:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof cz||this instanceof hz))return JU(h,this.objId,this.scope)},set:function(e){e=e.toString(),h=e}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof az==0?JU(d,this.objId,this.scope):d},set:function(e){e=e.toString(),d=this instanceof az==0?"("===e.substr(0,1)?LU(e.substr(1,e.length-2)):LU(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof az==1?LU(d.substr(1,d.length-1)):d},set:function(e){e=e.toString(),d=this instanceof az==1?"/"+e:e}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof az==0?JU(f,this.objId,this.scope):f},set:function(e){e=e.toString(),f=this instanceof az==0?"("===e.substr(0,1)?LU(e.substr(1,e.length-2)):LU(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof az==1?LU(f.substr(1,f.length-1)):f},set:function(e){e=e.toString(),f=this instanceof az==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(e){e=Boolean(e),m=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,1):this.Ff=qU(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,2):this.Ff=qU(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,3):this.Ff=qU(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};RU(tz,QU);var nz=function(){tz.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $U(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,i=[];r=t.exec(e);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,18):this.Ff=qU(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=VU(this.Ff,19):this.Ff=qU(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=VU(this.Ff,20),t.sort()):this.Ff=qU(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,22):this.Ff=qU(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,23):this.Ff=qU(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,27):this.Ff=qU(this.Ff,27)}}),this.hasAppearanceStream=!1};RU(nz,tz);var rz=function(){nz.call(this),this.fontName="helvetica",this.combo=!1};RU(rz,nz);var iz=function(){rz.call(this),this.combo=!0};RU(iz,rz);var sz=function(){iz.call(this),this.edit=!0};RU(sz,iz);var az=function(){tz.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,15):this.Ff=qU(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,16):this.Ff=qU(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,17):this.Ff=qU(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,26):this.Ff=qU(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+PU(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,jO.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};RU(az,tz);var oz=function(){az.call(this),this.pushButton=!0};RU(oz,az);var lz=function(){az.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};RU(lz,az);var cz=function(){var e,t;tz.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+PU(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,jO.A)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=fz.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};RU(cz,tz),lz.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},lz.prototype.createOption=function(e){var t=new cz;return t.Parent=this,t.optionName=e,this.Kids.push(t),pz.call(this.scope,t),t};var uz=function(){az.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=fz.CheckBox.createAppearanceStream()};RU(uz,az);var hz=function(){tz.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,13):this.Ff=qU(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,21):this.Ff=qU(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,23):this.Ff=qU(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,24):this.Ff=qU(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,25):this.Ff=qU(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,26):this.Ff=qU(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};RU(hz,tz);var dz=function(){hz.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(zU(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=VU(this.Ff,14):this.Ff=qU(this.Ff,14)}}),this.password=!0};RU(dz,hz);var fz={CheckBox:{createAppearanceStream:function(){return{N:{On:fz.CheckBox.YesNormal},D:{On:fz.CheckBox.YesPushDown,Off:fz.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=FU(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=GU(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+DU(fz.internal.getWidth(e))+" "+DU(fz.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+DU(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=FU(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=fz.internal.getHeight(e),a=fz.internal.getWidth(e),o=GU(e,e.caption);return i.push("1 g"),i.push("0 0 "+DU(a)+" "+DU(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+DU(a-1)+" "+DU(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+DU(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=FU(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+DU(fz.internal.getWidth(e))+" "+DU(fz.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:fz.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=fz.RadioButton.Circle.YesNormal,t.D[e]=fz.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=FU(e);t.scope=e.scope;var n=[],r=fz.internal.getWidth(e)<=fz.internal.getHeight(e)?fz.internal.getWidth(e)/4:fz.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=fz.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+OU(fz.internal.getWidth(e)/2)+" "+OU(fz.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=FU(e);t.scope=e.scope;var n=[],r=fz.internal.getWidth(e)<=fz.internal.getHeight(e)?fz.internal.getWidth(e)/4:fz.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*fz.internal.Bezier_C).toFixed(5)),a=Number((r*fz.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+OU(fz.internal.getWidth(e)/2)+" "+OU(fz.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+OU(fz.internal.getWidth(e)/2)+" "+OU(fz.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=FU(e);t.scope=e.scope;var n=[],r=fz.internal.getWidth(e)<=fz.internal.getHeight(e)?fz.internal.getWidth(e)/4:fz.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*fz.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+OU(fz.internal.getWidth(e)/2)+" "+OU(fz.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:fz.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=fz.RadioButton.Cross.YesNormal,t.D[e]=fz.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=FU(e);t.scope=e.scope;var n=[],r=fz.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+DU(fz.internal.getWidth(e)-2)+" "+DU(fz.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(DU(r.x1.x)+" "+DU(r.x1.y)+" m"),n.push(DU(r.x2.x)+" "+DU(r.x2.y)+" l"),n.push(DU(r.x4.x)+" "+DU(r.x4.y)+" m"),n.push(DU(r.x3.x)+" "+DU(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=FU(e);t.scope=e.scope;var n=fz.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+DU(fz.internal.getWidth(e))+" "+DU(fz.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+DU(fz.internal.getWidth(e)-2)+" "+DU(fz.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(DU(n.x1.x)+" "+DU(n.x1.y)+" m"),r.push(DU(n.x2.x)+" "+DU(n.x2.y)+" l"),r.push(DU(n.x4.x)+" "+DU(n.x4.y)+" m"),r.push(DU(n.x3.x)+" "+DU(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=FU(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+DU(fz.internal.getWidth(e))+" "+DU(fz.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};fz.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=fz.internal.getWidth(e),n=fz.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},fz.internal.getWidth=function(e){var t=0;return"object"===(0,jO.A)(e)&&(t=MU(e.Rect[2])),t},fz.internal.getHeight=function(e){var t=0;return"object"===(0,jO.A)(e)&&(t=MU(e.Rect[3])),t};var pz=IU.addField=function(e){if(function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(tz.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(YU)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");CU=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ez,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&XU(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var i=e[r],s=[],a=i.Rect;if(i.Rect&&(i.Rect=WU(i.Rect,t)),t.internal.newObjectDeferredBegin(i.objId,!0),i.DA=fz.createDefaultAppearanceStream(i),"object"===(0,jO.A)(i)&&"function"==typeof i.getKeyValueListForStream&&(s=i.getKeyValueListForStream()),i.Rect=a,i.hasAppearanceStream&&!i.appearanceStreamContent){var o=HU(i);s.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(i.appearanceStreamContent){var l="";for(var c in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(c)){var u=i.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var r in u)if(u.hasOwnProperty(r)){var h=u[r];"function"==typeof h&&(h=h.call(t,i)),l+="/"+r+" "+h+" ",t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=u)&&(h=h.call(t,i)),l+="/"+r+" "+h,t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h);l+=">>"}s.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:s,objectId:i.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),"object"===(0,jO.A)(i)&&"function"==typeof i.putStream&&i.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof tz))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};IU.AcroFormChoiceField=nz,IU.AcroFormListBox=rz,IU.AcroFormComboBox=iz,IU.AcroFormEditBox=sz,IU.AcroFormButton=az,IU.AcroFormPushButton=oz,IU.AcroFormRadioButton=lz,IU.AcroFormCheckBox=uz,IU.AcroFormTextField=hz,IU.AcroFormPasswordField=dz,IU.AcroFormAppearance=fz,IU.AcroForm={ChoiceField:nz,ListBox:rz,ComboBox:iz,EditBox:sz,Button:az,PushButton:oz,RadioButton:lz,CheckBox:uz,TextField:hz,PasswordField:dz,Appearance:fz},NU.AcroForm={ChoiceField:nz,ListBox:rz,ComboBox:iz,EditBox:sz,Button:az,PushButton:oz,RadioButton:lz,CheckBox:uz,TextField:hz,PasswordField:dz,Appearance:fz};NU.AcroForm;function mz(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(e,t){var i,s,a,o,l,c=n;if("RGBA"===(t=t||n)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(_(e))for(l in r)for(a=r[l],i=0;i<a.length;i+=1){for(o=!0,s=0;s<a[i].length;s+=1)if(void 0!==a[i][s]&&a[i][s]!==e[s]){o=!1;break}if(!0===o){c=l;break}}else for(l in r)for(a=r[l],i=0;i<a.length;i+=1){for(o=!0,s=0;s<a[i].length;s+=1)if(void 0!==a[i][s]&&a[i][s]!==e.charCodeAt(s)){o=!1;break}if(!0===o){c=l;break}}return c===n&&t!==n&&(c=t),c},s=function e(t){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.width}),s.push({key:"Height",value:t.height}),t.colorSpace===v.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===v.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)&&t.transparency.length>0){for(var a="",o=0,l=t.transparency.length;o<l;o++)a+=t.transparency[o]+" "+t.transparency[o]+" ";s.push({key:"Mask",value:"["+a+"]"})}void 0!==t.sMask&&s.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u,h=null!==(u=t.sMaskBitsPerComponent)&&void 0!==u?u:t.bitsPerComponent,d={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:h,data:t.sMask};"filter"in t&&(d.decodeParameters="/Predictor ".concat(t.predictor," /Colors 1 /BitsPerComponent ").concat(h," /Columns ").concat(t.width),d.filter=t.filter),e.call(this,d)}if(t.colorSpace===v.INDEXED){var f=this.internal.newObject();r({data:k(new Uint8Array(t.palette)),objectId:f}),n("endobj")}},a=function(){var e=this.internal.collections[t+"images"];for(var n in e)s.call(this,e[n])},o=function(){var e,n=this.internal.collections[t+"images"],r=this.internal.write;for(var i in n)r("/I"+(e=n[i]).index,e.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections[t+"images"];return l.call(this),e},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},h=function(t){return"function"==typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===(0,jO.A)(e)&&1===e.nodeType},f=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return rU(unescape(r).split("base64,").pop());var i=e.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return rU(t.toDataURL(s,1).split("base64,").pop())}},p=function(e){var n=this.internal.collections[t+"images"];if(n)for(var r in n)if(e===n[r].alias)return n[r]},m=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},g=function(e,t,n,r,i,s){var a=m.call(this,n,r,i),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=c.call(this);if(n=a[0],r=a[1],u[i.index]=i,s){s*=Math.PI/180;var h=Math.cos(s),d=Math.sin(s),f=function(e){return e.toFixed(4)},p=[f(h),f(d),f(-1*d),f(h),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,o(e),l(t+r),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},v=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(_(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},w=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},x=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null};e.__addimage__.isArrayBuffer=function(e){return e instanceof ArrayBuffer};var _=e.__addimage__.isArrayBufferView=function(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array},S=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},k=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=_(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,t,r,i,s,a,o,c,u;if("number"==typeof arguments[1]?(t=n,r=arguments[1],i=arguments[2],s=arguments[3],a=arguments[4],o=arguments[5],c=arguments[6],u=arguments[7]):(t=arguments[1],r=arguments[2],i=arguments[3],s=arguments[4],a=arguments[5],o=arguments[6],c=arguments[7],u=arguments[8]),"object"===(0,jO.A)(e=arguments[0])&&!d(e)&&"imageData"in e){var h=e;e=h.imageData,t=h.format||t||n,r=h.x||r||0,i=h.y||i||0,s=h.w||h.width||s,a=h.h||h.height||a,o=h.alias||o,c=h.compression||c,u=h.rotation||h.angle||u}var f=this.internal.getFilters();if(void 0===c&&-1!==f.indexOf("FlateEncode")&&(c="SLOW"),isNaN(r)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var p=T.call(this,e,t,o,c);return g.call(this,r,i,s,a,p,u),this};var T=function(t,r,s,a){var o,l,c;if("string"==typeof t&&i(t)===n){t=unescape(t);var m=E(t,!1);(""!==m||void 0!==(m=e.loadFile(t,!0)))&&(t=m)}if(d(t)&&(t=f(t,r)),r=i(t,r),!h(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(c=s)||0===c.length)&&(s=function(e){return"string"==typeof e||_(e)?y(e):_(e.data)?y(e.data):null}(t)),(o=p.call(this,s))||(t instanceof Uint8Array||"RGBA"===r||(l=t,t=S(t)),o=this["process"+r.toUpperCase()](t,u.call(this),s,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:b.NONE}(a),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},E=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var s;n=null!==(s=x(e))&&void 0!==s?s:e;try{r=rU(n)}catch(i){if(t)throw w(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+i.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(t){var r,s,a="";if(d(t)&&(t=f(t)),"string"==typeof t&&i(t)===n&&(""===(a=E(t,!1))&&(a=e.loadFile(t)||""),t=a),s=i(t),!h(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(t instanceof Uint8Array||(t=S(t)),!(r=this["process"+s.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=s,r}}(NU.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};NU.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,i,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var h=0;h<l.length;h++){n=l[h];var d=this.internal.pdfEscape,f=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+d(g(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+o.objId+" 0 R",i+=" /T ("+d(g(v))+") >>",p.content=i;var b=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(p.objId,"0 R",m.objId,"0 R");break;case"freetext":r="/Rect ["+s(n.bounds.x)+" "+a(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var y=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+d(f(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+y+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var w=this.annotations._nameMap[n.options.name];n.options.pageNumber=w.page,n.options.top=w.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+d(f(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var x=a(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+x+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,i){var s=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:a(e),y:o(t),w:a(e+n),h:o(t+r)},options:i,type:"link"})},e.textWithLink=function(e,t,n,r){var i,s,a=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){s=r.maxWidth;var l=this.splitTextToSize(e,s).length;i=Math.ceil(o*l)}else s=a,i=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=a/2),"right"===r.align&&(t-=a),this.link(t,n-o,s,i,r),a},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(NU.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},a=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return a(e)&&s(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return a(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return a(e)&&s(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return a(e)&&s(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return a(e)&&s(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return a(e)&&s(e)&&4==t[e.charCodeAt(0)].length},h=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,i="",s=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(s++,"number"==typeof(r=r[e.charCodeAt(t)])&&(i+=String.fromCharCode(r),r=n,s=0),t===e.length-1&&(r=n,i+=e.charAt(t-(s-1)),t-=s-1,s=0)):(r=n,i+=e.charAt(t-s),t-=s,s=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var d=e.__arabicParser__.getCorrectForm=function(e,t,n){return a(e)?!1===s(e)?-1:!c(e)||!a(t)&&!a(n)||!a(n)&&o(t)||o(e)&&!a(t)||o(e)&&l(t)||o(e)&&o(t)?0:u(e)&&a(t)&&!o(t)&&a(n)&&c(n)?3:o(e)||!a(n)?1:2:-1},f=function(e){var n=0,r=0,i=0,s="",o="",l="",c=(e=e||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),r=0;r<c[n].length;r+=1)s=c[n][r],o=c[n][r-1],l=c[n][r+1],a(s)?(i=d(s,o,l),u[n]+=-1!==i?String.fromCharCode(t[s.charCodeAt(0)][i]):s):u[n]+=s;u[n]=h(u[n])}return u.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([f(t[r][0]),t[r][1],t[r][2]]):n.push([f(t[r])]);e=n}else e=f(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(NU.API),NU.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(NU.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(e){a=e}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),i=t.font||this.getFont(),s=t.scaleFactor||this.internal.scaleFactor,a=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,u))},[])):e=Array.isArray(e)?e:[e];for(var h=0;h<e.length;h++)a<(l=this.getStringUnitWidth(e[h],{font:i})*n)&&(a=l);return 0!==a&&(o=e.length),{w:a/=s,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/s,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var e;e=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===e.lineNumber?(e.x=(i.x||0)+(i.width||0),e.y=i.y||0):i.y+i.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=i.y+i.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-a,e.y+a,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+a,{align:"center",baseline:"top",maxWidth:e.width-a-a}):this.text(e.text,e.x+a,e.y+a,{align:"left",baseline:"top",maxWidth:e.width-a-a})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,c,u){if(r.call(this),!l)throw new Error("No data for PDF table.");var h,d,f,p,m=[],g=[],v=[],b={},y={},w=[],x=[],_=(u=u||{}).autoSize||!1,S=!1!==u.printHeaders,k=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,T=u.margins||Object.assign({width:this.getPageWidth()},t),E="number"==typeof u.padding?u.padding:3,A=u.headerBackgroundColor||"#c8c8c8",N=u.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=N,this.setFontSize(k),null==c)g=m=Object.keys(l[0]),v=m.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,jO.A)(c[0]))for(m=c.map(function(e){return e.name}),g=c.map(function(e){return e.prompt||e.name||""}),v=c.map(function(e){return e.align||"left"}),h=0;h<c.length;h+=1)y[c[h].name]=.7499990551181103*c[h].width;else Array.isArray(c)&&"string"==typeof c[0]&&(g=m=c,v=m.map(function(){return"left"}));if(_||Array.isArray(c)&&"string"==typeof c[0])for(h=0;h<m.length;h+=1){for(b[p=m[h]]=l.map(function(e){return e[p]}),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(g[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),d=b[p],this.setFont(void 0,"normal"),f=0;f<d.length;f+=1)w.push(this.getTextDimensions(d[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[p]=Math.max.apply(null,w)+E+E,w=[]}if(S){var I={};for(h=0;h<m.length;h+=1)I[m[h]]={},I[m[h]].text=g[h],I[m[h]].align=v[h];var C=o.call(this,I,y);x=m.map(function(t){return new s(e,n,y[t],C,I[t].text,void 0,I[t].align)}),this.setTableHeaderRow(x),this.printHeaderRow(1,!1)}var P=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(h=0;h<l.length;h+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:h,data:l[h]},this);var L=o.call(this,l[h],y);for(f=0;f<m.length;f+=1){var D=l[h][m[f]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:h,col:f,data:D},this),a.call(this,new s(e,n,y[m[f]],L,D,h+2,P[m[f]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var o=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map(function(r){var i=e[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[r]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/i+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){i=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,i),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(NU.API);var gz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},vz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],bz=mz(vz),yz=[100,200,300,400,500,600,700,800,900],wz=mz(yz);function xz(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return gz[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),i=function(e){return"number"==typeof bz[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function _z(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var Sz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kz={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Tz(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Ez(e){return e.trimLeft()}function Az(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Nz(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Iz,Cz,Pz,Lz,Dz,Oz,Rz,Mz,Fz,jz=["times"];function Bz(e,t,n,r,i){var s=4,a=Vz;switch(i){case NU.API.image_compression.FAST:s=1,a=zz;break;case NU.API.image_compression.MEDIUM:s=6,a=qz;break;case NU.API.image_compression.SLOW:s=9,a=Wz}e=function(e,t,n,r){for(var i,s=e.length/t,a=new Uint8Array(e.length+s),o=[Uz,zz,Vz,qz,Wz],l=0;l<s;l+=1){var c=l*t,u=e.subarray(c,c+t);if(r)a.set(r(u,n,i),c+l);else{for(var h=o.length,d=[],f=0;f<h;f+=1)d[f]=o[f](u,n,i);var p=Gz(d.concat());a.set(d[p],c+l)}i=u}return a}(e,t,Math.ceil(n*r/8),a);var o=_R(e,{level:s});return NU.API.__addimage__.arrayBufferToBinaryString(o)}function Uz(e){var t=Array.apply([],e);return t.unshift(0),t}function zz(e,t){var n=e.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=e[i-t]||0;r[i+1]=e[i]-s+256&255}return r}function Vz(e,t,n){var r=e.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var a=n&&n[s]||0;i[s+1]=e[s]-a+256&255}return i}function qz(e,t,n){var r=e.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var a=e[s-t]||0,o=n&&n[s]||0;i[s+1]=e[s]+256-(a+o>>>1)&255}return i}function Wz(e,t,n){var r=e.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var a=Hz(e[s-t]||0,n&&n[s]||0,n&&n[s-t]||0);i[s+1]=e[s]-a+256&255}return i}function Hz(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),s=Math.abs(e+t-n-n);return r<=i&&r<=s?e:i<=s?t:n}function Gz(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))}function Kz(e,t,n){var r=t*n,i=Math.floor(r/8),s=16-(r-8*i+n),a=(1<<n)-1;return Xz(e,i)>>s&a}function Yz(e,t,n,r){var i=n*r,s=Math.floor(i/8),a=16-(i-8*s+r),o=(1<<r)-1,l=(t&o)<<a;!function(e,t,n){if(t+1<e.byteLength)e.setUint16(t,n,!1);else{var r=n>>8&255;e.setUint8(t,r)}}(e,s,Xz(e,s)&~(o<<a)&65535|l)}function Xz(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function $z(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<1+(7&i);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=a,t+=3*a);var c=!0,u=[],h=0,d=null,f=0,p=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];h=e[t++]|e[t++]<<8,d=e[t++],1&m||(d=null),f=m>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++],x=w>>6&1,_=1<<1+(7&w),S=o,k=l,T=!1;w>>7&&(T=!0,S=t,k=_,t+=3*_);var E=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}u.push({x:g,y:v,width:b,height:y,has_local_palette:T,palette_offset:S,palette_size:k,data_offset:E,data_length:t-E,transparent_index:d,interlaced:!!x,delay:h,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var i=this.frameInfo(t),s=i.width*i.height,a=new Uint8Array(s);Jz(e,i.data_offset,a,s);var o=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,h=c,d=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=d,m=4*u;!0===i.interlaced&&(m+=4*n*7);for(var g=8,v=0,b=a.length;v<b;++v){var y=a[v];if(0===h&&(h=c,(p+=m)>=f&&(m=4*u+4*n*(g-1),p=d+(c+u)*(g<<1),g>>=1)),y===l)p+=4;else{var w=e[o+3*y],x=e[o+3*y+1],_=e[o+3*y+2];r[p++]=_,r[p++]=x,r[p++]=w,r[p++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,r){var i=this.frameInfo(t),s=i.width*i.height,a=new Uint8Array(s);Jz(e,i.data_offset,a,s);var o=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,u=n-c,h=c,d=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=d,m=4*u;!0===i.interlaced&&(m+=4*n*7);for(var g=8,v=0,b=a.length;v<b;++v){var y=a[v];if(0===h&&(h=c,(p+=m)>=f&&(m=4*u+4*n*(g-1),p=d+(c+u)*(g<<1),g>>=1)),y===l)p+=4;else{var w=e[o+3*y],x=e[o+3*y+1],_=e[o+3*y+2];r[p++]=w,r[p++]=x,r[p++]=_,r[p++]=255}--h}}}function Jz(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,o=a+1,l=i+1,c=(1<<l)-1,u=0,h=0,d=0,f=e[t++],p=new Int32Array(4096),m=null;;){for(;u<16&&0!==f;)h|=e[t++]<<u,u+=8,1===f?f=e[t++]:--f;if(u<l)break;var g=h&c;if(h>>=l,u-=l,g!==s){if(g===a)break;for(var v=g<o?g:m,b=0,y=v;y>s;)y=p[y]>>8,++b;var w=y;if(d+b+(v!==g?1:0)>r)return void JB.log("Warning, gif stream longer than expected.");n[d++]=w;var x=d+=b;for(v!==g&&(n[d++]=w),y=v;b--;)y=p[y],n[--x]=255&y,y>>=8;null!==m&&o<4096&&(p[o++]=m<<8|w,o>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else o=a+1,c=(1<<(l=i+1))-1,m=null}return d!==r&&JB.log("Warning, gif stream shorter than expected."),n}function Qz(e){var t,n,r,i,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),f=new Array(64),p=new Array(64),m=[],g=0,v=7,b=new Array(64),y=new Array(64),w=new Array(64),x=new Array(256),_=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],P=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(e,t){for(var n=0,r=0,i=new Array,s=1;s<=16;s++){for(var a=1;a<=e[s];a++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=s,r++,n++;n*=2}return i}function D(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(O(255),O(0)):O(g),v=7,g=0)}function O(e){m.push(e)}function R(e){O(e>>8&255),O(255&e)}function M(e,t,n,r,i){for(var s,a=i[0],o=i[240],l=function(e,t){var n,r,i,s,a,o,l,c,u,h,d=0;for(u=0;u<8;++u){n=e[d],r=e[d+1],i=e[d+2],s=e[d+3],a=e[d+4],o=e[d+5],l=e[d+6];var p=n+(c=e[d+7]),m=n-c,g=r+l,v=r-l,b=i+o,y=i-o,w=s+a,x=s-a,_=p+w,S=p-w,k=g+b,T=g-b;e[d]=_+k,e[d+4]=_-k;var E=.707106781*(T+S);e[d+2]=S+E,e[d+6]=S-E;var A=.382683433*((_=x+y)-(T=v+m)),N=.5411961*_+A,I=1.306562965*T+A,C=.707106781*(k=y+v),P=m+C,L=m-C;e[d+5]=L+N,e[d+3]=L-N,e[d+1]=P+I,e[d+7]=P-I,d+=8}for(d=0,u=0;u<8;++u){n=e[d],r=e[d+8],i=e[d+16],s=e[d+24],a=e[d+32],o=e[d+40],l=e[d+48];var D=n+(c=e[d+56]),O=n-c,R=r+l,M=r-l,F=i+o,j=i-o,B=s+a,U=s-a,z=D+B,V=D-B,q=R+F,W=R-F;e[d]=z+q,e[d+32]=z-q;var H=.707106781*(W+V);e[d+16]=V+H,e[d+48]=V-H;var G=.382683433*((z=U+j)-(W=M+O)),K=.5411961*z+G,Y=1.306562965*W+G,X=.707106781*(q=j+M),$=O+X,J=O-X;e[d+40]=J+K,e[d+24]=J-K,e[d+8]=$+Y,e[d+56]=$-Y,d++}for(u=0;u<64;++u)h=e[u]*t[u],f[u]=h>0?h+.5|0:h-.5|0;return f}(e,t),c=0;c<64;++c)p[S[c]]=l[c];var u=p[0]-n;n=p[0],0==u?D(r[0]):(D(r[d[s=32767+u]]),D(h[s]));for(var m=63;m>0&&0==p[m];)m--;if(0==m)return D(a),n;for(var g,v=1;v<=m;){for(var b=v;0==p[v]&&v<=m;)++v;var y=v-b;if(y>=16){g=y>>4;for(var w=1;w<=g;++w)D(o);y&=15}s=32767+p[v],D(i[(y<<4)+d[s]]),D(h[s]),v++}return 63!=m&&D(a),n}function F(e){e=Math.min(Math.max(e,1),100),s!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[S[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var h=a((i[s]*e+50)/100);h=Math.min(Math.max(h,1),255),l[S[s]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,p=0;p<8;p++)for(var m=0;m<8;m++)c[f]=1/(o[S[f]]*d[p]*d[m]*8),u[f]=1/(l[S[f]]*d[p]*d[m]*8),f++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e)}this.encode=function(e,s){s&&F(s),m=new Array,g=0,v=7,R(65496),R(65504),R(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),R(1),R(1),O(0),O(0),function(){R(65499),R(132),O(0);for(var e=0;e<64;e++)O(o[e]);O(1);for(var t=0;t<64;t++)O(l[t])}(),function(e,t){R(65472),R(17),O(8),R(t),R(e),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(e.width,e.height),function(){R(65476),R(418),O(0);for(var e=0;e<16;e++)O(k[e+1]);for(var t=0;t<=11;t++)O(T[t]);O(16);for(var n=0;n<16;n++)O(E[n+1]);for(var r=0;r<=161;r++)O(A[r]);O(1);for(var i=0;i<16;i++)O(N[i+1]);for(var s=0;s<=11;s++)O(I[s]);O(17);for(var a=0;a<16;a++)O(C[a+1]);for(var o=0;o<=161;o++)O(P[o])}(),R(65498),R(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var a=0,h=0,d=0;g=0,v=7,this.encode.displayName="_encode_";for(var f,p,x,S,L,j,B,U,z,V=e.data,q=e.width,W=e.height,H=4*q,G=0;G<W;){for(f=0;f<H;){for(L=H*G+f,B=-1,U=0,z=0;z<64;z++)j=L+(U=z>>3)*H+(B=4*(7&z)),G+U>=W&&(j-=H*(G+1+U-W)),f+B>=H&&(j-=f+B-H+4),p=V[j++],x=V[j++],S=V[j++],b[z]=(_[p]+_[x+256|0]+_[S+512|0]>>16)-128,y[z]=(_[p+768|0]+_[x+1024|0]+_[S+1280|0]>>16)-128,w[z]=(_[p+1280|0]+_[x+1536|0]+_[S+1792|0]>>16)-128;a=M(b,c,a,t,r),h=M(y,u,h,n,i),d=M(w,u,d,n,i),f+=32}G+=8}if(v>=0){var K=[];K[1]=v+1,K[0]=(1<<v+1)-1,D(K)}return R(65497),new Uint8Array(m)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)x[t]=e(t)}(),t=L(k,T),n=L(N,I),r=L(E,A),i=L(C,P),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)d[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)d[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)_[e]=19595*e,_[e+256|0]=38470*e,_[e+512|0]=7471*e+32768,_[e+768|0]=-11059*e,_[e+1024|0]=-21709*e,_[e+1280|0]=32768*e+8421375,_[e+1536|0]=-27439*e,_[e+1792|0]=-5329*e}(),F(e)}function Zz(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function eV(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,i){for(var s=0;s<i;s++)e[t+s]=n[r+s]}function i(e,t,n,r){for(var i=0;i<r;i++)e[t+i]=n}function s(e){return new Int32Array(e)}function a(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,i){for(var s=i[r],a=0;a<s&&(n.push(i.length>r+1?[]:new t),!(i.length<r+1));a++)e(n[a],r+1,i)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,i,s){t(!(i%r));do{e[n+(i-=r)]=s}while(0<i)}function u(e,n,r,i,a){if(t(2328>=a),512>=a)var o=s(512);else if(null==(o=s(a)))return 0;return function(e,n,r,i,a,o){var u,d,f=n,p=1<<r,m=s(16),g=s(16);for(t(0!=a),t(null!=i),t(null!=e),t(0<r),d=0;d<a;++d){if(15<i[d])return 0;++m[i[d]]}if(m[0]==a)return 0;for(g[1]=0,u=1;15>u;++u){if(m[u]>1<<u)return 0;g[u+1]=g[u]+m[u]}for(d=0;d<a;++d)u=i[d],0<i[d]&&(o[g[u]++]=d);if(1==g[15])return(i=new h).g=0,i.value=o[0],c(e,f,1,p,i),p;var v,b=-1,y=p-1,w=0,x=1,_=1,S=1<<r;for(d=0,u=1,a=2;u<=r;++u,a<<=1){if(x+=_<<=1,0>(_-=m[u]))return 0;for(;0<m[u];--m[u])(i=new h).g=u,i.value=o[d++],c(e,f+w,a,S,i),w=l(w,u)}for(u=r+1,a=2;15>=u;++u,a<<=1){if(x+=_<<=1,0>(_-=m[u]))return 0;for(;0<m[u];--m[u]){if(i=new h,(w&y)!=b){for(f+=S,v=1<<(b=u)-r;15>b&&!(0>=(v-=m[b]));)++b,v<<=1;p+=S=1<<(v=b-r),e[n+(b=w&y)].g=v+r,e[n+b].value=f-n-b}i.g=u-r,i.value=o[d++],c(e,f+(w>>r),a,S,i),w=l(w,u)}}return x!=2*g[15]-1?0:p}(e,n,r,i,a,o)}function h(){this.value=this.g=0}function d(){this.value=this.g=0}function f(){this.G=a(5,h),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(jn,d)}function p(e,n,r,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+i,e.Zc=4<=i?r+i-4+1:r,E(e)}function m(e,t){for(var n=0;0<t--;)n|=N(e,128)<<t;return n}function g(e,t){var n=m(e,t);return A(e)?-n:n}function v(e,n,r,i){var s,a=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),s=0;s<i;++s)a+=n[r+s]<<8*s;e.Ra=a,e.bb=i,e.oa=n,e.pa=r}function b(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<zn-8>>>0,++e.bb,e.u-=8;S(e)&&(e.h=1,e.u=0)}function y(e,n){if(t(0<=n),!e.h&&n<=Un){var r=_(e)&Bn[n];return e.u+=n,b(e),r}return e.h=1,e.u=0}function w(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function x(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function _(e){return e.Ra>>>(e.u&zn-1)>>>0}function S(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>zn}function k(e,t){e.u=t,e.h=S(e)}function T(e){e.u>=Vn&&(t(e.u>=Vn),b(e))}function E(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function A(e){return m(e,1)}function N(e,t){var n=e.Ca;0>e.b&&E(e);var r=e.b,i=n*t>>>8,s=(e.I>>>r>i)+0;for(s?(n-=i,e.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+qn[r],e.b-=r,e.Ca=(n<<r)-1,s}function I(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function C(e,t){return e[t+0]|e[t+1]<<8}function P(e,t){return C(e,t)|e[t+2]<<16}function L(e,t){return C(e,t)|C(e,t+2)<<16}function D(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=s(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function O(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function R(){this.X=[],this.Xa=this.Mb=0}function M(e,n,r,i){t(null!=r),t(null!=i);var s=r[0],a=i[0];return 0==s&&(s=(e*a+n/2)/n),0==a&&(a=(n*s+e/2)/e),0>=s||0>=a?0:(r[0]=s,i[0]=a,1)}function F(e,t){return e+(1<<t)-1>>>t}function j(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function B(t,n){e[n]=function(n,r,i,s,a,o,l){var c;for(c=0;c<a;++c){var u=e[t](o[l+c-1],i,s+c);o[l+c]=j(n[r+c],u)}}}function U(){this.ud=this.hd=this.jd=0}function z(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function V(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function q(e,t){return V(e+(e-t+.5>>1))}function W(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function H(e,t,n,r,i,s,a){for(r=s[a-1],n=0;n<i;++n)s[a+n]=r=j(e[t+n],r)}function G(e,t,n,r,i){var s;for(s=0;s<n;++s){var a=e[t+s],o=a>>8&255,l=16711935&(l=(l=16711935&a)+((o<<16)+o));r[i+s]=(4278255360&a)+l>>>0}}function K(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function Y(e,t,n,r,i,s){var a;for(a=0;a<r;++a){var o=t[n+a],l=o>>>8,c=o,u=255&(u=(u=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),i[s+a]=(4278255360&o)+(u<<16)+c}}function X(t,n,r,i,s){e[n]=function(e,t,n,r,a,o,l,c,u){for(r=l;r<c;++r)for(l=0;l<u;++l)a[o++]=s(n[i(e[t++])])},e[t]=function(t,n,a,o,l,c,u){var h=8>>t.b,d=t.Ea,f=t.K[0],p=t.w;if(8>h)for(t=(1<<t.b)-1,p=(1<<h)-1;n<a;++n){var m,g=0;for(m=0;m<d;++m)m&t||(g=i(o[l++])),c[u++]=s(f[g&p]),g>>=h}else e["VP8LMapColor"+r](o,l,f,p,c,u,n,a,d)}}function $(e,t,n,r,i){for(n=t+n;t<n;){var s=e[t++];r[i++]=s>>16&255,r[i++]=s>>8&255,r[i++]=255&s}}function J(e,t,n,r,i){for(n=t+n;t<n;){var s=e[t++];r[i++]=s>>16&255,r[i++]=s>>8&255,r[i++]=255&s,r[i++]=s>>24&255}}function Q(e,t,n,r,i){for(n=t+n;t<n;){var s=(a=e[t++])>>16&240|a>>12&15,a=240&a|a>>28&15;r[i++]=s,r[i++]=a}}function Z(e,t,n,r,i){for(n=t+n;t<n;){var s=(a=e[t++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[i++]=s,r[i++]=a}}function ee(e,t,n,r,i){for(n=t+n;t<n;){var s=e[t++];r[i++]=255&s,r[i++]=s>>8&255,r[i++]=s>>16&255}}function te(e,t,n,i,s,a){if(0==a)for(n=t+n;t<n;)I(i,((a=e[t++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),s+=32;else r(i,s,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Vr||e==qr||e==Wr||e==Hr}function ie(){this.eb=[],this.size=this.A=this.fb=0}function se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ae(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new se,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,i=t.ba.f.RGBA,s=i.eb,a=i.fb+e.ka*i.A,o=gi[t.ba.S],l=e.y,c=e.O,u=e.f,h=e.N,d=e.ea,f=e.W,p=t.cc,m=t.dc,g=t.Mc,v=t.Nc,b=e.ka,y=e.ka+e.T,w=e.U,x=w+1>>1;for(0==b?o(l,c,null,null,u,h,d,f,u,h,d,f,s,a,null,null,w):(o(t.ec,t.fc,l,c,p,m,g,v,u,h,d,f,s,a-i.A,s,a,w),++n);b+2<y;b+=2)p=u,m=h,g=d,v=f,h+=e.Rc,f+=e.Rc,a+=2*i.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,m,g,v,u,h,d,f,s,a-i.A,s,a,w);return c+=e.fa,e.j+y<e.o?(r(t.ec,t.fc,l,c,w),r(t.cc,t.dc,u,h,x),r(t.Mc,t.Nc,d,f,x),n--):1&y||o(l,c,null,null,u,h,d,f,u,h,d,f,s,a+i.A,null,null,w),n}function he(e,n,r){var i=e.F,s=[e.J];if(null!=i){var a=e.U,o=n.ba.S,l=o==Br||o==Wr;n=n.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,s[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var h=n.eb;u=n.fb+u*n.A,e=kr(i,s[0],e.width,a,c,h,u+(l?0:3),n.A),t(r==c),e&&re(o)&&_r(h,u,l,a,c,n.A)}return 0}function de(e){var t=e.ma,n=t.ba.S,r=11>n,i=n==Mr||n==jr||n==Br||n==Ur||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Rn(t.Oa,e,i?11:12))return 0;if(i&&re(n)&&bn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=s(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,bn()}}else alert("todo:EmitYUV");i&&(t.Jb=he,r&&gn())}if(r&&!Ci){for(e=0;256>e;++e)Pi[e]=89858*(e-128)+Ti>>ki,Oi[e]=-22014*(e-128)+Ti,Di[e]=-45773*(e-128),Li[e]=113618*(e-128)+Ti>>ki;for(e=Ei;e<Ai;++e)t=76283*(e-16)+Ti>>ki,Ri[e-Ei]=He(t,255),Mi[e-Ei]=He(t+8>>4,15);Ci=1}return 1}function fe(e){var n=e.ma,r=e.U,i=e.T;return t(!(1&e.ka)),0>=r||0>=i?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function pe(e){e.ma.memory=null}function me(e,t,n,r){return 47!=y(e,8)?0:(t[0]=y(e,14)+1,n[0]=y(e,14)+1,r[0]=y(e,1),0!=y(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+y(t,n)+1}function ve(e,t){return 120<t?t-120:1<=(n=((n=Jr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function be(e,t,n){var r=_(n),i=e[t+=255&r].g-8;return 0<i&&(k(n,n.u+8),r=_(n),t+=e[t].value,t+=r&(1<<i)-1),k(n,n.u+e[t].g),e[t].value}function ye(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function we(e,n,r){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(r>>i)+(n>>i)])<e.Wb),e.Ya[n]}function xe(e,n,i,s){var a=e.ab,o=e.c*n,l=e.C;n=l+n;var c=i,u=s;for(s=e.Ta,i=e.Ua;0<a--;){var h=e.gc[a],d=l,f=n,p=c,m=u,g=(u=s,c=i,h.Ea);switch(t(d<f),t(f<=h.nc),h.hc){case 2:Gn(p,m,(f-d)*g,u,c);break;case 0:var v=d,b=f,y=u,w=c,x=(E=h).Ea;0==v&&(Wn(p,m,null,null,1,y,w),H(p,m+1,0,0,x-1,y,w+1),m+=x,w+=x,++v);for(var _=1<<E.b,S=_-1,k=F(x,E.b),T=E.K,E=E.w+(v>>E.b)*k;v<b;){var A=T,N=E,I=1;for(Hn(p,m,y,w-x,1,y,w);I<x;){var C=(I&~S)+_;C>x&&(C=x),(0,Jn[A[N++]>>8&15])(p,m+ +I,y,w+I-x,C-I,y,w+I),I=C}m+=x,w+=x,++v&S||(E+=k)}f!=h.nc&&r(u,c-g,u,c+(f-d-1)*g,g);break;case 1:for(g=p,b=m,x=(p=h.Ea)-(w=p&~(y=(m=1<<h.b)-1)),v=F(p,h.b),_=h.K,h=h.w+(d>>h.b)*v;d<f;){for(S=_,k=h,T=new U,E=b+w,A=b+p;b<E;)K(S[k++],T),Qn(T,g,b,m,u,c),b+=m,c+=m;b<A&&(K(S[k++],T),Qn(T,g,b,x,u,c),b+=x,c+=x),++d&y||(h+=v)}break;case 3:if(p==u&&m==c&&0<h.b){for(b=u,p=g=c+(f-d)*g-(w=(f-d)*F(h.Ea,h.b)),m=u,y=c,v=[],w=(x=w)-1;0<=w;--w)v[w]=m[y+w];for(w=x-1;0<=w;--w)b[p+w]=v[w];Kn(h,d,f,u,g,u,c)}else Kn(h,d,f,p,m,u,c)}c=s,u=i}u!=i&&r(s,i,c,u,o)}function _e(e,n){var r=e.V,i=e.Ba+e.c*e.C,s=n-e.C;if(t(n<=e.l.o),t(16>=s),0<s){var a=e.l,o=e.Ta,l=e.Ua,c=a.width;if(xe(e,s,r,i),s=l=[l],t((r=e.C)<(i=n)),t(a.v<a.va),i>a.o&&(i=a.o),r<a.j){var u=a.j-r;r=a.j,s[0]+=u*c}if(r>=i?r=0:(s[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=i-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var h=r.f.RGBA,d=(i=r.S,s=a.U,a=a.T,u=h.eb,h.A),f=a;for(h=h.fb+e.Ma*h.A;0<f--;){var p=o,m=l,g=s,v=u,b=h;switch(i){case Rr:Zn(p,m,g,v,b);break;case Mr:er(p,m,g,v,b);break;case Vr:er(p,m,g,v,b),_r(v,b,0,g,1,0);break;case Fr:rr(p,m,g,v,b);break;case jr:te(p,m,g,v,b,1);break;case qr:te(p,m,g,v,b,1),_r(v,b,0,g,1,0);break;case Br:te(p,m,g,v,b,0);break;case Wr:te(p,m,g,v,b,0),_r(v,b,1,g,1,0);break;case Ur:tr(p,m,g,v,b);break;case Hr:tr(p,m,g,v,b),Sr(v,b,g,1,0);break;case zr:nr(p,m,g,v,b);break;default:t(0)}l+=c,h+=d}e.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Se(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function ke(e,n,r,i,s,a){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=mi[e.Z]);n<r;++n)mi[e.Z](o,l,i,s,i,s,a),o=i,l=s,s+=a;e.qd=o,e.rd=l}}function Te(e,n){var r=e.l.ma,i=0==r.Z||1==r.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var s=e.l.width,a=r.ca,o=r.tb+s*i,l=e.V,c=e.Ba+e.c*i,u=e.gc;t(1==e.ab),t(3==u[0].hc),Xn(u[0],i,n,l,c,a,o),ke(r,i,n,a,o,s)}e.C=e.Ma=n}function Ee(e,n,r,i,s,a,o){var l=e.$/i,c=e.$%i,u=e.m,h=e.s,d=r+e.$,f=d;s=r+i*s;var p=r+i*a,m=280+h.ua,g=e.Pb?l:16777216,v=0<h.ua?h.Wa:null,b=h.wc,y=d<p?we(h,c,l):null;t(e.C<a),t(p<=s);var w=!1;e:for(;;){for(;w||d<p;){var x=0;if(l>=g){var E=d-r;t((g=e).Pb),g.wd=g.m,g.xd=E,0<g.s.ua&&O(g.s.Wa,g.s.vb),g=l+Zr}if(c&b||(y=we(h,c,l)),t(null!=y),y.Qb&&(n[d]=y.qb,w=!0),!w)if(T(u),y.jc){x=u,E=n;var A=d,N=y.pd[_(x)&jn-1];t(y.jc),256>N.g?(k(x,x.u+N.g),E[A]=N.value,x=0):(k(x,x.u+N.g-256),t(256<=N.value),x=N.value),0==x&&(w=!0)}else x=be(y.G[0],y.H[0],u);if(u.h)break;if(w||256>x){if(!w)if(y.nd)n[d]=(y.qb|x<<8)>>>0;else{if(T(u),w=be(y.G[1],y.H[1],u),T(u),E=be(y.G[2],y.H[2],u),A=be(y.G[3],y.H[3],u),u.h)break;n[d]=(A<<24|w<<16|x<<8|E)>>>0}if(w=!1,++d,++c>=i&&(c=0,++l,null!=o&&l<=a&&!(l%16)&&o(e,l),null!=v))for(;f<d;)x=n[f++],v.X[(506832829*x&4294967295)>>>v.Mb]=x}else if(280>x){if(x=ge(x-256,u),E=be(y.G[4],y.H[4],u),T(u),E=ve(i,E=ge(E,u)),u.h)break;if(d-r<E||s-d<x)break e;for(A=0;A<x;++A)n[d+A]=n[d+A-E];for(d+=x,c+=x;c>=i;)c-=i,++l,null!=o&&l<=a&&!(l%16)&&o(e,l);if(t(d<=s),c&b&&(y=we(h,c,l)),null!=v)for(;f<d;)x=n[f++],v.X[(506832829*x&4294967295)>>>v.Mb]=x}else{if(!(x<m))break e;for(w=x-280,t(null!=v);f<d;)x=n[f++],v.X[(506832829*x&4294967295)>>>v.Mb]=x;x=d,t(!(w>>>(E=v).Xa)),n[x]=E.X[w],w=!0}w||t(u.h==S(u))}if(e.Pb&&u.h&&d<s)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&O(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=o&&o(e,l>a?a:l),e.a=0,e.$=d-r}return 1}return e.a=3,0}function Ae(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Ne(){var t=new an;return null==t?null:(t.a=0,t.xb=pi,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Gn=G,Qn=Y,Zn=$,er=J,tr=Q,nr=Z,rr=ee,e.VP8LMapColor32b=Yn,e.VP8LMapColor8b=$n,t)}function Ie(e,n,r,o,l){var c=1,d=[e],p=[n],m=o.m,g=o.s,v=null,b=0;e:for(;;){if(r)for(;c&&y(m,1);){var w=d,x=p,S=o,E=1,A=S.m,N=S.gc[S.ab],I=y(A,2);if(S.Oc&1<<I)c=0;else{switch(S.Oc|=1<<I,N.hc=I,N.Ea=w[0],N.nc=x[0],N.K=[null],++S.ab,t(4>=S.ab),I){case 0:case 1:N.b=y(A,3)+2,E=Ie(F(N.Ea,N.b),F(N.nc,N.b),0,S,N.K),N.K=N.K[0];break;case 3:var C,P=y(A,8)+1,L=16<P?0:4<P?1:2<P?2:3;if(w[0]=F(N.Ea,L),N.b=L,C=E=Ie(P,1,0,S,N.K)){var O,R=P,M=N,B=1<<(8>>M.b),U=s(B);if(null==U)C=0;else{var z=M.K[0],V=M.w;for(U[0]=M.K[0][0],O=1;O<1*R;++O)U[O]=j(z[V+O],U[O-1]);for(;O<4*B;++O)U[O]=0;M.K[0]=null,M.K[0]=U,C=1}}E=C;break;case 2:break;default:t(0)}c=E}}if(d=d[0],p=p[0],c&&y(m,1)&&!(c=1<=(b=y(m,4))&&11>=b)){o.a=3;break e}var q;if(q=c)t:{var W,H,G,K=o,Y=d,X=p,$=b,J=r,Q=K.m,Z=K.s,ee=[null],te=1,ne=0,re=Qr[$];n:for(;;){if(J&&y(Q,1)){var ie=y(Q,3)+2,se=F(Y,ie),ae=F(X,ie),oe=se*ae;if(!Ie(se,ae,0,K,ee))break n;for(ee=ee[0],Z.xc=ie,W=0;W<oe;++W){var le=ee[W]>>8&65535;ee[W]=le,le>=te&&(te=le+1)}}if(Q.h)break n;for(H=0;5>H;++H){var ce=Yr[H];!H&&0<$&&(ce+=1<<$),ne<ce&&(ne=ce)}var ue=a(te*re,h),he=te,de=a(he,f);if(null==de)var fe=null;else t(65536>=he),fe=de;var pe=s(ne);if(null==fe||null==pe||null==ue){K.a=1;break n}var me=ue;for(W=G=0;W<te;++W){var ge=fe[W],ve=ge.G,be=ge.H,we=0,xe=1,_e=0;for(H=0;5>H;++H){ce=Yr[H],ve[H]=me,be[H]=G,!H&&0<$&&(ce+=1<<$);r:{var Se,ke=ce,Te=K,Ne=pe,Ce=me,Pe=G,Le=0,De=Te.m,Oe=y(De,1);if(i(Ne,0,0,ke),Oe){var Re=y(De,1)+1,Me=y(De,1),Fe=y(De,0==Me?1:8);Ne[Fe]=1,2==Re&&(Ne[Fe=y(De,8)]=1);var je=1}else{var Be=s(19),Ue=y(De,4)+4;if(19<Ue){Te.a=3;var ze=0;break r}for(Se=0;Se<Ue;++Se)Be[$r[Se]]=y(De,3);var Ve=void 0,qe=void 0,We=Te,He=Be,Ge=ke,Ke=Ne,Ye=0,Xe=We.m,$e=8,Je=a(128,h);i:for(;u(Je,0,7,He,19);){if(y(Xe,1)){var Qe=2+2*y(Xe,3);if((Ve=2+y(Xe,Qe))>Ge)break i}else Ve=Ge;for(qe=0;qe<Ge&&Ve--;){T(Xe);var Ze=Je[0+(127&_(Xe))];k(Xe,Xe.u+Ze.g);var et=Ze.value;if(16>et)Ke[qe++]=et,0!=et&&($e=et);else{var tt=16==et,nt=et-16,rt=Kr[nt],it=y(Xe,Gr[nt])+rt;if(qe+it>Ge)break i;for(var st=tt?$e:0;0<it--;)Ke[qe++]=st}}Ye=1;break i}Ye||(We.a=3),je=Ye}(je=je&&!De.h)&&(Le=u(Ce,Pe,8,Ne,ke)),je&&0!=Le?ze=Le:(Te.a=3,ze=0)}if(0==ze)break n;if(xe&&1==Xr[H]&&(xe=0==me[G].g),we+=me[G].g,G+=ze,3>=H){var at,ot=pe[0];for(at=1;at<ce;++at)pe[at]>ot&&(ot=pe[at]);_e+=ot}}if(ge.nd=xe,ge.Qb=0,xe&&(ge.qb=(ve[3][be[3]+0].value<<24|ve[1][be[1]+0].value<<16|ve[2][be[2]+0].value)>>>0,0==we&&256>ve[0][be[0]+0].value&&(ge.Qb=1,ge.qb+=ve[0][be[0]+0].value<<8)),ge.jc=!ge.Qb&&6>_e,ge.jc){var lt,ct=ge;for(lt=0;lt<jn;++lt){var ut=lt,ht=ct.pd[ut],dt=ct.G[0][ct.H[0]+ut];256<=dt.value?(ht.g=dt.g+256,ht.value=dt.value):(ht.g=0,ht.value=0,ut>>=ye(dt,8,ht),ut>>=ye(ct.G[1][ct.H[1]+ut],16,ht),ut>>=ye(ct.G[2][ct.H[2]+ut],0,ht),ye(ct.G[3][ct.H[3]+ut],24,ht))}}}Z.vc=ee,Z.Wb=te,Z.Ya=fe,Z.yc=ue,q=1;break t}q=0}if(!(c=q)){o.a=3;break e}if(0<b){if(g.ua=1<<b,!D(g.Wa,b)){o.a=1,c=0;break e}}else g.ua=0;var ft=o,pt=d,mt=p,gt=ft.s,vt=gt.xc;if(ft.c=pt,ft.i=mt,gt.md=F(pt,vt),gt.wc=0==vt?-1:(1<<vt)-1,r){o.xb=fi;break e}if(null==(v=s(d*p))){o.a=1,c=0;break e}c=(c=Ee(o,v,0,d,p,p,null))&&!m.h;break e}return c?(null!=l?l[0]=v:(t(null==v),t(r)),o.$=0,r||Ae(g)):Ae(g),c}function Ce(e,n){var r=e.c*e.i,i=r+n+16*n;return t(e.c<=n),e.V=s(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Pe(e,n){var r=e.C,i=n-r,s=e.V,a=e.Ba+e.c*r;for(t(n<=e.l.o);0<i;){var o=16<i?16:i,l=e.l.ma,c=e.l.width,u=c*o,h=l.ca,d=l.tb+c*r,f=e.Ta,p=e.Ua;xe(e,o,s,a),Tr(f,p,h,d,u),ke(l,r,r+o,h,d,c),i-=o,s+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function Le(){this.ub=this.yd=this.td=this.Rb=0}function De(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Oe(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Re(){this.Yb=function(){var e=[];return function e(t,n,r){for(var i=r[n],s=0;s<i&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));s++)e(t[s],n+1,r)}(e,0,[3,11]),e}()}function Me(){this.jb=s(3),this.Wc=o([4,8],Re),this.Xc=o([4,17],Re)}function Fe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function je(){this.ld=this.La=this.dd=this.tc=0}function Be(){this.Na=this.la=0}function Ue(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ze(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ve(){this.uc=this.M=this.Nb=0,this.wa=Array(new je),this.Y=0,this.ya=Array(new ze),this.aa=0,this.l=new Ge}function qe(){this.y=s(16),this.f=s(8),this.ea=s(8)}function We(){this.cb=this.a=0,this.sc="",this.m=new w,this.Od=new Le,this.Kc=new De,this.ed=new Fe,this.Qa=new Oe,this.Ic=this.$c=this.Aa=0,this.D=new Ve,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,w),this.ia=0,this.pb=a(4,Ue),this.Pa=new Me,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new qe),this.Hd=0,this.rb=Array(new Be),this.sb=0,this.wa=Array(new je),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ze),this.L=this.aa=0,this.gd=o([4,2],je),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function He(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var e=new We;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ni||(ni=Je)),e}function Ye(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function $e(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Ye(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,s=n.w,a=n.ha;if(4>a)return Ye(e,7,"Truncated header.");var o=r[s+0]|r[s+1]<<8|r[s+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return Ye(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ye(e,4,"Frame not displayable.");s+=3,a-=3;var c=e.Kc;if(l.Rb){if(7>a)return Ye(e,7,"cannot parse picture header");if(!Xe(r,s,a))return Ye(e,3,"Bad code word");c.c=16383&(r[s+4]<<8|r[s+3]),c.Td=r[s+4]>>6,c.i=16383&(r[s+6]<<8|r[s+5]),c.Ud=r[s+6]>>6,s+=7,a-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,i(o.Zb,0,0,o.Zb.length),i(o.Lb,0,0,o.Lb)}if(l.ub>a)return Ye(e,7,"bad partition length");p(o=e.m,r,s,l.ub),s+=l.ub,a-=l.ub,l.Rb&&(c.Ld=A(o),c.Kd=A(o)),c=e.Qa;var u,h=e.Pa;if(t(null!=o),t(null!=c),c.Cb=A(o),c.Cb){if(c.Bb=A(o),A(o)){for(c.Fb=A(o),u=0;4>u;++u)c.Zb[u]=A(o)?g(o,7):0;for(u=0;4>u;++u)c.Lb[u]=A(o)?g(o,6):0}if(c.Bb)for(u=0;3>u;++u)h.jb[u]=A(o)?m(o,8):255}else c.Bb=0;if(o.Ka)return Ye(e,3,"cannot parse segment header");if((c=e.ed).zd=A(o),c.Tb=m(o,6),c.wb=m(o,3),c.Pc=A(o),c.Pc&&A(o)){for(h=0;4>h;++h)A(o)&&(c.vd[h]=g(o,6));for(h=0;4>h;++h)A(o)&&(c.od[h]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return Ye(e,3,"cannot parse filter header");var d=a;if(a=u=s,s=u+d,c=d,e.Xb=(1<<m(e.m,2))-1,d<3*(h=e.Xb))r=7;else{for(u+=3*h,c-=3*h,d=0;d<h;++d){var f=r[a+0]|r[a+1]<<8|r[a+2]<<16;f>c&&(f=c),p(e.Jc[+d],r,u,f),u+=f,c-=f,a+=3}p(e.Jc[+h],r,u,c),r=u<s?0:5}if(0!=r)return Ye(e,r,"cannot parse partitions");for(r=m(u=e.m,7),a=A(u)?g(u,4):0,s=A(u)?g(u,4):0,c=A(u)?g(u,4):0,h=A(u)?g(u,4):0,u=A(u)?g(u,4):0,d=e.Qa,f=0;4>f;++f){if(d.Cb){var v=d.Zb[f];d.Fb||(v+=r)}else{if(0<f){e.pb[f]=e.pb[0];continue}v=r}var b=e.pb[f];b.Sc[0]=ei[He(v+a,127)],b.Sc[1]=ti[He(v+0,127)],b.Eb[0]=2*ei[He(v+s,127)],b.Eb[1]=101581*ti[He(v+c,127)]>>16,8>b.Eb[1]&&(b.Eb[1]=8),b.Qc[0]=ei[He(v+h,117)],b.Qc[1]=ti[He(v+u,127)],b.lc=v+u}if(!l.Rb)return Ye(e,4,"Not a key frame.");for(A(o),l=e.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(s=0;3>s;++s)for(c=0;11>c;++c)h=N(o,li[r][a][s][c])?m(o,8):ai[r][a][s][c],l.Wc[r][a].Yb[s][c]=h;for(a=0;17>a;++a)l.Xc[r][a]=l.Wc[r][ci[a]]}return e.kc=A(o),e.kc&&(e.Bd=m(o,8)),e.cb=1}function Je(e,t,n,r,i,s,a){var o=t[i].Yb[n];for(n=0;16>i;++i){if(!N(e,o[n+0]))return i;for(;!N(e,o[n+1]);)if(o=t[++i].Yb[0],n=0,16==i)return 16;var l=t[i+1].Yb;if(N(e,o[n+2])){var c=e,u=0;if(N(c,(d=o)[(h=n)+3]))if(N(c,d[h+6])){for(o=0,h=2*(u=N(c,d[h+8]))+(d=N(c,d[h+9+u])),u=0,d=ri[h];d[o];++o)u+=u+N(c,d[o]);u+=3+(8<<h)}else N(c,d[h+7])?(u=7+2*N(c,165),u+=N(c,145)):u=5+N(c,159);else u=N(c,d[h+4])?3+N(c,d[h+5]):2;o=l[2]}else u=1,o=l[1];l=a+ii[i],0>(c=e).b&&E(c);var h,d=c.b,f=(h=c.Ca>>1)-(c.I>>d)>>31;--c.b,c.Ca+=f,c.Ca|=1,c.I-=(h+1&f)<<d,s[l]=((u^f)-f)*r[(0<i)+0]}return 16}function Qe(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,t,n,r,i){i=e[t+n+32*r]+(i>>3),e[t+n+32*r]=-256&i?0>i?0:255:i}function et(e,t,n,r,i,s){Ze(e,t,0,n,r+i),Ze(e,t,1,n,r+s),Ze(e,t,2,n,r-s),Ze(e,t,3,n,r-i)}function tt(e){return(20091*e>>16)+e}function nt(e,t,n,r){var i,a=0,o=s(16);for(i=0;4>i;++i){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-tt(e[t+12]),h=tt(e[t+4])+(35468*e[t+12]>>16);o[a+0]=l+h,o[a+1]=c+u,o[a+2]=c-u,o[a+3]=l-h,a+=4,t++}for(i=a=0;4>i;++i)l=(e=o[a+0]+4)+o[a+8],c=e-o[a+8],u=(35468*o[a+4]>>16)-tt(o[a+12]),Ze(n,r,0,0,l+(h=tt(o[a+4])+(35468*o[a+12]>>16))),Ze(n,r,1,0,c+u),Ze(n,r,2,0,c-u),Ze(n,r,3,0,l-h),a++,r+=32}function rt(e,t,n,r){var i=e[t+0]+4,s=35468*e[t+4]>>16,a=tt(e[t+4]),o=35468*e[t+1]>>16;et(n,r,0,i+a,e=tt(e[t+1]),o),et(n,r,1,i+s,e,o),et(n,r,2,i-s,e,o),et(n,r,3,i-a,e,o)}function it(e,t,n,r,i){nt(e,t,n,r),i&&nt(e,t+16,n,r+4)}function st(e,t,n,r){sr(e,t+0,n,r,1),sr(e,t+32,n,r+128,1)}function at(e,t,n,r){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)Ze(n,r,t,i,e)}function ot(e,t,n,r){e[t+0]&&lr(e,t+0,n,r),e[t+16]&&lr(e,t+16,n,r+4),e[t+32]&&lr(e,t+32,n,r+128),e[t+48]&&lr(e,t+48,n,r+128+4)}function lt(e,t,n,r){var i,a=s(16);for(i=0;4>i;++i){var o=e[t+0+i]+e[t+12+i],l=e[t+4+i]+e[t+8+i],c=e[t+4+i]-e[t+8+i],u=e[t+0+i]-e[t+12+i];a[0+i]=o+l,a[8+i]=o-l,a[4+i]=u+c,a[12+i]=u-c}for(i=0;4>i;++i)o=(e=a[0+4*i]+3)+a[3+4*i],l=a[1+4*i]+a[2+4*i],c=a[1+4*i]-a[2+4*i],u=e-a[3+4*i],n[r+0]=o+l>>3,n[r+16]=u+c>>3,n[r+32]=o-l>>3,n[r+48]=u-c>>3,r+=64}function ct(e,t,n){var r,i=t-32,s=Dr,a=255-e[i-1];for(r=0;r<n;++r){var o,l=s,c=a+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[i+o]];t+=32}}function ut(e,t){ct(e,t,4)}function ht(e,t){ct(e,t,8)}function dt(e,t){ct(e,t,16)}function ft(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function pt(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function mt(e,t,n){var r;for(r=0;16>r;++r)i(t,n+32*r,e,16)}function gt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];mt(r>>5,e,t)}function vt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];mt(r>>4,e,t)}function bt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];mt(r>>4,e,t)}function yt(e,t){mt(128,e,t)}function wt(e,t,n){return e+2*t+n+2>>2}function xt(e,t){var n,i=t-32;for(i=new Uint8Array([wt(e[i-1],e[i+0],e[i+1]),wt(e[i+0],e[i+1],e[i+2]),wt(e[i+1],e[i+2],e[i+3]),wt(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)r(e,t+32*n,i,0,i.length)}function _t(e,t){var n=e[t-1],r=e[t-1+32],i=e[t-1+64],s=e[t-1+96];I(e,t+0,16843009*wt(e[t-1-32],n,r)),I(e,t+32,16843009*wt(n,r,i)),I(e,t+64,16843009*wt(r,i,s)),I(e,t+96,16843009*wt(i,s,s))}function St(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)i(e,t+32*n,r,4)}function kt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],s=e[t-1-32],a=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=wt(r,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=wt(n,r,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=wt(s,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=wt(a,s,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=wt(o,a,s),e[t+3+32]=e[t+2+0]=wt(l,o,a),e[t+3+0]=wt(c,l,o)}function Tt(e,t){var n=e[t+1-32],r=e[t+2-32],i=e[t+3-32],s=e[t+4-32],a=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=wt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=wt(n,r,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=wt(r,i,s),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=wt(i,s,a),e[t+3+32]=e[t+2+64]=e[t+1+96]=wt(s,a,o),e[t+3+64]=e[t+2+96]=wt(a,o,l),e[t+3+96]=wt(o,l,l)}function Et(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],s=e[t-1-32],a=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=s+a+1>>1,e[t+1+0]=e[t+2+64]=a+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=wt(i,r,n),e[t+0+64]=wt(r,n,s),e[t+0+32]=e[t+1+96]=wt(n,s,a),e[t+1+32]=e[t+2+96]=wt(s,a,o),e[t+2+32]=e[t+3+96]=wt(a,o,l),e[t+3+32]=wt(o,l,c)}function At(e,t){var n=e[t+0-32],r=e[t+1-32],i=e[t+2-32],s=e[t+3-32],a=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+i+1>>1,e[t+2+0]=e[t+1+64]=i+s+1>>1,e[t+3+0]=e[t+2+64]=s+a+1>>1,e[t+0+32]=wt(n,r,i),e[t+1+32]=e[t+0+96]=wt(r,i,s),e[t+2+32]=e[t+1+96]=wt(i,s,a),e[t+3+32]=e[t+2+96]=wt(s,a,o),e[t+3+64]=wt(a,o,l),e[t+3+96]=wt(o,l,c)}function Nt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],s=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+i+1>>1,e[t+2+32]=e[t+0+64]=i+s+1>>1,e[t+1+0]=wt(n,r,i),e[t+3+0]=e[t+1+32]=wt(r,i,s),e[t+3+32]=e[t+1+64]=wt(i,s,s),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=s}function It(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],s=e[t-1+96],a=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+a+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=i+r+1>>1,e[t+0+96]=s+i+1>>1,e[t+3+0]=wt(o,l,c),e[t+2+0]=wt(a,o,l),e[t+1+0]=e[t+3+32]=wt(n,a,o),e[t+1+32]=e[t+3+64]=wt(r,n,a),e[t+1+64]=e[t+3+96]=wt(i,r,n),e[t+1+96]=wt(s,i,r)}function Ct(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Pt(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Lt(e,t,n){var r;for(r=0;8>r;++r)i(t,n+32*r,e,8)}function Dt(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Lt(r>>4,e,t)}function Ot(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Lt(r>>3,e,t)}function Rt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Lt(r>>3,e,t)}function Mt(e,t){Lt(128,e,t)}function Ft(e,t,n){var r=e[t-n],i=e[t+0],s=3*(i-r)+Pr[1020+e[t-2*n]-e[t+n]],a=Lr[112+(s+4>>3)];e[t-n]=Dr[255+r+Lr[112+(s+3>>3)]],e[t+0]=Dr[255+i-a]}function jt(e,t,n,r){var i=e[t+0],s=e[t+n];return Or[255+e[t-2*n]-e[t-n]]>r||Or[255+s-i]>r}function Bt(e,t,n,r){return 4*Or[255+e[t-n]-e[t+0]]+Or[255+e[t-2*n]-e[t+n]]<=r}function Ut(e,t,n,r,i){var s=e[t-3*n],a=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],u=e[t+2*n],h=e[t+3*n];return 4*Or[255+o-l]+Or[255+a-c]>r?0:Or[255+e[t-4*n]-s]<=i&&Or[255+s-a]<=i&&Or[255+a-o]<=i&&Or[255+h-u]<=i&&Or[255+u-c]<=i&&Or[255+c-l]<=i}function zt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Bt(e,t+r,n,i)&&Ft(e,t+r,n)}function Vt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Bt(e,t+r*n,1,i)&&Ft(e,t+r*n,1)}function qt(e,t,n,r){var i;for(i=3;0<i;--i)zt(e,t+=4*n,n,r)}function Wt(e,t,n,r){var i;for(i=3;0<i;--i)Vt(e,t+=4,n,r)}function Ht(e,t,n,r,i,s,a,o){for(s=2*s+1;0<i--;){if(Ut(e,t,n,s,a))if(jt(e,t,n,o))Ft(e,t,n);else{var l=e,c=t,u=n,h=l[c-2*u],d=l[c-u],f=l[c+0],p=l[c+u],m=l[c+2*u],g=27*(b=Pr[1020+3*(f-d)+Pr[1020+h-p]])+63>>7,v=18*b+63>>7,b=9*b+63>>7;l[c-3*u]=Dr[255+l[c-3*u]+b],l[c-2*u]=Dr[255+h+v],l[c-u]=Dr[255+d+g],l[c+0]=Dr[255+f-g],l[c+u]=Dr[255+p-v],l[c+2*u]=Dr[255+m-b]}t+=r}}function Gt(e,t,n,r,i,s,a,o){for(s=2*s+1;0<i--;){if(Ut(e,t,n,s,a))if(jt(e,t,n,o))Ft(e,t,n);else{var l=e,c=t,u=n,h=l[c-u],d=l[c+0],f=l[c+u],p=Lr[112+(4+(m=3*(d-h))>>3)],m=Lr[112+(m+3>>3)],g=p+1>>1;l[c-2*u]=Dr[255+l[c-2*u]+g],l[c-u]=Dr[255+h+m],l[c+0]=Dr[255+d-p],l[c+u]=Dr[255+f-g]}t+=r}}function Kt(e,t,n,r,i,s){Ht(e,t,n,1,16,r,i,s)}function Yt(e,t,n,r,i,s){Ht(e,t,1,n,16,r,i,s)}function Xt(e,t,n,r,i,s){var a;for(a=3;0<a;--a)Gt(e,t+=4*n,n,1,16,r,i,s)}function $t(e,t,n,r,i,s){var a;for(a=3;0<a;--a)Gt(e,t+=4,1,n,16,r,i,s)}function Jt(e,t,n,r,i,s,a,o){Ht(e,t,i,1,8,s,a,o),Ht(n,r,i,1,8,s,a,o)}function Qt(e,t,n,r,i,s,a,o){Ht(e,t,1,i,8,s,a,o),Ht(n,r,1,i,8,s,a,o)}function Zt(e,t,n,r,i,s,a,o){Gt(e,t+4*i,i,1,8,s,a,o),Gt(n,r+4*i,i,1,8,s,a,o)}function en(e,t,n,r,i,s,a,o){Gt(e,t+4,1,i,8,s,a,o),Gt(n,r+4,1,i,8,s,a,o)}function tn(){this.ba=new ae,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new R,this.vb=new R,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new h}function an(){this.xb=this.a=0,this.l=new Ge,this.ca=new ae,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new x,this.Pb=0,this.wd=new x,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=a(4,rn),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,r,i,s,a){for(e=null==e?0:e[t+0],t=0;t<a;++t)i[s+t]=e+n[r+t]&255,e=i[s+t]}function cn(e,t,n,r,i,s,a){var o;if(null==e)ln(null,null,n,r,i,s,a);else for(o=0;o<a;++o)i[s+o]=e[t+o]+n[r+o]&255}function un(e,t,n,r,i,s,a){if(null==e)ln(null,null,n,r,i,s,a);else{var o,l=e[t+0],c=l,u=l;for(o=0;o<a;++o)c=u+(l=e[t+o])-c,u=n[r+o]+(-256&c?0>c?0:255:c)&255,c=l,i[s+o]=u}}function hn(e,n,i,a){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>i||0>=a||i+a>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new on,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=s(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,h=e.P,d=e.qc,f=e.mb,p=e.nb,m=h+1,g=d-1,b=c.l;if(t(null!=u&&null!=f&&null!=n),mi[0]=null,mi[1]=ln,mi[2]=cn,mi[3]=un,c.ca=f,c.tb=p,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=d)n=0;else if(c.$a=3&u[h+0],c.Z=u[h+0]>>2&3,c.Lc=u[h+0]>>4&3,h=u[h+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||h)n=0;else if(b.put=fe,b.ac=de,b.bc=pe,b.ma=c,b.width=n.width,b.height=n.height,b.Da=n.Da,b.v=n.v,b.va=n.va,b.j=n.j,b.o=n.o,c.$a)e:{t(1==c.$a),n=Ne();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,v(n.m,u,m,g),!Ie(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Se(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=s(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Ce(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:a=l-i}t(null!=e.ga),t(i+a<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(m=e.rc,g=e.Vc,b=e.Fa,h=e.P+1+i*n,d=e.mb,f=e.nb+i*n,t(h<=e.P+e.qc),0!=u.Z)for(t(null!=mi[u.Z]),c=0;c<a;++c)mi[u.Z](m,g,b,h,d,f,n),m=d,g=f,f+=n,h+=n;else for(c=0;c<a;++c)r(d,f,b,h,n),m=d,g=f,f+=n,h+=n;e.rc=m,e.Vc=g}else{if(t(null!=u.mc),n=i+a,t(null!=(c=u.mc)),t(n<=c.i),c.C>=n)n=1;else if(u.ic||gn(),u.ic){u=c.V,m=c.Ba,g=c.c;var y=c.i,w=(b=1,h=c.$/g,d=c.$%g,f=c.m,p=c.s,c.$),x=g*y,_=g*n,k=p.wc,E=w<_?we(p,d,h):null;t(w<=x),t(n<=y),t(Se(p));t:for(;;){for(;!f.h&&w<_;){if(d&k||(E=we(p,d,h)),t(null!=E),T(f),256>(y=be(E.G[0],E.H[0],f)))u[m+w]=y,++w,++d>=g&&(d=0,++h<=n&&!(h%16)&&Te(c,h));else{if(!(280>y)){b=0;break t}y=ge(y-256,f);var A,N=be(E.G[4],E.H[4],f);if(T(f),!(w>=(N=ve(g,N=ge(N,f)))&&x-w>=y)){b=0;break t}for(A=0;A<y;++A)u[m+w+A]=u[m+w+A-N];for(w+=y,d+=y;d>=g;)d-=g,++h<=n&&!(h%16)&&Te(c,h);w<_&&d&k&&(E=we(p,d,h))}t(f.h==S(f))}Te(c,h>n?n:h);break t}!b||f.h&&w<x?(b=0,c.a=f.h?5:3):c.$=w,n=b}else n=Ee(c,c.V,c.Ba,c.c,c.i,n,Pe);if(!n){a=0;break e}}i+a>=l&&(e.Cc=1),a=1}if(!a)return null;if(e.Cc&&(null!=(a=e.ga)&&(a.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*o}function dn(e,t,n,r,i,s){for(;0<i--;){var a,o=e,l=t+(n?1:0),c=e,u=t+(n?0:3);for(a=0;a<r;++a){var h=c[u+4*a];255!=h&&(h*=32897,o[l+4*a+0]=o[l+4*a+0]*h>>23,o[l+4*a+1]=o[l+4*a+1]*h>>23,o[l+4*a+2]=o[l+4*a+2]*h>>23)}t+=s}}function fn(e,t,n,r,i){for(;0<r--;){var s;for(s=0;s<n;++s){var a=e[t+2*s+0],o=15&(c=e[t+2*s+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*s+0]=(240&a|a>>4)*l>>16&240|(15&a|a<<4)*l>>16>>4&15,e[t+2*s+1]=240&c|o}t+=i}}function pn(e,t,n,r,i,s,a,o){var l,c,u=255;for(c=0;c<i;++c){for(l=0;l<r;++l){var h=e[t+l];s[a+4*l]=h,u&=h}t+=n,a+=o}return 255!=u}function mn(e,t,n,r,i){var s;for(s=0;s<i;++s)n[r+s]=e[t+s]>>8}function gn(){_r=dn,Sr=fn,kr=pn,Tr=mn}function vn(n,r,i){e[n]=function(e,n,s,a,o,l,c,u,h,d,f,p,m,g,v,b,y){var w,x=y-1>>1,_=o[l+0]|c[u+0]<<16,S=h[d+0]|f[p+0]<<16;t(null!=e);var k=3*_+S+131074>>2;for(r(e[n+0],255&k,k>>16,m,g),null!=s&&(k=3*S+_+131074>>2,r(s[a+0],255&k,k>>16,v,b)),w=1;w<=x;++w){var T=o[l+w]|c[u+w]<<16,E=h[d+w]|f[p+w]<<16,A=_+T+S+E+524296,N=A+2*(T+S)>>3;k=N+_>>1,_=(A=A+2*(_+E)>>3)+T>>1,r(e[n+2*w-1],255&k,k>>16,m,g+(2*w-1)*i),r(e[n+2*w-0],255&_,_>>16,m,g+(2*w-0)*i),null!=s&&(k=A+S>>1,_=N+E>>1,r(s[a+2*w-1],255&k,k>>16,v,b+(2*w-1)*i),r(s[a+2*w+0],255&_,_>>16,v,b+(2*w+0)*i)),_=T,S=E}1&y||(k=3*_+S+131074>>2,r(e[n+y-1],255&k,k>>16,m,g+(y-1)*i),null!=s&&(k=3*S+_+131074>>2,r(s[a+y-1],255&k,k>>16,v,b+(y-1)*i)))}}function bn(){gi[Rr]=vi,gi[Mr]=yi,gi[Fr]=bi,gi[jr]=wi,gi[Br]=xi,gi[Ur]=_i,gi[zr]=Si,gi[Vr]=yi,gi[qr]=wi,gi[Wr]=xi,gi[Hr]=_i}function yn(e){return e&~Ii?0>e?0:255:e>>Ni}function wn(e,t){return yn((19077*e>>8)+(26149*t>>8)-14234)}function xn(e,t,n){return yn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function _n(e,t){return yn((19077*e>>8)+(33050*t>>8)-17685)}function Sn(e,t,n,r,i){r[i+0]=wn(e,n),r[i+1]=xn(e,t,n),r[i+2]=_n(e,t)}function kn(e,t,n,r,i){r[i+0]=_n(e,t),r[i+1]=xn(e,t,n),r[i+2]=wn(e,n)}function Tn(e,t,n,r,i){var s=xn(e,t,n);t=s<<3&224|_n(e,t)>>3,r[i+0]=248&wn(e,n)|s>>5,r[i+1]=t}function En(e,t,n,r,i){var s=240&_n(e,t)|15;r[i+0]=240&wn(e,n)|xn(e,t,n)>>4,r[i+1]=s}function An(e,t,n,r,i){r[i+0]=255,Sn(e,t,n,r,i+1)}function Nn(e,t,n,r,i){kn(e,t,n,r,i),r[i+3]=255}function In(e,t,n,r,i){Sn(e,t,n,r,i),r[i+3]=255}function He(e,t){return 0>e?0:e>t?t:e}function Cn(t,n,r){e[t]=function(e,t,i,s,a,o,l,c,u){for(var h=c+(-2&u)*r;c!=h;)n(e[t+0],i[s+0],a[o+0],l,c),n(e[t+1],i[s+0],a[o+0],l,c+r),t+=2,++s,++o,c+=2*r;1&u&&n(e[t+0],i[s+0],a[o+0],l,c)}}function Pn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Ln(e,t,n,r,i){switch(e>>>30){case 3:sr(t,n,r,i,0);break;case 2:ar(t,n,r,i);break;case 1:lr(t,n,r,i)}}function Dn(e,t){var n,s,a=t.M,o=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,h=e.pc+584,d=e.oc,f=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[h+32*n-1]=129,d[f+32*n-1]=129;for(0<a?l[c-1-32]=u[h-1-32]=d[f-1-32]=129:(i(l,c-32-1,127,21),i(u,h-32-1,127,9),i(d,f-32-1,127,9)),s=0;s<e.za;++s){var p=t.ya[t.aa+s];if(0<s){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(u,h+32*n-4,u,h+32*n+4,4),r(d,f+32*n-4,d,f+32*n+4,4)}var m=e.Gd,g=e.Hd+s,v=p.ad,b=p.Hc;if(0<a&&(r(l,c-32,m[g].y,0,16),r(u,h-32,m[g].f,0,8),r(d,f-32,m[g].ea,0,8)),p.Za){var y=l,w=c-32+16;for(0<a&&(s>=e.za-1?i(y,w,m[g].y[15],4):r(y,w,m[g+1].y,0,4)),n=0;4>n;n++)y[w+128+n]=y[w+256+n]=y[w+384+n]=y[w+0+n];for(n=0;16>n;++n,b<<=2)y=l,w=c+Fi[n],hi[p.Ob[n]](y,w),Ln(b,v,16*+n,y,w)}else if(y=Pn(s,a,p.Ob[0]),ui[y](l,c),0!=b)for(n=0;16>n;++n,b<<=2)Ln(b,v,16*+n,l,c+Fi[n]);for(n=p.Gc,y=Pn(s,a,p.Dd),di[y](u,h),di[y](d,f),b=v,y=u,w=h,255&(p=0|n)&&(170&p?or(b,256,y,w):cr(b,256,y,w)),p=d,b=f,255&(n>>=8)&&(170&n?or(v,320,p,b):cr(v,320,p,b)),a<e.Ub-1&&(r(m[g].y,0,l,c+480,16),r(m[g].f,0,u,h+224,8),r(m[g].ea,0,d,f+224,8)),n=8*o*e.B,m=e.sa,g=e.ta+16*s+16*o*e.R,v=e.qa,p=e.ra+8*s+n,b=e.Ha,y=e.Ia+8*s+n,n=0;16>n;++n)r(m,g+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(v,p+n*e.B,u,h+32*n,8),r(b,y+n*e.B,d,f+32*n,8)}}function On(e,r,i,s,a,o,l,c,u){var h=[0],d=[0],f=0,p=null!=u?u.kd:0,m=null!=u?u:new nn;if(null==e||12>i)return 7;m.data=e,m.w=r,m.ha=i,r=[r],i=[i],m.gb=[m.gb];e:{var g=r,b=i,y=m.gb;if(t(null!=e),t(null!=b),t(null!=y),y[0]=0,12<=b[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){y=3;break e}var w=L(e,g[0]+4);if(12>w||4294967286<w){y=3;break e}if(p&&w>b[0]-8){y=7;break e}y[0]=w,g[0]+=12,b[0]-=12}y=0}if(0!=y)return y;for(w=0<m.gb[0],i=i[0];;){e:{var _=e;b=r,y=i;var S=h,k=d,T=g=[0];if((N=f=[f])[0]=0,8>y[0])y=7;else{if(!n(_,b[0],"VP8X")){if(10!=L(_,b[0]+4)){y=3;break e}if(18>y[0]){y=7;break e}var E=L(_,b[0]+8),A=1+P(_,b[0]+12);if(2147483648<=A*(_=1+P(_,b[0]+15))){y=3;break e}null!=T&&(T[0]=E),null!=S&&(S[0]=A),null!=k&&(k[0]=_),b[0]+=18,y[0]-=18,N[0]=1}y=0}}if(f=f[0],g=g[0],0!=y)return y;if(b=!!(2&g),!w&&f)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=b),null!=c&&(c[0]=0),l=h[0],g=d[0],f&&b&&null==u){y=0;break}if(4>i){y=7;break}if(w&&f||!w&&!f&&!n(e,r[0],"ALPH")){i=[i],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];e:{E=e,y=r,w=i;var N=m.gb;S=m.na,k=m.P,T=m.Sa,A=22,t(null!=E),t(null!=w),_=y[0];var I=w[0];for(t(null!=S),t(null!=T),S[0]=null,k[0]=null,T[0]=0;;){if(y[0]=_,w[0]=I,8>I){y=7;break e}var C=L(E,_+4);if(4294967286<C){y=3;break e}var D=8+C+1&-2;if(A+=D,0<N&&A>N){y=3;break e}if(!n(E,_,"VP8 ")||!n(E,_,"VP8L")){y=0;break e}if(I[0]<D){y=7;break e}n(E,_,"ALPH")||(S[0]=E,k[0]=_+8,T[0]=C),_+=D,I-=D}}if(i=i[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=y)break}i=[i],m.Ja=[m.Ja],m.xa=[m.xa];e:if(N=e,y=r,w=i,S=m.gb[0],k=m.Ja,T=m.xa,E=y[0],_=!n(N,E,"VP8 "),A=!n(N,E,"VP8L"),t(null!=N),t(null!=w),t(null!=k),t(null!=T),8>w[0])y=7;else{if(_||A){if(N=L(N,E+4),12<=S&&N>S-12){y=3;break e}if(p&&N>w[0]-8){y=7;break e}k[0]=N,y[0]+=8,w[0]-=8,T[0]=A}else T[0]=5<=w[0]&&47==N[E+0]&&!(N[E+4]>>5),k[0]=w[0];y=0}if(i=i[0],m.Ja=m.Ja[0],m.xa=m.xa[0],r=r[0],0!=y)break;if(4294967286<m.Ja)return 3;if(null==c||b||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>i){y=7;break}c=l,p=g,b=o,null==e||5>i?e=0:5<=i&&47==e[r+0]&&!(e[r+4]>>5)?(w=[0],N=[0],S=[0],v(k=new x,e,r,i),me(k,w,N,S)?(null!=c&&(c[0]=w[0]),null!=p&&(p[0]=N[0]),null!=b&&(b[0]=S[0]),e=1):e=0):e=0}else{if(10>i){y=7;break}c=g,null==e||10>i||!Xe(e,r+3,i-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,b=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=m.Ja||!b||!e?e=0:(l&&(l[0]=b),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],f&&(h[0]!=l||d[0]!=g))return 3;null!=u&&(u[0]=m,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-i));break}return 0==y||7==y&&f&&null==u?(null!=o&&(o[0]|=null!=m.na&&0<m.na.length),null!=s&&(s[0]=l),null!=a&&(a[0]=g),0):y}function Rn(e,t,n){var r=t.width,i=t.height,s=0,a=0,o=r,l=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,s=e.v,a=e.j,11>n||(s&=-2,a&=-2),0>s||0>a||0>=o||0>=l||s+o>r||a+l>i))return 0;if(t.v=s,t.j=a,t.va=s+o,t.o=a+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!M(o,l,n=[e.ib],s=[e.hb]))return 0;t.ib=n[0],t.hb=s[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*i/4,t.Kb=0),1}function Mn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Fn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,a=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=i||0>=a||o+i>e||l+a>t)return 2;e=i,t=a}if(n.da){if(!M(e,t,i=[n.ib],a=[n.hb]))return 2;e=i[0],t=a[0]}}r.width=e,r.height=t;e:{var c=r.width,u=r.height;if(e=r.S,0>=c||0>=u||!(e>=Rr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=a=i=t=0;var h=(l=c*Ui[e])*u;if(11>e||(a=(u+1)/2*(t=(c+1)/2),12==e&&(o=(i=c)*u)),null==(u=s(h+2*a+o))){e=1;break e}r.sd=u,11>e?((c=r.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=h):((c=r.f.kb).y=u,c.O=0,c.fa=l,c.Fd=h,c.f=u,c.N=0+h,c.Ab=t,c.Cd=a,c.ea=u,c.W=0+h+a,c.Db=t,c.Ed=a,12==e&&(c.F=u,c.J=0+h+2*a),c.Tc=o,c.lb=i)}if(t=1,i=r.S,a=r.width,o=r.height,i>=Rr&&13>i)if(11>i)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+a<=e.size,t&=l>=a*Ui[i],t&=null!=e.eb;else{e=r.f.kb,l=(a+1)/2,h=(o+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var d=Math.abs(e.Db),f=Math.abs(e.lb),p=f*(o-1)+a;t&=c*(o-1)+a<=e.Fd,t&=u*(h-1)+l<=e.Cd,t=(t&=d*(h-1)+l<=e.Ed)&c>=a&u>=l&d>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=f>=a,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Mn(r)),e}var jn=64,Bn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Un=24,zn=32,Vn=8,qn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return z(z(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return z(e,t[n-1])},e.Predictor7=function(e,t,n){return z(e,t[n+0])},e.Predictor8=function(e,t,n){return z(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return z(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return z(z(e,t[n-1]),z(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=W(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+W(r>>16&255,e>>16&255,t>>16&255)+W(r>>8&255,e>>8&255,t>>8&255)+W(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(V((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|V((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|V((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|V((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(q((e=z(e,t[n+0]))>>24&255,r>>24&255)<<24|q(e>>16&255,r>>16&255)<<16|q(e>>8&255,r>>8&255)<<8|q(255&e,255&r))>>>0};var Wn=e.PredictorAdd0;e.PredictorAdd1=H,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Hn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Gn,Kn=e.ColorIndexInverseTransform,Yn=e.MapARGB,Xn=e.VP8LColorIndexInverseTransformAlpha,$n=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Qn,Zn,er,tr,nr,rr,ir,sr,ar,or,lr,cr,ur,hr,dr,fr,pr,mr,gr,vr,br,yr,wr,xr,_r,Sr,kr,Tr,Er=s(511),Ar=s(2041),Nr=s(225),Ir=s(767),Cr=0,Pr=Ar,Lr=Nr,Dr=Ir,Or=Er,Rr=0,Mr=1,Fr=2,jr=3,Br=4,Ur=5,zr=6,Vr=7,qr=8,Wr=9,Hr=10,Gr=[2,3,7],Kr=[3,3,11],Yr=[280,256,256,256,40],Xr=[0,1,1,1,0],$r=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zr=8,ei=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ti=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ni=null,ri=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ii=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],si=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ai=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],li=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ci=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ui=[],hi=[],di=[],fi=1,pi=2,mi=[],gi=[];vn("UpsampleRgbLinePair",Sn,3),vn("UpsampleBgrLinePair",kn,3),vn("UpsampleRgbaLinePair",In,4),vn("UpsampleBgraLinePair",Nn,4),vn("UpsampleArgbLinePair",An,4),vn("UpsampleRgba4444LinePair",En,2),vn("UpsampleRgb565LinePair",Tn,2);var vi=e.UpsampleRgbLinePair,bi=e.UpsampleBgrLinePair,yi=e.UpsampleRgbaLinePair,wi=e.UpsampleBgraLinePair,xi=e.UpsampleArgbLinePair,_i=e.UpsampleRgba4444LinePair,Si=e.UpsampleRgb565LinePair,ki=16,Ti=1<<ki-1,Ei=-227,Ai=482,Ni=6,Ii=(256<<Ni)-1,Ci=0,Pi=s(256),Li=s(256),Di=s(256),Oi=s(256),Ri=s(Ai-Ei),Mi=s(Ai-Ei);Cn("YuvToRgbRow",Sn,3),Cn("YuvToBgrRow",kn,3),Cn("YuvToRgbaRow",In,4),Cn("YuvToBgraRow",Nn,4),Cn("YuvToArgbRow",An,4),Cn("YuvToRgba4444Row",En,2),Cn("YuvToRgb565Row",Tn,2);var Fi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ji=[0,2,8],Bi=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,n,o,l,c){var u=Mr,h=new tn,d=new ae;h.ba=d,d.S=u,d.width=[d.width],d.height=[d.height];var f=d.width,p=d.height,m=new oe;if(null==m||null==e)var g=2;else t(null!=m),g=On(e,n,o,m.width,m.height,m.Pd,m.Qd,m.format,null);if(0!=g?f=0:(null!=f&&(f[0]=m.width[0]),null!=p&&(p[0]=m.height[0]),f=1),f){d.width=d.width[0],d.height=d.height[0],null!=l&&(l[0]=d.width),null!=c&&(c[0]=d.height);e:{if(l=new Ge,(c=new nn).data=e,c.w=n,c.ha=o,c.kd=1,n=[0],t(null!=c),(0==(e=On(c.data,c.w,c.ha,null,null,null,n,null,c))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=h),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=fe,l.ac=de,l.bc=pe,l.ma=h,c.xa){if(null==(e=Ne())){h=1;break e}if(function(e,n){var r=[0],i=[0],s=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,v(e.m,n.data,n.w,n.ha),!me(e.m,r,i,s)){e.a=3;break t}if(e.xb=pi,n.width=r[0],n.height=i[0],!Ie(r[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(n=Fn(l.width,l.height,h.Oa,h.ba))){t:{l=e;n:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(o=l.l)),t(null!=(c=o.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!Rn(c.Oa,o,jr)){l.a=2;break n}if(!Ce(l,o.width))break n;if(o.da)break n;if((o.da||re(l.ca.S))&&gn(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&gn()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!D(l.s.vb,l.s.Wa.Xa)){l.a=1;break n}l.xb=0}if(!Ee(l,l.V,l.Ba,l.c,l.i,o.o,_e))break n;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(n=e.a)}else n=e.a}else{if(null==(e=new Ke)){h=1;break e}if(e.Fa=c.na,e.P=c.P,e.qc=c.Sa,$e(e,l)){if(0==(n=Fn(l.width,l.height,h.Oa,h.ba))){if(e.Aa=0,o=h.Oa,t(null!=(c=e)),null!=o){if(0<(f=0>(f=o.Md)?0:100<f?255:255*f/100)){for(p=m=0;4>p;++p)12>(g=c.pb[p]).lc&&(g.ia=f*Bi[0>g.lc?0:g.lc]>>3),m|=g.ia;m&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=o.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,n){if(null==e)return 0;if(null==n)return Ye(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!$e(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=ji[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var u=e.Qa.Lb[o];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var h=e.gd[o][c],d=u;if(l.Pc&&(d+=l.vd[0],c&&(d+=l.od[0])),0<(d=0>d?0:63<d?63:d)){var f=d;0<l.wb&&(f=4<l.wb?f>>2:f>>1)>9-l.wb&&(f=9-l.wb),1>f&&(f=1),h.dd=f,h.tc=2*d+f,h.ld=40<=d?2:15<=d?1:0}else h.tc=0;h.La=c}}}o=0}else Ye(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=1);t:{o=e.Ic,l=4*(f=e.za);var p=32*f,m=f+1,g=0<e.L?f*(0<e.Aa?2:1):0,v=(2==e.Aa?2:1)*f;if((h=l+832+(c=3*(16*o+ji[e.L])/2*p)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=h)o=0;else{if(h>e.Vb){if(e.Vb=0,e.Ec=s(h),e.Fc=0,null==e.Ec){o=Ye(e,1,"no memory during frame initialization.");break t}e.Vb=h}h=e.Ec,d=e.Fc,e.Ac=h,e.Bc=d,d+=l,e.Gd=a(p,qe),e.Hd=0,e.rb=a(m+1,Be),e.sb=1,e.wa=g?a(g,je):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=f),t(!0),e.oc=h,e.pc=d,d+=832,e.ya=a(v,ze),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=f),e.R=16*f,e.B=8*f,f=(p=ji[e.L])*e.R,p=p/2*e.B,e.sa=h,e.ta=d+f,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,d+=c,e.mb=u?h:null,e.nb=u?d:null,t(d+u<=e.Fc+e.Vb),Qe(e),i(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Cr){for(o=-255;255>=o;++o)Er[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Ar[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Nr[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Ir[255+o]=0>o?0:255<o?255:o;Cr=1}ir=lt,sr=it,or=st,lr=at,cr=ot,ar=rt,ur=Kt,hr=Yt,dr=Jt,fr=Qt,pr=Xt,mr=$t,gr=Zt,vr=en,br=zt,yr=Vt,wr=qt,xr=Wt,hi[0]=St,hi[1]=ut,hi[2]=xt,hi[3]=_t,hi[4]=kt,hi[5]=Et,hi[6]=Tt,hi[7]=At,hi[8]=It,hi[9]=Nt,ui[0]=gt,ui[1]=dt,ui[2]=ft,ui[3]=pt,ui[4]=vt,ui[5]=bt,ui[6]=yt,di[0]=Dt,di[1]=ht,di[2]=Ct,di[3]=Pt,di[4]=Rt,di[5]=Ot,di[6]=Mt,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var a,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(a=0;a<c.za;++a){var u=l,h=c,d=h.Ac,f=h.Bc+4*a,p=h.zc,m=h.ya[h.aa+a];if(h.Qa.Bb?m.$b=N(u,h.Pa.jb[0])?2+N(u,h.Pa.jb[2]):N(u,h.Pa.jb[1]):m.$b=0,h.kc&&(m.Ad=N(u,h.Bd)),m.Za=!N(u,145)+0,m.Za){var g=m.Ob,v=0;for(h=0;4>h;++h){var b,y=p[0+h];for(b=0;4>b;++b){y=oi[d[f+b]][y];for(var w=si[N(u,y[0])];0<w;)w=si[2*w+N(u,y[w])];y=-w,d[f+b]=y}r(g,v,d,f,4),v+=4,p[0+h]=y}}else y=N(u,156)?N(u,128)?1:3:N(u,163)?2:0,m.Ob[0]=y,i(d,f,y,4),i(p,0,y,4);m.Dd=N(u,142)?N(u,114)?N(u,183)?1:3:2:0}if(c.m.Ka)return Ye(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,u=(l=e).rb[l.sb-1],d=l.rb[l.sb+l.ja],a=l.ya[l.aa+l.ja],f=l.kc?a.Ad:0)u.la=d.la=0,a.Za||(u.Na=d.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var x,_;if(u=d,d=c,f=l.Pa.Xc,p=l.ya[l.aa+l.ja],m=l.pb[p.$b],h=p.ad,g=0,v=l.rb[l.sb-1],y=b=0,i(h,g,0,384),p.Za)var S=0,k=f[3];else{w=s(16);var T=u.Na+v.Na;if(T=ni(d,f[1],T,m.Eb,0,w,0),u.Na=v.Na=(0<T)+0,1<T)ir(w,0,h,g);else{var E=w[0]+3>>3;for(w=0;256>w;w+=16)h[g+w]=E}S=1,k=f[0]}var A=15&u.la,I=15&v.la;for(w=0;4>w;++w){var C=1&I;for(E=_=0;4>E;++E)A=A>>1|(C=(T=ni(d,k,T=C+(1&A),m.Sc,S,h,g))>S)<<7,_=_<<2|(3<T?3:1<T?2:0!=h[g+0]),g+=16;A>>=4,I=I>>1|C<<7,b=(b<<8|_)>>>0}for(k=A,S=I>>4,x=0;4>x;x+=2){for(_=0,A=u.la>>4+x,I=v.la>>4+x,w=0;2>w;++w){for(C=1&I,E=0;2>E;++E)T=C+(1&A),A=A>>1|(C=0<(T=ni(d,f[2],T,m.Qc,0,h,g)))<<3,_=_<<2|(3<T?3:1<T?2:0!=h[g+0]),g+=16;A>>=2,I=I>>1|C<<5}y|=_<<4*x,k|=A<<4<<x,S|=(240&I)<<x}u.la=k,v.la=S,p.Hc=b,p.Gc=y,p.ia=43690&y?0:m.ia,f=!(b|y)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[a.$b][a.Za],l.wa[l.Y+l.ja].La|=!f),c.Ka)return Ye(e,7,"Premature end-of-file encountered.")}if(Qe(e),l=n,c=1,a=(o=e).D,u=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)t:{if(a.M=o.M,a.uc=u,Dn(o,a),c=1,a=(_=o.D).Nb,u=(y=ji[o.L])*o.R,d=y/2*o.B,w=16*a*o.R,E=8*a*o.B,f=o.sa,p=o.ta-u+w,m=o.qa,h=o.ra-d+E,g=o.Ha,v=o.Ia-d+E,I=0==(A=_.M),b=A>=o.Va-1,2==o.Aa&&Dn(o,_),_.uc)for(C=(T=o).D.M,t(T.D.uc),_=T.yb;_<T.Hb;++_){S=_,k=C;var P=(L=(z=T).D).Nb;x=z.R;var L=L.wa[L.Y+S],D=z.sa,O=z.ta+16*P*x+16*S,R=L.dd,M=L.tc;if(0!=M)if(t(3<=M),1==z.L)0<S&&yr(D,O,x,M+4),L.La&&xr(D,O,x,M),0<k&&br(D,O,x,M+4),L.La&&wr(D,O,x,M);else{var F=z.B,j=z.qa,B=z.ra+8*P*F+8*S,U=z.Ha,z=z.Ia+8*P*F+8*S;P=L.ld,0<S&&(hr(D,O,x,M+4,R,P),fr(j,B,U,z,F,M+4,R,P)),L.La&&(mr(D,O,x,M,R,P),vr(j,B,U,z,F,M,R,P)),0<k&&(ur(D,O,x,M+4,R,P),dr(j,B,U,z,F,M+4,R,P)),L.La&&(pr(D,O,x,M,R,P),gr(j,B,U,z,F,M,R,P))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(_=16*A,A=16*(A+1),I?(l.y=o.sa,l.O=o.ta+w,l.f=o.qa,l.N=o.ra+E,l.ea=o.Ha,l.W=o.Ia+E):(_-=y,l.y=f,l.O=p,l.f=m,l.N=h,l.ea=g,l.W=v),b||(A-=y),A>l.o&&(A=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&_<A&&(l.J=hn(o,l,_,A-_),l.F=o.mb,null==l.F&&0==l.F.length)){c=Ye(o,3,"Could not decode alpha data.");break t}_<l.j&&(y=l.j-_,_=l.j,t(!(1&y)),l.O+=o.R*y,l.N+=o.B*(y>>1),l.W+=o.B*(y>>1),null!=l.F&&(l.J+=l.width*y)),_<A&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=_-l.j,l.U=l.va-l.v,l.T=A-_,c=l.put(l))}a+1!=o.Ic||b||(r(o.sa,o.ta-u,f,p+16*o.R,u),r(o.qa,o.ra-d,m,h+8*o.B,d),r(o.Ha,o.Ia-d,g,v+8*o.B,d))}if(!c)return Ye(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0})(e,l)||(n=e.a)}}else n=e.a}0==n&&null!=h.Oa&&h.Oa.fd&&(n=Mn(h.ba))}h=n}u=0!=h?null:11>u?d.f.RGBA.eb:d.f.kb.y}else u=null;return u};var Ui=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return e[t+0]|e[t+1]<<8}function h(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var f=[0],p=[0],m=[],g=new l,v=e,b=function(e,t){var n={},r=0,i=!1,s=0,a=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(d(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=d(e,t+=4);t+=4;var f=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(g=n.frames[r]).src_off=i?a:t-8,g.src_size=s+l+8,r++,i&&(i=!1,s=0,a=0);break;case"VP8X":(g=n.header={}).feature_flags=e[t];var p=t+4;g.canvas_width=1+h(e,p),p+=3,g.canvas_height=1+h(e,p),p+=3;break;case"ALPH":i=!0,s=f+8,a=t-8;break;case"ANIM":(g=n.header).bgcolor=d(e,t),p=t+4,g.loop_count=u(e,p),p+=2;break;case"ANMF":var m,g;(g=n.frames[r]={}).offset_x=2*h(e,t),t+=3,g.offset_y=2*h(e,t),t+=3,g.width=1+h(e,t),t+=3,g.height=1+h(e,t),t+=3,g.duration=h(e,t),t+=3,m=e[t++],g.dispose=1&m,g.blend=m>>1&1}"ANMF"!=o&&(t+=f)}return n}}(v,0);b.response=v,b.rgbaoutput=!0,b.dataurl=!1;var y=b.header?b.header:null,w=b.frames?b.frames:null;if(y){y.loop_counter=y.loop_count,f=[y.canvas_height],p=[y.canvas_width];for(var x=0;x<w.length&&0!=w[x].blend;x++);}var _=w[0],S=g.WebPDecodeRGBA(v,_.src_off,_.src_size,p,f);_.rgba=S,_.imgwidth=p[0],_.imgheight=f[0];for(var k=0;k<p[0]*f[0]*4;k++)m[k]=S[k];return this.width=p,this.height=f,this.data=m,this}!function(e){var t,n,r,i,s,a,o,l,c,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new a,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new a,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(e){a=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof u&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(e){h=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=d(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=d(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var f=null,p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(e){f=null,p=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],i=t[4];t[5];var s=t[6],a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===a?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var o=function(e){var t,n,r=[],i=e.trim();if(""===i)return jz;if(i in kz)return[kz[i]];for(;""!==i;){switch(n=null,t=(i=Ez(i)).charAt(0)){case'"':case"'":n=Az(i.substring(1),t);break;default:n=Nz(i)}if(null===n)return jz;if(r.push(n[0]),""!==(i=Ez(n[1]))&&","!==i.charAt(0))return jz;i=i.replace(/^,/,"")}return r}(s);if(this.fontFaces){var l=function(e,t){if(null===f){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))})}),t}(e.getFontList());f=function(e){for(var t={},n=0;n<e.length;++n){var r=xz(e[n]),i=r.family,s=r.stretch,a=r.style,o=r.weight;t[i]=t[i]||{},t[i][s]=t[i][s]||{},t[i][s][a]=t[i][s][a]||{},t[i][s][a][o]=r}return t}(n.concat(t))}return f}(this.pdf,this.fontFaces),c=o.map(function(e){return{family:e,stretch:"normal",weight:r,style:n}}),u=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Sz,n.genericFontFamilies||{}),s=null,a=null,o=0;o<t.length;++o)if(i[(s=xz(t[o])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+Tz(s)+"' and default family '"+r+"'.");if(a=function(e,t){if(t[e])return t[e];var n=bz[e],r=n<=bz.normal?-1:1,i=_z(t,vz,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(s.stretch,a),a=function(e,t){if(t[e])return t[e];for(var n=gz[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(s.style,a),!(a=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=wz[e],r=_z(t,yz,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Tz(s)+"'.");return a}(l,c);this.pdf.setFont(u.ref.name,u.ref.style)}else{var h="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(h="bold"),"italic"===n&&(h+="italic"),0===h.length&&(h="normal");for(var d="",p={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},m=0;m<o.length;m++){if(void 0!==this.pdf.internal.getFont(o[m],h,{noFallback:!0,disableWarning:!0})){d=o[m];break}if("bolditalic"===h&&void 0!==this.pdf.internal.getFont(o[m],"bold",{noFallback:!0,disableWarning:!0}))d=o[m],h="bold";else if(void 0!==this.pdf.internal.getFont(o[m],"normal",{noFallback:!0,disableWarning:!0})){d=o[m],h="normal";break}}if(""===d)for(var g=0;g<o.length;g++)if(p[o[g]]){d=p[o[g]];break}d=""===d?"Times":d,this.pdf.setFont(d,h)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};h.prototype.setLineDash=function(e){this.lineDash=e},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){w.call(this,"fill",!1)},h.prototype.stroke=function(){w.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw JB.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(e,t)},h.prototype.closePath=function(){var e=new a(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,jO.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new a(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(e.x,e.y)},h.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw JB.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},h.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw JB.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new a(n,r)),s=this.ctx.transform.applyToPoint(new a(e,t));this.path.push({type:"qct",x1:s.x,y1:s.y,x:i.x,y:i.y}),this.ctx.lastPoint=new a(i.x,i.y)},h.prototype.bezierCurveTo=function(e,t,n,r,i,s){if(isNaN(i)||isNaN(s)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw JB.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new a(i,s)),l=this.ctx.transform.applyToPoint(new a(e,t)),c=this.ctx.transform.applyToPoint(new a(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new a(o.x,o.y)},h.prototype.arc=function(e,t,n,r,i,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw JB.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new a(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new a(0,n)),c=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:i,counterclockwise:s})},h.prototype.arcTo=function(e,t,n,r,i){throw new Error("arcTo not implemented.")},h.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw JB.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},h.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw JB.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},h.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw JB.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},h.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw JB.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},h.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},h.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(e){var t,n,r,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,i=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==s)t=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),i=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),i=parseFloat(s[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var a=new nU(e);e=a.ok?a.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:i,style:e}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw JB.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!f.call(this)){var i=O(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;N.call(this,{text:e,x:t,y:n,scale:s,angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw JB.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var i=O(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;N.call(this,{text:e,x:t,y:n,scale:s,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.measureText=function(e){if("string"!=typeof e)throw JB.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw JB.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(e){if(isNaN(e))throw JB.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},h.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw JB.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(e,t,n,r,i,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s))throw JB.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new l(e,t,n,r,i,s);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.setTransform=function(e,t,n,r,i,s){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,s=isNaN(s)?0:s,this.ctx.transform=new l(e,t,n,r,i,s)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(e,t,n,r,i,s,a,c,u){var h=this.pdf.getImageProperties(e),d=1,f=1,p=1,v=1;void 0!==r&&void 0!==c&&(p=c/r,v=u/i,d=h.width/r*c/r,f=h.height/i*u/i),void 0===s&&(s=t,a=n,t=0,n=0),void 0!==r&&void 0===c&&(c=r,u=i),void 0===r&&void 0===c&&(c=h.width,u=h.height);for(var w,_=this.ctx.transform.decompose(),S=O(_.rotate.shx),k=new l,T=(k=(k=(k=k.multiply(_.translate)).multiply(_.skew)).multiply(_.scale)).applyToRectangle(new o(s-t*p,a-n*v,r*d,i*f)),E=g.call(this,T),A=[],N=0;N<E.length;N+=1)-1===A.indexOf(E[N])&&A.push(E[N]);if(y(A),this.autoPaging)for(var I=A[0],C=A[A.length-1],P=I;P<C+1;P++){this.pdf.setPage(P);var L=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],D=1===P?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===P?0:R+(P-2)*M;if(0!==this.ctx.clip_path.length){var j=this.path;w=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(w,this.posX+this.margin[3],-F+D+this.ctx.prevPageLastElemOffset),x.call(this,"fill",!0),this.path=j}var B=JSON.parse(JSON.stringify(T));B=b([B],this.posX+this.margin[3],-F+D+this.ctx.prevPageLastElemOffset)[0];var U=(P>I||P<C)&&m.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],L,M,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,S),U&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",T.x,T.y,T.w,T.h,null,null,S)};var g=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+i)/n)+1);break;case"arc":r.push(Math.floor((e.y+i-e.radius)/n)+1),r.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var s=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((s.y+i)/n)+1),r.push(Math.floor((s.y+s.h+i)/n)+1);break;case"bct":var a=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"rect":r.push(Math.floor((e.y+i)/n)+1),r.push(Math.floor((e.y+e.h+i)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)v.call(this);return r},v=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=s},b=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},y=function(e){return e.sort(function(e,t){return e-t})},w=function(e,t){for(var n,r,i=this.fillStyle,s=this.strokeStyle,a=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),d=[],f=0;f<h.length;f++)if(void 0!==h[f].x)for(var p=g.call(this,h[f]),w=0;w<p.length;w+=1)-1===d.indexOf(p[w])&&d.push(p[w]);for(var _=0;_<d.length;_++)for(;this.pdf.internal.getNumberOfPages()<d[_];)v.call(this);if(y(d),this.autoPaging)for(var S=d[0],k=d[d.length-1],T=S;T<k+1;T++){this.pdf.setPage(T),this.fillStyle=i,this.strokeStyle=s,this.lineCap=a,this.lineWidth=l,this.lineJoin=c;var E=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],A=1===T?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],C=1===T?0:N+(T-2)*I;if(0!==this.ctx.clip_path.length){var P=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(n,this.posX+this.margin[3],-C+A+this.ctx.prevPageLastElemOffset),x.call(this,e,!0),this.path=P}if(r=JSON.parse(JSON.stringify(u)),this.path=b(r,this.posX+this.margin[3],-C+A+this.ctx.prevPageLastElemOffset),!1===t||0===T){var L=(T>S||T<k)&&m.call(this);L&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],E,I,null).clip().discardPath()),x.call(this,e,t),L&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,x.call(this,e,t),this.lineWidth=o;this.path=u},x=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!f.call(this))){for(var n,r,i=[],s=this.path,a=0;a<s.length;a++){var o=s[a];switch(o.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:o,deltas:[],abs:[]});break;case"lt":var l=i.length;if(s[a-1]&&!isNaN(s[a-1].x)&&(n=[o.x-s[a-1].x,o.y-s[a-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(o);break}break;case"bct":n=[o.x1-s[a-1].x,o.y1-s[a-1].y,o.x2-s[a-1].x,o.y2-s[a-1].y,o.x-s[a-1].x,o.y-s[a-1].y],i[i.length-1].deltas.push(n);break;case"qct":var c=s[a-1].x+2/3*(o.x1-s[a-1].x),u=s[a-1].y+2/3*(o.y1-s[a-1].y),h=o.x+2/3*(o.x1-o.x),d=o.y+2/3*(o.y1-o.y),m=o.x,g=o.y;n=[c-s[a-1].x,u-s[a-1].y,h-s[a-1].x,d-s[a-1].y,m-s[a-1].x,g-s[a-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var v=!1,b=0;b<i.length;b++)if(i[b].arc)for(var y=i[b].abs,w=0;w<y.length;w++){var x=y[w];"arc"===x.type?k.call(this,x.x,x.y,x.radius,x.startAngle,x.endAngle,x.counterclockwise,void 0,t,!v):I.call(this,x.x,x.y),v=!0}else if(!0===i[b].close)this.pdf.internal.out("h"),v=!1;else if(!0!==i[b].begin){var _=i[b].start.x,S=i[b].start.y;C.call(this,i[b].deltas,_,S),v=!0}r&&T.call(this,r),t&&E.call(this)}},_=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},S=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(e,t,n,r,i,s,a,o,l){for(var c=L.call(this,n,r,i,s),u=0;u<c.length;u++){var h=c[u];0===u&&(l?A.call(this,h.x1+e,h.y1+t):I.call(this,h.x1+e,h.y1+t)),P.call(this,e,t,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}o?E.call(this):T.call(this,a)},T=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},E=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},N=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=_.call(this,e.y),i=S.call(this,r)-n.h,s=this.ctx.transform.applyToPoint(new a(e.x,r)),c=this.ctx.transform.decompose(),u=new l;u=(u=(u=u.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var h,d,f,p=this.ctx.transform.applyToRectangle(new o(e.x,r,n.w,n.h)),v=u.applyToRectangle(new o(e.x,i,n.w,n.h)),w=g.call(this,v),k=[],T=0;T<w.length;T+=1)-1===k.indexOf(w[T])&&k.push(w[T]);if(y(k),this.autoPaging)for(var E=k[0],A=k[k.length-1],N=E;N<A+1;N++){this.pdf.setPage(N);var I=1===N?this.posY+this.margin[0]:this.margin[0],C=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[2],L=P-this.margin[0],D=this.pdf.internal.pageSize.width-this.margin[1],O=D-this.margin[3],R=1===N?0:C+(N-2)*L;if(0!==this.ctx.clip_path.length){var M=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(h,this.posX+this.margin[3],-1*R+I),x.call(this,"fill",!0),this.path=M}var F=b([JSON.parse(JSON.stringify(v))],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale);var j="text"!==this.autoPaging;if(j||F.y+F.h<=P){if(j||F.y>=I&&F.x<=D){var B=j?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||D-F.x)[0],U=b([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0],z=j&&(N>E||N<A)&&m.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,L,null).clip().discardPath()),this.pdf.text(B,U.x,U.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),z&&this.pdf.restoreGraphicsState()}}else F.y<P&&(this.ctx.prevPageLastElemOffset+=P-F.y);e.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)}else e.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale),this.pdf.text(e.text,s.x+this.posX,s.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)},I=function(e,t,i,s){i=i||0,s=s||0,this.pdf.internal.out(n(e+i)+" "+r(t+s)+" l")},C=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},P=function(e,n,r,a,o,l,c,u){this.pdf.internal.out([t(i(r+e)),t(s(a+n)),t(i(o+e)),t(s(l+n)),t(i(c+e)),t(s(u+n)),"c"].join(" "))},L=function(e,t,n,r){for(var i=2*Math.PI,s=Math.PI/2;t>n;)t-=i;var a=Math.abs(n-t);a<i&&r&&(a=i-a);for(var o=[],l=r?-1:1,c=t;a>1e-5;){var u=c+l*Math.min(a,s);o.push(D.call(this,e,c,u)),a-=Math.abs(u-c),c=u}return o},D=function(e,t,n){var r=(n-t)/2,i=e*Math.cos(r),s=e*Math.sin(r),a=i,o=-s,l=a*a+o*o,c=l+a*i+o*s,u=4/3*(Math.sqrt(2*l*c)-c)/(a*s-o*i),h=a-u*o,d=o+u*a,f=h,p=-d,m=r+t,g=Math.cos(m),v=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:h*g-d*v,y2:h*v+d*g,x3:f*g-p*v,y3:f*v+p*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},O=function(e){return 180*e/Math.PI},R=function(e,t,n,r,i,s){var a=e+.5*(n-e),l=t+.5*(r-t),c=i+.5*(n-i),u=s+.5*(r-s),h=Math.min(e,i,a,c),d=Math.max(e,i,a,c),f=Math.min(t,s,l,u),p=Math.max(t,s,l,u);return new o(h,f,d-h,p-f)},M=function(e,t,n,r,i,s,a,l){var c,u,h,d,f,p,m,g,v,b,y,w,x,_,S=n-e,k=r-t,T=i-n,E=s-r,A=a-i,N=l-s;for(u=0;u<41;u++)v=(m=(h=e+(c=u/40)*S)+c*((f=n+c*T)-h))+c*(f+c*(i+c*A-f)-m),b=(g=(d=t+c*k)+c*((p=r+c*E)-d))+c*(p+c*(s+c*N-p)-g),0==u?(y=v,w=b,x=v,_=b):(y=Math.min(y,v),w=Math.min(w,b),x=Math.max(x,v),_=Math.max(_,b));return new o(Math.round(y),Math.round(w),Math.round(x-y),Math.round(_-w))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(NU.API),function(e){var t=function(e){var t,n,r,i,s,a,o,l,c,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>r;r+=4)0!==(s=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(a=(s=((s=((s=((s=(s-(u=s%85))/85)-(c=s%85))/85)-(l=s%85))/85)-(o=s%85))/85)%85,n.push(a+33,o+33,l+33,c+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,i,s,a=String,o="length",l=255,c="charCodeAt",u="slice",h="replace";for(e[u](-2),e=e[u](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),r=[],i=0,s=(e+=t="uuuuu"[u](e[o]%5||5))[o];s>i;i+=5)n=52200625*(e[c](i)-33)+614125*(e[c](i+1)-33)+7225*(e[c](i+2)-33)+85*(e[c](i+3)-33)+(e[c](i+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),a.fromCharCode.apply(a,r)},r=function(e){return e.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},s=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=_R(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,a){var o=0,l=e||"",c=[];for("string"==typeof(a=a||[])&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(NU.API),(Fz=NU.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,i=0,s=function(e){var t=e.length,n=[],r=String.fromCharCode;for(i=0;i<t;i+=1)n.push(r(255&e.charCodeAt(i)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(s(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return s(r.responseText)}(e,t,n)}catch(QO){}return r}(e,t,n)},Fz.loadImageFile=Fz.loadFile,function(e){function t(){return(XB.html2canvas?Promise.resolve(XB.html2canvas):n.e(239).then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function r(){return(XB.DOMPurify?Promise.resolve(XB.DOMPurify):n.e(977).then(n.bind(n,7977))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var i=function(e){var t=(0,jO.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},s=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},a=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(i(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.then(r).then(function(t){return this.set({src:s("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var s=0;s<n.length;++s){var a=n[s],o=a.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,a.ref.name,a.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==i(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},o.prototype.setMargin=function(e){return this.then(function(){switch(i(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||NU.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var i=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?r:o.convert(Object.assign({},r),Promise.prototype),s=n.call(i,e,t);return o.convert(s,r.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,NU.getPageSize=function(e,t,n){if("object"===(0,jO.A)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i,s=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(a.hasOwnProperty(s))l=a[s][1]/i,c=a[s][0]/i;else try{l=n[1],c=n[0]}catch(nU){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:i,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(xz):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(NU.API),NU.API.addJS=function(e){return Pz=e,this.internal.events.subscribe("postPutResources",function(){Iz=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Iz+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Cz=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Pz+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Iz&&void 0!==Cz&&this.internal.out("/Names <</JavaScript "+Iz+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),i=0;i<r.length;i++){var s=r[i],a=n.exec(s);if(null!=a){var o=a[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(i=0;i<l;i++){var u=e.internal.newObject();c.push(u);var h=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var d=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<c.length;i++)e.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+d+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var i=t.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var s=this.count=this.count_r({count:0},i);if(s>0&&this.line("/Count "+s),i.options&&i.options.pageNumber){var a=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(NU.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,i,s,a){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,s={width:0,height:0,numcomponents:1},a=4;a<i;a+=2){if(a+=r,-1!==t.indexOf(e.charCodeAt(a+1))){n=256*e.charCodeAt(a+5)+e.charCodeAt(a+6),s={width:256*e.charCodeAt(a+7)+e.charCodeAt(a+8),height:n,numcomponents:e.charCodeAt(a+9)};break}r=256*e.charCodeAt(a+2)+e.charCodeAt(a+3)}return s}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),o.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:a,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(NU.API),NU.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,s=new KB(e,{checkCrc:!0}).decode(),a=s.width,o=s.height,l=s.channels,c=s.palette,u=s.depth;i=c&&1===l?function(e){for(var t=e.width,n=e.height,r=e.data,i=e.palette,s=e.depth,a=!1,o=[],l=[],c=void 0,u=!1,h=0,d=0;d<i.length;d++){var f=TR(i[d],4),p=f[0],m=f[1],g=f[2],v=f[3];o.push(p,m,g),null!=v&&(0===v?(h++,l.length<1&&l.push(d)):v<255&&(u=!0))}if(u||h>1){a=!0,l=void 0;var b=t*n;c=new Uint8Array(b);for(var y=new DataView(r.buffer),w=0;w<b;w++){var x=TR(i[Kz(y,w,s)],4)[3];c[w]=x}}else 0===h&&(l=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:a?8:void 0,colorBytes:r,alphaBytes:c,needSMask:a,palette:o,mask:l}}(s):2===l||4===l?function(e){for(var t=e.data,n=e.width,r=e.height,i=e.channels,s=e.depth,a=2===i?"DeviceGray":"DeviceRGB",o=i-1,l=n*r,c=o,u=l*c,h=1*l,d=Math.ceil(u*s/8),f=Math.ceil(h*s/8),p=new Uint8Array(d),m=new Uint8Array(f),g=new DataView(t.buffer),v=new DataView(p.buffer),b=new DataView(m.buffer),y=!1,w=0;w<l;w++){for(var x=w*i,_=0;_<c;_++)Yz(v,Kz(g,x+_,s),w*c+_,s);var S=Kz(g,x+c,s);S<(1<<s)-1&&(y=!0),Yz(b,S,1*w,s)}return{colorSpace:a,colorsPerPixel:o,sMaskBitsPerComponent:y?s:void 0,colorBytes:p,alphaBytes:m,needSMask:y}}(s):function(e){var t=e.data,n=1===e.channels?"DeviceGray":"DeviceRGB";return{colorSpace:n,colorsPerPixel:"DeviceGray"===n?1:3,colorBytes:t instanceof Uint16Array?function(e){for(var t=e.length,n=new Uint8Array(2*t),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0;i<t;i++)r.setUint16(2*i,e[i],!1);return n}(t):t,needSMask:!1}}(s);var h,d,f,p=i,m=p.colorSpace,g=p.colorsPerPixel,v=p.sMaskBitsPerComponent,b=p.colorBytes,y=p.alphaBytes,w=p.needSMask,x=p.palette,_=p.mask,S=null;return r!==NU.API.image_compression.NONE?(S=function(e){var t;switch(e){case NU.API.image_compression.FAST:t=11;break;case NU.API.image_compression.MEDIUM:t=13;break;case NU.API.image_compression.SLOW:t=14;break;default:t=12}return t}(r),h=this.decode.FLATE_DECODE,d="/Predictor ".concat(S," /Colors ").concat(g," /BitsPerComponent ").concat(u," /Columns ").concat(a),e=Bz(b,Math.ceil(a*g*u/8),g,u,r),w&&(f=Bz(y,Math.ceil(a*v/8),1,v,r))):(h=void 0,d=void 0,e=b,w&&(f=y)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:n,data:e,index:t,filter:h,decodeParameters:d,transparency:_,palette:x,sMask:f,predictor:S,width:a,height:o,bitsPerComponent:u,sMaskBitsPerComponent:v,colorSpace:m}}},function(e){e.processGIF89A=function(t,n,r,i){var s=new $z(t),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new Qz(100).encode(c,100);return e.processJPEG.call(this,u,n,r,i)},e.processGIF87A=e.processGIF89A}(NU.API),Zz.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zz.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){JB.log("bit decode error:"+n)}},Zz.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}0!==n&&(this.pos+=4-n)}},Zz.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}0!==t&&(this.pos+=4-t)}},Zz.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},Zz.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},Zz.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},Zz.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Zz.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},Zz.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new Zz(t,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new Qz(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(NU.API),eV.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new eV(t),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new Qz(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(NU.API),NU.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var u=r[c],h=r[c+1],d=r[c+2],f=r[c+3];s[o++]=u,s[o++]=h,s[o++]=d,a[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},NU.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Lz=NU.API,Dz=Lz.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=!1!==t.doKerning,d=0,f=e.length,p=0,m=o[0]||l,g=[];for(n=0;n<f;n++)r=e.charCodeAt(n),"function"==typeof i.metadata.widthOfString?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(d=h&&"object"===(0,jO.A)(c[r])&&!isNaN(parseInt(c[r][p],10))?c[r][p]/u:0,g.push((o[r]||m)/l+d)),p=r;return g},Oz=Lz.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Lz.processArabic&&(e=Lz.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,i)/n:Dz.apply(this,arguments).reduce(function(e,t){return e+t},0)},Rz=function(e,t,n,r){for(var i=[],s=0,a=e.length,o=0;s!==a&&o+t[s]<n;)o+=t[s],s++;i.push(e.slice(0,s));var l=s;for(o=0;s!==a;)o+t[s]>r&&(i.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&i.push(e.slice(l,s)),i},Mz=function(e,t,n){n||(n={});var r,i,s,a,o,l,c,u=[],h=[u],d=n.textIndent||0,f=0,p=0,m=e.split(" "),g=Dz.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?m[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),b=[];m.map(function(e){(e=e.split(/\s*\n/)).length>1?b=b.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):b.push(e[0])}),m=b,l=Oz.apply(this,[v,n])}for(s=0,a=m.length;s<a;s++){var y=0;if(r=m[s],l&&"\n"==r[0]&&(r=r.substr(1),y=1),d+f+(p=(i=Dz.apply(this,[r,n])).reduce(function(e,t){return e+t},0))>t||y){if(p>t){for(o=Rz.apply(this,[r,i,t-(d+f),t]),u.push(o.shift()),u=[o.pop()];o.length;)h.push([o.shift()]);p=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(e,t){return e+t},0)}else u=[r];h.push(u),d=p+l,f=g}else u.push(r),d+=f+p,f=g}return c=l?function(e,t){return(t?v:"")+e.join(" ")}:function(e){return e.join(" ")},h.map(c)},Lz.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),n="Unicode";return t.metadata[n]?{widths:t.metadata[n].widths||{0:1},kerning:t.metadata[n].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(Mz.apply(this,[r[o],a,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=t[s],i[t[s]]=n[s];var a=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,n,r,s,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=a(c).slice(2)).slice(0,-1)+i[n.slice(-1)]),"number"==typeof t)t<0?(r=a(t).slice(3),s="-"):(r=a(t).slice(2),s=""),r=s+r.slice(0,-1)+i[r.slice(-1)];else{if("object"!==(0,jO.A)(t))throw new Error("Don't know what to do with value type "+(0,jO.A)(t)+".");r=o(t)}l.push(n+r)}return l.push("}"),l.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,n,i,s,a={},o=1,l=a,c=[],u="",h="",d=e.length-1,f=1;f<d;f+=1)"'"==(s=e[f])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(s):"{"==s?(c.push([l,i]),l={},i=void 0):"}"==s?((n=c.pop())[0][n[1]]=l,i=void 0,l=n[0]):"-"==s?o=-1:void 0===i?r.hasOwnProperty(s)?(u+=r[s],i=parseInt(u,16)*o,o=1,u=""):u+=s:r.hasOwnProperty(s)?(h+=r[s],l[i]=parseInt(h,16)*o,o=1,i=void 0,h=""):h+=s;return a},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},h={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=h.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=u.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(NU.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===s.existsFileInVFS(i.postScriptName)?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(rU(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(NU),NU.API.addSvgAsImage=function(e,t,r,i,s,a,o,l){if(isNaN(t)||isNaN(r))throw JB.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(s))throw JB.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=s;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(XB.canvg?Promise.resolve(XB.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(u,e,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(h)}).then(function(){d.addImage(c.toDataURL("image/jpeg",1),t,r,i,s,o,l)})},NU.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},NU.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,u=0,h=0;function d(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var f=o.length;for(h=0;h<f;h+=1)n[o[h]].value=n[o[h]].defaultValue,n[o[h]].explicitSet=!1}if("object"===(0,jO.A)(e))for(i in e)if(s=e[i],d(o,i)&&void 0!==s){if("boolean"===n[i].type&&"boolean"==typeof s)n[i].value=s;else if("name"===n[i].type&&d(n[i].valueSet,s))n[i].value=s;else if("integer"===n[i].type&&Number.isInteger(s))n[i].value=s;else if("array"===n[i].type){for(c=0;c<s.length;c+=1)if(r=!0,1===s[c].length&&"number"==typeof s[c][0])l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)"number"!=typeof s[c][u]&&(r=!1);!0===r&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+r.length+i.length+t.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+i+s),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(NU.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,i=["","0","00","000","0000"],s=[""],a=0,o=e.length;a<o;++a){if(n=t.metadata.characterToGlyph(e.charCodeAt(a)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(a),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(i[4-n.length],n)}return s.join("")},r=function(e){var t,n,r,i,s,a,o;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,o=(n=Object.keys(e).sort(function(e,t){return e-t})).length;a<o;a++)t=n[a],r.length>=100&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+i+">"));return r.length&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,s=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var h=s();a({data:c,addLength1:!0,objectId:h}),i("endobj");var d=s();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),i("endobj");var f=s();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+_U(n.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var p=s();i("<<"),i("/Type /Font"),i("/BaseFont /"+_U(n.fontName)),i("/FontDescriptor "+f+" 0 R"),i("/W "+e.API.PDFObject.convert(o)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=s(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+d+" 0 R"),i("/BaseFont /"+_U(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+p+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,s=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var u=s();a({data:l,addLength1:!0,objectId:u}),i("endobj");var h=s();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var d=s();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+u+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+_U(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=s();for(var f=0;f<n.metadata.hmtx.widths.length;f++)n.metadata.hmtx.widths[f]=parseInt(n.metadata.hmtx.widths[f]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+_U(n.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,r=e.text||"",i=e.x,s=e.y,a=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,u=o.fonts,h=c,d="",f=0,p="",m=u[h].encoding;if("Identity-H"!==u[h].encoding)return{text:r,x:i,y:s,options:a,mutex:o};for(p=r,h=c,Array.isArray(r)&&(p=r[0]),f=0;f<p.length;f+=1)u[h].metadata.hasOwnProperty("cmap")&&(t=u[h].metadata.cmap.unicode.codeMap[p[f].charCodeAt(0)]),t||p[f].charCodeAt(0)<256&&u[h].metadata.hasOwnProperty("Unicode")?d+=p[f]:d+="";var g="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===m?g=l(d,h).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===m&&(g=n(d,u[h])),o.isHex=!0,{text:g,x:i,y:s,options:a,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var s=0;for(s=0;s<t.length;s+=1)Array.isArray(t[s])&&3===t[s].length?n.push([i(Object.assign({},r,{text:t[s][0]})).text,t[s][1],t[s][2]]):n.push(i(Object.assign({},r,{text:t[s]})).text);e.text=n}else e.text=i(Object.assign({},r,{text:t})).text}])}(NU),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(NU.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,i,s,a,o,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var b=function(e){var t=e.charCodeAt(),n=t>>8,r=f[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":m.test(n)?"L":8===n?"R":"N"},y=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=b(e.charAt(n))))return!1;if("R"===t)return!0}return!1},w=function(e,t,a,o){var l,c,u,h,d=t[o];switch(d){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(d="AN");break;case"AL":g=!0,d="R";break;case"WS":case"BN":d="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=a[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?d="N":g&&(c="AN"),d=c===l?c:"N";break;case"ES":d="EN"===(l=o>0?a[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===a[o-1]){d="EN";break}if(g){d="N";break}for(u=o+1,h=t.length;u<h&&"ET"===t[u];)u++;d=u<h&&"EN"===t[u]?"EN":"N";break;case"NSM":if(i&&!s){for(h=t.length,u=o+1;u<h&&"NSM"===t[u];)u++;if(u<h){var f=e[o],p=f>=1425&&f<=2303||64286===f;if(l=t[u],p&&("R"===l||"AL"===l)){d="R";break}}}d=o<1||"B"===(l=t[o-1])?"N":a[o-1];break;case"B":g=!1,n=!0,d=v;break;case"S":r=!0,d="N"}return d},x=function(e,t,n){var r=e.split("");return n&&_(r,n,{hiLevel:v}),r.reverse(),t&&t.reverse(),r.join("")},_=function(e,t,i){var s,a,o,l,c,f=-1,p=e.length,m=0,y=[],x=v?h:u,_=[];for(g=!1,n=!1,r=!1,a=0;a<p;a++)_[a]=b(e[a]);for(o=0;o<p;o++){if(c=m,y[o]=w(e,_,y,o),s=240&(m=x[c][d[y[o]]]),m&=15,t[o]=l=x[m][5],s>0)if(16===s){for(a=f;a<o;a++)t[a]=1;f=-1}else f=-1;if(x[m][6])-1===f&&(f=o);else if(f>-1){for(a=f;a<o;a++)t[a]=l;f=-1}"B"===_[o]&&(t[o]=0),i.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=v;for(var i=r-1;i>=0&&"WS"===e[i];i--)t[i]=v}}(_,t,p)},S=function(e,t,r,i,s){if(!(s.hiLevel<e)){if(1===e&&1===v&&!n)return t.reverse(),void(r&&r.reverse());for(var a,o,l,c,u=t.length,h=0;h<u;){if(i[h]>=e){for(l=h+1;l<u&&i[l]>=e;)l++;for(c=h,o=l-1;c<o;c++,o--)a=t[c],t[c]=t[o],t[o]=a,r&&(a=r[c],r[c]=r[o],r[o]=a);h=l}h++}}},k=function(e,t,n){var r=e.split(""),i={hiLevel:v};return n||(n=[]),_(r,n,i),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<e.length;i++)1===t[i]&&(r=p.indexOf(e[i]))>=0&&(e[i]=p[r+1])}(r,n,i),S(2,r,t,n,i),S(1,r,t,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===s&&(s=y(e)),void 0===o&&(o=y(e))}(e,t),i||!a||o)if(i&&a&&s^o)v=s?1:0,e=x(e,t,n);else if(!i&&a&&o)v=s?1:0,e=k(e,t,n),e=x(e,t);else if(!i||s||a||o){if(i&&!a&&s^o)e=x(e,t),s?(v=0,e=k(e,t,n)):(v=1,e=k(e,t,n),e=x(e,t));else if(i&&s&&!a&&o)v=1,e=k(e,t,n),e=x(e,t);else if(!i&&!a&&s^o){var r=l;s?(v=1,e=k(e,t,n),v=0,l=!1,e=k(e,t,n),l=r):(v=0,e=k(e,t,n),e=x(e,t),v=1,l=!1,e=k(e,t,n),l=r,e=x(e,t))}}else v=0,e=k(e,t,n);else v=s?1:0,e=k(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,a=e.isOutputVisual,s=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var i=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var s=0;for(i=[],s=0;s<t.length;s+=1)"[object Array]"===Object.prototype.toString.call(t[s])?i.push([n.doBidiReorder(t[s][0]),t[s][1],t[s][2]]):i.push([n.doBidiReorder(t[s])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(NU),NU.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new nV(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new xV(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new rV(this.contents),this.head=new aV(this),this.name=new fV(this),this.cmap=new lV(this),this.toUnicode={},this.hhea=new cV(this),this.maxp=new pV(this),this.hmtx=new mV(this),this.post=new hV(this),this.os2=new uV(this),this.loca=new wV(this),this.glyf=new vV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,i;for(i=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,i,s,a;for(s=0,i=0,a=(e=""+e).length;0<=a?i<a:i>a;i=0<=a?++i:--i)r=e.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var tV,nV=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,i,s,a,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^s)+256*(255^a)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*i+65536*s+256*a+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),rV=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,i,s,a,o,l,c,u,h,d,f,p;for(p in d=Object.keys(t).length,o=Math.log(2),u=16*Math.floor(Math.log(d)/o),s=Math.floor(u/o),c=16*d-u,(r=new nV).writeInt(this.scalarType),r.writeShort(d),r.writeShort(u),r.writeShort(s),r.writeShort(c),i=16*d,l=r.pos+i,a=null,f=[],t)for(h=t[p],r.writeString(p),r.writeInt(e(h)),r.writeInt(l),r.writeInt(h.length),f=f.concat(h),"head"===p&&(a=l),l+=h.length;l%4;)f.push(0),l++;return r.write(f),n=2981146554-e(r.data),r.pos=a+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,i;for(e=gV.call(e);e.length%4;)e.push(0);for(r=new nV(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),iV={}.hasOwnProperty,sV=function(e,t){for(var n in t)iV.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};tV=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var aV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new nV).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),oV=function(){function e(e,t){var n,r,i,s,a,o,l,c,u,h,d,f,p,m,g,v,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(d=e.readUInt16(),h=d/2,e.pos+=6,i=function(){var t,n;for(n=[],o=t=0;0<=h?t<h:t>h;o=0<=h?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],o=t=0;0<=h?t<h:t>h;o=0<=h?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=h?t<h:t>h;o=0<=h?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=h?t<h:t>h;o=0<=h?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,a=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=g=0,b=i.length;g<b;o=++g)for(m=i[o],n=v=f=p[o];f<=m?v<=m:v>=m;n=f<=m?++v:--v)0===c[o]?s=n+l[o]:0!==(s=a[c[o]/2+(n-f)-(h-o)]||0)&&(s+=l[o]),this.codeMap[n]=65535&s}e.pos=u}return e.encode=function(e,t){var n,r,i,s,a,o,l,c,u,h,d,f,p,m,g,v,b,y,w,x,_,S,k,T,E,A,N,I,C,P,L,D,O,R,M,F,j,B,U,z,V,q,W,H,G,K;switch(I=new nV,s=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,m=function(){var e=[];for(f=0;f<256;++f)e.push(0);return e}(),v={0:0},i={},C=0,O=s.length;C<O;C++)null==v[W=e[r=s[C]]]&&(v[W]=++p),i[r]={old:e[r],new:v[e[r]]},m[r]=v[e[r]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(m),{charMap:i,subtable:I.data,maxGlyphID:p+1};case"unicode":for(A=[],u=[],b=0,v={},n={},g=l=null,P=0,R=s.length;P<R;P++)null==v[w=e[r=s[P]]]&&(v[w]=++b),n[r]={old:w,new:v[w]},a=v[w]-r,null!=g&&a===l||(g&&u.push(g),A.push(r),l=a),g=r;for(g&&u.push(g),u.push(65535),A.push(65535),T=2*(k=A.length),S=2*Math.pow(Math.log(k)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,_=2*k-S,o=[],x=[],d=[],f=L=0,M=A.length;L<M;f=++L){if(E=A[f],c=u[f],65535===E){o.push(0),x.push(0);break}if(E-(N=n[E].new)>=32768)for(o.push(0),x.push(2*(d.length+k-f)),r=D=E;E<=c?D<=c:D>=c;r=E<=c?++D:--D)d.push(n[r].new);else o.push(N-E),x.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*k+2*d.length),I.writeUInt16(0),I.writeUInt16(T),I.writeUInt16(S),I.writeUInt16(h),I.writeUInt16(_),V=0,F=u.length;V<F;V++)r=u[V],I.writeUInt16(r);for(I.writeUInt16(0),q=0,j=A.length;q<j;q++)r=A[q],I.writeUInt16(r);for(H=0,B=o.length;H<B;H++)a=o[H],I.writeUInt16(a);for(G=0,U=x.length;G<U;G++)y=x[G],I.writeUInt16(y);for(K=0,z=d.length;K<z;K++)p=d[K],I.writeUInt16(p);return{charMap:n,subtable:I.data,maxGlyphID:b+1}}},e}(),lV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new oV(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=oV.encode(e,t),(r=new nV).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),cV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),uV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),hV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),dV=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},fV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,i,s,a,o,l,c,u,h;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(o={},i=c=0,u=n.length;c<u;i=++c)r=n[i],e.pos=r.offset,l=e.readString(r.length),s=new dV(l,r),null==o[h=r.nameID]&&(o[h]=[]),o[r.nameID].push(s);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(rU){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),pV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),mV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,i,s,a,o;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=s=0;0<=r?s<r:s>r;t=0<=r?++s:--s)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),gV=[].slice,vV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,i,s,a,o,l,c,u;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(r=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,s=(a=new nV(t.read(r))).readShort(),l=a.readShort(),u=a.readShort(),o=a.readShort(),c=a.readShort(),this.cache[e]=-1===s?new yV(a,l,u,o,c):new bV(a,s,l,u,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,i,s,a,o;for(s=[],i=[],a=0,o=t.length;a<o;a++)r=e[t[a]],i.push(s.length),r&&(s=s.concat(r.encode(n)));return i.push(s.length),{table:s,offsets:i}},e}(),bV=function(){function e(e,t,n,r,i,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),yV=function(){function e(e,t,n,r,i){var s,a;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new nV(gV.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),wV=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return sV(e,tV),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,s=0;s<n.length;++s)if(n[s]=r,i<t.length&&t[i]==s){++i,n[s]=r;var a=this.offsets[s],o=this.offsets[s+1]-a;o>0&&(r+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),xV=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,i,s,a,o;for(r={},s=0,a=e.length;s<a;s++)r[i=e[s]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(null!=(n=r[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in o=this.glyphsFor(t))n=o[i],r[i]=n;return r},e.prototype.encode=function(e,t){var n,r,i,s,a,o,l,c,u,h,d,f,p,m,g;for(r in n=lV.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),d={0:0},g=n.charMap)d[(o=g[r]).old]=o.new;for(f in h=n.maxGlyphID,s)f in d||(d[f]=h++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(d),u=Object.keys(c).sort(function(e,t){return e-t}),p=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)a=u[e],n.push(c[a]);return n}(),i=this.font.glyf.encode(s,p,d),l=this.font.loca.encode(i.offsets,p),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();NU.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var e,i,s;for(s=[],e=0,i=n.length;e<i;e++)r=n[e],s.push(t.convert(r));return s}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join("\n")}return""+n},t}();const _V=(e,t)=>{const n=e.map(e=>({Fecha:e.fecha,Tipo:e.tipo,"Categor\xeda":e.categoria,"Descripci\xf3n":e.descripcion,Monto:e.monto,Moneda:e.moneda,Cuenta:e.cuenta,Usuario:e.creadoPor})),r=FO.json_to_sheet(n),i=FO.book_new();FO.book_append_sheet(i,r,"Transacciones"),function(e,t,n){var r=n||{};r.type="file",r.file=t,TO(r),kO(e,r)}(i,"contabilidad_".concat(t,"_").concat((new Date).toISOString().split("T")[0],".xlsx"))},SV=e=>{let{usuario:t,balance:n,temaActual:r,setMostrarForm:i,transacciones:s}=e;const a=r||{tarjeta:"bg-white/10",texto:"text-white",boton:"bg-purple-600 hover:bg-purple-700"};return(0,e_.jsx)("div",{className:"".concat(a.tarjeta," backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20"),children:(0,e_.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\ud83d\udcb0 Sistema Premium"}),(0,e_.jsxs)("p",{className:"text-sm opacity-75",children:["\ud83d\udc64 ",t.email]}),(0,e_.jsx)("p",{className:"text-xs opacity-50 mt-1",children:"Mis datos personales"}),(0,e_.jsxs)("p",{className:"text-2xl mt-2 font-bold text-green-400",children:["$",n.usd.toFixed(2)," USD"]})]}),(0,e_.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,e_.jsx)("button",{onClick:()=>i(!0),className:"".concat(a.boton," text-white px-4 py-2 rounded-lg font-semibold"),children:"+ Nueva"}),(0,e_.jsx)("button",{onClick:()=>_V(s,t.email),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83d\udcca Excel"}),(0,e_.jsx)("button",{onClick:()=>((e,t)=>{const n=new NU;n.setFontSize(16),n.text("Reporte de ".concat(t),20,20),n.setFontSize(10);let r=40;e.slice(0,30).forEach(e=>{n.text("".concat(e.fecha," - ").concat(e.tipo," - ").concat(e.descripcion," - ").concat(e.monto," ").concat(e.moneda),20,r),r+=7,r>280&&(n.addPage(),r=20)}),n.save("reporte_".concat(t,"_").concat((new Date).toISOString().split("T")[0],".pdf"))})(s,t.email),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83d\udcc4 PDF"}),(0,e_.jsx)("button",{onClick:()=>{jx.signOut()},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg",children:"Salir"})]})]})})},kV=e=>{let{vista:t,setVista:n,temaActual:r}=e;return(0,e_.jsx)("div",{className:"flex gap-2 mb-6 flex-wrap",children:[{id:"dashboard",label:"Dashboard"},{id:"transacciones",label:"Transacciones"},{id:"porCobrar",label:"Por Cobrar"},{id:"ventas",label:"Ventas"},{id:"gastos",label:"Gastos"},{id:"cambios",label:"cambios"},{id:"graficos",label:"Graficos"},{id:"calendario",label:"Calendario"},{id:"tasas",label:"Tasas"},{id:"temas",label:"Temas"}].map(e=>(0,e_.jsx)("button",{onClick:()=>n(e.id),className:"px-4 py-2 rounded-lg ".concat(t===e.id?r.boton:"bg-white/10"," text-white transition-colors"),children:e.label},e.id))})},TV=e=>{let{formCompra:t,setFormCompra:n,tasaVenta:r}=e;return(0,e_.jsxs)("div",{className:"space-y-4",children:[(0,e_.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Fecha"}),(0,e_.jsx)("input",{type:"date",value:t.fecha,onChange:e=>n(l(l({},t),{},{fecha:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",required:!0})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Hora"}),(0,e_.jsx)("input",{type:"time",value:t.hora,onChange:e=>n(l(l({},t),{},{hora:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",required:!0})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Status"}),(0,e_.jsxs)("select",{value:t.status,onChange:e=>n(l(l({},t),{},{status:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",children:[(0,e_.jsx)("option",{children:"Pagado"}),(0,e_.jsx)("option",{children:"Por Cobrar"})]})]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Cliente"}),(0,e_.jsx)("input",{value:t.cliente,onChange:e=>n(l(l({},t),{},{cliente:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",placeholder:"Nombre del cliente",required:!0})]}),(0,e_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Compra Bs"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:t.compraBs,onChange:e=>n(l(l({},t),{},{compraBs:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",placeholder:"0.00",required:!0})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Comisi\xf3n Banco (0.3%)"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:t.comisionBanco.toFixed(2),className:"w-full bg-slate-600 rounded px-4 py-2 text-gray-400",disabled:!0})]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"TASA (Precio de Compra)"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:t.tasa,onChange:e=>n(l(l({},t),{},{tasa:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",placeholder:"36.50",required:!0})]}),(0,e_.jsxs)("div",{className:"bg-blue-500/20 border border-blue-500 rounded-lg p-4",children:[(0,e_.jsx)("p",{className:"text-sm text-blue-200 mb-1",children:"COMPRA $ (Calculado)"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold text-blue-400",children:["$",t.compraDolar.toFixed(2)]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Operador (Opcional)"}),(0,e_.jsx)("input",{value:t.operador,onChange:e=>n(l(l({},t),{},{operador:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",placeholder:"Rafael Rosas"}),(0,e_.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Deja en blanco o cambia seg\xfan el operador"})]}),(0,e_.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 space-y-2",children:[(0,e_.jsxs)("div",{className:"flex justify-between",children:[(0,e_.jsx)("span",{className:"text-white",children:"Tasa de Venta:"}),(0,e_.jsxs)("span",{className:"font-bold text-green-400",children:[r.toFixed(2)," Bs"]})]}),(0,e_.jsxs)("div",{className:"flex justify-between",children:[(0,e_.jsx)("span",{className:"text-white",children:"Ganancia en Bs:"}),(0,e_.jsxs)("span",{className:"font-bold text-green-400",children:[t.gananciaBs.toFixed(2)," Bs"]})]}),(0,e_.jsxs)("div",{className:"flex justify-between",children:[(0,e_.jsx)("span",{className:"text-white",children:"Ganancia en $:"}),(0,e_.jsxs)("span",{className:"font-bold text-green-400",children:["$",t.gananciaDolar.toFixed(2)]})]})]})]})},EV=jt.firestore(),AV=e=>((e,t)=>{const n=new Date(e),r=new Date(t),i=Math.abs(r-n);return Math.ceil(i/864e5)})(e,(new Date).toISOString().split("T")[0])>1,NV=async(e,t)=>{const n=e===(new Date).toISOString().split("T")[0],r=await(async(e,t)=>{try{const n=await EV.collection("transacciones").where("usuarioId","==",t).where("tipo","==","Venta").where("fecha","==",e).orderBy("hora","desc").limit(1).get();if(!n.empty){const t=n.docs[0].data();return{tasa:t.tasaVenta,fecha:t.fecha,hora:t.hora,existe:!0,esHoy:e===(new Date).toISOString().split("T")[0]}}return null}catch(O$){return console.error("Error al obtener tasa de venta:",O$),null}})(e,t);if(r)return{tasa:r.tasa,fecha:r.fecha,hora:r.hora,estado:"encontrada",mensaje:"Tasa encontrada para ".concat(e),requiereActualizacion:!1};if(n){const e=await(async e=>{try{const t=await EV.collection("transacciones").where("usuarioId","==",e).where("tipo","==","Venta").orderBy("fecha","desc").orderBy("hora","desc").limit(1).get();if(!t.empty){const e=t.docs[0].data();return{tasa:e.tasaVenta,fecha:e.fecha,hora:e.hora,existe:!0}}return null}catch(O$){return console.error("Error al obtener \xfaltima tasa:",O$),null}})(t);if(e){return AV(e.fecha)?{tasa:null,fecha:e.fecha,hora:e.hora,estado:"desactualizada",mensaje:"La \xfaltima tasa es del ".concat(e.fecha,". Debe registrar una venta hoy para actualizar la tasa."),requiereActualizacion:!0,ultimaTasa:e.tasa}:{tasa:e.tasa,fecha:e.fecha,hora:e.hora,estado:"reciente",mensaje:"Usando tasa del ".concat(e.fecha),requiereActualizacion:!1}}return{tasa:null,fecha:null,hora:null,estado:"sin_tasa",mensaje:"No hay tasas de venta registradas. Debe registrar una venta primero.",requiereActualizacion:!0}}return{tasa:null,fecha:null,hora:null,estado:"fecha_sin_tasa",mensaje:"No hay tasa de venta registrada para ".concat(e,". Debe ingresar la tasa manualmente."),requiereActualizacion:!1,requiereInput:!0}},IV=e=>{var t,n;let{formGasto:r,setFormGasto:s,usuario:a,onSolicitarVenta:o}=e;const[c,u]=(0,i.useState)(null),[h,d]=(0,i.useState)(!1),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if(!r.fecha||!a)return;d(!0);const e=await NV(r.fecha,a.uid);u(e),d(!1),e.requiereInput?(g(!0),p("")):e.tasa&&(g(!1),v(e.tasa))})()},[r.fecha,a]),(0,i.useEffect)(()=>{m&&f?v(parseFloat(f)):null!==c&&void 0!==c&&c.tasa&&v(c.tasa)},[r.fecha,a,v,c]);const v=e=>{const t=parseFloat(r.monto)||0;let n=0;n="Bs"===r.moneda?e>0?t/e:0:t,s(t=>l(l({},t),{},{gastoDolar:n,tasaUsada:e}))},b=()=>{o&&o()};return(0,e_.jsxs)("div",{className:"space-y-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Fecha"}),(0,e_.jsx)("input",{type:"date",value:r.fecha,onChange:e=>s(l(l({},r),{},{fecha:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",required:!0})]}),h?(0,e_.jsx)("div",{className:"bg-blue-500/20 border border-blue-500 rounded-lg p-4",children:(0,e_.jsx)("p",{className:"text-blue-300 text-sm",children:"\u23f3 Buscando tasa de venta..."})}):c&&(0,e_.jsxs)("div",{children:["encontrada"===c.estado&&(0,e_.jsxs)("div",{className:"bg-green-500/20 border border-green-500 rounded-lg p-4",children:[(0,e_.jsx)("p",{className:"text-green-300 text-sm font-semibold mb-2",children:"\u2705 Tasa de venta encontrada"}),(0,e_.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,e_.jsxs)("p",{className:"text-white",children:["Tasa: ",(0,e_.jsxs)("span",{className:"font-bold text-green-400",children:[c.tasa," Bs"]})]}),(0,e_.jsxs)("p",{className:"text-white",children:["Fecha: ",c.fecha," | Hora: ",c.hora]})]})]}),"reciente"===c.estado&&(0,e_.jsxs)("div",{className:"bg-blue-500/20 border border-blue-500 rounded-lg p-4",children:[(0,e_.jsx)("p",{className:"text-blue-300 text-sm font-semibold mb-2",children:"\u2139\ufe0f Usando \xfaltima tasa disponible"}),(0,e_.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,e_.jsxs)("p",{className:"text-white",children:["Tasa: ",(0,e_.jsxs)("span",{className:"font-bold text-blue-400",children:[c.tasa," Bs"]})]}),(0,e_.jsxs)("p",{className:"text-white",children:["Actualizada: ",c.fecha," a las ",c.hora]}),(0,e_.jsx)("p",{className:"text-yellow-300 text-xs mt-2",children:"\ud83d\udca1 Esta tasa es del \xfaltimo d\xeda registrado"})]})]}),"desactualizada"===c.estado&&(0,e_.jsxs)("div",{className:"bg-orange-500/20 border border-orange-500 rounded-lg p-4",children:[(0,e_.jsx)("p",{className:"text-orange-300 text-sm font-semibold mb-2",children:"\u26a0\ufe0f Tasa desactualizada"}),(0,e_.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,e_.jsx)("p",{className:"text-white",children:c.mensaje}),(0,e_.jsxs)("p",{className:"text-white",children:["\xdaltima tasa: ",(0,e_.jsxs)("span",{className:"font-bold",children:[c.ultimaTasa," Bs"]})," (",c.fecha,")"]}),(0,e_.jsx)("button",{type:"button",onClick:b,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg font-semibold mt-2",children:"\ud83d\udcc8 Registrar Venta para Actualizar Tasa"})]})]}),"sin_tasa"===c.estado&&(0,e_.jsxs)("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4",children:[(0,e_.jsx)("p",{className:"text-red-300 text-sm font-semibold mb-2",children:"\u274c Sin tasa de venta"}),(0,e_.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,e_.jsx)("p",{className:"text-white",children:c.mensaje}),(0,e_.jsx)("button",{type:"button",onClick:b,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-semibold mt-2",children:"\ud83d\udcc8 Registrar Primera Venta"})]})]}),"fecha_sin_tasa"===c.estado&&(0,e_.jsxs)("div",{className:"bg-yellow-500/20 border border-yellow-500 rounded-lg p-4",children:[(0,e_.jsx)("p",{className:"text-yellow-300 text-sm font-semibold mb-2",children:"\ud83d\udcc5 Fecha sin tasa registrada"}),(0,e_.jsx)("p",{className:"text-white text-sm mb-3",children:c.mensaje}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Ingrese la tasa de venta de ese d\xeda:"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:f,onChange:e=>p(e.target.value),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",placeholder:"Ej: 36.50",required:!0}),(0,e_.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Esta tasa se usar\xe1 para calcular el gasto en d\xf3lares"})]})]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Descripci\xf3n"}),(0,e_.jsx)("textarea",{value:r.descripcion,onChange:e=>s(l(l({},r),{},{descripcion:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white resize-none",placeholder:"Breve descripci\xf3n del gasto",rows:"3",required:!0})]}),(0,e_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Categor\xeda"}),(0,e_.jsxs)("select",{value:r.categoria,onChange:e=>s(l(l({},r),{},{categoria:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",children:[(0,e_.jsx)("option",{children:"Varios"}),(0,e_.jsx)("option",{children:"Escuela"}),(0,e_.jsx)("option",{children:"Servicios"}),(0,e_.jsx)("option",{children:"Rafael"}),(0,e_.jsx)("option",{children:"Emilys"}),(0,e_.jsx)("option",{children:"Casa"}),(0,e_.jsx)("option",{children:"Carro"}),(0,e_.jsx)("option",{children:"Prestamos"}),(0,e_.jsx)("option",{children:"Remesas"}),(0,e_.jsx)("option",{children:"Pasajes"})]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Cuenta"}),(0,e_.jsxs)("select",{value:r.cuenta,onChange:e=>s(l(l({},r),{},{cuenta:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",children:[(0,e_.jsx)("option",{children:"Provincial"}),(0,e_.jsx)("option",{children:"Venezuela"}),(0,e_.jsx)("option",{children:"USD"}),(0,e_.jsx)("option",{children:"Binance"})]})]})]}),(0,e_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Moneda"}),(0,e_.jsxs)("select",{value:r.moneda,onChange:e=>s(l(l({},r),{},{moneda:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",children:[(0,e_.jsx)("option",{children:"Bs"}),(0,e_.jsx)("option",{children:"USD"}),(0,e_.jsx)("option",{children:"USDT"})]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Monto"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:r.monto,onChange:e=>s(l(l({},r),{},{monto:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white text-lg font-semibold",placeholder:"0.00",required:!0,disabled:null===c||void 0===c?void 0:c.requiereActualizacion})]})]}),!(null!==c&&void 0!==c&&c.requiereActualizacion)&&((null===c||void 0===c?void 0:c.tasa)||f)&&(0,e_.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-lg p-4",children:[(0,e_.jsx)("p",{className:"text-sm text-red-100 mb-1",children:"Gasto en $ (Calculado)"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold text-white",children:["$",(null===(t=r.gastoDolar)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,e_.jsxs)("p",{className:"text-xs text-red-100 mt-1",children:["Bs"===r.moneda?"".concat(r.monto||0," Bs \xf7 ").concat(m?f:null===c||void 0===c?void 0:c.tasa," = "):"","$",(null===(n=r.gastoDolar)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]})]})},CV=e=>{let{form:t,setForm:n}=e;return(0,e_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Fecha"}),(0,e_.jsx)("input",{type:"date",value:t.fecha,onChange:e=>n(l(l({},t),{},{fecha:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",required:!0})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Monto"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:t.monto,onChange:e=>n(l(l({},t),{},{monto:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",required:!0})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Moneda"}),(0,e_.jsxs)("select",{value:t.moneda,onChange:e=>n(l(l({},t),{},{moneda:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",children:[(0,e_.jsx)("option",{children:"USD"}),(0,e_.jsx)("option",{children:"USDT"}),(0,e_.jsx)("option",{children:"BS"})]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Cuenta"}),(0,e_.jsx)("select",{value:t.cuenta,onChange:e=>n(l(l({},t),{},{cuenta:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",children:Yx.map(e=>(0,e_.jsx)("option",{children:e},e))})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Categor\xeda"}),(0,e_.jsx)("input",{value:t.categoria,onChange:e=>n(l(l({},t),{},{categoria:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",required:!0})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Descripci\xf3n"}),(0,e_.jsx)("input",{value:t.descripcion,onChange:e=>n(l(l({},t),{},{descripcion:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",required:!0})]})]})},PV=e=>{let{formVenta:t,setFormVenta:n}=e;const r=parseFloat(t.montoUSDT)||0,i=.002*r,s=r-i,a=parseFloat(t.tasaVenta)||0,o=s*a;return(0,e_.jsxs)("div",{className:"space-y-4",children:[(0,e_.jsxs)("div",{className:"bg-gradient-to-r from-yellow-500 to-green-500 rounded-lg p-4 mb-4",children:[(0,e_.jsx)("p",{className:"text-sm text-yellow-100 mb-1",children:"\ud83d\udcb0 Venta desde Binance"}),(0,e_.jsx)("p",{className:"text-lg font-bold text-white",children:"Registra tu venta de USDT a Bol\xedvares"})]}),(0,e_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Fecha"}),(0,e_.jsx)("input",{type:"date",value:t.fecha,onChange:e=>n(l(l({},t),{},{fecha:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",required:!0})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Hora de la Operaci\xf3n"}),(0,e_.jsx)("input",{type:"time",value:t.hora,onChange:e=>n(l(l({},t),{},{hora:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white"})]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white font-semibold",children:"Monto en USDT (Cantidad vendida)"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:t.montoUSDT,onChange:e=>n(l(l({},t),{},{montoUSDT:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white text-lg font-semibold",placeholder:"0.00",required:!0}),(0,e_.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Cantidad de USDT que vendiste desde Binance"})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white font-semibold",children:"Tasa de Venta (Bs por USDT)"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:t.tasaVenta,onChange:e=>n(l(l({},t),{},{tasaVenta:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white text-lg font-semibold",placeholder:"37.50",required:!0}),(0,e_.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Precio de venta por cada USDT"})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Cuenta de Destino"}),(0,e_.jsx)("select",{value:t.cuentaDestino,onChange:e=>n(l(l({},t),{},{cuentaDestino:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",children:["Provincial","Venezuela"].map(e=>(0,e_.jsx)("option",{value:e,children:e},e))}),(0,e_.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Cuenta bancaria donde recibiste los Bol\xedvares"})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Descripci\xf3n (Opcional)"}),(0,e_.jsx)("textarea",{value:t.descripcion,onChange:e=>n(l(l({},t),{},{descripcion:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white resize-none",placeholder:"Ej: Venta para pago de servicios",rows:"2"})]}),(0,e_.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 space-y-2",children:[(0,e_.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,e_.jsx)("span",{className:"text-white",children:"Monto USDT:"}),(0,e_.jsxs)("span",{className:"font-bold text-blue-400",children:[r.toFixed(2)," USDT"]})]}),(0,e_.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,e_.jsx)("span",{className:"text-white",children:"Comisi\xf3n Binance (0.2%):"}),(0,e_.jsxs)("span",{className:"font-bold text-red-400",children:["-",i.toFixed(4)," USDT"]})]}),(0,e_.jsxs)("div",{className:"flex justify-between text-sm border-t border-white/20 pt-2",children:[(0,e_.jsx)("span",{className:"text-white",children:"USDT Neto:"}),(0,e_.jsxs)("span",{className:"font-bold text-green-400",children:[s.toFixed(4)," USDT"]})]}),(0,e_.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,e_.jsx)("span",{className:"text-white",children:"\xd7 Tasa de Venta:"}),(0,e_.jsxs)("span",{className:"font-bold text-white",children:[a.toFixed(2)," Bs"]})]}),(0,e_.jsxs)("div",{className:"flex justify-between border-t border-white/20 pt-2",children:[(0,e_.jsxs)("span",{className:"text-white font-semibold",children:["Total a Recibir en ",t.cuentaDestino,":"]}),(0,e_.jsxs)("span",{className:"font-bold text-green-400 text-lg",children:[o.toFixed(2)," Bs"]})]})]}),(0,e_.jsxs)("div",{className:"bg-yellow-500/20 border border-yellow-500 rounded-lg p-3",children:[(0,e_.jsxs)("p",{className:"text-xs text-yellow-200",children:["\u26a0\ufe0f ",(0,e_.jsx)("strong",{children:"Balance Binance se reducir\xe1 en:"})," -",r.toFixed(2)," USDT"]}),(0,e_.jsxs)("p",{className:"text-xs text-green-200 mt-1",children:["\u2705 ",(0,e_.jsxs)("strong",{children:["Balance ",t.cuentaDestino," aumentar\xe1 en:"]})," +",o.toFixed(2)," Bs"]})]})]})},LV=e=>{let{usuario:t,tasaVenta:n,setMostrarForm:r}=e;const[s,a]=(0,i.useState)({fecha:(new Date).toISOString().split("T")[0],tipo:"Gasto",categoria:"Comida",descripcion:"",monto:"",moneda:"USD",cuenta:"Efectivo"}),[o,c]=(0,i.useState)({fecha:(new Date).toISOString().split("T")[0],hora:(new Date).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),status:"Por Cobrar",cliente:"",compraBs:"",comisionBanco:0,tasa:"",compraDolar:0,operador:"Rafael Rosas",gananciaBs:0,gananciaDolar:0}),[u,h]=(0,i.useState)({fecha:(new Date).toISOString().split("T")[0],descripcion:"",monto:"",categoria:"Varios",cuenta:"Provincial",moneda:"Bs",total:"",gastoDolar:0}),[d,f]=(0,i.useState)({fecha:(new Date).toISOString().split("T")[0],hora:(new Date).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),montoUSDT:"",tasaVenta:"",cuentaDestino:"Provincial",descripcion:""});(0,i.useEffect)(()=>{if("Compra"===s.tipo){const e=((e,t,n)=>{const r=t>0?e/t:0,i=t>0?r*n-e:0;return{comisionBanco:.003*e,compraDolar:r,gananciaBs:i,gananciaDolar:t>0?i/t:0}})(parseFloat(o.compraBs)||0,parseFloat(o.tasa)||0,n);c(t=>l(l({},t),e))}},[o.compraBs,o.tasa,n,s.tipo]),(0,i.useEffect)(()=>{if("Gasto"===s.tipo){const e=parseFloat(u.monto)||0;let t=0;t="Bs"===u.moneda?n>0?e/n:0:e,h(n=>l(l({},n),{},{total:e,gastoDolar:t}))}},[u.monto,u.moneda,n,s.tipo]);return(0,e_.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,e_.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[(0,e_.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Nueva Transacci\xf3n"}),(0,e_.jsx)("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,e_.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{let e;if("Compra"===s.tipo)e={tipo:"Compra",fecha:o.fecha,hora:o.hora,status:o.status,cliente:o.cliente,compraBs:parseFloat(o.compraBs),comisionBanco:o.comisionBanco,tasa:parseFloat(o.tasa),compraDolar:o.compraDolar,operador:o.operador,gananciaBs:o.gananciaBs,gananciaDolar:o.gananciaDolar,tasaVenta:n,monto:o.compraDolar,moneda:"USD",categoria:"Compra de Divisas",descripcion:"Compra - Cliente: ".concat(o.cliente),cuenta:"Operaciones"};else if("Gasto"===s.tipo){const t=parseFloat(u.monto)||0;e={tipo:"Gasto",fecha:u.fecha,descripcion:u.descripcion,monto:t,categoria:u.categoria,cuenta:u.cuenta,moneda:u.moneda,total:t,gastoDolar:u.gastoDolar,tasaUsada:u.tasaUsada}}else e="Venta"===s.tipo?{tipo:"Venta",fecha:d.fecha,hora:d.hora,montoUSDT:parseFloat(d.montoUSDT),tasaVenta:parseFloat(d.tasaVenta),cuentaDestino:d.cuentaDestino,descripcion:d.descripcion,monto:parseFloat(d.montoUSDT),moneda:"USDT",categoria:"Venta de Divisas",cuenta:"Binance"}:l(l({},s),{},{monto:parseFloat(s.monto)});await qx(e,t),a({fecha:(new Date).toISOString().split("T")[0],tipo:"Gasto",categoria:"Comida",descripcion:"",monto:"",moneda:"USD",cuenta:"Efectivo"}),c({fecha:(new Date).toISOString().split("T")[0],hora:(new Date).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),status:"Por Cobrar",cliente:"",compraBs:"",comisionBanco:0,tasa:"",compraDolar:0,operador:"Rafael Rosas",gananciaBs:0,gananciaDolar:0}),h({fecha:(new Date).toISOString().split("T")[0],descripcion:"",monto:"",categoria:"Varios",cuenta:"Provincial",moneda:"Bs",total:"",gastoDolar:0}),f({fecha:(new Date).toISOString().split("T")[0],hora:(new Date).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),montoUSDT:"",tasaVenta:"",cuentaDestino:"Provincial",descripcion:""}),r(!1)}catch(i){alert("Error: "+i.message)}},className:"space-y-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 text-white",children:"Tipo de Transacci\xf3n"}),(0,e_.jsxs)("select",{value:s.tipo,onChange:e=>a(l(l({},s),{},{tipo:e.target.value})),className:"w-full bg-slate-700 rounded px-4 py-2 text-white",children:[(0,e_.jsx)("option",{children:"Ingreso"}),(0,e_.jsx)("option",{children:"Gasto"}),(0,e_.jsx)("option",{children:"Compra"}),(0,e_.jsx)("option",{children:"Venta"})]})]}),"Compra"===s.tipo?(0,e_.jsx)(TV,{formCompra:o,setFormCompra:c,tasaVenta:n}):"Gasto"===s.tipo?(0,e_.jsx)(IV,{formGasto:u,setFormGasto:h,usuario:t,onSolicitarVenta:()=>{window.confirm("Para continuar, debe registrar una venta primero para actualizar la tasa. \xbfDesea cambiar al formulario de Venta?")&&a(l(l({},s),{},{tipo:"Venta"}))}}):"Venta"===s.tipo?(0,e_.jsx)(PV,{formVenta:d,setFormVenta:f}):(0,e_.jsx)(CV,{form:s,setForm:a}),(0,e_.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,e_.jsx)("button",{type:"submit",className:"flex-1 bg-green-500 hover:bg-green-600 py-3 rounded-lg font-semibold text-white",children:"Guardar Transacci\xf3n"}),(0,e_.jsx)("button",{type:"button",onClick:()=>r(!1),className:"px-6 bg-slate-600 py-3 rounded-lg text-white",children:"Cancelar"})]})]})]})})},DV=e=>{let{transacciones:t,balance:n,temaActual:r,filtroMes:i,setFiltroMes:s,mesesDisponibles:a,tasaCambio:o}=e;const l=((e,t)=>{const n={ingresos:0,gastos:0,compras:0,ventas:0};return e.forEach(e=>{const r=Math.abs(parseFloat(e.monto));let i=r;"USDT"===e.moneda&&(i=r*t.usdtToUsd),"BS"===e.moneda&&(i=r/t.usdToBs),"Ingreso"===e.tipo?n.ingresos+=i:"Gasto"===e.tipo?n.gastos+=i:"Compra"===e.tipo?n.compras+=i:"Venta"===e.tipo&&(n.ventas+=i)}),n.balance=n.ingresos+n.ventas-n.gastos-n.compras,n})(t,o),c=((e,t)=>{const n={};return e.forEach(e=>{n[e.categoria]||(n[e.categoria]=0);const r=Math.abs(parseFloat(e.monto));let i=r;"USDT"===e.moneda&&(i=r*t.usdtToUsd),"BS"===e.moneda&&(i=r/t.usdToBs),n[e.categoria]+=i}),Object.entries(n).sort((e,t)=>t[1]-e[1])})(t,o);return(0,e_.jsxs)("div",{className:"space-y-6",children:[(0,e_.jsx)("div",{className:"mb-4",children:(0,e_.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"bg-slate-700 text-white rounded-lg px-4 py-2",children:[(0,e_.jsx)("option",{value:"todos",children:"Todos los meses"}),a.map(e=>(0,e_.jsx)("option",{value:e,children:e},e))]})}),(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"mb-2",children:"Balance (DIVISA)"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",n.usd.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"mb-2",children:"Balance Binance (USDT)"}),(0,e_.jsx)("p",{className:"text-3xl font-bold",children:n.usdt.toFixed(2)})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"mb-2",children:"Balance BS"}),(0,e_.jsx)("p",{className:"text-3xl font-bold",children:n.bs.toFixed(2)})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"mb-2",children:"Mis Transacciones"}),(0,e_.jsx)("p",{className:"text-3xl font-bold",children:t.length})]})]}),(0,e_.jsxs)("div",{className:"".concat(r.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Resumen del Per\xedodo"}),(0,e_.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,e_.jsxs)("div",{className:"bg-green-500/20 rounded-lg p-4 border border-green-500/50",children:[(0,e_.jsx)("p",{className:"text-sm",children:"Ingresos"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:["$",l.ingresos.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-red-500/20 rounded-lg p-4 border border-red-500/50",children:[(0,e_.jsx)("p",{className:"text-sm",children:"Gastos"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold text-red-400",children:["$",l.gastos.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-blue-500/20 rounded-lg p-4 border border-blue-500/50",children:[(0,e_.jsx)("p",{className:"text-sm",children:"Compras"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold text-blue-400",children:["$",l.compras.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-yellow-500/20 rounded-lg p-4 border border-yellow-500/50",children:[(0,e_.jsx)("p",{className:"text-sm",children:"Ventas"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold text-yellow-400",children:["$",l.ventas.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"rounded-lg p-4 border ".concat(l.balance>=0?"bg-green-500/20 border-green-500/50":"bg-red-500/20 border-red-500/50"),children:[(0,e_.jsx)("p",{className:"text-sm",children:"Balance"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold ".concat(l.balance>=0?"text-green-400":"text-red-400"),children:["$",l.balance.toFixed(2)]})]})]})]}),(0,e_.jsxs)("div",{className:"".concat(r.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Top Categor\xedas"}),(0,e_.jsx)("div",{className:"space-y-3",children:c.slice(0,5).map((e,t)=>{let[n,r]=e;return(0,e_.jsxs)("div",{className:"flex justify-between items-center bg-slate-700/50 rounded-lg p-4",children:[(0,e_.jsxs)("span",{className:"font-semibold",children:[t+1,". ",n]}),(0,e_.jsxs)("span",{className:"text-lg font-bold",children:["$",r.toFixed(2)]})]},n)})})]})]})},OV=e=>{let{transacciones:t,temaActual:n}=e;const[r,s]=(0,i.useState)("todos"),[a,o]=(0,i.useState)(new Set),[c,u]=(0,i.useState)(null),[h,d]=(0,i.useState)(!1),f=(0,i.useMemo)(()=>{const e=[...t].sort((e,t)=>{const n=new Date(e.fecha);return new Date(t.fecha)-n});return"todos"===r?e:e.filter(e=>e.tipo===r)},[t,r]),p=(0,i.useMemo)(()=>{const e=new Set(t.map(e=>e.tipo));return["todos",...Array.from(e)]},[t]),m=()=>{if(a.size===f.length)o(new Set);else{const e=new Set(f.map(e=>e.id));o(e)}},g=async()=>{if(c)try{await Fx.collection("transacciones").doc(c.id).update({descripcion:c.descripcion,monto:parseFloat(c.monto),categoria:c.categoria}),u(null),alert("\u2705 Transacci\xf3n actualizada")}catch(O$){console.error("Error al actualizar:",O$),alert("\u274c Error al actualizar la transacci\xf3n")}},v=()=>{u(null)};return(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsxs)("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold",children:"Mi Historial de Transacciones"}),(0,e_.jsxs)("div",{className:"flex gap-2 flex-wrap items-center",children:[(0,e_.jsx)("select",{value:r,onChange:e=>s(e.target.value),className:"bg-slate-700 text-white rounded-lg px-4 py-2",children:p.map(e=>(0,e_.jsx)("option",{value:e,children:"todos"===e?"Todos los tipos":e},e))}),(0,e_.jsx)("button",{onClick:()=>{d(!h),h&&o(new Set)},className:"".concat(h?"bg-orange-600 hover:bg-orange-700":"bg-blue-600 hover:bg-blue-700"," text-white px-4 py-2 rounded-lg font-semibold"),children:h?"\u2713 Modo Selecci\xf3n":"\u2611 Seleccionar"}),h&&(0,e_.jsxs)(e_.Fragment,{children:[(0,e_.jsx)("button",{onClick:m,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold",children:a.size===f.length?"Deseleccionar Todas":"Seleccionar Todas"}),(0,e_.jsxs)("button",{onClick:async()=>{if(0!==a.size){if(window.confirm("\xbfEliminar ".concat(a.size," transacciones seleccionadas?")))try{const e=Array.from(a).map(e=>Fx.collection("transacciones").doc(e).delete());await Promise.all(e),o(new Set),d(!1),alert("\u2705 ".concat(a.size," transacciones eliminadas"))}catch(O$){console.error("Error al eliminar:",O$),alert("\u274c Error al eliminar las transacciones")}}else alert("\u26a0\ufe0f No hay transacciones seleccionadas")},disabled:0===a.size,className:"".concat(0===a.size?"bg-gray-500":"bg-red-600 hover:bg-red-700"," text-white px-4 py-2 rounded-lg font-semibold"),children:["\ud83d\uddd1 Eliminar (",a.size,")"]})]})]})]}),(0,e_.jsxs)("div",{className:"mb-4 text-sm opacity-75",children:["Mostrando ",f.length," de ",t.length," transacciones"]}),(0,e_.jsx)("div",{className:"overflow-x-auto",children:(0,e_.jsxs)("table",{className:"w-full",children:[(0,e_.jsx)("thead",{children:(0,e_.jsxs)("tr",{className:"border-b border-white/20",children:[h&&(0,e_.jsx)("th",{className:"text-center p-3 w-12",children:(0,e_.jsx)("input",{type:"checkbox",checked:a.size===f.length&&f.length>0,onChange:m,className:"w-5 h-5 cursor-pointer"})}),(0,e_.jsx)("th",{className:"text-left p-3",children:"Fecha"}),(0,e_.jsx)("th",{className:"text-left p-3",children:"Tipo"}),(0,e_.jsx)("th",{className:"text-left p-3",children:"Categor\xeda"}),(0,e_.jsx)("th",{className:"text-left p-3",children:"Descripci\xf3n"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Monto"}),(0,e_.jsx)("th",{className:"text-center p-3",children:"Acciones"})]})}),(0,e_.jsx)("tbody",{children:f.map(e=>(0,e_.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 ".concat(a.has(e.id)?"bg-blue-500/20":""),children:[h&&(0,e_.jsx)("td",{className:"p-3 text-center",children:(0,e_.jsx)("input",{type:"checkbox",checked:a.has(e.id),onChange:()=>(e=>{const t=new Set(a);t.has(e)?t.delete(e):t.add(e),o(t)})(e.id),className:"w-5 h-5 cursor-pointer"})}),(0,e_.jsx)("td",{className:"p-3 whitespace-nowrap",children:e.fecha}),(0,e_.jsx)("td",{className:"p-3",children:(0,e_.jsxs)("span",{className:"px-2 py-1 rounded text-sm ".concat("Ingreso"===e.tipo?"bg-green-500/20 text-green-400":"Gasto"===e.tipo?"bg-red-500/20 text-red-400":"Compra"===e.tipo?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"),children:[e.tipo,e.importado&&(0,e_.jsx)("span",{className:"ml-1",children:"\ud83d\udce5"})]})}),(0,e_.jsx)("td",{className:"p-3",children:(null===c||void 0===c?void 0:c.id)===e.id?(0,e_.jsx)("input",{type:"text",value:c.categoria,onChange:e=>u(l(l({},c),{},{categoria:e.target.value})),className:"bg-slate-700 text-white rounded px-2 py-1 w-full"}):(0,e_.jsx)("span",{className:"text-sm opacity-75",children:e.categoria})}),(0,e_.jsx)("td",{className:"p-3",children:(null===c||void 0===c?void 0:c.id)===e.id?(0,e_.jsx)("input",{type:"text",value:c.descripcion,onChange:e=>u(l(l({},c),{},{descripcion:e.target.value})),className:"bg-slate-700 text-white rounded px-2 py-1 w-full"}):(0,e_.jsxs)("div",{children:[(0,e_.jsx)("p",{className:"font-semibold",children:e.descripcion}),"Compra"===e.tipo&&e.cliente&&(0,e_.jsxs)("div",{className:"text-xs mt-1 space-y-1",children:[(0,e_.jsxs)("p",{children:["Cliente: ",e.cliente]}),(0,e_.jsxs)("p",{children:["Status: ",(0,e_.jsx)("span",{className:"Pagado"===e.status?"text-green-400":"text-yellow-400",children:e.status})]}),e.operador&&(0,e_.jsxs)("p",{children:["Operador: ",e.operador]})]}),"Gasto"===e.tipo&&void 0!==e.gastoDolar&&(0,e_.jsxs)("p",{className:"text-xs text-red-400 mt-1",children:["Gasto en $: $",e.gastoDolar.toFixed(2)]})]})}),(0,e_.jsx)("td",{className:"p-3 text-right font-semibold",children:(null===c||void 0===c?void 0:c.id)===e.id?(0,e_.jsx)("input",{type:"number",step:"0.01",value:c.monto,onChange:e=>u(l(l({},c),{},{monto:e.target.value})),className:"bg-slate-700 text-white rounded px-2 py-1 w-24 text-right"}):(0,e_.jsx)("span",{className:"Ingreso"===e.tipo||"Venta"===e.tipo?"text-green-400":"Compra"===e.tipo?"text-blue-400":"text-red-400",children:"Compra"===e.tipo&&e.compraDolar?"".concat(e.compraDolar.toFixed(2)," USD"):(0,e_.jsxs)(e_.Fragment,{children:["Ingreso"===e.tipo||"Venta"===e.tipo?"+":"-",Math.abs(e.monto).toFixed(2)," ",e.moneda]})})}),(0,e_.jsx)("td",{className:"p-3",children:(null===c||void 0===c?void 0:c.id)===e.id?(0,e_.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,e_.jsx)("button",{onClick:g,className:"text-green-400 hover:text-green-300 font-semibold",children:"\u2713"}),(0,e_.jsx)("button",{onClick:v,className:"text-red-400 hover:text-red-300 font-semibold",children:"\u2715"})]}):(0,e_.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,e_.jsx)("button",{onClick:()=>{var t;u({id:(t=e).id,descripcion:t.descripcion||"",monto:t.monto||0,categoria:t.categoria||""})},className:"text-blue-400 hover:text-blue-300",title:"Editar",children:"\u270f\ufe0f"}),(0,e_.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEliminar esta transacci\xf3n?"))try{await Fx.collection("transacciones").doc(e).delete(),alert("\u2705 Transacci\xf3n eliminada")}catch(O$){console.error("Error al eliminar:",O$),alert("\u274c Error al eliminar la transacci\xf3n")}})(e.id),className:"text-red-400 hover:text-red-300",title:"Eliminar",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id))})]})}),0===f.length&&(0,e_.jsxs)("div",{className:"text-center py-12 opacity-75",children:[(0,e_.jsx)("p",{className:"text-xl",children:"No hay transacciones para mostrar"}),"todos"!==r&&(0,e_.jsx)("p",{className:"text-sm mt-2",children:"Intenta cambiar el filtro de tipo"})]})]})},RV=e=>{let{temaActual:t,filtrosPorCobrar:n,setFiltrosPorCobrar:r,clientesUnicos:i,operadoresUnicos:s,limpiarFiltros:a}=e;return(0,e_.jsxs)("div",{className:"".concat(t.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\ud83d\udd0d Filtros"}),(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 font-semibold",children:"Cliente"}),(0,e_.jsxs)("select",{value:n.cliente,onChange:e=>r(l(l({},n),{},{cliente:e.target.value})),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2",children:[(0,e_.jsx)("option",{value:"todos",children:"Todos los clientes"}),i.map(e=>(0,e_.jsx)("option",{value:e,children:e},e))]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 font-semibold",children:"Status"}),(0,e_.jsxs)("select",{value:n.status,onChange:e=>r(l(l({},n),{},{status:e.target.value})),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2",children:[(0,e_.jsx)("option",{value:"todos",children:"Todos"}),(0,e_.jsx)("option",{value:"Por Cobrar",children:"Por Cobrar"}),(0,e_.jsx)("option",{value:"Pagado",children:"Pagado"})]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 font-semibold",children:"Operador"}),(0,e_.jsxs)("select",{value:n.operador,onChange:e=>r(l(l({},n),{},{operador:e.target.value})),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2",children:[(0,e_.jsx)("option",{value:"todos",children:"Todos los operadores"}),s.map(e=>(0,e_.jsx)("option",{value:e,children:e},e))]})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 font-semibold",children:"Fecha Inicio"}),(0,e_.jsx)("input",{type:"date",value:n.fechaInicio,onChange:e=>r(l(l({},n),{},{fechaInicio:e.target.value})),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2"})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2 font-semibold",children:"Fecha Fin"}),(0,e_.jsx)("input",{type:"date",value:n.fechaFin,onChange:e=>r(l(l({},n),{},{fechaFin:e.target.value})),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2"})]})]}),(0,e_.jsx)("div",{className:"mt-4",children:(0,e_.jsx)("button",{onClick:a,className:"bg-slate-600 hover:bg-slate-700 text-white px-6 py-2 rounded-lg",children:"Limpiar Filtros"})})]})},MV=e=>{let{temaActual:t,resumenClientes:n}=e;return(0,e_.jsxs)("div",{className:"".concat(t.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\ud83d\udc65 Resumen por Cliente"}),(0,e_.jsx)("div",{className:"overflow-x-auto",children:(0,e_.jsxs)("table",{className:"w-full",children:[(0,e_.jsx)("thead",{children:(0,e_.jsxs)("tr",{className:"border-b border-white/20",children:[(0,e_.jsx)("th",{className:"text-left p-3",children:"Cliente"}),(0,e_.jsx)("th",{className:"text-center p-3",children:"Operaciones"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Total Bs"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Total USD"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Por Cobrar"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Pagado"})]})}),(0,e_.jsx)("tbody",{children:n.map(e=>(0,e_.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[(0,e_.jsx)("td",{className:"p-3 font-semibold",children:e.cliente}),(0,e_.jsx)("td",{className:"p-3 text-center",children:e.cantidad}),(0,e_.jsxs)("td",{className:"p-3 text-right",children:[e.totalBs.toFixed(2)," Bs"]}),(0,e_.jsxs)("td",{className:"p-3 text-right font-semibold text-blue-400",children:["$",e.totalUsd.toFixed(2)]}),(0,e_.jsx)("td",{className:"p-3 text-right",children:(0,e_.jsxs)("span",{className:"text-orange-400 font-bold",children:["$",e.porCobrar.toFixed(2)]})}),(0,e_.jsx)("td",{className:"p-3 text-right",children:(0,e_.jsxs)("span",{className:"text-green-400 font-bold",children:["$",e.pagado.toFixed(2)]})})]},e.cliente))})]})})]})},FV=e=>{let{temaActual:t,comprasFiltradas:n,handleCambiarStatus:r}=e;return(0,e_.jsxs)("div",{className:"".concat(t.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\ud83d\udccb Detalle de Transacciones"}),(0,e_.jsx)("div",{className:"overflow-x-auto",children:(0,e_.jsxs)("table",{className:"w-full",children:[(0,e_.jsx)("thead",{children:(0,e_.jsxs)("tr",{className:"border-b border-white/20",children:[(0,e_.jsx)("th",{className:"text-left p-3",children:"Fecha"}),(0,e_.jsx)("th",{className:"text-left p-3",children:"Cliente"}),(0,e_.jsx)("th",{className:"text-left p-3",children:"Operador"}),(0,e_.jsx)("th",{className:"text-center p-3",children:"Status"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Compra Bs"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Tasa"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Compra USD"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Ganancia"}),(0,e_.jsx)("th",{className:"text-center p-3",children:"Acci\xf3n"})]})}),(0,e_.jsx)("tbody",{children:n.map(e=>(0,e_.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[(0,e_.jsx)("td",{className:"p-3",children:e.fecha}),(0,e_.jsx)("td",{className:"p-3 font-semibold",children:e.cliente}),(0,e_.jsx)("td",{className:"p-3",children:e.operador}),(0,e_.jsx)("td",{className:"p-3 text-center",children:(0,e_.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("Pagado"===e.status?"bg-green-500/20 text-green-400 border border-green-500":"bg-orange-500/20 text-orange-400 border border-orange-500"),children:e.status})}),(0,e_.jsxs)("td",{className:"p-3 text-right",children:[e.compraBs.toFixed(2)," Bs"]}),(0,e_.jsx)("td",{className:"p-3 text-right",children:e.tasa.toFixed(2)}),(0,e_.jsxs)("td",{className:"p-3 text-right font-bold text-blue-400",children:["$",e.compraDolar.toFixed(2)]}),(0,e_.jsx)("td",{className:"p-3 text-right",children:(0,e_.jsxs)("div",{className:"text-sm",children:[(0,e_.jsxs)("div",{className:"text-green-400 font-semibold",children:[e.gananciaBs.toFixed(2)," Bs"]}),(0,e_.jsxs)("div",{className:"text-green-300",children:["$",e.gananciaDolar.toFixed(2)]})]})}),(0,e_.jsx)("td",{className:"p-3 text-center",children:(0,e_.jsx)("button",{onClick:()=>r(e),className:"px-3 py-1 rounded text-xs font-semibold ".concat("Pagado"===e.status?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"," text-white"),children:"Pagado"===e.status?"Marcar Por Cobrar":"Marcar Pagado"})})]},e.id))})]})})]})},jV=e=>{let{usuario:t,tasaVenta:n,temaActual:r}=e;const s=(0,i.useRef)(null),[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null);return(0,e_.jsxs)("div",{children:[(0,e_.jsx)("input",{ref:s,type:"file",accept:".xlsx,.xls",onChange:async e=>{const n=e.target.files[0];if(!n)return;const r=n.name.split(".").pop().toLowerCase();if(["xlsx","xls"].includes(r)){o(!0),c(null);try{const e=await(async(e,t)=>new Promise((n,r)=>{const i=new FileReader;i.onload=async e=>{try{const r=yO(new Uint8Array(e.target.result),{type:"array",cellDates:!0}),i=r.SheetNames[0],s=r.Sheets[i],a=FO.sheet_to_json(s,{raw:!1,defval:""});console.log("\ud83d\udcca Total de filas le\xeddas:",a.length),console.log("\ud83d\udccb Primera fila de ejemplo:",a[0]);const o=[],l=[];let c=0;for(let e=0;e<a.length;e++){const n=a[e],r=e+2;try{const e=e=>{if(!e)return 0;if("number"===typeof e)return e;const t=String(e).replace(/[BsF$,\s]/g,"").replace(",","."),n=parseFloat(t);return isNaN(n)?0:n},i=n.Fecha||"",s=n.Status||"Por Cobrar",a=n.Cliente||"",l=e(n.Depositos||0),u=e(n["Comision Banco."]||0),h=e(n.TASA||0),d=e(n["COMPRA $"]||0),f=n.Operador||"",p=e(n["Ganancia en Bs"]||0),m=e(n["Ganancia en Dolar"]||0),g=e(n["Tasa Venta"]||0);let v=i;if(v&&v.includes("/")){const e=v.split("/");if(3===e.length){const t=e[0].padStart(2,"0"),n=e[1].padStart(2,"0"),r=2===e[2].length?"20"+e[2]:e[2];v="".concat(r,"-").concat(n,"-").concat(t)}}if(!a||0===d){console.log("\u26a0\ufe0f Fila ".concat(r,": Datos incompletos, saltando...")),c++;continue}const b={tipo:"Compra",fecha:v||(new Date).toISOString().split("T")[0],status:s,cliente:a.trim(),compraBs:l,comisionBanco:u,tasa:h,compraDolar:d,operador:f.trim(),gananciaBs:p,gananciaDolar:m,tasaVenta:g,monto:d,moneda:"USD",categoria:"Compra de Divisas",descripcion:"Compra - Cliente: ".concat(a.trim()," (Importado)"),cuenta:"Operaciones",importado:!0,importadoDesde:"compras"};console.log("\u2705 Fila ".concat(r,": ").concat(a," - $").concat(d)),await qx(b,t),o.push(b)}catch(O$){console.error("\u274c Error en fila ".concat(r,":"),O$),l.push("Fila ".concat(r,": ").concat(O$.message))}}n({exitosas:o.length,errores:l,total:a.length,filasVacias:c})}catch(O$){console.error("\u274c Error general:",O$),r(O$)}},i.onerror=e=>r(e),i.readAsArrayBuffer(e)}))(n,t);c(e);let r="";e.exitosas>0?(r="\u2705 Importaci\xf3n completada!\n\n",r+="\ud83d\udcca ".concat(e.exitosas," transacciones importadas exitosamente\n"),r+="\ud83d\udcc4 ".concat(e.total," filas procesadas\n"),e.filasVacias>0&&(r+="\u26aa ".concat(e.filasVacias," filas vac\xedas omitidas\n")),e.errores.length>0&&(r+="\n\u26a0\ufe0f ".concat(e.errores.length," filas con errores:\n"),r+=e.errores.slice(0,5).join("\n"),e.errores.length>5&&(r+="\n... y ".concat(e.errores.length-5," errores m\xe1s"))),alert(r)):alert("\u274c No se pudo importar ninguna transacci\xf3n.\n\nErrores:\n".concat(e.errores.slice(0,10).join("\n")))}catch(O$){console.error("Error al importar:",O$),alert("Error al importar el archivo: "+O$.message)}finally{o(!1),s.current&&(s.current.value="")}}else alert("Por favor selecciona un archivo Excel (.xlsx o .xls)")},style:{display:"none"}}),(0,e_.jsx)("button",{onClick:()=>{var e;null===(e=s.current)||void 0===e||e.click()},disabled:a,className:"".concat(a?"bg-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"," text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors"),children:a?(0,e_.jsxs)(e_.Fragment,{children:[(0,e_.jsx)("span",{className:"animate-spin",children:"\u23f3"}),"Importando..."]}):(0,e_.jsx)(e_.Fragment,{children:"\ud83d\udce5 Importar Excel"})}),l&&(0,e_.jsxs)("div",{className:"mt-4",children:[l.exitosas>0&&(0,e_.jsxs)("div",{className:"bg-green-500/20 border border-green-500 rounded-lg p-4 mb-2",children:[(0,e_.jsx)("h3",{className:"font-bold text-green-400",children:"\u2705 Importaci\xf3n exitosa"}),(0,e_.jsxs)("p",{className:"text-sm text-green-300 mt-1",children:[l.exitosas," de ",l.total," transacciones importadas"]})]}),l.errores.length>0&&(0,e_.jsxs)("div",{className:"bg-yellow-500/20 border border-yellow-500 rounded-lg p-4",children:[(0,e_.jsxs)("h3",{className:"font-bold text-yellow-400 mb-2",children:["\u26a0\ufe0f Advertencias (",l.errores.length,")"]}),(0,e_.jsx)("ul",{className:"text-sm space-y-1 max-h-40 overflow-y-auto",children:l.errores.map((e,t)=>(0,e_.jsx)("li",{className:"text-yellow-300",children:e},t))})]})]})]})},BV=e=>{let{comprasFiltradas:t,temaActual:n,filtrosPorCobrar:r,setFiltrosPorCobrar:i,clientesUnicos:s,operadoresUnicos:a,limpiarFiltros:o,usuario:l,compras:c}=e;const u=(e=>{let t=0,n=0,r=0,i=0;return e.forEach(e=>{t+=e.compraBs||0,n+=e.compraDolar||0,r+=e.gananciaBs||0,i+=e.gananciaDolar||0}),{cantidad:e.length,totalBs:t,totalUsd:n,totalGananciaBs:r,totalGananciaUsd:i}})(t),h=(e=>{const t={};return e.forEach(e=>{t[e.cliente]||(t[e.cliente]={cliente:e.cliente,cantidad:0,totalBs:0,totalUsd:0,porCobrar:0,pagado:0}),t[e.cliente].cantidad++,t[e.cliente].totalBs+=e.compraBs||0,t[e.cliente].totalUsd+=e.compraDolar||0,"Por Cobrar"===e.status?t[e.cliente].porCobrar+=e.compraDolar||0:t[e.cliente].pagado+=e.compraDolar||0}),Object.values(t).sort((e,t)=>t.totalUsd-e.totalUsd)})(t),d=(()=>{let e=0;return c.forEach(t=>{"Por Cobrar"===t.status&&(e+=t.gananciaDolar||0)}),e})();return(0,e_.jsxs)("div",{className:"space-y-6",children:[(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Transacciones"}),(0,e_.jsx)("p",{className:"text-3xl font-bold",children:u.cantidad})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Total en Bs"}),(0,e_.jsx)("p",{className:"text-2xl font-bold",children:u.totalBs.toFixed(2)})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Total en USD"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",u.totalUsd.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Ganancia USD No Realizada"}),(0,e_.jsx)("p",{className:"text-xs opacity-90 mb-1",children:"(Por Cobrar)"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",d.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Ganancia USD Total"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",u.totalGananciaUsd.toFixed(2)]})]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold",children:"\ud83d\udce5 Importar Datos"}),(0,e_.jsx)(jV,{usuario:l,temaActual:n})]}),(0,e_.jsx)("p",{className:"text-sm opacity-75 mt-2",children:"Importa transacciones desde un archivo Excel con las columnas: Fecha, Status, Cliente, Depositos, Comision Banco, TASA, COMPRA $, Operador, Ganancia en bs, Ganancia en Dolar, Tasa Venta"})]}),(0,e_.jsx)(RV,{temaActual:n,filtrosPorCobrar:r,setFiltrosPorCobrar:i,clientesUnicos:s,operadoresUnicos:a,limpiarFiltros:o}),(0,e_.jsx)(MV,{temaActual:n,resumenClientes:h}),(0,e_.jsx)(FV,{temaActual:n,comprasFiltradas:t,handleCambiarStatus:async e=>{const t="Pagado"===e.status?"Por Cobrar":"Pagado";window.confirm('\xbfCambiar status a "'.concat(t,'"?'))&&await(async(e,t)=>await Fx.collection("transacciones").doc(e).update({status:t}))(e.id,t)}})]})},UV=e=>{let{usuario:t,temaActual:n}=e;const r=(0,i.useRef)(null),[s,a]=(0,i.useState)(!1);return(0,e_.jsxs)("div",{children:[(0,e_.jsx)("input",{ref:r,type:"file",accept:".xlsx,.xls",onChange:async e=>{const n=e.target.files[0];if(!n)return;const i=n.name.split(".").pop().toLowerCase();if(["xlsx","xls"].includes(i)){a(!0);try{const e=await(async(e,t)=>new Promise((n,r)=>{const i=new FileReader;i.onload=async e=>{try{const r=yO(new Uint8Array(e.target.result),{type:"array",cellDates:!0}),i=r.SheetNames[0],s=r.Sheets[i],a=FO.sheet_to_json(s,{raw:!1,defval:""});if(console.log("\ud83d\udcca Total de filas le\xeddas:",a.length),console.log("\ud83d\udccb Primera fila de ejemplo:",a[0]),0===a.length)return alert("\u274c El archivo Excel est\xe1 vac\xedo o no tiene el formato correcto"),n({exitosas:0,errores:["Archivo vac\xedo"],total:0,filasVacias:0});if(!(await Fx.collection("transacciones").where("usuarioId","==",t.uid).where("importado","==",!0).where("importadoDesde","==","ventas").limit(1).get()).empty&&!window.confirm('\u26a0\ufe0f Ya tienes ventas importadas anteriormente.\n\n\xbfDeseas continuar? Esto podr\xeda crear duplicados.\n\n\ud83d\udca1 Recomendaci\xf3n: Usa el bot\xf3n "\ud83d\uddd1\ufe0f Limpiar Ventas Importadas" antes de reimportar.'))return n({exitosas:0,errores:["Importaci\xf3n cancelada por el usuario"],total:a.length,filasVacias:0});const o=[],l=[];let c=0;for(let e=0;e<a.length;e++){const n=a[e],r=e+2;try{const e=e=>{if(!e)return 0;if("number"===typeof e)return e;const t=String(e).replace(/[BsF$,\s]/g,"").replace(",","."),n=parseFloat(t);return isNaN(n)?0:n},i=e(n["Recibido en CTA"]||0),s=e(n.Tasa||0),a=e(n["VENTA $"]||0),l=n.Fecha||"",u=n.Hora||"";let h=l;if(h&&h.includes("-")){const e=h.split("-");if(3===e.length){const t=e[0].padStart(2,"0"),n=e[1].padStart(2,"0"),r=2===e[2].length?"20"+e[2]:e[2];h="".concat(r,"-").concat(n,"-").concat(t)}}if(!h||0===a||0===i){console.log("\u26a0\ufe0f Fila ".concat(r,": Datos incompletos, saltando...")),c++;continue}const d=.002*a,f={tipo:"Venta",fecha:h,hora:u,montoUSDT:a,comisionBinance:d,usdtNeto:a-d,tasaVenta:s,montoBs:i,cuentaDestino:"Provincial",descripcion:"Venta Binance - ".concat(a.toFixed(2)," USDT @ ").concat(s," (Importado)"),monto:a,moneda:"USDT",categoria:"Venta de Divisas",cuenta:"Binance",importado:!0,importadoDesde:"ventas"};console.log("\u2705 Fila ".concat(r,": $").concat(a," USDT \u2192 Bs").concat(i," @ ").concat(s)),await qx(f,t),o.push(f)}catch(O$){console.error("\u274c Error en fila ".concat(r,":"),O$),l.push("Fila ".concat(r,": ").concat(O$.message))}}n({exitosas:o.length,errores:l,total:a.length,filasVacias:c})}catch(O$){console.error("\u274c Error general:",O$),r(O$)}},i.onerror=e=>r(e),i.readAsArrayBuffer(e)}))(n,t);let r="";e.exitosas>0?(r="\u2705 Importaci\xf3n de ventas completada!\n\n",r+="\ud83d\udcca ".concat(e.exitosas," ventas importadas exitosamente\n"),r+="\ud83d\udcc4 ".concat(e.total," filas procesadas\n"),e.filasVacias>0&&(r+="\u26aa ".concat(e.filasVacias," filas vac\xedas omitidas\n")),e.errores.length>0&&(r+="\n\u26a0\ufe0f ".concat(e.errores.length," filas con errores:\n"),r+=e.errores.slice(0,5).join("\n"),e.errores.length>5&&(r+="\n... y ".concat(e.errores.length-5," errores m\xe1s"))),alert(r)):alert("\u274c No se pudo importar ninguna venta.\n\nErrores:\n".concat(e.errores.slice(0,10).join("\n")))}catch(O$){console.error("Error al importar ventas:",O$),alert("Error al importar el archivo: "+O$.message)}finally{a(!1),r.current&&(r.current.value="")}}else alert("Por favor selecciona un archivo Excel (.xlsx o .xls)")},style:{display:"none"}}),(0,e_.jsx)("button",{onClick:()=>{var e;null===(e=r.current)||void 0===e||e.click()},disabled:s,className:"".concat(s?"bg-gray-500":"bg-green-600 hover:bg-green-700"," text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2"),children:s?(0,e_.jsxs)(e_.Fragment,{children:[(0,e_.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Importando..."]}):(0,e_.jsx)(e_.Fragment,{children:"\ud83d\udce5 Importar Ventas"})})]})},zV=e=>{let{transacciones:t,temaActual:n,usuario:r}=e;const s=(0,i.useMemo)(()=>t.filter(e=>"Venta"===e.tipo),[t]),a=(0,i.useMemo)(()=>{let e=0,t=0,n=0;s.forEach(r=>{e+=r.montoUSDT||0,t+=r.montoBs||0,n+=r.comisionBinance||0});const r=e>0?t/e:0;return{cantidad:s.length,totalUSDT:e,totalBs:t,totalComision:n,tasaPromedio:r}},[s]);return(0,e_.jsxs)("div",{className:"space-y-6",children:[(0,e_.jsx)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6 border border-white/20"),children:(0,e_.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\ud83d\udcb5 Ventas de Binance"}),(0,e_.jsx)("p",{className:"text-sm opacity-75",children:"Gesti\xf3n de ventas P2P"})]}),(0,e_.jsxs)("div",{className:"flex gap-2",children:[(0,e_.jsx)(UV,{usuario:r,temaActual:n}),(0,e_.jsx)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f \xbfEliminar TODAS las ventas importadas de Binance?\n\nEsta acci\xf3n NO se puede deshacer."))try{const e=await Fx.collection("transacciones").where("usuarioId","==",r.uid).where("importado","==",!0).where("importadoDesde","==","ventas").get();if(e.empty)return void alert("\u2139\ufe0f No hay ventas importadas para eliminar");const t=[];e.forEach(e=>{t.push(Fx.collection("transacciones").doc(e.id).delete())}),await Promise.all(t),alert("\u2705 Se eliminaron ".concat(e.size," ventas importadas."))}catch(O$){console.error("Error:",O$),alert("\u274c Error: "+O$.message)}},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83d\uddd1\ufe0f Limpiar Ventas"})]})]})}),(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Total Ventas"}),(0,e_.jsx)("p",{className:"text-3xl font-bold",children:a.cantidad})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Total USDT Vendido"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold",children:["$",a.totalUSDT.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Total Bs Recibido"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold",children:["Bs ",a.totalBs.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Comisi\xf3n Binance"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold",children:["$",a.totalComision.toFixed(2)]})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Tasa Promedio"}),(0,e_.jsx)("p",{className:"text-2xl font-bold",children:a.tasaPromedio.toFixed(2)})]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\ud83d\udccb Historial de Ventas"}),(0,e_.jsxs)("div",{className:"overflow-x-auto",children:[(0,e_.jsxs)("table",{className:"w-full",children:[(0,e_.jsx)("thead",{children:(0,e_.jsxs)("tr",{className:"border-b border-white/20",children:[(0,e_.jsx)("th",{className:"text-left p-3",children:"Fecha"}),(0,e_.jsx)("th",{className:"text-left p-3",children:"Hora"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"USDT Vendido"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Comisi\xf3n"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Tasa"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Bs Recibido"})]})}),(0,e_.jsx)("tbody",{children:s.map(e=>{var t,n,r,i;return(0,e_.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[(0,e_.jsx)("td",{className:"p-3",children:e.fecha}),(0,e_.jsx)("td",{className:"p-3",children:e.hora}),(0,e_.jsxs)("td",{className:"p-3 text-right font-bold text-blue-400",children:["$",null===(t=e.montoUSDT)||void 0===t?void 0:t.toFixed(2)]}),(0,e_.jsxs)("td",{className:"p-3 text-right text-red-400",children:["$",null===(n=e.comisionBinance)||void 0===n?void 0:n.toFixed(2)]}),(0,e_.jsx)("td",{className:"p-3 text-right",children:null===(r=e.tasaVenta)||void 0===r?void 0:r.toFixed(2)}),(0,e_.jsxs)("td",{className:"p-3 text-right font-bold text-green-400",children:["Bs ",null===(i=e.montoBs)||void 0===i?void 0:i.toFixed(2)]})]},e.id)})})]}),0===s.length&&(0,e_.jsx)("p",{className:"text-center py-8 opacity-75",children:"No hay ventas registradas"})]})]})]})},VV=e=>{let{usuario:t,tasaVenta:n,temaActual:r}=e;const s=(0,i.useRef)(null),[a,o]=(0,i.useState)(!1);return(0,e_.jsxs)("div",{children:[(0,e_.jsx)("input",{ref:s,type:"file",accept:".xlsx,.xls",onChange:async e=>{const r=e.target.files[0];if(!r)return;const i=r.name.split(".").pop().toLowerCase();if(["xlsx","xls"].includes(i)){o(!0);try{const e=await(async(e,t,n)=>new Promise((r,i)=>{const s=new FileReader;s.onload=async e=>{try{const i=yO(new Uint8Array(e.target.result),{type:"array",cellDates:!0}),s=i.SheetNames[0],a=i.Sheets[s],o=FO.sheet_to_json(a,{raw:!1,defval:""});if(console.log("\ud83d\udcca Total de filas de gastos le\xeddas:",o.length),console.log("\ud83d\udccb Primera fila de ejemplo:",o[0]),0===o.length)return alert("\u274c El archivo Excel est\xe1 vac\xedo o no tiene el formato correcto"),r({exitosas:0,errores:["Archivo vac\xedo"],total:0,filasVacias:0});if(!(await Fx.collection("transacciones").where("usuarioId","==",t.uid).where("importado","==",!0).where("importadoDesde","==","gastos").limit(1).get()).empty&&!window.confirm('\u26a0\ufe0f Ya tienes gastos importados anteriormente.\n\n\xbfDeseas continuar? Esto podr\xeda crear duplicados.\n\n\ud83d\udca1 Recomendaci\xf3n: Usa el bot\xf3n "\ud83d\uddd1\ufe0f Limpiar Gastos Importados" antes de reimportar.'))return r({exitosas:0,errores:["Importaci\xf3n cancelada por el usuario"],total:o.length,filasVacias:0});const l=[],c=[];let u=0;for(let e=0;e<o.length;e++){const r=o[e],i=e+2;try{const e=e=>{if(!e)return 0;if("number"===typeof e)return e;const t=String(e).replace(/[BsF$,\s]/g,"").replace(",","."),n=parseFloat(t);return isNaN(n)?0:n},s=r.Fecha||r.FECHA||"",a=r.Descripcion||r.DESCRIPCION||r["Descripci\xf3n"]||"",o=e(r.Monto||r.MONTO||0),c=r.Categoria||r.CATEGORIA||r["Categor\xeda"]||"Varios",h=r.Cuenta||r.CUENTA||"Provincial",d=r.Moneda||r.MONEDA||"Bs",f=e(r.Total||r.TOTAL||o);let p=s;if(p&&p.includes("/")){const e=p.split("/");if(3===e.length){const t=e[0].padStart(2,"0"),n=e[1].padStart(2,"0"),r=2===e[2].length?"20"+e[2]:e[2];p="".concat(r,"-").concat(n,"-").concat(t)}}else if(p&&p.includes("-")){const e=p.split("-");if(3===e.length&&2===e[0].length){const t=e[0].padStart(2,"0"),n=e[1].padStart(2,"0"),r=2===e[2].length?"20"+e[2]:e[2];p="".concat(r,"-").concat(n,"-").concat(t)}}if(!p||!a||0===f){console.log("\u26a0\ufe0f Fila ".concat(i,": Datos incompletos, saltando...")),u++;continue}const m=n>0?f/n:0,g={tipo:"Gasto",fecha:p,descripcion:a,monto:o||m,categoria:c,cuenta:h,moneda:d,total:f,gastoDolar:m,tasaVenta:n,importado:!0,importadoDesde:"gastos"};console.log("\u2705 Fila ".concat(i,": ").concat(a," - Bs").concat(f," \u2192 $").concat(m.toFixed(2))),await qx(g,t),l.push(g)}catch(O$){console.error("\u274c Error en fila ".concat(i,":"),O$),c.push("Fila ".concat(i,": ").concat(O$.message))}}r({exitosas:l.length,errores:c,total:o.length,filasVacias:u})}catch(O$){console.error("\u274c Error general:",O$),i(O$)}},s.onerror=e=>i(e),s.readAsArrayBuffer(e)}))(r,t,n);let i="";e.exitosas>0?(i="\u2705 Importaci\xf3n de gastos completada!\n\n",i+="\ud83d\udcca ".concat(e.exitosas," gastos importados exitosamente\n"),i+="\ud83d\udcc4 ".concat(e.total," filas procesadas\n"),e.filasVacias>0&&(i+="\u26aa ".concat(e.filasVacias," filas vac\xedas omitidas\n")),e.errores.length>0&&(i+="\n\u26a0\ufe0f ".concat(e.errores.length," filas con errores:\n"),i+=e.errores.slice(0,5).join("\n"),e.errores.length>5&&(i+="\n... y ".concat(e.errores.length-5," errores m\xe1s"))),alert(i)):alert("\u274c No se pudo importar ning\xfan gasto.\n\nErrores:\n".concat(e.errores.slice(0,10).join("\n")))}catch(O$){console.error("Error al importar gastos:",O$),alert("Error al importar el archivo: "+O$.message)}finally{o(!1),s.current&&(s.current.value="")}}else alert("Por favor selecciona un archivo Excel (.xlsx o .xls)")},style:{display:"none"}}),(0,e_.jsx)("button",{onClick:()=>{var e;null===(e=s.current)||void 0===e||e.click()},disabled:a,className:"".concat(a?"bg-gray-500":"bg-purple-600 hover:bg-purple-700"," text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2"),children:a?(0,e_.jsxs)(e_.Fragment,{children:[(0,e_.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Importando..."]}):(0,e_.jsx)(e_.Fragment,{children:"\ud83d\udce5 Importar Gastos"})})]})},qV=e=>{let{transacciones:t,temaActual:n,usuario:r,tasaVenta:i}=e;const s=t.filter(e=>"Gasto"===e.tipo),a=(()=>{const e={};return s.forEach(t=>{e[t.categoria]||(e[t.categoria]={categoria:t.categoria,totalBs:0,totalDolar:0,cantidad:0}),e[t.categoria].totalBs+=t.total||t.monto||0,e[t.categoria].totalDolar+=t.gastoDolar||0,e[t.categoria].cantidad++}),Object.values(e).sort((e,t)=>t.totalDolar-e.totalDolar)})(),o={totalBs:s.reduce((e,t)=>e+(t.total||t.monto||0),0),totalDolar:s.reduce((e,t)=>e+(t.gastoDolar||0),0),importados:s.filter(e=>e.importado).length,normales:s.filter(e=>!e.importado).length};return(0,e_.jsxs)("div",{className:"space-y-6",children:[(0,e_.jsx)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6 border border-white/20"),children:(0,e_.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\ud83d\udcb0 Gesti\xf3n de Gastos"}),(0,e_.jsxs)("p",{className:"text-sm opacity-75",children:["Total de gastos: ",s.length,"(",o.normales," normales, ",o.importados," importados)"]})]}),(0,e_.jsxs)("div",{className:"flex gap-2",children:[(0,e_.jsx)(VV,{usuario:r,tasaVenta:i,temaActual:n}),(0,e_.jsx)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f \xbfEliminar TODOS los gastos importados?\n\nEsta acci\xf3n NO se puede deshacer."))try{const e=await Fx.collection("transacciones").where("usuarioId","==",r.uid).where("importado","==",!0).where("importadoDesde","==","gastos").get();if(e.empty)return void alert("\u2139\ufe0f No hay gastos importados para eliminar");const t=[];e.forEach(e=>{t.push(Fx.collection("transacciones").doc(e.id).delete())}),await Promise.all(t),alert("\u2705 Se eliminaron ".concat(e.size," gastos importados."))}catch(O$){console.error("Error:",O$),alert("\u274c Error: "+O$.message)}},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83d\uddd1\ufe0f Limpiar Importados"})]})]})}),(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Total Gastos"}),(0,e_.jsx)("p",{className:"text-3xl font-bold",children:s.length}),(0,e_.jsx)("p",{className:"text-xs mt-2 opacity-75",children:"Transacciones"})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Total en Bs"}),(0,e_.jsx)("p",{className:"text-2xl font-bold",children:o.totalBs.toFixed(2)}),(0,e_.jsx)("p",{className:"text-xs mt-2 opacity-75",children:"Bol\xedvares"})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 to-pink-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Total en USD"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",o.totalDolar.toFixed(2)]}),(0,e_.jsx)("p",{className:"text-xs mt-2 opacity-75",children:"D\xf3lares"})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Promedio por Gasto"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold",children:["$",s.length>0?(o.totalDolar/s.length).toFixed(2):"0.00"]}),(0,e_.jsx)("p",{className:"text-xs mt-2 opacity-75",children:"USD"})]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\ud83d\udcca Resumen por Categor\xeda"}),(0,e_.jsx)("div",{className:"overflow-x-auto",children:(0,e_.jsxs)("table",{className:"w-full",children:[(0,e_.jsx)("thead",{children:(0,e_.jsxs)("tr",{className:"border-b border-white/20",children:[(0,e_.jsx)("th",{className:"text-left p-3",children:"Categor\xeda"}),(0,e_.jsx)("th",{className:"text-center p-3",children:"Cantidad"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Total Bs"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Total USD"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"% del Total"})]})}),(0,e_.jsx)("tbody",{children:a.map(e=>(0,e_.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[(0,e_.jsx)("td",{className:"p-3 font-semibold",children:e.categoria}),(0,e_.jsx)("td",{className:"p-3 text-center",children:e.cantidad}),(0,e_.jsxs)("td",{className:"p-3 text-right",children:[e.totalBs.toFixed(2)," Bs"]}),(0,e_.jsxs)("td",{className:"p-3 text-right font-bold text-red-400",children:["$",e.totalDolar.toFixed(2)]}),(0,e_.jsxs)("td",{className:"p-3 text-right text-blue-400 font-semibold",children:[o.totalDolar>0?(e.totalDolar/o.totalDolar*100).toFixed(1):0,"%"]})]},e.categoria))})]})})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\ud83d\udccb \xdaltimos 20 Gastos"}),(0,e_.jsxs)("div",{className:"space-y-2",children:[s.slice(0,20).map(e=>{var t,n,r;return(0,e_.jsxs)("div",{className:"flex justify-between items-center bg-slate-700/50 rounded-lg p-4 hover:bg-slate-700/70 transition-colors",children:[(0,e_.jsxs)("div",{className:"flex-1",children:[(0,e_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e_.jsx)("p",{className:"font-semibold",children:e.descripcion}),e.importado&&(0,e_.jsx)("span",{className:"text-xs bg-blue-500/30 px-2 py-1 rounded",children:"\ud83d\udce5 Importado"})]}),(0,e_.jsxs)("p",{className:"text-sm opacity-75",children:[e.fecha," - ",e.categoria," - ",e.cuenta]})]}),(0,e_.jsxs)("div",{className:"text-right",children:[(0,e_.jsxs)("p",{className:"text-lg font-bold text-red-400",children:[(null===(t=e.total)||void 0===t?void 0:t.toFixed(2))||(null===(n=e.monto)||void 0===n?void 0:n.toFixed(2))||"0.00"," Bs"]}),(0,e_.jsxs)("p",{className:"text-sm text-red-300",children:["$",(null===(r=e.gastoDolar)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]})]},e.id)}),0===s.length&&(0,e_.jsx)("p",{className:"text-center py-8 opacity-75",children:"No hay gastos registrados"})]})]})]})},WV=e=>{let{usuario:t,temaActual:n,transacciones:r}=e;const s=(0,i.useRef)(null),[a,o]=(0,i.useState)(!1),[c,u]=(0,i.useState)("estadisticas"),h=(0,i.useMemo)(()=>r.filter(e=>"Cambio"===e.tipo&&"cambios"===e.importadoDesde).sort((e,t)=>{const n=new Date(e.fecha+" "+(e.hora||"00:00"));return new Date(t.fecha+" "+(t.hora||"00:00"))-n}),[r]),d=(0,i.useMemo)(()=>(e=>{const t=e.filter(e=>"Cambio"===e.tipo&&"cambios"===e.importadoDesde);if(0===t.length)return null;let n=0,r=0,i=0,s={monto:0},a={monto:1/0},o={tasa:0},c={tasa:1/0};const u={},h={};t.forEach(e=>{const t=parseFloat(e.montoUSD)||0,d=parseFloat(e.montoUSDT)||0,f=parseFloat(e.comision)||0,p=parseFloat(e.tasaCambio)||0,m=e.usuarioCambiador||"Sin especificar";n+=t,r+=d,i+=f,t>s.monto&&(s=l(l({},e),{},{monto:t})),t<a.monto&&t>0&&(a=l(l({},e),{},{monto:t})),p>o.tasa&&(o=l(l({},e),{},{tasa:p})),p<c.tasa&&p>0&&(c=l(l({},e),{},{tasa:p}));const g=e.fecha;u[g]||(u[g]={cantidad:0,totalUSD:0}),u[g].cantidad++,u[g].totalUSD+=t,h[m]||(h[m]={cantidad:0,totalUSD:0,totalUSDT:0}),h[m].cantidad++,h[m].totalUSD+=t,h[m].totalUSDT+=d});let d={fecha:"",cantidad:0,totalUSD:0};Object.entries(u).forEach(e=>{let[t,n]=e;n.cantidad>d.cantidad&&(d=l({fecha:t},n))});const f=n>0?i/n*100:0;let p={nombre:"",totalUSD:0,cantidad:0};return Object.entries(h).forEach(e=>{let[t,n]=e;n.totalUSD>p.totalUSD&&(p=l({nombre:t},n))}),{totalCambios:t.length,totalUSD:n,totalUSDT:r,totalComision:i,promedioComision:f,cambioMasAlto:s,cambioMasBajo:a,mejorTasa:o,peorTasa:c,diaConMasCambios:d,usuarioTop:p,cambiosPorFecha:u,cambiosPorUsuario:h,tasaPromedioGeneral:n>0?r/n:1}})(r),[r]),f=e=>{if(!e)return"";const[t,n,r]=e.split("-");return"".concat(r,"/").concat(n,"/").concat(t)},p=e=>new Intl.NumberFormat("es-VE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return(0,e_.jsxs)("div",{className:"space-y-6",children:[(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-6 rounded-xl shadow-xl"),children:[(0,e_.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold",children:"\ud83d\udcb1 Cambios USD \u2192 USDT"}),(0,e_.jsxs)("div",{className:"flex gap-2",children:[(0,e_.jsx)("button",{onClick:()=>u("estadisticas"),className:"px-4 py-2 rounded-lg font-semibold ".concat("estadisticas"===c?"bg-blue-600 text-white":"bg-white/10 hover:bg-white/20"),children:"\ud83d\udcca Estad\xedsticas"}),(0,e_.jsx)("button",{onClick:()=>u("tabla"),className:"px-4 py-2 rounded-lg font-semibold ".concat("tabla"===c?"bg-blue-600 text-white":"bg-white/10 hover:bg-white/20"),children:"\ud83d\udccb Tabla"})]})]}),(0,e_.jsxs)("div",{className:"flex gap-4",children:[(0,e_.jsx)("input",{ref:s,type:"file",accept:".xlsx,.xls",onChange:async e=>{const n=e.target.files[0];if(!n)return;const r=n.name.split(".").pop().toLowerCase();if(["xlsx","xls"].includes(r)){o(!0);try{const e=await(async(e,t)=>new Promise((n,r)=>{if(!t||!t.uid)return console.error("\u274c Error: Usuario no definido o sin UID"),alert("\u274c Error: No se pudo identificar el usuario. Por favor, recarga la p\xe1gina."),r(new Error("Usuario no definido"));console.log("\ud83d\udc64 Usuario identificado:",t.email||t.uid);const i=new FileReader;i.onload=async e=>{try{const r=yO(new Uint8Array(e.target.result),{type:"array",cellDates:!0,raw:!0}),i=r.SheetNames[0],s=r.Sheets[i],a=FO.sheet_to_json(s,{raw:!1,defval:"",blankrows:!1});if(console.log("\ud83d\udcca Total de filas le\xeddas:",a.length),console.log("\ud83d\udccb Primera fila de ejemplo:",a[0]),0===a.length)return alert("\u274c El archivo Excel est\xe1 vac\xedo o no tiene el formato correcto"),n({exitosas:0,errores:["Archivo vac\xedo"],total:0});if(!(await Fx.collection("transacciones").where("usuarioId","==",t.uid).where("importado","==",!0).where("importadoDesde","==","cambios").limit(1).get()).empty&&!window.confirm('\u26a0\ufe0f Ya tienes cambios USD\u2192USDT importados anteriormente.\n\n\xbfDeseas continuar? Esto podr\xeda crear duplicados.\n\n\ud83d\udca1 Recomendaci\xf3n: Usa el bot\xf3n "\ud83d\uddd1\ufe0f Limpiar Cambios Importados" antes de reimportar.'))return n({exitosas:0,errores:["Importaci\xf3n cancelada por el usuario"],total:a.length});const o=[],l=[];let c=0;for(let e=0;e<a.length;e++){const n=a[e],r=e+2;try{const e=e=>{if(!e&&0!==e)return 0;if("number"===typeof e)return e;let t=String(e).trim();t=t.replace(/[BsF$\s%]/g,"");const n=t.includes("."),r=t.includes(",");if(n&&r){const e=t.lastIndexOf(".");t.lastIndexOf(",")>e?(t=t.replace(/\./g,""),t=t.replace(",",".")):t=t.replace(/,/g,"")}else if(r&&!n){const e=(t.match(/,/g)||[]).length;t=1===e?t.replace(",","."):t.replace(/,/g,"")}const i=parseFloat(t);return isNaN(i)?0:i},i=n.fecha||"",s=n.hora||"";console.log("\ud83d\udcdd Fila ".concat(r," - Valores RAW del Excel:"),{usd_raw:n.usd,usdt_raw:n.usdt});const a=e(n.usd||0),l=e(n["%"]||0),u=e(n.tasa||0),h=e(n["#"]||0),d=e(n.usdt||0),f=e(n.Comision||0),p=n["Usuario Cambiador"]||"",m=n.Descripcion||"";console.log("\u2705 Fila ".concat(r," - Valores PROCESADOS:"),{usd:a,usdt:d,diferencia:a-d});let g=i;if(g&&g.includes("/")){const e=g.split("/");if(3===e.length){const t=e[0].padStart(2,"0"),n=e[1].padStart(2,"0"),r=2===e[2].length?"20"+e[2]:e[2];g="".concat(r,"-").concat(n,"-").concat(t)}}if(!g||0===a||0===d){console.log("\u26a0\ufe0f Fila ".concat(r,": Datos incompletos, saltando...")),c++;continue}const v=f>0?f:a-d,b=a>0?v/a*100:0,y={tipo:"Cambio",fecha:g,hora:s,montoUSD:a,montoUSDT:d,comision:v,comisionPorcentaje:b,tasaCambio:a>0?d/a:1,porcentaje:l,tasa:u,numero:h,usuarioCambiador:p,descripcion:m||"Cambio USD\u2192USDT - ".concat(a.toFixed(2)," USD \u2192 ").concat(d.toFixed(2)," USDT"),monto:a,moneda:"USD",categoria:"Cambio de Divisa",cuenta:"Binance",importado:!0,importadoDesde:"cambios"};console.log("\u2705 Fila ".concat(r,": $").concat(a," USD \u2192 ").concat(d," USDT (").concat(b.toFixed(2),"% comisi\xf3n) - ").concat(p)),await qx(y,t),o.push(y)}catch(O$){console.error("\u274c Error en fila ".concat(r,":"),O$),l.push("Fila ".concat(r,": ").concat(O$.message))}}const u="\u2705 Importaci\xf3n completada:\n\n"+"\u2713 ".concat(o.length," cambios importados\n")+"\u26a0 ".concat(c," filas vac\xedas\n")+"".concat(l.length>0?"\u2717 ".concat(l.length," errores"):"");alert(u),n({exitosas:o.length,errores:l,total:a.length,filasVacias:c})}catch(O$){console.error("\u274c Error general:",O$),alert("\u274c Error al importar: ".concat(O$.message)),r(O$)}},i.onerror=e=>{console.error("\u274c Error al leer archivo:",e),r(e)},i.readAsArrayBuffer(e)}))(n,t);let r="";e.exitosas>0?(r="\u2705 Importaci\xf3n de cambios USD\u2192USDT completada!\n\n",r+="\ud83d\udcb1 ".concat(e.exitosas," cambios importados exitosamente\n"),r+="\ud83d\udcc4 ".concat(e.total," filas procesadas\n"),e.filasVacias>0&&(r+="\u26aa ".concat(e.filasVacias," filas vac\xedas omitidas\n")),e.errores.length>0&&(r+="\n\u26a0\ufe0f ".concat(e.errores.length," filas con errores:\n"),r+=e.errores.slice(0,5).join("\n"),e.errores.length>5&&(r+="\n... y ".concat(e.errores.length-5," errores m\xe1s"))),alert(r),window.location.reload()):alert("\u274c No se pudo importar ning\xfan cambio.\n\nErrores:\n".concat(e.errores.slice(0,10).join("\n")))}catch(O$){console.error("Error al importar cambios:",O$),alert("Error al importar el archivo: "+O$.message)}finally{o(!1),s.current&&(s.current.value="")}}else alert("Por favor selecciona un archivo Excel (.xlsx o .xls)")},style:{display:"none"}}),(0,e_.jsx)("button",{onClick:()=>{var e;null===(e=s.current)||void 0===e||e.click()},disabled:a,className:"".concat(a?"bg-gray-500":"bg-green-600 hover:bg-green-700"," text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2"),children:a?(0,e_.jsxs)(e_.Fragment,{children:[(0,e_.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Importando..."]}):(0,e_.jsx)(e_.Fragment,{children:"\ud83d\udce5 Importar Excel"})}),h.length>0&&(0,e_.jsx)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f \xbfEst\xe1s seguro de que deseas eliminar TODOS los cambios importados?\n\nEsta acci\xf3n NO se puede deshacer."))try{const e=await Fx.collection("transacciones").where("usuarioId","==",t.uid).where("importado","==",!0).where("importadoDesde","==","cambios").get(),n=Fx.batch();e.docs.forEach(e=>{n.delete(e.ref)}),await n.commit(),alert("\u2705 Se eliminaron ".concat(e.size," cambios importados")),window.location.reload()}catch(O$){console.error("Error al limpiar cambios:",O$),alert("Error al eliminar cambios: "+O$.message)}},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83d\uddd1\ufe0f Limpiar Cambios Importados"})]})]}),0===h.length?(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-8 rounded-xl shadow-xl text-center"),children:[(0,e_.jsx)("p",{className:"text-xl mb-4",children:"\ud83d\udced No hay cambios importados"}),(0,e_.jsx)("p",{className:"text-gray-400 mb-6",children:"Importa un archivo Excel con tus cambios de USD a USDT para ver las estad\xedsticas"}),(0,e_.jsxs)("div",{className:"text-left max-w-2xl mx-auto",children:[(0,e_.jsx)("p",{className:"font-semibold mb-2",children:"\ud83d\udccb Formato del Excel:"}),(0,e_.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-300",children:[(0,e_.jsxs)("li",{children:[(0,e_.jsx)("strong",{children:"fecha"}),": DD/MM/YYYY"]}),(0,e_.jsxs)("li",{children:[(0,e_.jsx)("strong",{children:"hora"}),": HH:MM"]}),(0,e_.jsxs)("li",{children:[(0,e_.jsx)("strong",{children:"usd"}),": Monto en USD cambiados"]}),(0,e_.jsxs)("li",{children:[(0,e_.jsx)("strong",{children:"usdt"}),": Monto en USDT recibidos"]}),(0,e_.jsxs)("li",{children:[(0,e_.jsx)("strong",{children:"Usuario Cambiador"}),": Nombre"]}),(0,e_.jsxs)("li",{children:[(0,e_.jsx)("strong",{children:"Descripcion"}),": Nota"]})]})]})]}):(0,e_.jsxs)(e_.Fragment,{children:["estadisticas"===c&&d&&(0,e_.jsxs)("div",{className:"space-y-6",children:[(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400",children:"Total Cambios"}),(0,e_.jsx)("p",{className:"text-2xl font-bold",children:d.totalCambios})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400",children:"Total USD"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold",children:["$",p(d.totalUSD)]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400",children:"Total USDT"}),(0,e_.jsx)("p",{className:"text-2xl font-bold",children:p(d.totalUSDT)})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400",children:"Comisi\xf3n Total"}),(0,e_.jsxs)("p",{className:"text-2xl font-bold text-red-400",children:["$",p(d.totalComision)]}),(0,e_.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[d.promedioComision.toFixed(3),"% promedio"]})]})]}),(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"\ud83d\udd3c Cambio M\xe1s Alto"}),(0,e_.jsxs)("p",{className:"text-xl font-bold",children:["$",p(d.cambioMasAlto.montoUSD||0)]}),(0,e_.jsxs)("p",{className:"text-sm text-gray-300",children:[f(d.cambioMasAlto.fecha)," - ",d.cambioMasAlto.usuarioCambiador]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"\ud83d\udd3d Cambio M\xe1s Bajo"}),(0,e_.jsxs)("p",{className:"text-xl font-bold",children:["$",p(d.cambioMasBajo.montoUSD||0)]}),(0,e_.jsxs)("p",{className:"text-sm text-gray-300",children:[f(d.cambioMasBajo.fecha)," - ",d.cambioMasBajo.usuarioCambiador]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"\u2705 Mejor Tasa"}),(0,e_.jsx)("p",{className:"text-xl font-bold text-green-400",children:d.mejorTasa.tasa.toFixed(4)}),(0,e_.jsxs)("p",{className:"text-sm text-gray-300",children:[f(d.mejorTasa.fecha)," - $",p(d.mejorTasa.montoUSD||0)]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"\u274c Peor Tasa"}),(0,e_.jsx)("p",{className:"text-xl font-bold text-red-400",children:d.peorTasa.tasa.toFixed(4)}),(0,e_.jsxs)("p",{className:"text-sm text-gray-300",children:[f(d.peorTasa.fecha)," - $",p(d.peorTasa.montoUSD||0)]})]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"\ud83d\udcc5 D\xeda con M\xe1s Cambios"}),(0,e_.jsx)("p",{className:"text-xl font-bold",children:f(d.diaConMasCambios.fecha)}),(0,e_.jsxs)("p",{className:"text-sm text-gray-300",children:[d.diaConMasCambios.cantidad," operaciones - $",p(d.diaConMasCambios.totalUSD)]})]}),(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm p-4 rounded-xl"),children:[(0,e_.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"\ud83d\udc64 Usuario que M\xe1s Cambi\xf3"}),(0,e_.jsx)("p",{className:"text-xl font-bold",children:d.usuarioTop.nombre}),(0,e_.jsxs)("p",{className:"text-sm text-gray-300",children:[d.usuarioTop.cantidad," cambios - $",p(d.usuarioTop.totalUSD)," USD"]})]})]}),"tabla"===c&&(0,e_.jsx)("div",{className:"".concat(n.tarjeta," backdrop-blur-sm rounded-xl shadow-xl overflow-hidden"),children:(0,e_.jsx)("div",{className:"overflow-x-auto",children:(0,e_.jsxs)("table",{className:"w-full",children:[(0,e_.jsx)("thead",{className:"bg-white/5",children:(0,e_.jsxs)("tr",{children:[(0,e_.jsx)("th",{className:"px-4 py-3 text-left",children:"Fecha"}),(0,e_.jsx)("th",{className:"px-4 py-3 text-left",children:"Hora"}),(0,e_.jsx)("th",{className:"px-4 py-3 text-right",children:"USD"}),(0,e_.jsx)("th",{className:"px-4 py-3 text-right",children:"USDT"}),(0,e_.jsx)("th",{className:"px-4 py-3 text-right",children:"Comisi\xf3n"}),(0,e_.jsx)("th",{className:"px-4 py-3 text-right",children:"Tasa"}),(0,e_.jsx)("th",{className:"px-4 py-3 text-left",children:"Usuario"}),(0,e_.jsx)("th",{className:"px-4 py-3 text-left",children:"Descripci\xf3n"})]})}),(0,e_.jsx)("tbody",{children:h.map((e,t)=>(0,e_.jsxs)("tr",{className:"border-t border-white/10 hover:bg-white/5",children:[(0,e_.jsx)("td",{className:"px-4 py-3",children:f(e.fecha)}),(0,e_.jsx)("td",{className:"px-4 py-3",children:e.hora||"--:--"}),(0,e_.jsxs)("td",{className:"px-4 py-3 text-right font-semibold",children:["$",p(e.montoUSD)]}),(0,e_.jsx)("td",{className:"px-4 py-3 text-right font-semibold text-green-400",children:p(e.montoUSDT)}),(0,e_.jsxs)("td",{className:"px-4 py-3 text-right text-red-400",children:["$",p(e.comision||0),(0,e_.jsxs)("span",{className:"text-xs ml-1",children:["(",(e.comisionPorcentaje||0).toFixed(2),"%)"]})]}),(0,e_.jsx)("td",{className:"px-4 py-3 text-right",children:(e.tasaCambio||0).toFixed(4)}),(0,e_.jsx)("td",{className:"px-4 py-3",children:e.usuarioCambiador||"-"}),(0,e_.jsx)("td",{className:"px-4 py-3 text-sm text-gray-400",children:e.descripcion||"-"})]},t))})]})})})]})]})};function HV(e){return e+.5|0}const GV=(e,t,n)=>Math.max(Math.min(e,n),t);function KV(e){return GV(HV(2.55*e),0,255)}function YV(e){return GV(HV(255*e),0,255)}function XV(e){return GV(HV(e/2.55)/100,0,1)}function $V(e){return GV(HV(100*e),0,100)}const JV={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},QV=[..."0123456789ABCDEF"],ZV=e=>QV[15&e],eq=e=>QV[(240&e)>>4]+QV[15&e],tq=e=>(240&e)>>4===(15&e);function nq(e){var t=(e=>tq(e.r)&&tq(e.g)&&tq(e.b)&&tq(e.a))(e)?ZV:eq;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const rq=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function iq(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function sq(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function aq(e,t,n){const r=iq(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function oq(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=(i+s)/2;let o,l,c;return i!==s&&(c=i-s,l=a>.5?c/(2-i-s):c/(i+s),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,a]}function lq(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(YV)}function cq(e,t,n){return lq(iq,e,t,n)}function uq(e){return(e%360+360)%360}function hq(e){const t=rq.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?KV(+t[5]):YV(+t[5]));const i=uq(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return lq(aq,e,t,n)}(i,s,a):"hsv"===t[1]?function(e,t,n){return lq(sq,e,t,n)}(i,s,a):cq(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}const dq={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},fq={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let pq;function mq(e){pq||(pq=function(){const e={},t=Object.keys(fq),n=Object.keys(dq);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<n.length;i++)s=n[i],o=o.replace(s,dq[s]);s=parseInt(fq[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),pq.transparent=[0,0,0,0]);const t=pq[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const gq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const vq=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,bq=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function yq(e,t,n){if(e){let r=oq(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=cq(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function wq(e,t){return e?Object.assign(t||{},e):e}function xq(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=YV(e[3]))):(t=wq(e,{r:0,g:0,b:0,a:1})).a=YV(t.a),t}function _q(e){return"r"===e.charAt(0)?function(e){const t=gq.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?KV(e):GV(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?KV(n):GV(n,0,255)),r=255&(t[4]?KV(r):GV(r,0,255)),i=255&(t[6]?KV(i):GV(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):hq(e)}class Sq{constructor(e){if(e instanceof Sq)return e;const t=typeof e;let n;"object"===t?n=xq(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*JV[e[1]],g:255&17*JV[e[2]],b:255&17*JV[e[3]],a:5===n?17*JV[e[4]]:255}:7!==n&&9!==n||(t={r:JV[e[1]]<<4|JV[e[2]],g:JV[e[3]]<<4|JV[e[4]],b:JV[e[5]]<<4|JV[e[6]],a:9===n?JV[e[7]]<<4|JV[e[8]]:255})),t}(e)||mq(e)||_q(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=wq(this._rgb);return e&&(e.a=XV(e.a)),e}set rgb(e){this._rgb=xq(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(XV(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?nq(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=oq(e),n=t[0],r=$V(t[1]),i=$V(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(XV(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,a=2*s-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=bq(XV(e.r)),i=bq(XV(e.g)),s=bq(XV(e.b));return{r:YV(vq(r+n*(bq(XV(t.r))-r))),g:YV(vq(i+n*(bq(XV(t.g))-i))),b:YV(vq(s+n*(bq(XV(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Sq(this.rgb)}alpha(e){return this._rgb.a=YV(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=HV(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return yq(this._rgb,2,e),this}darken(e){return yq(this._rgb,2,-e),this}saturate(e){return yq(this._rgb,1,e),this}desaturate(e){return yq(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=oq(e);n[0]=uq(n[0]+t),n=cq(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function kq(){}const Tq=(()=>{let e=0;return()=>e++})();function Eq(e){return null===e||void 0===e}function Aq(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Nq(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Iq(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Cq(e,t){return Iq(e)?e:t}function Pq(e,t){return"undefined"===typeof e?t:e}const Lq=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Dq(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Oq(e,t,n,r){let i,s,a;if(Aq(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(Nq(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function Rq(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Mq(e){if(Aq(e))return e.map(Mq);if(Nq(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=Mq(e[n[i]]);return t}return e}function Fq(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function jq(e,t,n,r){if(!Fq(e))return;const i=t[e],s=n[e];Nq(i)&&Nq(s)?Bq(i,s,r):t[e]=Mq(s)}function Bq(e,t,n){const r=Aq(t)?t:[t],i=r.length;if(!Nq(e))return e;const s=(n=n||{}).merger||jq;let a;for(let o=0;o<i;++o){if(a=r[o],!Nq(a))continue;const t=Object.keys(a);for(let r=0,i=t.length;r<i;++r)s(t[r],e,a,n)}return e}function Uq(e,t){return Bq(e,t,{merger:zq})}function zq(e,t,n){if(!Fq(e))return;const r=t[e],i=n[e];Nq(r)&&Nq(i)?Uq(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Mq(i))}const Vq={"":e=>e,x:e=>e.x,y:e=>e.y};function qq(e,t){const n=Vq[t]||(Vq[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Wq(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Hq=e=>"undefined"!==typeof e,Gq=e=>"function"===typeof e,Kq=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Yq=Math.PI,Xq=2*Yq,$q=Xq+Yq,Jq=Number.POSITIVE_INFINITY,Qq=Yq/180,Zq=Yq/2,eW=Yq/4,tW=2*Yq/3,nW=Math.log10,rW=Math.sign;function iW(e,t,n){return Math.abs(e-t)<n}function sW(e){const t=Math.round(e);e=iW(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(nW(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function aW(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function oW(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function lW(e){return e*(Yq/180)}function cW(e){return e*(180/Yq)}function uW(e){if(!Iq(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function hW(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Yq&&(s+=Xq),{angle:s,distance:i}}function dW(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function fW(e,t){return(e-t+$q)%Xq-Yq}function pW(e){return(e%Xq+Xq)%Xq}function mW(e,t,n,r){const i=pW(e),s=pW(t),a=pW(n),o=pW(s-i),l=pW(a-i),c=pW(i-s),u=pW(i-a);return i===s||i===a||r&&s===a||o>l&&c<u}function gW(e,t,n){return Math.max(t,Math.min(n,e))}function vW(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function bW(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const yW=(e,t,n,r)=>bW(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),wW=(e,t,n)=>bW(e,n,r=>e[r][t]>=n);const xW=["push","pop","shift","splice","unshift"];function _W(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(xW.forEach(t=>{delete e[t]}),delete e._chartjs)}function SW(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const kW="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function TW(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];n=s,r||(r=!0,kW.call(window,()=>{r=!1,e.apply(t,n)}))}}const EW=e=>"start"===e?"left":"end"===e?"right":"center",AW=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function NW(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(i=Math.min(yW(l,u,h).lo,n?r:yW(t,u,a.getPixelForValue(h)).lo),c){const e=l.slice(0,i+1).reverse().findIndex(e=>!Eq(e[o.axis]));i-=Math.max(0,e)}i=gW(i,0,r-1)}if(p){let e=Math.max(yW(l,a.axis,d,!0).hi+1,n?0:yW(t,u,a.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!Eq(e[o.axis]));e+=Math.max(0,t)}s=gW(e,i,r)-i}else s=r-i}return{start:i,count:s}}function IW(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const CW=e=>0===e||1===e,PW=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Xq/n),LW=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Xq/n)+1,DW={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Zq),easeOutSine:e=>Math.sin(e*Zq),easeInOutSine:e=>-.5*(Math.cos(Yq*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>CW(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>CW(e)?e:PW(e,.075,.3),easeOutElastic:e=>CW(e)?e:LW(e,.075,.3),easeInOutElastic(e){const t=.1125;return CW(e)?e:e<.5?.5*PW(2*e,t,.45):.5+.5*LW(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-DW.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*DW.easeInBounce(2*e):.5*DW.easeOutBounce(2*e-1)+.5};function OW(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function RW(e){return OW(e)?e:new Sq(e)}function MW(e){return OW(e)?e:new Sq(e).saturate(.5).darken(.1).hexString()}const FW=["x","y","borderWidth","radius","tension"],jW=["color","borderColor","backgroundColor"];const BW=new Map;function UW(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=BW.get(n);return r||(r=new Intl.NumberFormat(e,t),BW.set(n,r)),r}(t,n).format(e)}const zW={values:e=>Aq(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=nW(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),UW(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(nW(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?zW.numeric.call(this,e,t,n):""}};var VW={formatters:zW};const qW=Object.create(null),WW=Object.create(null);function HW(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function GW(e,t,n){return"string"===typeof t?Bq(HW(e,t),n):Bq(HW(e,""),t)}class KW{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>MW(t.backgroundColor),this.hoverBorderColor=(e,t)=>MW(t.borderColor),this.hoverColor=(e,t)=>MW(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return GW(this,e,t)}get(e){return HW(this,e)}describe(e,t){return GW(WW,e,t)}override(e,t){return GW(qW,e,t)}route(e,t,n,r){const i=HW(this,e),s=HW(this,n),a="_"+t;Object.defineProperties(i,{[a]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[r];return Nq(e)?Object.assign({},t,e):Pq(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var YW=new KW({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:jW},numbers:{type:"number",properties:FW}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:VW.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function XW(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function $W(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,h,d;for(l=0;l<o;l++)if(h=n[l],void 0===h||null===h||Aq(h)){if(Aq(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||Aq(d)||(a=XW(e,i,s,a,d))}else a=XW(e,i,s,a,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return a}function JW(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function QW(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function ZW(e,t,n,r){eH(e,t,n,r,null)}function eH(e,t,n,r,i){let s,a,o,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*Qq;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,m,0,0,Xq):e.arc(n,r,m,0,Xq),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=tW,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=tW,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,a=Math.cos(g+eW)*l,h=Math.cos(g+eW)*(i?i/2-c:l),o=Math.sin(g+eW)*l,d=Math.sin(g+eW)*(i?i/2-c:l),e.arc(n-h,r-o,c,g-Yq,g-Zq),e.arc(n+d,r-a,c,g-Zq,g),e.arc(n+h,r+o,c,g,g+Zq),e.arc(n-d,r+a,c,g+Zq,g+Yq),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=eW;case"rectRot":h=Math.cos(g)*(i?i/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-o),e.lineTo(n+d,r-a),e.lineTo(n+h,r+o),e.lineTo(n-d,r+a),e.closePath();break;case"crossRot":g+=eW;case"cross":h=Math.cos(g)*(i?i/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a);break;case"star":h=Math.cos(g)*(i?i/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a),g+=eW,h=Math.cos(g)*(i?i/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(i?i/2:m),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a);break;case"line":a=i?i/2:Math.cos(g)*m,o=Math.sin(g)*m,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function tH(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function nH(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function rH(e){e.restore()}function iH(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function sH(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function aH(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function oH(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function lH(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Aq(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Eq(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&oH(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Eq(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),aH(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function cH(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Yq,Yq,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Yq,Zq,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,Zq,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-Zq,!0),e.lineTo(n+a.topLeft,r)}const uH=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hH=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function dH(e,t){const n=(""+e).match(uH);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const fH=e=>+e||0;function pH(e,t){const n={},r=Nq(t),i=r?Object.keys(t):t,s=Nq(e)?r?n=>Pq(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of i)n[a]=fH(s(a));return n}function mH(e){return pH(e,{top:"y",right:"x",bottom:"y",left:"x"})}function gH(e){return pH(e,["topLeft","topRight","bottomLeft","bottomRight"])}function vH(e){const t=mH(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function bH(e,t){e=e||{},t=t||YW.font;let n=Pq(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=Pq(e.style,t.style);r&&!(""+r).match(hH)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Pq(e.family,t.family),lineHeight:dH(Pq(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Pq(e.weight,t.weight),string:""};return i.string=function(e){return!e||Eq(e.size)||Eq(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function yH(e,t,n,r){let i,s,a,o=!0;for(i=0,s=e.length;i<s;++i)if(a=e[i],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&Aq(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function wH(e,t){return Object.assign(Object.create(e),t)}function xH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=LH("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>xH([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>EH(n,r,()=>function(e,t,n,r){let i;for(const s of t)if(i=LH(kH(s,e),n),"undefined"!==typeof i)return TH(e,i)?CH(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>DH(e).includes(t),ownKeys:e=>DH(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function _H(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:SH(e,r),setContext:t=>_H(e,t,n,r),override:i=>_H(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>EH(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let o=r[t];Gq(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||r);o.delete(e),TH(e,l)&&(l=CH(i._scopes,i,e,l));return l}(t,o,e,n));Aq(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(Nq(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=CH(r,i,e,l);t.push(_H(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));TH(t,o)&&(o=_H(o,i,s&&s[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function SH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Gq(n)?n:()=>n,isIndexable:Gq(r)?r:()=>r}}const kH=(e,t)=>e?e+Wq(t):t,TH=(e,t)=>Nq(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function EH(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function AH(e,t,n){return Gq(e)?e(t,n):e}const NH=(e,t)=>!0===e?t:"string"===typeof e?qq(t,e):void 0;function IH(e,t,n,r,i){for(const s of t){const t=NH(n,s);if(t){e.add(t);const s=AH(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function CH(e,t,n,r){const i=t._rootScopes,s=AH(t._fallback,n,r),a=[...e,...i],o=new Set;o.add(r);let l=PH(o,a,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=PH(o,a,s,l,r),null!==l))&&xH(Array.from(o),[""],i,s,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(Aq(i)&&Nq(n))return n;return i||{}}(t,n,r)))}function PH(e,t,n,r,i){for(;n;)n=IH(e,t,n,r,i);return n}function LH(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function DH(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function OH(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={r:i.parse(qq(u,s),c)};return a}const RH=Number.EPSILON||1e-14,MH=(e,t)=>t<e.length&&!e[t].skip&&e[t],FH=e=>"x"===e?"y":"x";function jH(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,o=dW(s,i),l=dW(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(a.x-i.x),y:s.y-h*(a.y-i.y)},next:{x:s.x+d*(a.x-i.x),y:s.y+d*(a.y-i.y)}}}function BH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=FH(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,o,l,c=MH(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=MH(e,a+1),l){if(c){const e=c[t]-l[t];i[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?rW(i[a-1])!==rW(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(e,t,n){const r=e.length;let i,s,a,o,l,c=MH(e,0);for(let u=0;u<r-1;++u)l=c,c=MH(e,u+1),l&&c&&(iW(t[u],0,RH)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(i,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=i*a*t[u],n[u+1]=s*a*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=FH(n),i=e.length;let s,a,o,l=MH(e,0);for(let c=0;c<i;++c){if(a=o,o=l,l=MH(e,c+1),!o)continue;const i=o[n],u=o[r];a&&(s=(i-a[n])/3,o["cp1".concat(n)]=i-s,o["cp1".concat(r)]=u-s*t[c]),l&&(s=(l[n]-i)/3,o["cp2".concat(n)]=i+s,o["cp2".concat(r)]=u+s*t[c])}}(e,s,t)}function UH(e,t,n){return Math.max(Math.min(e,n),t)}function zH(e,t,n,r,i){let s,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)BH(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=jH(n,o,e[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,s,a,o=tH(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=o,o=n<r-1&&tH(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=UH(i.cp1x,t.left,t.right),i.cp1y=UH(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=UH(i.cp2x,t.left,t.right),i.cp2y=UH(i.cp2y,t.top,t.bottom)))}(e,n)}function VH(){return"undefined"!==typeof window&&"undefined"!==typeof document}function qH(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function WH(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const HH=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const GH=["top","right","bottom","left"];function KH(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=GH[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function YH(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=HH(n),s="border-box"===i.boxSizing,a=KH(i,"padding"),o=KH(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))a=i,o=s;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),h=a.left+(u&&o.left),d=a.top+(u&&o.top);let{width:f,height:p}=t;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const XH=e=>Math.round(10*e)/10;function $H(e,t,n,r){const i=HH(e),s=KH(i,"margin"),a=WH(i.maxWidth,e,"clientWidth")||Jq,o=WH(i.maxHeight,e,"clientHeight")||Jq,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&qH(e);if(s){const e=s.getBoundingClientRect(),a=HH(s),o=KH(a,"border","width"),l=KH(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=WH(a.maxWidth,s,"clientWidth"),i=WH(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Jq,maxHeight:i||Jq}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=KH(i,"border","width"),t=KH(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=XH(Math.min(c,a,l.maxWidth)),u=XH(Math.min(u,o,l.maxHeight)),c&&!u&&(u=XH(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=XH(Math.floor(u*r))),{width:c,height:u}}function JH(e,t,n){const r=t||1,i=XH(e.height*r),s=XH(e.width*r);e.height=XH(e.height),e.width=XH(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const QH=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};VH()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(R$){}return e}();function ZH(e,t){const n=function(e,t){return HH(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function eG(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function tG(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function nG(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=eG(e,i,n),o=eG(i,s,n),l=eG(s,t,n),c=eG(a,o,n),u=eG(o,l,n);return eG(c,u,n)}function rG(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function iG(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function sG(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function aG(e){return"angle"===e?{between:mW,compare:fW,normalize:pW}:{between:vW,compare:(e,t)=>e-t,normalize:e=>e}}function oG(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function lG(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=aG(r),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:o}=aG(r),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(o(t[h%l][r]),i,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let m,g,v,b=!1,y=null;const w=()=>b||l(i,v,m)&&0!==o(i,v),x=()=>!b||0===o(s,m)||l(s,v,m);for(let _=u,S=u;_<=h;++_)g=t[_%a],g.skip||(m=c(g[r]),m!==v&&(b=l(m,i,s),null===y&&w()&&(y=0===o(m,i)?_:S),null!==y&&x()&&(p.push(oG({start:y,end:_,loop:d,count:a,style:f})),y=null),S=_,v=m));return null!==y&&p.push(oG({start:y,end:h,loop:d,count:a,style:f})),p}function cG(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=lG(r[i],e.points,t);s.length&&n.push(...s)}return n}function uG(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=hG(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,r,i){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,h=t%l)}}for(const p of t){h=o?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=hG(r.setContext(wH(i,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),dG(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,r):t}function hG(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function dG(e,t){if(!t)return!1;const n=[],r=function(e,t){return OW(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function fG(e,t,n){return e.options.clip?e[n]:t[n]}function pG(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:fG(n,t,"left"),right:fG(n,t,"right"),top:fG(r,t,"top"),bottom:fG(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class mG{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=kW.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,a=i.length-1,o=!1;for(;a>=0;--a)s=i[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gG=new mG;const vG="transparent",bG={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=RW(e||vG),i=r.valid&&RW(t||vG);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class yG{constructor(e,t,n,r){const i=t[n];r=yH([e.to,r,i,e.from]);const s=yH([e.from,i,r]);this._active=!0,this._fn=e.fn||bG[e.type||typeof s],this._easing=DW[e.easing]||DW.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=yH([e.to,t,r,e.from]),this._from=yH([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,a=this._to;let o;if(this._active=i!==a&&(s||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class wG{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Nq(e))return;const t=Object.keys(YW.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Nq(i))return;const s={};for(const e of t)s[e]=i[e];(Aq(i.properties)&&i.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(i[l]=u=new yG(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(gG.add(this._chart,n),!0):void 0}}function xG(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function _G(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function SG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===n){if(u=!0,r.all)continue;break}c=e.values[l],Iq(c)&&(s||0===t||rW(t)===rW(c))&&(t+=c)}return u||r.all?t:0}function kG(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function TG(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function EG(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function AG(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,r),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=TG(i,u,n),d[o]=s,d._top=EG(d,a,!0,r.type),d._bottom=EG(d,a,!1,r.type);(d._visualValues||(d._visualValues={}))[o]=s}}function NG(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function IG(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const CG=e=>"reset"===e||"none"===e,PG=(e,t)=>t?e:Object.assign({},e);class LG{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=kG(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&IG(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=Pq(n.xAxisID,NG(e,"x")),s=t.yAxisID=Pq(n.yAxisID,NG(e,"y")),a=t.rAxisID=Pq(n.rAxisID,NG(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,s,a),c=t.vAxisID=r(o,s,i,a);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&_W(this._data,this),e._stacked&&IG(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Nq(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[i]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){_W(n,this);const e=this._cachedMeta;IG(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),xW.forEach(e=>{const t="_onData"+Wq(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const a=n.apply(this,i);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...i)}),a}})}))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=kG(t.vScale,t),t.stack!==n.stack&&(r=!0,IG(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(AG(this,t._parsed),t._stacked=kG(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,a=i.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=Aq(r[e])?this.parseArrayData(n,r,e,t):Nq(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[a]||h&&l[a]<h[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(i()&&(u=!1),h=l);n._sorted=u}s&&AG(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,a=i.axis,o=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[a]:c||i.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=t[h],l[c]={x:i.parse(qq(d,a),h),y:s.parse(qq(d,o),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return SG({keys:_G(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,s=SG(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:_G(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=r[h];const t=d[a.axis];return!Iq(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,o),!i));++h);if(i)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],Iq(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return Nq(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(Pq(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=xG(e,n),i=xG(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return wH(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return wH(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,a=i[s],o=this.enableOptionSharing&&Hq(n);if(a)return PG(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(YW.elements[e]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,r,t),u);return f.$shared&&(f.$shared=o,i[s]=Object.freeze(PG(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),a=i[s];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(s,this.getContext(e,n,t))}const l=new wG(r,o&&o.animations);return o&&o._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||CG(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){CG(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!CG(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(i),a=e;a<s;++a)i[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&IG(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function DG(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=SW(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(Hq(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return o}function OG(e,t,n,r){return Aq(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function RG(e,t,n,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),o=i===s,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=t[c],h={},h[i.axis]=o||i.parse(a[c],c),l.push(OG(d,h,s,c));return l}function MG(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function FG(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[jG(u,a,o,l)]=!0,i=c)),s[jG(i,a,o,l)]=!0,e.borderSkipped=s}function jG(e,t,n,r){var i,s,a;return r?(a=n,e=BG(e=(i=e)===(s=t)?a:i===a?s:i,n,t)):e=BG(e,t,n),e}function BG(e,t,n){return"start"===e?t:"end"===e?n:e}function UG(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,a.A)(LG,"defaults",{}),(0,a.A)(LG,"datasetElementType",null),(0,a.A)(LG,"dataElementType",null);class zG extends LG{parsePrimitiveData(e,t,n,r){return RG(e,t,n,r)}parseArrayData(e,t,n,r){return RG(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?a:o,c="x"===s.axis?a:o,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=t[h],f={},f[i.axis]=i.parse(qq(p,l),h),u.push(OG(qq(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,a=MG(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=i||Eq(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[a.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||MG(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(m.options=u||this.resolveDataElementOptions(d,e[d].active?"active":r));const g=m.options||e[d].options;FG(m,g,p,s),UG(m,g,c.ratio),this.updateElement(e[d],d,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(Eq(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Pq("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=e.barThickness;return{min:a||DG(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,a=i||0,o=this.getParsed(e),l=o._custom,c=MG(l);let u,h,d=o[t.axis],f=0,p=n?this.applyStack(t,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&rW(d)!==rW(l.barEnd)&&(f=0),f+=d);const m=Eq(i)||c?f:i;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,h=u-g,Math.abs(h)<s){h=function(e,t,n){return 0!==e?rW(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,a)*s,d===a&&(g-=h/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);g=Math.max(Math.min(g,f),l),u=g+h,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=rW(h)*t.getLineWidthForValue(a)/2;g+=e,h-=e}return{size:h,base:g,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=Pq(r.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let a=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const i=n.barThickness;let s,a;return Eq(i)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}(e,t,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(Pq(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+h;a=c.start+c.chunk*d+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}(0,a.A)(zG,"id","bar"),(0,a.A)(zG,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,a.A)(zG,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class VG extends LG{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=Pq(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=Pq(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,u=a.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=i?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(h,t.active?"active":r),i&&(d.options.radius=0)),this.updateElement(t,h,d,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=Pq(n&&n._custom,i),r}}(0,a.A)(VG,"id","bubble"),(0,a.A)(VG,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,a.A)(VG,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class qG extends LG{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,a=e=>+n[e];if(Nq(n[e])){const{key:e="value"}=this._parsing;a=t=>+qq(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=a(i)}}_getRotation(){return lW(this.options.rotation-90)}_getCircumference(){return lW(this.options.circumference)}_getRotationExtents(){let e=Xq,t=-Xq;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let r=1,i=1,s=0,a=0;if(t<Xq){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),f=(e,t,r)=>mW(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>mW(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),m=f(0,c,h),g=f(Zq,u,d),v=p(Yq,c,h),b=p(Yq+Zq,u,d);r=(m-v)/2,i=(g-b)/2,s=-(m+v)/2,a=-(g+b)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}(d,h,o),v=(n.width-s)/f,b=(n.height-s)/p,y=Math.max(Math.min(v,b)/2,0),w=Lq(this.options.radius,y),x=(w-Math.max(w*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=g*w,r.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/Xq)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=i&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Xq*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=UW(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,a,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,a=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Pq(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,a.A)(qG,"id","doughnut"),(0,a.A)(qG,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,a.A)(qG,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,a.A)(qG,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:n,textAlign:r,color:i,useBorderRadius:s,borderRadius:a}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(o),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:r,pointStyle:n,borderRadius:s&&(a||l.borderRadius),index:o}}):[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class WG extends LG{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=NW(t,r,s);this._drawStart=a,this._drawCount=o,IW(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),h=s.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,m=aW(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,v=t+n,b=e.length;let y=t>0&&this.getParsed(t-1);for(let w=0;w<b;++w){const n=e[w],f=g?n:{};if(w<t||w>=v){f.skip=!0;continue}const b=this.getParsed(w),x=Eq(b[d]),_=f[h]=s.getPixelForValue(b[h],w),S=f[d]=i||x?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,b,o):b[d],w);f.skip=isNaN(_)||isNaN(S)||x,f.stop=w>0&&Math.abs(b[h]-y[h])>m,p&&(f.parsed=b,f.raw=l.data[w]),u&&(f.options=c||this.resolveDataElementOptions(w,n.active?"active":r)),g||this.updateElement(n,w,f,r),y=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,a.A)(WG,"id","line"),(0,a.A)(WG,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,a.A)(WG,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class HG extends LG{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=UW(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return OH.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Yq;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,r,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,r,f),m=s.getDataVisibility(h)?o.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(a.animateScale&&(m=0),a.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":r)};this.updateElement(t,h,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?lW(this.resolveDataElementOptions(e,t).angle||n):0}}(0,a.A)(HG,"id","polarArea"),(0,a.A)(HG,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,a.A)(HG,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class GG extends qG{}(0,a.A)(GG,"id","pie"),(0,a.A)(GG,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class KG extends LG{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return OH.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=i.getPointPositionForValue(a,this.getParsed(a).r),l=s?i.xCenter:o.x,c=s?i.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,r)}}}(0,a.A)(KG,"id","radar"),(0,a.A)(KG,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,a.A)(KG,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class YG extends LG{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=NW(t,n,r);if(this._drawStart=i,this._drawCount=s,IW(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=s.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,g=aW(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let b=t>0&&this.getParsed(t-1);for(let y=t;y<t+n;++y){const t=e[y],n=this.getParsed(y),c=v?t:{},p=Eq(n[f]),w=c[d]=s.getPixelForValue(n[d],y),x=c[f]=i||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],y);c.skip=isNaN(w)||isNaN(x)||p,c.stop=y>0&&Math.abs(n[d]-b[d])>g,m&&(c.parsed=n,c.raw=l.data[y]),h&&(c.options=u||this.resolveDataElementOptions(y,t.active?"active":r)),v||this.updateElement(t,y,c,r),b=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}(0,a.A)(YG,"id","scatter"),(0,a.A)(YG,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,a.A)(YG,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var XG=Object.freeze({__proto__:null,BarController:zG,BubbleController:VG,DoughnutController:qG,LineController:WG,PieController:GG,PolarAreaController:HG,RadarController:KG,ScatterController:YG});function $G(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class JG{static override(e){Object.assign(JG.prototype,e)}constructor(e){(0,a.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return $G()}parse(){return $G()}format(){return $G()}add(){return $G()}diff(){return $G()}startOf(){return $G()}endOf(){return $G()}}var QG=JG;function ZG(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?wW:yW;if(!r){const r=a(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex(e=>!Eq(e[t.axis]));r.lo-=Math.max(0,s);const a=n.slice(r.hi).findIndex(e=>!Eq(e[t.axis]));r.hi+=Math.max(0,a)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(s,t,n-r),i=a(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function eK(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=ZG(s[o],t,a,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function tK(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return eK(e,n,t,function(n,a,o){(i||tH(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:a,index:o})},!0),s}function nK(e,t,n,r,i,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return eK(e,n,t,function(n,c,u){const h=n.inRange(t.x,t.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=o(t,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function rK(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?nK(e,t,n,r,i,s):function(e,t,n,r){let i=[];return eK(e,n,t,function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=hW(e,{x:t.x,y:t.y});mW(l,a,o)&&i.push({element:e,datasetIndex:n,index:s})}),i}(e,t,n,i):[]}function iK(e,t,n,r,i){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return eK(e,n,t,(e,r,l)=>{e[a]&&e[a](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))}),r&&!o?[]:s}var sK={evaluateInteractionItems:eK,modes:{index(e,t,n,r){const i=YH(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?tK(e,i,s,r,a):rK(e,i,s,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=YH(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?tK(e,i,s,r,a):rK(e,i,s,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>tK(e,YH(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=YH(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return rK(e,i,s,n.intersect,r,a)},x:(e,t,n,r)=>iK(e,YH(t,e),"x",n.intersect,r),y:(e,t,n,r)=>iK(e,YH(t,e),"y",n.intersect,r)}};const aK=["left","top","right","bottom"];function oK(e,t){return e.filter(e=>e.pos===t)}function lK(e,t){return e.filter(e=>-1===aK.indexOf(e.pos)&&e.box.axis===t)}function cK(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function uK(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!aK.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:a&&t.availableHeight)}return n}function hK(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function dK(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function fK(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!Nq(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&dK(a,s.getPadding());const o=Math.max(0,t.outerWidth-hK(a,e,"left","right")),l=Math.max(0,t.outerHeight-hK(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function pK(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function mK(e,t,n,r){const i=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,pK(o.horizontal,t));const{same:a,other:h}=fK(t,n,o,r);c|=a&&i.length,u=u||h,l.fullSize||i.push(o)}return c&&mK(i,t,n,r)||u}function gK(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function vK(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,s=l.size||e.height;Hq(l.start)&&(a=l.start),e.fullSize?gK(e,i.left,a,n.outerWidth-i.right-i.left,s):gK(e,t.left+l.placed,a,r,s),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;Hq(l.start)&&(s=l.start),e.fullSize?gK(e,s,i.top,a,n.outerHeight-i.bottom-i.top):gK(e,s,t.top+l.placed,a,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=a}var bK={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=vH(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,s,a,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=cK(t.filter(e=>e.box.fullSize),!0),r=cK(oK(t,"left"),!0),i=cK(oK(t,"right")),s=cK(oK(t,"top"),!0),a=cK(oK(t,"bottom")),o=lK(t,"x"),l=lK(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:oK(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Oq(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},i);dK(d,vH(r));const f=Object.assign({maxPadding:d,w:s,h:a,x:i.left,y:i.top},i),p=uK(l.concat(c),h);mK(o.fullSize,f,h,p),mK(l,f,h,p),mK(c,f,h,p)&&mK(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),vK(o.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,vK(o.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Oq(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class yK{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class wK extends yK{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xK="$chartjs",_K={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},SK=e=>null===e||""===e;const kK=!!QH&&{passive:!0};function TK(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,kK)}function EK(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function AK(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||EK(n.addedNodes,r),t=t&&!EK(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function NK(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||EK(n.removedNodes,r),t=t&&!EK(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const IK=new Map;let CK=0;function PK(){const e=window.devicePixelRatio;e!==CK&&(CK=e,IK.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function LK(e,t,n){const r=e.canvas,i=r&&qH(r);if(!i)return;const s=TW((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)});return a.observe(i),function(e,t){IK.size||window.addEventListener("resize",PK),IK.set(e,t)}(e,s),a}function DK(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){IK.delete(e),IK.size||window.removeEventListener("resize",PK)}(e)}function OK(e,t,n){const r=e.canvas,i=TW(t=>{null!==e.ctx&&n(function(e,t){const n=_K[e.type]||e.type,{x:r,y:i}=YH(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,kK)}(r,t,i),i}class RK extends yK{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[xK]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",SK(i)){const t=ZH(e,"width");void 0!==t&&(e.width=t)}if(SK(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=ZH(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[xK])return!1;const n=t[xK].initial;["height","width"].forEach(e=>{const r=n[e];Eq(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[xK],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:AK,detach:NK,resize:LK}[t]||OK;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:DK,detach:DK,resize:DK}[t]||TK)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return $H(e,t,n,r)}isAttached(e){const t=e&&qH(e);return!(!t||!t.isConnected)}}class MK{constructor(){(0,a.A)(this,"x",void 0),(0,a.A)(this,"y",void 0),(0,a.A)(this,"active",!1),(0,a.A)(this,"options",void 0),(0,a.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return aW(this.x)&&aW(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function FK(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>i)return function(e,t,n,r){let i,s=0,a=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===a&&(t.push(e[i]),s++,a=n[s*r])}(t,c,s,a/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(jK(t,c,u,Eq(r)?0:o-r,o),e=0,n=a-1;e<n;e++)jK(t,c,u,s[e],s[e+1]);return jK(t,c,u,l,Eq(r)?t.length:l+r),c}return jK(t,c,u),c}function jK(e,t,n,r,i){const s=Pq(r,0),a=Math.min(Pq(i,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}(0,a.A)(MK,"defaults",{}),(0,a.A)(MK,"defaultRoutes",void 0);const BK=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,UK=(e,t)=>Math.min(t||e,e);function zK(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function VK(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-o||c>a+o)))return c}function qK(e){return e.drawTicks?e.tickLength:0}function WK(e,t){if(!e.display)return 0;const n=bH(e.font,t),r=vH(e.padding);return(Aq(e.text)?e.text.length:1)*n.lineHeight+r.height}function HK(e,t,n){let r=EW(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class GK extends MK{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=Cq(e,Number.POSITIVE_INFINITY),t=Cq(t,Number.NEGATIVE_INFINITY),n=Cq(n,Number.POSITIVE_INFINITY),r=Cq(r,Number.NEGATIVE_INFINITY),{min:Cq(e,n),max:Cq(t,r),minDefined:Iq(e),maxDefined:Iq(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Cq(n,Cq(r,n)),max:Cq(r,Cq(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Dq(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=Lq(t,(i-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(s)),max:a(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?zK(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=FK(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Dq(this.options.afterUpdate,[this])}beforeSetDimensions(){Dq(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Dq(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Dq(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Dq(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Dq(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Dq(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Dq(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=UK(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,a,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=gW(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),a=this.maxHeight-qK(e.grid)-t.padding-WK(e.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=cW(Math.min(Math.asin(gW((c.highest.height+6)/s,-1,1)),Math.asin(gW(a/o,-1,1))-Math.asin(gW(h/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Dq(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Dq(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=WK(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=qK(i)+s):(e.height=this.maxHeight,e.width=qK(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),o=2*n.padding,l=lW(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=r*e.width,h=n*t.height):(u=n*e.height,h=r*t.width):"start"===i?h=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Dq(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Eq(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=zK(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],a=[],o=Math.floor(t/UK(t,n));let l,c,u,h,d,f,p,m,g,v,b,y=0,w=0;for(l=0;l<t;l+=o){if(h=e[l].label,d=this._resolveTickFontOptions(l),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},m=d.lineHeight,g=v=0,Eq(h)||Aq(h)){if(Aq(h))for(c=0,u=h.length;c<u;++c)b=h[c],Eq(b)||Aq(b)||(g=XW(r,p.data,p.gc,g,b),v+=m)}else g=XW(r,p.data,p.gc,g,h),v=m;s.push(g),a.push(v),y=Math.max(g,y),w=Math.max(v,w)}!function(e,t){Oq(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(i,t);const x=s.indexOf(y),_=a.indexOf(w),S=e=>({width:s[e]||0,height:a[e]||0});return{first:S(0),last:S(t-1),widest:S(x),highest:S(_),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return gW(this._alignToPixels?JW(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return wH(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=wH(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=lW(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,a=i?i.widest.width+s:0,o=i?i.highest.height+s:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:a}=r,o=i.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=qK(i),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,m=function(e){return JW(n,e,f)};let g,v,b,y,w,x,_,S,k,T,E,A;if("top"===s)g=m(this.bottom),x=this.bottom-u,S=g-p,T=m(e.top)+p,A=e.bottom;else if("bottom"===s)g=m(this.top),T=e.top,A=m(e.bottom)-p,x=g+p,S=this.top+u;else if("left"===s)g=m(this.right),w=this.right-u,_=g-p,k=m(e.left)+p,E=e.right;else if("right"===s)g=m(this.left),k=e.left,E=m(e.right)-p,w=g+p,_=this.left+u;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(Nq(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}T=e.top,A=e.bottom,x=g+p,S=x+u}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(Nq(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}w=g-p,_=w-u,k=e.left,E=e.right}const N=Pq(r.ticks.maxTicksLimit,c),I=Math.max(1,Math.ceil(c/N));for(v=0;v<c;v+=I){const e=this.getContext(v),t=i.setContext(e),r=a.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],d=r.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;b=VK(this,v,o),void 0!==b&&(y=JW(n,b,s),l?w=_=k=E=y:x=S=T=A=y,h.push({tx1:w,ty1:x,tx2:_,ty2:S,x1:k,y1:T,x2:E,y2:A,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=i,h=qK(n.grid),d=h+c,f=u?-c:d,p=-lW(this.labelRotation),m=[];let g,v,b,y,w,x,_,S,k,T,E,A,N="middle";if("top"===r)x=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)x=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,w=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,w=e.x}else if("x"===t){if("center"===r)x=(e.top+e.bottom)/2+d;else if(Nq(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)+d}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)w=(e.left+e.right)/2-d;else if(Nq(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===o?N="top":"end"===o&&(N="bottom"));const I=this._getLabelSizes();for(g=0,v=a.length;g<v;++g){b=a[g],y=b.label;const e=i.setContext(this.getContext(g));S=this.getPixelForTick(g)+i.labelOffset,k=this._resolveTickFontOptions(g),T=k.lineHeight,E=Aq(y)?y.length:1;const t=E/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let h,d=_;if(s?(w=S,"inner"===_&&(d=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),A="top"===r?"near"===l||0!==p?-E*T+T/2:"center"===l?-I.highest.height/2-t*T+T:-I.highest.height+T/2:"near"===l||0!==p?T/2:"center"===l?I.highest.height/2-t*T:I.highest.height-E*T,u&&(A*=-1),0===p||e.showLabelBackdrop||(w+=T/2*Math.sin(p))):(x=S,A=(1-E)*T/2),e.showLabelBackdrop){const t=vH(e.backdropPadding),n=I.heights[g],r=I.widths[g];let i=A-t.top,s=0-t.left;switch(N){case"middle":i-=n/2;break;case"bottom":i-=n}switch(_){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":g===v-1?s-=r:g>0&&(s-=r/2)}h={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:y,font:k,textOffset:A,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:N,translation:[w,x],backdrop:h}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-lW(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=JW(e,this.left,s)-s/2,c=JW(e,this.right,a)+a/2,u=h=o):(u=JW(e,this.top,s)-s/2,h=JW(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&nH(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;lH(t,i.label,0,i.textOffset,n,e)}n&&rH(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=bH(n.font),s=vH(n.padding),a=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||Nq(t)?(o+=s.bottom,Aq(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,r){const{top:i,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const m=a-i,g=o-s;if(e.isHorizontal()){if(d=AW(r,s,o),Nq(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:BK(e,n,t);h=o-s}else{if(Nq(n)){const e=Object.keys(n)[0],r=n[e];d=u[e].getPixelForValue(r)-g+t}else d="center"===n?(c.left+c.right)/2-g+t:BK(e,n,t);f=AW(r,a,i),p="left"===n?-Zq:Zq}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,o,t,a);lH(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:HK(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Pq(e.grid&&e.grid.z,-1),r=Pq(e.border&&e.border.z,0);return this._isVisible()&&this.draw===GK.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return bH(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class KK{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=Bq(Object.create(null),[n?YW.get(n):{},YW.get(t),e.defaults]);YW.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");YW.route(s,i,l,o)})}(t,e.defaultRoutes);e.descriptors&&YW.describe(t,e.descriptors)}(e,s,n),this.override&&YW.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in YW[r]&&(delete YW[r][n],this.override&&delete qW[n])}}class YK{constructor(){this.controllers=new KK(LG,"datasets",!0),this.elements=new KK(MK,"elements"),this.plugins=new KK(Object,"plugins"),this.scales=new KK(GK,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):Oq(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=Wq(e);Dq(n["before"+r],[],n),t[e](n),Dq(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var XK=new YK;class $K{constructor(){this._init=void 0}notify(e,t,n,r){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===Dq(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){Eq(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=Pq(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(XK.plugins.items);for(let s=0;s<r.length;s++)n.push(XK.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const a=[],o=e.getContext();for(const l of i){const t=l.id,i=JK(n[t],r);null!==i&&a.push({plugin:l,options:QK(e.config,{plugin:l,local:s[t]},i,o)})}return a}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function JK(e,t){return t||!1!==e?!0===e?{}:e:null}function QK(e,t,n,r){let{plugin:i,local:s}=t;const a=e.pluginScopeKeys(i),o=e.getOptionScopes(n,a);return s&&i.defaults&&o.push(i.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ZK(e,t){const n=YW.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function eY(e){if("x"===e||"y"===e||"r"===e)return e}function tY(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function nY(e){if(eY(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||tY(i.position)||e.length>1&&eY(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function rY(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function iY(e,t){const n=qW[e.type]||{scales:{}},r=t.scales||{},i=ZK(e.type,t),s=Object.create(null);return Object.keys(r).forEach(t=>{const a=r[t];if(!Nq(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=nY(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return rY(e,"x",n[0])||rY(e,"y",n[0])}return{}}(t,e),YW.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};s[t]=Uq(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,a=n.indexAxis||ZK(i,t),o=(qW[i]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),Uq(s[i],[{axis:t},r[i],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];Uq(t,[YW.scales[t.type],YW.scale])}),s}function sY(e){const t=e.options||(e.options={});t.plugins=Pq(t.plugins,{}),t.scales=iY(e,t)}function aY(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const oY=new Map,lY=new Set;function cY(e,t){let n=oY.get(e);return n||(n=t(),oY.set(e,n),lY.add(n)),n}const uY=(e,t,n)=>{const r=qq(t,n);void 0!==r&&e.add(r)};class hY{constructor(e){this._config=function(e){return(e=e||{}).data=aY(e.data),sY(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=aY(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),sY(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cY(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return cY("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return cY("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return cY("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>uY(o,e,t))),t.forEach(e=>uY(o,r,e)),t.forEach(e=>uY(o,qW[i]||{},e)),t.forEach(e=>uY(o,YW,e)),t.forEach(e=>uY(o,WW,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),lY.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,qW[t]||{},YW.datasets[t]||{},{type:t},YW,WW]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:a}=dY(this._resolverCache,e,r);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=SH(e);for(const i of t){const t=n(i),s=r(i),a=(s||t)&&e[i];if(t&&(Gq(a)||fY(a))||s&&Aq(a))return!0}return!1}(s,t)){i.$shared=!1;o=_H(s,n=Gq(n)?n():n,this.createResolver(e,n,a))}for(const l of t)i[l]=o[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=dY(this._resolverCache,e,n);return Nq(t)?_H(i,t,void 0,r):i}}function dY(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:xH(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,s)}return s}const fY=e=>Nq(e)&&Object.getOwnPropertyNames(e).some(t=>Gq(e[t]));const pY=["top","bottom","left","right","chartArea"];function mY(e,t){return"top"===e||"bottom"===e||-1===pY.indexOf(e)&&"x"===t}function gY(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function vY(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Dq(n&&n.onComplete,[e],t)}function bY(e){const t=e.chart,n=t.options.animation;Dq(n&&n.onProgress,[e],t)}function yY(e){return VH()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const wY={},xY=e=>{const t=yY(e);return Object.values(wY).filter(e=>e.canvas===t).pop()};function _Y(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}class SY{static register(){XK.add(...arguments),kY()}static unregister(){XK.remove(...arguments),kY()}constructor(e,t){const n=this.config=new hY(t),r=yY(e),i=xY(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!VH()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?wK:RK}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=Tq(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $K,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],wY[this.id]=this,a&&o?(gG.listen(this,"complete",vY),gG.listen(this,"progress",bY),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return Eq(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return XK}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():JH(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return QW(this.canvas,this.ctx),this}stop(){return gG.stop(this),this}resize(e,t){gG.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,JH(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),Dq(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Oq(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=nY(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}}))),Oq(i,t=>{const i=t.options,s=i.id,a=nY(s,i),o=Pq(i.type,t.dtype);void 0!==i.position&&mY(i.position,a)===mY(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(XK.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)}),Oq(r,(e,t)=>{e||delete n[t]}),Oq(n,e=>{bK.configure(this,e,e.options),bK.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(gY("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||ZK(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=XK.getController(s),{datasetElementType:r,dataElementType:a}=YW.datasets[s];Object.assign(t,{dataElementType:XK.getElement(a),datasetElementType:r&&XK.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){Oq(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||Oq(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(gY("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Oq(this.scales,e=>{bK.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Kq(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){_Y(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let i=1;i<t;i++)if(!Kq(r,n(i)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;bK.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Oq(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Gq(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(gG.has(this)?this.attached&&!gG.running(this)&&gG.start(this):(this.draw(),vY({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=pG(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&nH(t,r),e.controller.draw(),r&&rH(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return tH(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=sK.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=wH(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);Hq(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),gG.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),QW(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete wY[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Oq(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){Oq(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Oq(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,a,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!Rq(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=i(t,e),a=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,a=this._getActiveElements(e,r,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,Dq(i.onHover,[e,a,this],this),o&&Dq(i.onClick,[e,a,this],this));const c=!Rq(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function kY(){return Oq(SY.instances,e=>e._plugins.invalidate())}function TY(e,t,n,r){const i=pH(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,r*t/2),o=e=>{const t=(n-Math.min(s,e))*r/2;return gW(e,0,Math.min(s,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:gW(i.innerStart,0,a),innerEnd:gW(i.innerEnd,0,a)}}function EY(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function AY(e,t,n,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(h>0?h-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*h-n/Yq)/h)/2,g=l+m+f,v=i-m-f,{outerStart:b,outerEnd:y,innerStart:w,innerEnd:x}=TY(t,d,h,v-g),_=h-b,S=h-y,k=g+b/_,T=v-y/S,E=d+w,A=d+x,N=g+w/E,I=v-x/A;if(e.beginPath(),s){const t=(k+T)/2;if(e.arc(a,o,h,k,t),e.arc(a,o,h,t,T),y>0){const t=EY(S,T,a,o);e.arc(t.x,t.y,y,T,v+Zq)}const n=EY(A,v,a,o);if(e.lineTo(n.x,n.y),x>0){const t=EY(A,I,a,o);e.arc(t.x,t.y,x,v+Zq,I+Math.PI)}const r=(v-x/d+(g+w/d))/2;if(e.arc(a,o,d,v-x/d,r,!0),e.arc(a,o,d,r,g+w/d,!0),w>0){const t=EY(E,N,a,o);e.arc(t.x,t.y,w,N+Math.PI,g-Zq)}const i=EY(_,g,a,o);if(e.lineTo(i.x,i.y),b>0){const t=EY(_,k,a,o);e.arc(t.x,t.y,b,g-Zq,k)}}else{e.moveTo(a,o);const t=Math.cos(k)*h+a,n=Math.sin(k)*h+o;e.lineTo(t,n);const r=Math.cos(T)*h+a,i=Math.sin(T)*h+o;e.lineTo(r,i)}e.closePath()}function NY(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(s){AY(e,t,n,r,m,i);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(m=a+(o%Xq||Xq))}p&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(s,a,o,r-c,n+c),l>i?(c=i/l,e.arc(s,a,l,n+c,r-c,!0)):e.arc(s,a,i,n+Zq,r-Zq),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-a>=Yq&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/a,pW(r-n));if(e.beginPath(),e.arc(i,s,a-c/2,r+h/2,n-h/2),o>0){const t=Math.min(c/o,pW(r-n));e.arc(i,s,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,a*pW(r-n));if("round"===u)e.arc(i,s,t,n-Yq/2,r+Yq/2,!0);else if("bevel"===u){const a=2*t*t,o=-a*Math.cos(n+Yq/2)+i,l=-a*Math.sin(n+Yq/2)+s,c=a*Math.cos(r+Yq/2)+i,u=a*Math.sin(r+Yq/2)+s;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),s||(AY(e,t,n,r,m,i),e.stroke())}(0,a.A)(SY,"defaults",YW),(0,a.A)(SY,"instances",wY),(0,a.A)(SY,"overrides",qW),(0,a.A)(SY,"registry",XK),(0,a.A)(SY,"version","4.5.1"),(0,a.A)(SY,"getChart",xY);class IY extends MK{constructor(e){super(),(0,a.A)(this,"circumference",void 0),(0,a.A)(this,"endAngle",void 0),(0,a.A)(this,"fullCircles",void 0),(0,a.A)(this,"innerRadius",void 0),(0,a.A)(this,"outerRadius",void 0),(0,a.A)(this,"pixelMargin",void 0),(0,a.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=hW(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=Pq(u,o-a),f=mW(i,a,o)&&a!==o,p=d>=Xq||f,m=vW(s,l+h,c+h);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Xq?Math.floor(n/Xq):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(Yq,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){AY(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%Xq||Xq))}AY(e,t,n,r,l,i),e.fill()}(e,this,o,i,s),NY(e,this,o,i,s),e.restore()}}function CY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Pq(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Pq(n.borderDash,t.borderDash)),e.lineDashOffset=Pq(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Pq(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Pq(n.borderWidth,t.borderWidth),e.strokeStyle=Pq(n.borderColor,t.borderColor)}function PY(e,t,n){e.lineTo(n.x,n.y)}function LY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:o}=t,l=Math.max(i,a),c=Math.min(s,o),u=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function DY(e,t,n,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:c}=LY(i,n,r),u=function(e){return e.stepped?iH:e.tension||"monotone"===e.cubicInterpolationMode?sH:PY}(s);let h,d,f,{move:p=!0,reverse:m}=r||{};for(h=0;h<=c;++h)d=i[(o+(m?c-h:h))%a],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,m,s.stepped),f=d);return l&&(d=i[(o+(m?c:0))%a],u(e,f,d,m,s.stepped)),!!l}function OY(e,t,n,r){const i=t.points,{count:s,start:a,ilen:o}=LY(i,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,f,p,m,g=0,v=0;const b=e=>(a+(c?o-e:e))%s,y=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(h=i[b(0)],e.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=i[b(u)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<f?f=n:n>p&&(p=n),g=(v*g+t)/++v):(y(),e.lineTo(t,n),d=r,v=0,f=p=n),m=n}y()}function RY(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?OY:DY}(0,a.A)(IY,"id","arc"),(0,a.A)(IY,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,a.A)(IY,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,a.A)(IY,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const MY="function"===typeof Path2D;function FY(e,t,n,r){MY&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),CY(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,a=RY(t);for(const o of i)CY(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class jY extends MK{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;zH(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return uG(e,!0===r?[{start:a,end:o,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(a-1)%i,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%i,end:o%i,loop:r}),s}(n,a,o<a?o+i:o,!!e._fullLoop&&0===a&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=cG(this,{property:t,start:r,end:r});if(!s.length)return;const a=[],o=function(e){return e.stepped?tG:e.tension||"monotone"===e.cubicInterpolationMode?nG:eG}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=i[c],d=i[u];if(h===d){a.push(h);continue}const f=o(h,d,Math.abs((r-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return RY(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=RY(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)s&=i(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),FY(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function BY(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}(0,a.A)(jY,"id","line"),(0,a.A)(jY,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,a.A)(jY,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,a.A)(jY,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class UY extends MK{constructor(e){super(),(0,a.A)(this,"parsed",void 0),(0,a.A)(this,"skip",void 0),(0,a.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return BY(this,e,"x",t)}inYRange(e,t){return BY(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!tH(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,ZW(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function zY(e,t){const{x:n,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,h;return e.horizontal?(h=a/2,o=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,o=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:o,top:c,right:l,bottom:u}}function VY(e,t,n,r){return e?0:gW(t,n,r)}function qY(e){const t=zY(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=mH(r);return{t:VY(i.top,s.top,0,n),r:VY(i.right,s.right,0,t),b:VY(i.bottom,s.bottom,0,n),l:VY(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=gH(i),a=Math.min(t,n),o=e.borderSkipped,l=r||Nq(i);return{topLeft:VY(!l||o.top||o.left,s.topLeft,0,a),topRight:VY(!l||o.top||o.right,s.topRight,0,a),bottomLeft:VY(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:VY(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function WY(e,t,n,r){const i=null===t,s=null===n,a=e&&!(i&&s)&&zY(e,r);return a&&(i||vW(t,a.left,a.right))&&(s||vW(n,a.top,a.bottom))}function HY(e,t){e.rect(t.x,t.y,t.w,t.h)}function GY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+a,radius:e.radius}}(0,a.A)(UY,"id","point"),(0,a.A)(UY,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,a.A)(UY,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class KY extends MK{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=qY(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?cH:HY;var o;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),a(e,GY(s,t,i)),e.clip(),a(e,GY(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,GY(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return WY(this,e,t,n)}inXRange(e,t){return WY(this,e,null,t)}inYRange(e,t){return WY(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,a.A)(KY,"id","bar"),(0,a.A)(KY,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,a.A)(KY,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var YY=Object.freeze({__proto__:null,ArcElement:IY,BarElement:KY,LineElement:jY,PointElement:UY});const XY=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],$Y=XY.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function JY(e){return XY[e%XY.length]}function QY(e){return $Y[e%$Y.length]}function ZY(e){let t=0;return(n,r)=>{const i=e.getDatasetMeta(r).controller;i instanceof qG?t=function(e,t){return e.backgroundColor=e.data.map(()=>JY(t++)),t}(n,t):i instanceof HG?t=function(e,t){return e.backgroundColor=e.data.map(()=>QY(t++)),t}(n,t):i&&(t=function(e,t){return e.borderColor=JY(t),e.backgroundColor=QY(t),++t}(n,t))}}function eX(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var tX={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=e.config,{elements:s}=i,a=eX(r)||(o=i)&&(o.borderColor||o.backgroundColor)||s&&eX(s)||"rgba(0,0,0,0.1)"!==YW.borderColor||"rgba(0,0,0,0.1)"!==YW.backgroundColor;var o;if(!n.forceOverride&&a)return;const l=ZY(e);r.forEach(l)}};function nX(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function rX(e){e.data.datasets.forEach(e=>{nX(e)})}var iX={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void rX(e);const r=e.width;e.data.datasets.forEach((t,i)=>{const{_data:s,indexAxis:a}=t,o=e.getDatasetMeta(i),c=s||t.data;if("y"===yH([a,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const u=e.scales[o.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(e.options.parsing)return;let{start:h,count:d}=function(e,t){const n=t.length;let r,i=0;const{iScale:s}=e,{min:a,max:o,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=gW(yW(t,s.axis,a).lo,0,n-1)),r=c?gW(yW(t,s.axis,o).hi+1,i,n)-i:n-i,{start:i,count:r}}(o,c);if(d<=(n.threshold||4*r))return void nX(t);let f;switch(Eq(s)&&(t._data=c,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":f=function(e,t,n,r,i){const s=i.samples||r;if(s>=n)return e.slice(t,t+n);const a=[],o=(n-2)/(s-2);let l=0;const c=t+n-1;let u,h,d,f,p,m=t;for(a[l++]=e[m],u=0;u<s-2;u++){let r,i=0,s=0;const c=Math.floor((u+1)*o)+1+t,g=Math.min(Math.floor((u+2)*o)+1,n)+t,v=g-c;for(r=c;r<g;r++)i+=e[r].x,s+=e[r].y;i/=v,s/=v;const b=Math.floor(u*o)+1+t,y=Math.min(Math.floor((u+1)*o)+1,n)+t,{x:w,y:x}=e[m];for(d=f=-1,r=b;r<y;r++)f=.5*Math.abs((w-i)*(e[r].y-x)-(w-e[r].x)*(s-x)),f>d&&(d=f,h=e[r],p=r);a[l++]=h,m=p}return a[l++]=e[c],a}(c,h,d,r,n);break;case"min-max":f=function(e,t,n,r){let i,s,a,o,c,u,h,d,f,p,m=0,g=0;const v=[],b=t+n-1,y=e[t].x,w=e[b].x-y;for(i=t;i<t+n;++i){s=e[i],a=(s.x-y)/w*r,o=s.y;const t=0|a;if(t===c)o<f?(f=o,u=i):o>p&&(p=o,h=i),m=(g*m+s.x)/++g;else{const n=i-1;if(!Eq(u)&&!Eq(h)){const t=Math.min(u,h),r=Math.max(u,h);t!==d&&t!==n&&v.push(l(l({},e[t]),{},{x:m})),r!==d&&r!==n&&v.push(l(l({},e[r]),{},{x:m}))}i>0&&n!==d&&v.push(e[n]),v.push(s),c=t,g=0,f=p=o,u=h=d=i}}return v}(c,h,d,r);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}t._decimated=f})},destroy(e){rX(e)}};function sX(e,t,n,r){if(r)return;let i=t[e],s=n[e];return"angle"===e&&(i=pW(i),s=pW(s)),{property:e,start:i,end:s}}function aX(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function oX(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function lX(e,t){let n=[],r=!1;return Aq(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,s=[];return t.segments.forEach(e=>{let{start:t,end:a}=e;a=aX(t,a,i);const o=i[t],l=i[a];null!==r?(s.push({x:o.x,y:r}),s.push({x:l.x,y:r})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:l.y}))}),s}(e,t),n.length?new jY({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function cX(e){return e&&!1!==e.fill}function uX(e,t,n){let r=e[t].fill;const i=[t];let s;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!Iq(r))return r;if(s=e[r],!s)return!1;if(s.visible)return r;i.push(r),r=s.fill}return!1}function hX(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=Pq(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(Nq(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return Iq(i)&&Math.floor(i)===i?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function dX(e,t,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:a,last:o,point:l}=fX(s,t,"x");if(!(!l||a&&o))if(a)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function fX(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],s=e.segments,a=e.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=a[e.start][n],r=a[e.end][n];if(vW(i,t,r)){o=i===t,l=i===r;break}}return{first:o,last:l,point:r}}class pX{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:i,radius:s}=this;return t=t||{start:0,end:Xq},e.arc(r,i,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function mX(e){const{chart:t,fill:n,line:r}=e;if(Iq(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,i=[],s=r.segments,a=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const e=r[i];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(lX({x:null,y:t.bottom},r));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)dX(i,a[t],o)}return new jY({points:i,options:{}})}(e);if("shape"===n)return!0;const i=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,s=r.reverse?t.max:t.min,a=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:Nq(e)?e.value:t.getBaseValue(),r}(n,t,s),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,s);return new pX({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<i;++l)o.push(t.getPointPositionForValue(l,a));return o}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:Nq(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(Iq(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return i instanceof pX?i:lX(i,r)}function gX(e,t,n){const r=mX(t),{chart:i,index:s,line:a,scale:o,axis:l}=t,c=a.options,u=c.fill,h=c.backgroundColor,{above:d=h,below:f=h}=u||{},p=i.getDatasetMeta(s),m=pG(i,p);r&&a.points.length&&(nH(e,n),function(e,t){const{line:n,target:r,above:i,below:s,area:a,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let u=s;s!==i&&("x"===c?(vX(e,r,a.top),yX(e,{line:n,target:r,color:i,scale:o,property:c,clip:l}),e.restore(),e.save(),vX(e,r,a.bottom)):"y"===c&&(bX(e,r,a.left),yX(e,{line:n,target:r,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),bX(e,r,a.right),u=i));yX(e,{line:n,target:r,color:u,scale:o,property:c,clip:l}),e.restore()}(e,{line:a,target:r,above:d,below:f,area:n,scale:o,axis:l,clip:m}),rH(e))}function vX(e,t,n){const{segments:r,points:i}=t;let s=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=i[r],u=i[aX(r,l,i)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function bX(e,t,n){const{segments:r,points:i}=t;let s=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=i[r],u=i[aX(r,l,i)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(n,u.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function yX(e,t){const{line:n,target:r,property:i,color:s,scale:a,clip:o}=t,l=function(e,t,n){const r=e.segments,i=e.points,s=t.points,a=[];for(const o of r){let{start:e,end:r}=o;r=aX(e,r,i);const l=sX(n,i[e],i[r],o.loop);if(!t.segments){a.push({source:o,target:l,start:i[e],end:i[r]});continue}const c=cG(t,l);for(const t of c){const e=sX(n,s[t.start],s[t.end],t.loop),r=lG(o,i,e);for(const i of r)a.push({source:i,target:t,start:{[n]:oX(l,e,"start",Math.max)},end:{[n]:oX(l,e,"end",Math.min)}})}}return a}(n,r,i);for(const{source:c,target:u,start:h,end:d}of l){const{style:{backgroundColor:t=s}={}}=c,l=!0!==r;e.save(),e.fillStyle=t,wX(e,a,o,l&&sX(i,h,d)),e.beginPath();const f=!!n.pathSegment(e,c);let p;if(l){f?e.closePath():xX(e,r,d,i);const t=!!r.pathSegment(e,u,{move:f,reverse:!0});p=f&&t,p||xX(e,r,h,i)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function wX(e,t,n,r){const i=t.chart.chartArea,{property:s,start:a,end:o}=r||{};if("x"===s||"y"===s){let t,r,l,c;"x"===s?(t=a,r=i.top,l=o,c=i.bottom):(t=i.left,r=a,l=i.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function xX(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var _X={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let s,a,o,l;for(a=0;a<r;++a)s=e.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof jY&&(l={visible:e.isDatasetVisible(a),index:a,fill:hX(o,a,r),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,i.push(l);for(a=0;a<r;++a)l=i[a],l&&!1!==l.fill&&(l.fill=uX(i,a,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let a=i.length-1;a>=0;--a){const t=i[a].$filler;t&&(t.line.updateControlPoints(s,t.axis),r&&t.fill&&gX(e.ctx,t,s))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const t=r[i].$filler;cX(t)&&gX(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;cX(r)&&"beforeDatasetDraw"===n.drawTime&&gX(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const SX=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class kX extends MK{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Dq(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=bH(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=SX(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let u=e;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),o[f]={left:0,top:d,row:h,width:p,height:r},l[l.length-1]+=p+a}),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(i).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=TX(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,i,e,r);s>0&&d+g+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),o[s]={left:f,top:d,col:p,width:m,height:g},h=Math.max(h,m),d+=g+a}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=rG(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=AW(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,a=AW(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+r}else{let i=0,a=AW(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,a=AW(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=a,o.left+=this.left+r,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;nH(e,this),this._draw(),rH(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,a=YW.color,o=rG(e.rtl,this.left,this.width),l=bH(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=SX(s,u),g=this.isHorizontal(),v=this._computeTitleHeight();d=g?{x:AW(i,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:AW(i,this.top+v+c,this.bottom-t[0].height),line:0},iG(this.ctx,e.textDirection);const b=m+c;this.legendItems.forEach((y,w)=>{r.strokeStyle=y.fontColor,r.fillStyle=y.fontColor;const x=r.measureText(y.text).width,_=o.textAlign(y.textAlign||(y.textAlign=s.textAlign)),S=f+h+x;let k=d.x,T=d.y;o.setWidth(this.width),g?w>0&&k+S+c>this.right&&(T=d.y+=b,d.line++,k=d.x=AW(i,this.left+c,this.right-n[d.line])):w>0&&T+b>this.bottom&&(k=d.x=k+t[d.line].width+c,d.line++,T=d.y=AW(i,this.top+v+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=Pq(n.lineWidth,1);if(r.fillStyle=Pq(n.fillStyle,a),r.lineCap=Pq(n.lineCap,"butt"),r.lineDashOffset=Pq(n.lineDashOffset,0),r.lineJoin=Pq(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=Pq(n.strokeStyle,a),r.setLineDash(Pq(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,f/2);eH(r,a,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=gH(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?cH(r,{x:a,y:s,w:f,h:p,radius:l}):r.rect(a,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(k),T,y),k=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,k+f+h,g?k+S:this.right,e.rtl),function(e,t,n){lH(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(k),T,y),g)d.x+=S+c;else if("string"!==typeof y.text){const e=l.lineHeight;d.y+=TX(y,e)+c}else d.y+=b}),sG(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=bH(t.font),r=vH(t.padding);if(!t.display)return;const i=rG(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=AW(e.align,u,this.right-h);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+AW(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=AW(a,u,u+h);s.textAlign=i.textAlign(EW(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,lH(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=bH(e.font),n=vH(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(vW(e,this.left,this.right)&&vW(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],vW(e,r.left,r.left+r.width)&&vW(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&Dq(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&Dq(t.onHover,[e,n,this],this)}else n&&Dq(t.onClick,[e,n,this],this)}}function TX(e,t){return t*(e.text?e.text.length:0)}var EX={id:"legend",_element:kX,start(e,t,n){const r=e.legend=new kX({ctx:e.ctx,options:n,chart:e});bK.configure(e,r,n),bK.addBox(e,r)},stop(e){bK.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;bK.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=vH(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class AX extends MK{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=Aq(n.text)?n.text.length:1;this._padding=vH(n.padding);const i=r*bH(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=AW(a,n,i),c=t+e,o=i-n):("left"===s.position?(l=n+e,c=AW(a,r,t),u=-.5*Yq):(l=i-e,c=AW(a,t,r),u=.5*Yq),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=bH(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(r);lH(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:EW(t.align),textBaseline:"middle",translation:[i,s]})}}var NX={id:"title",_element:AX,start(e,t,n){!function(e,t){const n=new AX({ctx:e.ctx,options:t,chart:e});bK.configure(e,n,t),bK.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;bK.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;bK.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const IX=new WeakMap;var CX={id:"subtitle",start(e,t,n){const r=new AX({ctx:e.ctx,options:n,chart:e});bK.configure(e,r,n),bK.addBox(e,r),IX.set(e,r)},stop(e){bK.removeBox(e,IX.get(e)),IX.delete(e)},beforeUpdate(e,t,n){const r=IX.get(e);bK.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const PX={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;const a=[...r].reduce((e,t)=>e+t)/r.size;return{x:a,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=dW(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function LX(e,t){return t&&(Aq(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function DX(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function OX(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function RX(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=bH(t.bodyFont),c=bH(t.titleFont),u=bH(t.footerFont),h=s.length,d=i.length,f=r.length,p=vH(t.padding);let m=p.height,g=0,v=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),v){m+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let b=0;const y=function(e){g=Math.max(g,n.measureText(e).width+b)};return n.save(),n.font=c.string,Oq(e.title,y),n.font=l.string,Oq(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?a+2+t.boxPadding:0,Oq(r,e=>{Oq(e.before,y),Oq(e.lines,y),Oq(e.after,y)}),b=0,n.font=u.string,Oq(e.footer,y),n.restore(),g+=p.width,{width:g,height:m}}function MX(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=s/2?c="left":i>=a-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;return"left"===e&&i+s+a>t.width||"right"===e&&i-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function FX(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||MX(e,t,n,r),yAlign:r}}function jX(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=gH(a);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,d)+i:"right"===o&&(p+=Math.max(h,f)+i),{x:gW(p,0,r.width-t.width),y:gW(m,0,r.height-t.height)}}function BX(e,t,n){const r=vH(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function UX(e){return LX([],DX(e))}function zX(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const VX={beforeTitle:kq,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:kq,beforeBody:kq,beforeLabel:kq,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Eq(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:kq,afterBody:kq,beforeFooter:kq,footer:kq,afterFooter:kq};function qX(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?VX[t].call(n,r):i}class WX extends MK{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new wG(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,wH(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=qX(n,"beforeTitle",this,e),i=qX(n,"title",this,e),s=qX(n,"afterTitle",this,e);let a=[];return a=LX(a,DX(r)),a=LX(a,DX(i)),a=LX(a,DX(s)),a}getBeforeBody(e,t){return UX(qX(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return Oq(e,e=>{const t={before:[],lines:[],after:[]},i=zX(n,e);LX(t.before,DX(qX(i,"beforeLabel",this,e))),LX(t.lines,qX(i,"label",this,e)),LX(t.after,DX(qX(i,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return UX(qX(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=qX(n,"beforeFooter",this,e),i=qX(n,"footer",this,e),s=qX(n,"afterFooter",this,e);let a=[];return a=LX(a,DX(r)),a=LX(a,DX(i)),a=LX(a,DX(s)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(OX(this.chart,t[a]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),Oq(l,t=>{const n=zX(e.callbacks,t);r.push(qX(n,"labelColor",this,t)),i.push(qX(n,"labelPointStyle",this,t)),s.push(qX(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=PX[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=RX(this,n),a=Object.assign({},e,t),o=FX(this.chart,n,a),l=jX(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=gH(a),{x:h,y:d}=e,{width:f,height:p}=t;let m,g,v,b,y,w;return"center"===i?(y=d+p/2,"left"===r?(m=h,g=m-s,b=y+s,w=y-s):(m=h+f,g=m+s,b=y-s,w=y+s),v=m):(g="left"===r?h+Math.max(o,c)+s:"right"===r?h+f-Math.max(l,u)-s:this.caretX,"top"===i?(b=d,y=b-s,m=g-s,v=g+s):(b=d+p,y=b+s,m=g+s,v=g-s),w=b),{x1:m,x2:g,x3:v,y1:b,y2:y,y3:w}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,a,o;if(i){const l=rG(n.rtl,this.x,this.width);for(e.x=BX(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=bH(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=i,c=bH(i.bodyFont),u=BX(this,"left",i),h=r.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+d;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,ZW(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,ZW(e,t,n,c)}else{e.lineWidth=Nq(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),a=gH(s.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,cH(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),cH(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=bH(n.bodyFont);let h=u.lineHeight,d=0;const f=rG(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+i},m=f.textAlign(s);let g,v,b,y,w,x,_;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=BX(this,m,n),t.fillStyle=n.bodyColor,Oq(this.beforeBody,p),d=a&&"right"!==m?"center"===s?l/2+c:l+2+c:0,y=0,x=r.length;y<x;++y){for(g=r[y],v=this.labelTextColors[y],t.fillStyle=v,Oq(g.before,p),b=g.lines,a&&b.length&&(this._drawColorBox(t,e,y,f,n),h=Math.max(u.lineHeight,o)),w=0,_=b.length;w<_;++w)p(b[w]),h=u.lineHeight;Oq(g.after,p)}d=0,h=u.lineHeight,Oq(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,a;if(i){const o=rG(n.rtl,this.x,this.width);for(e.x=BX(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=bH(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=gH(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l-h,o),t.quadraticCurveTo(a+l,o,a+l,o+h),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+d,o+c),t.quadraticCurveTo(a,o+c,a,o+c-d),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=PX[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=RX(this,e),a=Object.assign({},n,this._size),o=FX(t,e,a),l=jX(e,a,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=vH(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),iG(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),sG(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),i=!Rq(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),a=this._positionChanged(s,e),o=t||!Rq(s,i)||a;return o&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=PX[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}(0,a.A)(WX,"positioners",PX);var HX={id:"tooltip",_element:WX,positioners:PX,afterInit(e,t,n){n&&(e.tooltip=new WX({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",l(l({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:VX},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},GX=Object.freeze({__proto__:null,Colors:tX,Decimation:iX,Filler:_X,Legend:EX,SubTitle:CX,Title:NX,Tooltip:HX});function KX(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function YX(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class XX extends GK{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Eq(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:gW(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:KX(n,e,Pq(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return YX.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function $X(e,t){const n=[],{bounds:r,step:i,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=i||1,f=c-1,{min:p,max:m}=t,g=!Eq(s),v=!Eq(a),b=!Eq(l),y=(m-p)/(u+1);let w,x,_,S,k=sW((m-p)/f/d)*d;if(k<1e-14&&!g&&!v)return[{value:p},{value:m}];S=Math.ceil(m/k)-Math.floor(p/k),S>f&&(k=sW(S*k/f/d)*d),Eq(o)||(w=Math.pow(10,o),k=Math.ceil(k*w)/w),"ticks"===r?(x=Math.floor(p/k)*k,_=Math.ceil(m/k)*k):(x=p,_=m),g&&v&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/i,k/1e3)?(S=Math.round(Math.min((a-s)/k,c)),k=(a-s)/S,x=s,_=a):b?(x=g?s:x,_=v?a:_,S=l-1,k=(_-x)/S):(S=(_-x)/k,S=iW(S,Math.round(S),k/1e3)?Math.round(S):Math.ceil(S));const T=Math.max(uW(k),uW(x));w=Math.pow(10,Eq(o)?T:o),x=Math.round(x*w)/w,_=Math.round(_*w)/w;let E=0;for(g&&(h&&x!==s?(n.push({value:s}),x<s&&E++,iW(Math.round((x+E*k)*w)/w,s,JX(s,y,e))&&E++):x<s&&E++);E<S;++E){const e=Math.round((x+E*k)*w)/w;if(v&&e>a)break;n.push({value:e})}return v&&h&&_!==a?n.length&&iW(n[n.length-1].value,a,JX(a,y,e))?n[n.length-1].value=a:n.push({value:a}):v&&_!==a||n.push({value:_}),n}function JX(e,t,n){let{horizontal:r,minRotation:i}=n;const s=lW(i),a=(r?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,a.A)(XX,"id","category"),(0,a.A)(XX,"defaults",{ticks:{callback:YX}});class QX extends GK{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Eq(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,a=e=>i=n?i:e;if(e){const e=rW(r),t=rW(i);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);a(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=$X({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&oW(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return UW(e,this.chart.options.locale,this.options.ticks.format)}}class ZX extends QX{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Iq(e)?e:0,this.max=Iq(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=lW(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,a.A)(ZX,"id","linear"),(0,a.A)(ZX,"defaults",{ticks:{callback:VW.formatters.numeric}});const e$=e=>Math.floor(nW(e)),t$=(e,t)=>Math.pow(10,e$(e)+t);function n$(e){return 1===e/Math.pow(10,e$(e))}function r$(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function i$(e,t){let{min:n,max:r}=t;n=Cq(e.min,n);const i=[],s=e$(n);let a=function(e,t){let n=e$(t-e);for(;r$(e,t,n)>10;)n++;for(;r$(e,t,n)<10;)n--;return Math.min(n,e$(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=Cq(e.min,Math.round((c+h+d*Math.pow(10,a))*o)/o);for(;f<r;)i.push({value:f,major:n$(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+h+d*Math.pow(10,a))*o)/o;const p=Cq(e.max,f);return i.push({value:p,major:n$(p),significand:d}),i}class s$ extends GK{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=QX.prototype.parse.apply(this,[e,t]);if(0!==n)return Iq(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Iq(e)?Math.max(0,e):null,this.max=Iq(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Iq(this._userMin)&&(this.min=e===t$(this.min,0)?t$(this.min,-1):t$(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(t$(n,-1)),s(t$(r,1)))),n<=0&&i(t$(r,-1)),r<=0&&s(t$(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=i$({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&oW(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":UW(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=nW(e),this._valueRange=nW(this.max)-nW(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(nW(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function a$(e){const t=e.ticks;if(t.display&&e.display){const e=vH(t.backdropPadding);return Pq(t.font&&t.font.size,YW.font.size)+e.height}return 0}function o$(e,t,n){return n=Aq(n)?n:[n],{w:$W(e,t.string,n),h:n.length*t.lineHeight}}function l$(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function c$(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Yq/s:0;for(let l=0;l<s;l++){const s=a.setContext(e.getPointLabelContext(l));i[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],o),u=bH(s.font),h=o$(e.ctx,u,e._pointLabels[l]);r[l]=h;const d=pW(e.getIndexAngle(l)+o),f=Math.round(cW(d));u$(n,t,d,l$(f,c.x,h.w,0,180),l$(f,c.y,h.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:a$(s)/2,additionalAngle:a?Yq/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=h$(e,u,l);r.push(i),"auto"===o&&(i.visible=d$(i,c),i.visible&&(c=i))}return r}(e,r,i)}function u$(e,t,n,r,i){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/a,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function h$(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,r+i+a,s),c=Math.round(cW(pW(l.angle+Zq))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+o.w,bottom:u+o.h}}function d$(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(tH({x:n,y:r},t)||tH({x:n,y:s},t)||tH({x:i,y:r},t)||tH({x:i,y:s},t))}function f$(e,t,n){const{left:r,top:i,right:s,bottom:a}=n,{backdropColor:o}=t;if(!Eq(o)){const n=gH(t.borderRadius),l=vH(t.backdropPadding);e.fillStyle=o;const c=r-l.left,u=i-l.top,h=s-r+l.width,d=a-i+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),cH(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function p$(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,Xq);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}(0,a.A)(s$,"id","logarithmic"),(0,a.A)(s$,"defaults",{ticks:{callback:VW.formatters.logarithmic,major:{enabled:!0}}});class m$ extends QX{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=vH(a$(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Iq(e)&&!isNaN(e)?e:0,this.max=Iq(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/a$(this.options))}generateTickLabels(e){QX.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=Dq(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?c$(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return pW(e*(Xq/(this._pointLabels.length||1))+lW(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Eq(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Eq(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return wH(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-Zq+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),p$(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));f$(n,s,t);const a=bH(s.font),{x:o,y:l,textAlign:c}=t;lH(n,e._pointLabels[i],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),p$(e,n,a,r),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}}),n.display){for(e.save(),a=s-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=bH(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=vH(o.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}lH(e,r.label,0,-i,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,a.A)(m$,"id","radialLinear"),(0,a.A)(m$,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:VW.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,a.A)(m$,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,a.A)(m$,"descriptors",{angleLines:{_fallback:"grid"}});const g$={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},v$=Object.keys(g$);function b$(e,t){return e-t}function y$(e,t){if(Eq(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),Iq(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!aW(s)&&!0!==s?n.startOf(a,i):n.startOf(a,"isoWeek",s)),+a)}function w$(e,t,n,r){const i=v$.length;for(let s=v$.indexOf(e);s<i-1;++s){const e=g$[v$[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return v$[s]}return v$[i-1]}function x$(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=bW(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function _$(e,t,n){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class S$ extends GK{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new QG(e.adapters.date);r.init(t),Uq(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:y$(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(i=Math.max(i,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=Iq(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=Iq(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?w$(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=v$.length-1;s>=v$.indexOf(n);s--){const n=v$[s];if(g$[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return v$[n?v$.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=v$.indexOf(e)+1,n=v$.length;t<n;++t)if(g$[v$[t]].common)return v$[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),_$(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=gW(r,0,s),i=gW(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||w$(i.minUnit,t,n,this._getLabelCapacity(t)),a=Pq(r.ticks.stepSize,1),o="week"===s&&i.isoWeekday,l=aW(o)||!0===o,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",o)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,a,s),h++)x$(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||x$(c,u,f),Object.keys(c).sort(b$).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return Dq(s,[e,t,n],this);const a=i.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,r||(d?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=lW(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*s,h:n*s+a*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,_$(this,[e],this._majorUnit),r),s=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(y$(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return SW(e.sort(b$))}}function k$(e,t,n){let r,i,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=yW(e,"pos",t)),({pos:r,time:s}=e[o]),({pos:i,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=yW(e,"time",t)),({time:r,pos:s}=e[o]),({time:i,pos:a}=e[l]));const c=i-r;return c?s+(a-s)*(t-r)/c:s}(0,a.A)(S$,"id","time"),(0,a.A)(S$,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class T$ extends S${constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=k$(t,this.min),this._tableRange=k$(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=r.length;s<a;++s)c=r[s+1],o=r[s-1],l=r[s],Math.round((c+o)/2)!==l&&i.push({time:l,pos:s/(a-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(k$(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return k$(this._table,n*this._tableRange+this._minPos,!0)}}(0,a.A)(T$,"id","timeseries"),(0,a.A)(T$,"defaults",S$.defaults);const E$=[XG,YY,GX,Object.freeze({__proto__:null,CategoryScale:XX,LinearScale:ZX,LogarithmicScale:s$,RadialLinearScale:m$,TimeScale:S$,TimeSeriesScale:T$})];SY.register(...E$);const A$=SY,N$=e=>{var t,n;let{transacciones:r,temaActual:s,tasaCambio:a}=e;const[o,l]=(0,i.useState)("gastos"),[c,u]=(0,i.useState)("mes"),h=(0,i.useRef)(null),d=(0,i.useRef)(null),f=new Date,p=new Date(f);p.setDate(f.getDate()-f.getDay());const m=new Date(f.getFullYear(),f.getMonth(),1),g=new Date(f.getFullYear(),0,1),v=(0,i.useMemo)(()=>{let e;switch(c){case"dia":e=new Date(f.setHours(0,0,0,0));break;case"semana":e=p;break;case"mes":e=m;break;case"a\xf1o":e=g;break;default:e=new Date(0)}return r.filter(t=>new Date(t.fecha)>=e)},[r,c]),b=(0,i.useMemo)(()=>"gastos"===o?v.filter(e=>"Gasto"===e.tipo):"compras"===o?v.filter(e=>"Compra"===e.tipo):v,[v,o]),y=(0,i.useMemo)(()=>{const e={total:0,promedio:0,maximo:{monto:0,transaccion:null},minimo:{monto:1/0,transaccion:null},cantidad:b.length};return b.forEach(t=>{const n=Math.abs(parseFloat(t.monto)||0);e.total+=n,n>e.maximo.monto&&(e.maximo={monto:n,transaccion:t}),n<e.minimo.monto&&n>0&&(e.minimo={monto:n,transaccion:t})}),e.promedio=e.cantidad>0?e.total/e.cantidad:0,e.minimo.monto===1/0&&(e.minimo.monto=0),e},[b]),w=(0,i.useMemo)(()=>{const e={};return b.forEach(t=>{const n=t.categoria||"Sin categor\xeda";e[n]||(e[n]={nombre:n,total:0,cantidad:0,promedio:0});const r=Math.abs(parseFloat(t.monto)||0);e[n].total+=r,e[n].cantidad++}),Object.values(e).forEach(e=>{e.promedio=e.cantidad>0?e.total/e.cantidad:0}),Object.values(e).sort((e,t)=>t.total-e.total)},[b]),x=(0,i.useMemo)(()=>[...b].sort((e,t)=>Math.abs(t.monto)-Math.abs(e.monto)).slice(0,5),[b]),_=(0,i.useMemo)(()=>{const e={0:{nombre:"Domingo",total:0,cantidad:0},1:{nombre:"Lunes",total:0,cantidad:0},2:{nombre:"Martes",total:0,cantidad:0},3:{nombre:"Mi\xe9rcoles",total:0,cantidad:0},4:{nombre:"Jueves",total:0,cantidad:0},5:{nombre:"Viernes",total:0,cantidad:0},6:{nombre:"S\xe1bado",total:0,cantidad:0}};return b.forEach(t=>{const n=new Date(t.fecha).getDay(),r=Math.abs(parseFloat(t.monto)||0);e[n].total+=r,e[n].cantidad++}),Object.values(e)},[b]),S=(0,i.useMemo)(()=>{const e={},t=new Date;for(let n=11;n>=0;n--){const r=new Date(t.getFullYear(),t.getMonth()-n,1),i="".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"));e[i]={nombre:r.toLocaleDateString("es",{month:"short",year:"numeric"}),total:0,cantidad:0}}return r.filter(e=>e.tipo===o.slice(0,-1).charAt(0).toUpperCase()+o.slice(1,-1)||"Gasto"===e.tipo||"Compra"===e.tipo).forEach(t=>{const n=new Date(t.fecha),r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"));if(e[r]){const n=Math.abs(parseFloat(t.monto)||0);e[r].total+=n,e[r].cantidad++}}),Object.values(e)},[r,o]);return(0,i.useEffect)(()=>{if(!h.current)return;d.current&&d.current.destroy();const e=h.current.getContext("2d");return d.current=new A$(e,{type:"bar",data:{labels:w.slice(0,10).map(e=>e.nombre),datasets:[{label:"".concat(o.charAt(0).toUpperCase()+o.slice(1)," por Categor\xeda"),data:w.slice(0,10).map(e=>e.total),backgroundColor:["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#ec4899","#14b8a6","#f97316","#a855f7"],borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{color:"#ffffff",font:{size:14}}},tooltip:{callbacks:{label:function(e){return"$".concat(e.parsed.y.toFixed(2))}}}},scales:{y:{beginAtZero:!0,ticks:{color:"#ffffff",callback:function(e){return"$"+e.toFixed(0)}},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}}}),()=>{d.current&&d.current.destroy()}},[w,o]),(0,e_.jsxs)("div",{className:"space-y-6",children:[(0,e_.jsx)("div",{className:"".concat(s.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:(0,e_.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\ud83d\udcca An\xe1lisis y Estad\xedsticas"}),(0,e_.jsx)("p",{className:"text-sm opacity-75",children:"Visualiza tus datos financieros"})]}),(0,e_.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,e_.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"bg-slate-700 text-white rounded-lg px-4 py-2 font-semibold",children:[(0,e_.jsx)("option",{value:"gastos",children:"\ud83d\udcb0 Gastos"}),(0,e_.jsx)("option",{value:"compras",children:"\ud83d\uded2 Compras"}),(0,e_.jsx)("option",{value:"general",children:"\ud83d\udcc8 General"})]}),(0,e_.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"bg-slate-700 text-white rounded-lg px-4 py-2 font-semibold",children:[(0,e_.jsx)("option",{value:"dia",children:"\ud83d\udcc5 Hoy"}),(0,e_.jsx)("option",{value:"semana",children:"\ud83d\udcc6 Esta Semana"}),(0,e_.jsx)("option",{value:"mes",children:"\ud83d\uddd3\ufe0f Este Mes"}),(0,e_.jsx)("option",{value:"a\xf1o",children:"\ud83d\udcca Este A\xf1o"})]})]})]})}),(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl p-6 text-white",children:[(0,e_.jsxs)("p",{className:"text-sm mb-2",children:["Total ",o]}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",y.total.toFixed(2)]}),(0,e_.jsxs)("p",{className:"text-xs mt-2 opacity-75",children:[y.cantidad," transacciones"]})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"Promedio"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",y.promedio.toFixed(2)]}),(0,e_.jsx)("p",{className:"text-xs mt-2 opacity-75",children:"Por transacci\xf3n"})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"M\xe1ximo"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",y.maximo.monto.toFixed(2)]}),(0,e_.jsx)("p",{className:"text-xs mt-2 opacity-75 truncate",children:(null===(t=y.maximo.transaccion)||void 0===t?void 0:t.descripcion)||"N/A"})]}),(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl p-6 text-white",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:"M\xednimo"}),(0,e_.jsxs)("p",{className:"text-3xl font-bold",children:["$",y.minimo.monto.toFixed(2)]}),(0,e_.jsx)("p",{className:"text-xs mt-2 opacity-75 truncate",children:(null===(n=y.minimo.transaccion)||void 0===n?void 0:n.descripcion)||"N/A"})]})]}),(0,e_.jsxs)("div",{className:"".concat(s.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsxs)("h3",{className:"text-xl font-bold mb-4",children:["Top 10 Categor\xedas - ",o.charAt(0).toUpperCase()+o.slice(1)]}),(0,e_.jsx)("div",{className:"h-96",children:(0,e_.jsx)("canvas",{ref:h})})]}),(0,e_.jsxs)("div",{className:"".concat(s.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsxs)("h3",{className:"text-xl font-bold mb-4",children:["\ud83c\udfc6 Top 5 ",o," m\xe1s grandes del periodo"]}),(0,e_.jsxs)("div",{className:"space-y-3",children:[x.map((e,t)=>(0,e_.jsxs)("div",{className:"flex items-center justify-between bg-slate-700/50 rounded-lg p-4",children:[(0,e_.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e_.jsxs)("div",{className:"text-2xl font-bold ".concat(0===t?"text-yellow-400":1===t?"text-gray-400":2===t?"text-orange-600":"text-white"),children:["#",t+1]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("p",{className:"font-semibold",children:e.descripcion}),(0,e_.jsxs)("p",{className:"text-sm opacity-75",children:[e.fecha," - ",e.categoria]}),e.cliente&&(0,e_.jsxs)("p",{className:"text-xs opacity-60",children:["Cliente: ",e.cliente]})]})]}),(0,e_.jsxs)("div",{className:"text-right",children:[(0,e_.jsxs)("p",{className:"text-2xl font-bold text-red-400",children:["$",Math.abs(e.monto).toFixed(2)]}),(0,e_.jsx)("p",{className:"text-xs opacity-75",children:e.moneda})]})]},e.id)),0===x.length&&(0,e_.jsx)("p",{className:"text-center py-8 opacity-75",children:"No hay transacciones en este periodo"})]})]}),(0,e_.jsxs)("div",{className:"".concat(s.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\ud83d\udcca An\xe1lisis Detallado por Categor\xeda"}),(0,e_.jsx)("div",{className:"overflow-x-auto",children:(0,e_.jsxs)("table",{className:"w-full",children:[(0,e_.jsx)("thead",{children:(0,e_.jsxs)("tr",{className:"border-b border-white/20",children:[(0,e_.jsx)("th",{className:"text-left p-3",children:"Categor\xeda"}),(0,e_.jsx)("th",{className:"text-center p-3",children:"Cantidad"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Total"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"Promedio"}),(0,e_.jsx)("th",{className:"text-right p-3",children:"% del Total"})]})}),(0,e_.jsx)("tbody",{children:w.map((e,t)=>(0,e_.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[(0,e_.jsx)("td",{className:"p-3",children:(0,e_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e_.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#ec4899","#14b8a6","#f97316","#a855f7"][t%10]}}),(0,e_.jsx)("span",{className:"font-semibold",children:e.nombre})]})}),(0,e_.jsx)("td",{className:"p-3 text-center",children:e.cantidad}),(0,e_.jsxs)("td",{className:"p-3 text-right font-bold",children:["$",e.total.toFixed(2)]}),(0,e_.jsxs)("td",{className:"p-3 text-right",children:["$",e.promedio.toFixed(2)]}),(0,e_.jsx)("td",{className:"p-3 text-right",children:(0,e_.jsxs)("span",{className:"text-blue-400 font-semibold",children:[(e.total/y.total*100).toFixed(1),"%"]})})]},e.nombre))})]})})]}),(0,e_.jsxs)("div",{className:"".concat(s.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\ud83d\udcc5 An\xe1lisis por D\xeda de la Semana"}),(0,e_.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:_.map((e,t)=>(0,e_.jsxs)("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-xl p-4 text-white text-center",children:[(0,e_.jsx)("p",{className:"text-sm mb-2",children:e.nombre}),(0,e_.jsxs)("p",{className:"text-xl font-bold",children:["$",e.total.toFixed(0)]}),(0,e_.jsxs)("p",{className:"text-xs mt-2 opacity-75",children:[e.cantidad," trans."]})]},t))})]}),(0,e_.jsxs)("div",{className:"".concat(s.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\ud83d\udcc8 Tendencia - \xdaltimos 12 Meses"}),(0,e_.jsx)("div",{className:"overflow-x-auto",children:(0,e_.jsx)("div",{className:"flex gap-2 min-w-max",children:S.map((e,t)=>{const n=Math.max(...S.map(e=>e.total)),r=e.total>0?e.total/n*200:10;return(0,e_.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1 min-w-[80px]",children:[(0,e_.jsxs)("div",{className:"text-sm font-semibold",children:["$",e.total.toFixed(0)]}),(0,e_.jsx)("div",{className:"w-full bg-gradient-to-t from-blue-500 to-blue-300 rounded-t-lg transition-all hover:from-blue-600 hover:to-blue-400",style:{height:"".concat(r,"px"),minHeight:"10px"}}),(0,e_.jsx)("div",{className:"text-xs opacity-75 text-center",children:e.nombre}),(0,e_.jsx)("div",{className:"text-xs opacity-50",children:e.cantidad})]},t)})})})]}),(0,e_.jsxs)("div",{className:"".concat(s.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\ud83d\udca1 Insights"}),(0,e_.jsxs)("div",{className:"space-y-3",children:[w.length>0&&(0,e_.jsxs)("div",{className:"bg-blue-500/20 border border-blue-500 rounded-lg p-4",children:[(0,e_.jsxs)("p",{className:"font-semibold text-blue-300",children:["Categor\xeda con m\xe1s ",o,":"]}),(0,e_.jsxs)("p",{className:"text-lg mt-1",children:[(0,e_.jsx)("span",{className:"font-bold",children:w[0].nombre})," con $",w[0].total.toFixed(2),"(",w[0].cantidad," transacciones)"]})]}),_.length>0&&(0,e_.jsxs)("div",{className:"bg-purple-500/20 border border-purple-500 rounded-lg p-4",children:[(0,e_.jsx)("p",{className:"font-semibold text-purple-300",children:"D\xeda con m\xe1s actividad:"}),(0,e_.jsxs)("p",{className:"text-lg mt-1",children:[(0,e_.jsx)("span",{className:"font-bold",children:[..._].sort((e,t)=>t.total-e.total)[0].nombre})," con $",[..._].sort((e,t)=>t.total-e.total)[0].total.toFixed(2)]})]}),y.cantidad>0&&(0,e_.jsxs)("div",{className:"bg-green-500/20 border border-green-500 rounded-lg p-4",children:[(0,e_.jsxs)("p",{className:"font-semibold text-green-300",children:["Frecuencia de ",o,":"]}),(0,e_.jsxs)("p",{className:"text-lg mt-1",children:["Promedio de ",(0,e_.jsx)("span",{className:"font-bold",children:(y.cantidad/("mes"===c?30:"semana"===c?7:1)).toFixed(1)})," ",o," por d\xeda"]})]})]})]})]})},I$=e=>{let{transacciones:t,temaActual:n}=e;const r=[...t].sort((e,t)=>{const n=new Date(e.fecha);return new Date(t.fecha)-n});return(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\ud83d\udcc5 Vista de Calendario"}),(0,e_.jsx)("p",{className:"text-sm opacity-75 mb-4",children:"Mostrando las \xfaltimas 20 transacciones (m\xe1s recientes primero)"}),(0,e_.jsx)("div",{className:"space-y-4",children:r.slice(0,20).map(e=>(0,e_.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-slate-700/50 rounded-lg hover:bg-slate-700/70 transition-colors",children:[(0,e_.jsxs)("div",{className:"text-center min-w-[60px]",children:[(0,e_.jsx)("div",{className:"text-2xl font-bold",children:new Date(e.fecha).getDate()}),(0,e_.jsx)("div",{className:"text-xs uppercase",children:new Date(e.fecha).toLocaleDateString("es",{month:"short"})}),(0,e_.jsx)("div",{className:"text-xs opacity-50",children:new Date(e.fecha).getFullYear()})]}),(0,e_.jsxs)("div",{className:"flex-1",children:[(0,e_.jsx)("p",{className:"font-semibold",children:e.descripcion}),(0,e_.jsx)("p",{className:"text-sm opacity-75",children:e.categoria})]}),(0,e_.jsxs)("div",{className:"text-xl font-bold ".concat("Ingreso"===e.tipo||"Venta"===e.tipo?"text-green-400":"text-red-400"),children:["Ingreso"===e.tipo||"Venta"===e.tipo?"+":"-",Math.abs(e.monto).toFixed(2)," ",e.moneda]})]},e.id))})]})},C$=e=>{let{usuario:t,temaActual:n,tasaCambio:r,setTasaCambio:i,tasaVenta:s,setTasaVenta:a}=e;return(0,e_.jsxs)("div",{className:"".concat(n.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\ud83d\udcb1 Mis Configuraciones de Tasas"}),(0,e_.jsxs)("div",{className:"space-y-6",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Tasas de Cambio General"}),(0,e_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2",children:"USD a BS"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:r.usdToBs,onChange:e=>i(l(l({},r),{},{usdToBs:parseFloat(e.target.value)})),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2"})]}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2",children:"USDT a USD"}),(0,e_.jsx)("input",{type:"number",step:"0.0001",value:r.usdtToUsd,onChange:e=>i(l(l({},r),{},{usdtToUsd:parseFloat(e.target.value)})),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2"})]})]})]}),(0,e_.jsxs)("div",{className:"bg-green-500/20 border border-green-500 rounded-lg p-4",children:[(0,e_.jsx)("h3",{className:"text-lg font-bold mb-3 text-green-400",children:"Tasa de Venta (Para C\xe1lculo de Ganancias y Gastos)"}),(0,e_.jsxs)("div",{children:[(0,e_.jsx)("label",{className:"block text-sm mb-2",children:"Precio de Venta por D\xf3lar (en Bs)"}),(0,e_.jsx)("input",{type:"number",step:"0.01",value:s,onChange:e=>a(parseFloat(e.target.value)),className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2",placeholder:"37.00"}),(0,e_.jsx)("p",{className:"text-xs text-green-300 mt-2",children:"Esta tasa se usa para calcular las ganancias en las compras de divisas y para convertir los gastos a d\xf3lares"})]})]}),(0,e_.jsx)("div",{className:"bg-blue-500/20 border border-blue-500 rounded-lg p-4",children:(0,e_.jsxs)("p",{className:"text-sm text-blue-200",children:["\ud83d\udcdd ",(0,e_.jsx)("strong",{children:"Nota:"})," Estas configuraciones son personales y no afectan a otros usuarios del sistema."]})})]}),(0,e_.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,e_.jsx)("button",{onClick:async()=>{try{await(async(e,t)=>await Fx.collection("usuarios").doc(e.uid).collection("configuracion").doc("tasaCambio").set(t))(t,r),alert("Tasas actualizadas correctamente")}catch(O$){alert("Error: "+O$.message)}},className:"flex-1 ".concat(n.boton," text-white px-6 py-3 rounded-lg font-semibold"),children:"Guardar Tasas de Cambio"}),(0,e_.jsx)("button",{onClick:async()=>{try{await(async(e,t)=>await Fx.collection("usuarios").doc(e.uid).collection("configuracion").doc("tasaVenta").set({valor:t}))(t,s),alert("Tasa de venta actualizada correctamente")}catch(O$){alert("Error: "+O$.message)}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold",children:"Guardar Tasa de Venta"})]})]})},P$=e=>{let{temaActual:t,tema:n,setTema:r}=e;return(0,e_.jsxs)("div",{className:"".concat(t.tarjeta," backdrop-blur-lg rounded-2xl p-6"),children:[(0,e_.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\ud83c\udfa8 Seleccionar Tema"}),(0,e_.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(Zx).map(e=>{let[t,i]=e;return(0,e_.jsx)("button",{onClick:()=>r(t),className:"p-6 rounded-2xl border-4 ".concat(n===t?"border-white":"border-transparent"," bg-gradient-to-br ").concat(i.primario),children:(0,e_.jsx)("p",{className:"text-white font-bold",children:i.nombre})},t)})})]})};const L$=function(){const{usuario:e,cargando:t}=Vx(),{transacciones:n,obtenerMesesDisponibles:r,obtenerCompras:s,obtenerClientesUnicos:a,obtenerOperadoresUnicos:o}=Wx(e),{tasaVenta:l,setTasaVenta:c,tasaCambio:u,setTasaCambio:h}=Qx(e),{filtroMes:d,setFiltroMes:f,filtrosPorCobrar:p,setFiltrosPorCobrar:m,obtenerTransaccionesFiltradas:g,obtenerComprasFiltradas:v,limpiarFiltrosPorCobrar:b}=(()=>{const[e,t]=(0,i.useState)("todos"),[n,r]=(0,i.useState)({cliente:"todos",status:"Por Cobrar",fechaInicio:"",fechaFin:"",operador:"todos"});return{filtroMes:e,setFiltroMes:t,filtrosPorCobrar:n,setFiltrosPorCobrar:r,obtenerTransaccionesFiltradas:t=>{let n=t;if("todos"!==e){const[r,i]=e.split("-");n=t.filter(e=>{const[t,n]=e.fecha.split("-");return t===r&&n===i})}return n.sort((e,t)=>{const n=new Date(e.fecha);return new Date(t.fecha)-n})},obtenerComprasFiltradas:e=>{let t=e;return"todos"!==n.cliente&&(t=t.filter(e=>e.cliente===n.cliente)),"todos"!==n.status&&(t=t.filter(e=>e.status===n.status)),"todos"!==n.operador&&(t=t.filter(e=>e.operador===n.operador)),n.fechaInicio&&(t=t.filter(e=>e.fecha>=n.fechaInicio)),n.fechaFin&&(t=t.filter(e=>e.fecha<=n.fechaFin)),t.sort((e,t)=>{const n=new Date(e.fecha);return new Date(t.fecha)-n})},limpiarFiltrosPorCobrar:()=>{r({cliente:"todos",status:"Por Cobrar",fechaInicio:"",fechaFin:"",operador:"todos"})}}})(),[y,w]=(0,i.useState)(!1),[x,_]=(0,i.useState)("dashboard"),[S,k]=(0,i.useState)("oscuro"),T=Zx[S],E=g(n),A=(e=>{let t=0,n=0,r=0;return e.filter(e=>!e.importado).forEach(e=>{const i=parseFloat(e.monto)||0,s=parseFloat(e.total)||0;if("Venta"===e.tipo){const t=parseFloat(e.montoUSDT)||i,s=parseFloat(e.montoBs)||0;n-=t,r+=s}else if("Gasto"===e.tipo)"USD"===e.moneda?t-=Math.abs(i):"USDT"===e.moneda?n-=Math.abs(i):"Bs"===e.moneda&&(r-=Math.abs(s||i));else if("Compra"===e.tipo){const n=parseFloat(e.compraBs)||0;r-=n,t+=i}else"Ingreso"===e.tipo&&("USD"===e.moneda?t+=i:"USDT"===e.moneda?n+=i:"BS"!==e.moneda&&"Bs"!==e.moneda||(r+=i))}),{usd:t,usdt:n,bs:r}})(n),N=r(),I=s(),C=v(I),P=a(),L=o();return t?(0,e_.jsx)(n_,{temaActual:T}):e?(0,e_.jsx)("div",{className:"min-h-screen bg-gradient-to-br ".concat(T.primario," ").concat(T.texto," p-4"),children:(0,e_.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,e_.jsx)(SV,{usuario:e,balance:A,temaActual:T,setMostrarForm:w,transacciones:n}),(0,e_.jsx)(kV,{vista:x,setVista:_,temaActual:T}),y&&(0,e_.jsx)(LV,{usuario:e,tasaVenta:l,setMostrarForm:w}),"dashboard"===x&&(0,e_.jsx)(DV,{transacciones:E,balance:A,temaActual:T,filtroMes:d,setFiltroMes:f,mesesDisponibles:N,tasaCambio:u}),"transacciones"===x&&(0,e_.jsx)(OV,{transacciones:E,temaActual:T}),"porCobrar"===x&&(0,e_.jsx)(BV,{comprasFiltradas:C,temaActual:T,filtrosPorCobrar:p,setFiltrosPorCobrar:m,clientesUnicos:P,operadoresUnicos:L,limpiarFiltros:b,usuario:e,compras:I}),"ventas"===x&&(0,e_.jsx)(zV,{transacciones:n,temaActual:T,usuario:e}),"gastos"===x&&(0,e_.jsx)(qV,{transacciones:n,temaActual:T,usuario:e,tasaVenta:l}),"cambios"===x&&(0,e_.jsx)(WV,{usuario:e,temaActual:T,transacciones:n}),"graficos"===x&&(0,e_.jsx)(N$,{transacciones:E,temaActual:T,tasaCambio:u}),"calendario"===x&&(0,e_.jsx)(I$,{transacciones:E,temaActual:T}),"tasas"===x&&(0,e_.jsx)(C$,{usuario:e,temaActual:T,tasaCambio:u,setTasaCambio:h,tasaVenta:l,setTasaVenta:c}),"temas"===x&&(0,e_.jsx)(P$,{temaActual:T,tema:S,setTema:k})]})}):(0,e_.jsx)(t_,{temaActual:T})};s.createRoot(document.getElementById("root")).render((0,e_.jsx)(i.StrictMode,{children:(0,e_.jsx)(L$,{})}))})();
//# sourceMappingURL=main.22bad72d.js.map